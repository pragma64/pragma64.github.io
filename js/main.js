var shadow$provide = {};
(function(){
shadow$provide[0]=function(Xc,Ec,ld,x){function wa(){const a=4294967295*Math.random()|0,b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(bd[a&255]+bd[a>>8&255]+bd[a>>16&255]+bd[a>>24&255]+"-"+bd[b&255]+bd[b>>8&255]+"-"+bd[b>>16&15|64]+bd[b>>24&255]+"-"+bd[c&63|128]+bd[c>>8&255]+"-"+bd[c>>16&255]+bd[c>>24&255]+bd[e&255]+bd[e>>8&255]+bd[e>>16&255]+bd[e>>24&255]).toLowerCase()}function Gb(a,b,c){return Math.max(b,Math.min(c,a))}function Nb(a,b){return(a%b+
b)%b}function Xb(a,b,c){return(1-c)*a+c*b}function kc(a){return 0===(a&a-1)&&0!==a}function xc(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function hb(a,b){switch(b.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw Error("Invalid component type.");}}function rb(a,
b){switch(b.constructor){case Float32Array:return a;case Uint32Array:return Math.round(4294967295*a);case Uint16Array:return Math.round(65535*a);case Uint8Array:return Math.round(255*a);case Int32Array:return Math.round(2147483647*a);case Int16Array:return Math.round(32767*a);case Int8Array:return Math.round(127*a);default:throw Error("Invalid component type.");}}function Ic(a){for(let b=a.length-1;0<=b;--b)if(65535<=a[b])return!0;return!1}function fc(a){return document.createElementNS("http://www.w3.org/1999/xhtml",
a)}function ia(){const a=fc("canvas");a.style.display="block";return a}function sb(a){a in $i||($i[a]=!0,console.warn(a))}function ab(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}function ya(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}function Y(a){if("undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap)return aj.getDataURL(a);
if(a.data)return{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function ca(a,b,c,e,g){for(let h=0,l=a.length-3;h<=l;h+=3){If.fromArray(a,h);const n=g.x*Math.abs(If.x)+g.y*Math.abs(If.y)+g.z*Math.abs(If.z),m=b.dot(If),q=c.dot(If),u=e.dot(If);if(Math.max(-Math.max(m,q,u),Math.min(m,q,u))>n)return!1}return!0}function na(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+6*(b-a)*
(2/3-c):a}function aa(a){65504<Math.abs(a)&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");a=Gb(a,-65504,65504);Ae.floatView[0]=a;a=Ae.uint32View[0];const b=a>>23&511;return Ae.baseTable[b]+((a&8388607)>>Ae.shiftTable[b])}function da(a){const b=a>>10;Ae.uint32View[0]=Ae.mantissaTable[Ae.offsetTable[b]+(a&1023)]+Ae.exponentTable[b];return Ae.floatView[0]}function va(a,b,c,e,g,h,l,n,m,q){a.getVertexPosition(n,cf);a.getVertexPosition(m,df);a.getVertexPosition(q,sg);null===(1===b.side?
e.intersectTriangle(sg,df,cf,!0,Jf):e.intersectTriangle(cf,df,sg,0===b.side,Jf))?a=null:(tg.copy(Jf),tg.applyMatrix4(a.matrixWorld),b=c.ray.origin.distanceTo(tg),a=b<c.near||b>c.far?null:{distance:b,point:tg.clone(),object:a});a&&(g&&(bh.fromBufferAttribute(g,n),Ne.fromBufferAttribute(g,m),ch.fromBufferAttribute(g,q),a.uv=Zd.getInterpolation(Jf,cf,df,sg,bh,Ne,ch,new Fa)),h&&(bh.fromBufferAttribute(h,n),Ne.fromBufferAttribute(h,m),ch.fromBufferAttribute(h,q),a.uv1=Zd.getInterpolation(Jf,cf,df,sg,bh,
Ne,ch,new Fa)),l&&(Kf.fromBufferAttribute(l,n),rk.fromBufferAttribute(l,m),sk.fromBufferAttribute(l,q),a.normal=Zd.getInterpolation(Jf,cf,df,sg,Kf,rk,sk,new O),0<a.normal.dot(e.direction)&&a.normal.multiplyScalar(-1)),e={a:n,b:m,c:q,normal:new O,materialIndex:0},Zd.getNormal(cf,df,sg,e.normal),a.face=e);return a}function Ka(a){const b={};for(const c in a){b[c]={};for(const e in a[c]){const g=a[c][e];g&&(g.isColor||g.isMatrix3||g.isMatrix4||g.isVector2||g.isVector3||g.isVector4||g.isTexture||g.isQuaternion)?
g.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),b[c][e]=null):b[c][e]=g.clone():Array.isArray(g)?b[c][e]=g.slice():b[c][e]=g}}return b}function Oa(a){const b={};for(let c=0;c<a.length;c++){const e=Ka(a[c]);for(const g in e)b[g]=e[g]}return b}function Na(a){return null===a.getRenderTarget()?a.outputColorSpace:lc.workingColorSpace}function bb(){function a(h,l){e(h,l);g=b.requestAnimationFrame(a)}let b=null,c=
!1,e=null,g=null;return{start:function(){!0!==c&&null!==e&&(g=b.requestAnimationFrame(a),c=!0)},stop:function(){b.cancelAnimationFrame(g);c=!1},setAnimationLoop:function(h){e=h},setContext:function(h){b=h}}}function mb(a,b){const c=b.isWebGL2,e=new WeakMap;return{get:function(g){g.isInterleavedBufferAttribute&&(g=g.data);return e.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);const h=e.get(g);h&&(a.deleteBuffer(h.buffer),e.delete(g))},update:function(g,h){if(g.isGLBufferAttribute)h=
e.get(g),(!h||h.version<g.version)&&e.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version});else{g.isInterleavedBufferAttribute&&(g=g.data);var l=e.get(g);if(void 0===l){l=e.set;var n=g,m=g.array,q=g.usage,u=m.byteLength,t=a.createBuffer();a.bindBuffer(h,t);a.bufferData(h,m,q);g.onUploadCallback();if(m instanceof Float32Array)h=a.FLOAT;else if(m instanceof Uint16Array)if(g.isFloat16BufferAttribute)if(c)h=a.HALF_FLOAT;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");
else h=a.UNSIGNED_SHORT;else if(m instanceof Int16Array)h=a.SHORT;else if(m instanceof Uint32Array)h=a.UNSIGNED_INT;else if(m instanceof Int32Array)h=a.INT;else if(m instanceof Int8Array)h=a.BYTE;else if(m instanceof Uint8Array)h=a.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)h=a.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);l.call(e,n,{buffer:t,type:h,bytesPerElement:m.BYTES_PER_ELEMENT,version:g.version,size:u})}else if(l.version<g.version){if(l.size!==
g.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n=g;m=n.array;u=n._updateRange;t=n.updateRanges;a.bindBuffer(h,l.buffer);-1===u.count&&0===t.length&&a.bufferSubData(h,0,m);if(0!==t.length){for(let w=0,B=t.length;w<B;w++)q=t[w],c?a.bufferSubData(h,q.start*m.BYTES_PER_ELEMENT,m,q.start,q.count):a.bufferSubData(h,q.start*m.BYTES_PER_ELEMENT,m.subarray(q.start,q.start+
q.count));n.clearUpdateRanges()}-1!==u.count&&(c?a.bufferSubData(h,u.offset*m.BYTES_PER_ELEMENT,m,u.offset,u.count):a.bufferSubData(h,u.offset*m.BYTES_PER_ELEMENT,m.subarray(u.offset,u.offset+u.count)),u.count=-1);n.onUploadCallback();l.version=g.version}}}}}function Ua(a,b,c,e,g,h,l){function n(D,J){D.getRGB(dh,Na(a));e.buffers.color.setClear(dh.r,dh.g,dh.b,J,l)}const m=new nb(0);let q=!0===h?0:1,u,t,w=null,B=0,z=null;return{getClearColor:function(){return m},setClearColor:function(D,J=1){m.set(D);
q=J;n(m,q)},getClearAlpha:function(){return q},setClearAlpha:function(D){q=D;n(m,q)},render:function(D,J){let A=!1,K=!0===J.isScene?J.background:null;K&&K.isTexture&&(K=(0<J.backgroundBlurriness?c:b).get(K));null===K?n(m,q):K&&K.isColor&&(n(K,1),A=!0);const oa=a.xr.getEnvironmentBlendMode();"additive"===oa?e.buffers.color.setClear(0,0,0,1,l):"alpha-blend"===oa&&e.buffers.color.setClear(0,0,0,0,l);(a.autoClear||A)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);if(K&&(K.isCubeTexture||
306===K.mapping)){void 0===t&&(t=new Uc(new ug(1,1,1),new Be({name:"BackgroundCubeMaterial",uniforms:Ka(Ce.backgroundCube.uniforms),vertexShader:Ce.backgroundCube.vertexShader,fragmentShader:Ce.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),t.geometry.deleteAttribute("normal"),t.geometry.deleteAttribute("uv"),t.onBeforeRender=function(R,U,ja){this.matrixWorld.copyPosition(ja.matrixWorld)},Object.defineProperty(t.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),
g.update(t));oe.copy(J.backgroundRotation);oe.x*=-1;oe.y*=-1;oe.z*=-1;K.isCubeTexture&&!1===K.isRenderTargetTexture&&(oe.y*=-1,oe.z*=-1);t.material.uniforms.envMap.value=K;t.material.uniforms.flipEnvMap.value=K.isCubeTexture&&!1===K.isRenderTargetTexture?-1:1;t.material.uniforms.backgroundBlurriness.value=J.backgroundBlurriness;t.material.uniforms.backgroundIntensity.value=J.backgroundIntensity;t.material.uniforms.backgroundRotation.value.setFromMatrix4(Dl.makeRotationFromEuler(oe));t.material.toneMapped=
"srgb"!==lc.getTransfer(K.colorSpace);if(w!==K||B!==K.version||z!==a.toneMapping)t.material.needsUpdate=!0,w=K,B=K.version,z=a.toneMapping;t.layers.enableAll();D.unshift(t,t.geometry,t.material,0,0,null)}else if(K&&K.isTexture){void 0===u&&(u=new Uc(new Lf(2,2),new Be({name:"BackgroundMaterial",uniforms:Ka(Ce.background.uniforms),vertexShader:Ce.background.vertexShader,fragmentShader:Ce.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,
"map",{get:function(){return this.uniforms.t2D.value}}),g.update(u));u.material.uniforms.t2D.value=K;u.material.uniforms.backgroundIntensity.value=J.backgroundIntensity;u.material.toneMapped="srgb"!==lc.getTransfer(K.colorSpace);!0===K.matrixAutoUpdate&&K.updateMatrix();u.material.uniforms.uvTransform.value.copy(K.matrix);if(w!==K||B!==K.version||z!==a.toneMapping)u.material.needsUpdate=!0,w=K,B=K.version,z=a.toneMapping;u.layers.enableAll();D.unshift(u,u.geometry,u.material,0,0,null)}}}}function Ia(a,
b,c,e){function g(R){return e.isWebGL2?a.bindVertexArray(R):z.bindVertexArrayOES(R)}function h(R){return e.isWebGL2?a.deleteVertexArray(R):z.deleteVertexArrayOES(R)}function l(R){const U=[],ja=[],ka=[];for(let ea=0;ea<B;ea++)U[ea]=0,ja[ea]=0,ka[ea]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:ja,attributeDivisors:ka,object:R,attributes:{},index:null}}function n(){const R=K.newAttributes;for(let U=0,ja=R.length;U<ja;U++)R[U]=0}function m(R){q(R,0)}function q(R,
U){const ja=K.enabledAttributes,ka=K.attributeDivisors;K.newAttributes[R]=1;0===ja[R]&&(a.enableVertexAttribArray(R),ja[R]=1);ka[R]!==U&&((e.isWebGL2?a:b.get("ANGLE_instanced_arrays"))[e.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,U),ka[R]=U)}function u(){const R=K.newAttributes,U=K.enabledAttributes;for(let ja=0,ka=U.length;ja<ka;ja++)U[ja]!==R[ja]&&(a.disableVertexAttribArray(ja),U[ja]=0)}function t(){w();oa=!0;K!==A&&(K=A,g(K.object))}function w(){A.geometry=null;A.program=null;
A.wireframe=!1}const B=a.getParameter(a.MAX_VERTEX_ATTRIBS),z=e.isWebGL2?null:b.get("OES_vertex_array_object"),D=e.isWebGL2||null!==z,J={},A=l(null);let K=A,oa=!1;return{setup:function(R,U,ja,ka,ea){var xa=!1;if(D){xa=!0===U.wireframe;var ta=J[ka.id];void 0===ta&&(ta={},J[ka.id]=ta);var Da=ta[ja.id];void 0===Da&&(Da={},ta[ja.id]=Da);ta=Da[xa];void 0===ta&&(ta=l(e.isWebGL2?a.createVertexArray():z.createVertexArrayOES()),Da[xa]=ta);xa=ta;K!==xa&&(K=xa,g(K.object));a:{xa=K.attributes;Da=ka.attributes;
ta=0;var Va=ja.getAttributes();for(var ra in Va)if(0<=Va[ra].location){var Xa=xa[ra],Ja=Da[ra];void 0===Ja&&("instanceMatrix"===ra&&R.instanceMatrix&&(Ja=R.instanceMatrix),"instanceColor"===ra&&R.instanceColor&&(Ja=R.instanceColor));if(void 0===Xa||Xa.attribute!==Ja||Ja&&Xa.data!==Ja.data){xa=!0;break a}ta++}xa=K.attributesNum!==ta||K.index!==ea?!0:!1}if(xa){ra={};Da=ka.attributes;ta=0;Va=ja.getAttributes();for(var ib in Va)0<=Va[ib].location&&(Xa=Da[ib],void 0===Xa&&("instanceMatrix"===ib&&R.instanceMatrix&&
(Xa=R.instanceMatrix),"instanceColor"===ib&&R.instanceColor&&(Xa=R.instanceColor)),Ja={},(Ja.attribute=Xa)&&Xa.data&&(Ja.data=Xa.data),ra[ib]=Ja,ta++);K.attributes=ra;K.attributesNum=ta;K.index=ea}}else if(ib=!0===U.wireframe,K.geometry!==ka.id||K.program!==ja.id||K.wireframe!==ib)K.geometry=ka.id,K.program=ja.id,K.wireframe=ib,xa=!0;null!==ea&&c.update(ea,a.ELEMENT_ARRAY_BUFFER);if(xa||oa){oa=!1;if(!1!==e.isWebGL2||!R.isInstancedMesh&&!ka.isInstancedBufferGeometry||null!==b.get("ANGLE_instanced_arrays")){n();
ib=ka.attributes;ja=ja.getAttributes();U=U.defaultAttributeValues;for(const H in ja)if(ra=ja[H],0<=ra.location){var Cb=ib[H];void 0===Cb&&("instanceMatrix"===H&&R.instanceMatrix&&(Cb=R.instanceMatrix),"instanceColor"===H&&R.instanceColor&&(Cb=R.instanceColor));if(void 0!==Cb){if(xa=Cb.normalized,Da=Cb.itemSize,Va=c.get(Cb),void 0!==Va){var xb=Va.buffer;ta=Va.type;Va=Va.bytesPerElement;Xa=!0===e.isWebGL2&&(ta===a.INT||ta===a.UNSIGNED_INT||1013===Cb.gpuType);if(Cb.isInterleavedBufferAttribute){var Ya=
Cb.data;Ja=Ya.stride;Cb=Cb.offset;if(Ya.isInstancedInterleavedBuffer){for(var Ra=0;Ra<ra.locationSize;Ra++)q(ra.location+Ra,Ya.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===ka._maxInstanceCount&&(ka._maxInstanceCount=Ya.meshPerAttribute*Ya.count)}else for(Ya=0;Ya<ra.locationSize;Ya++)m(ra.location+Ya);a.bindBuffer(a.ARRAY_BUFFER,xb);for(let M=0;M<ra.locationSize;M++){xb=ra.location+M;Ya=Da/ra.locationSize;Ra=ta;var $a=xa,vb=Ja*Va,G=(Cb+Da/ra.locationSize*M)*Va;!0===Xa?a.vertexAttribIPointer(xb,
Ya,Ra,vb,G):a.vertexAttribPointer(xb,Ya,Ra,$a,vb,G)}}else{if(Cb.isInstancedBufferAttribute){for(Ja=0;Ja<ra.locationSize;Ja++)q(ra.location+Ja,Cb.meshPerAttribute);!0!==R.isInstancedMesh&&void 0===ka._maxInstanceCount&&(ka._maxInstanceCount=Cb.meshPerAttribute*Cb.count)}else for(Ja=0;Ja<ra.locationSize;Ja++)m(ra.location+Ja);a.bindBuffer(a.ARRAY_BUFFER,xb);for(vb=0;vb<ra.locationSize;vb++)Ja=ra.location+vb,Cb=Da/ra.locationSize,xb=ta,Ya=xa,Ra=Da*Va,$a=Da/ra.locationSize*vb*Va,!0===Xa?a.vertexAttribIPointer(Ja,
Cb,xb,Ra,$a):a.vertexAttribPointer(Ja,Cb,xb,Ya,Ra,$a)}}}else if(void 0!==U&&(xa=U[H],void 0!==xa))switch(xa.length){case 2:a.vertexAttrib2fv(ra.location,xa);break;case 3:a.vertexAttrib3fv(ra.location,xa);break;case 4:a.vertexAttrib4fv(ra.location,xa);break;default:a.vertexAttrib1fv(ra.location,xa)}}u()}null!==ea&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.get(ea).buffer)}},reset:t,resetDefaultState:w,dispose:function(){t();for(const R in J){const U=J[R];for(const ja in U){const ka=U[ja];for(const ea in ka)h(ka[ea].object),
delete ka[ea];delete U[ja]}delete J[R]}},releaseStatesOfGeometry:function(R){if(void 0!==J[R.id]){var U=J[R.id];for(const ja in U){const ka=U[ja];for(const ea in ka)h(ka[ea].object),delete ka[ea];delete U[ja]}delete J[R.id]}},releaseStatesOfProgram:function(R){for(const U in J){const ja=J[U];if(void 0===ja[R.id])continue;const ka=ja[R.id];for(const ea in ka)h(ka[ea].object),delete ka[ea];delete ja[R.id]}},initAttributes:n,enableAttribute:m,disableUnusedAttributes:u}}function Ma(a,b,c,e){const g=e.isWebGL2;
let h;this.setMode=function(l){h=l};this.render=function(l,n){a.drawArrays(h,l,n);c.update(n,h,1)};this.renderInstances=function(l,n,m){if(0!==m){if(g){var q=a;var u="drawArraysInstanced"}else if(q=b.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===q){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}q[u](h,l,n,m);c.update(n,h,m)}};this.renderMultiDraw=function(l,n,m){if(0!==m){var q=
b.get("WEBGL_multi_draw");if(null===q)for(q=0;q<m;q++)this.render(l[q],n[q]);else{q.multiDrawArraysWEBGL(h,l,0,n,0,m);l=0;for(q=0;q<m;q++)l+=n[q];c.update(l,h,1)}}}}function kb(a,b,c){function e(R){if("highp"===R){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";R="mediump"}return"mediump"===R&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,
a.MEDIUM_FLOAT).precision?"mediump":"lowp"}let g;const h="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===a.constructor.name;let l=void 0!==c.precision?c.precision:"highp";var n=e(l);n!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",n,"instead."),l=n);n=h||b.has("WEBGL_draw_buffers");c=!0===c.logarithmicDepthBuffer;const m=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),q=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=a.getParameter(a.MAX_TEXTURE_SIZE),t=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
w=a.getParameter(a.MAX_VERTEX_ATTRIBS),B=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),z=a.getParameter(a.MAX_VARYING_VECTORS),D=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),J=0<q,A=h||b.has("OES_texture_float"),K=J&&A,oa=h?a.getParameter(a.MAX_SAMPLES):0;return{isWebGL2:h,drawBuffers:n,getMaxAnisotropy:function(){if(void 0!==g)return g;if(!0===b.has("EXT_texture_filter_anisotropic")){const R=b.get("EXT_texture_filter_anisotropic");g=a.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else g=0;return g},
getMaxPrecision:e,precision:l,logarithmicDepthBuffer:c,maxTextures:m,maxVertexTextures:q,maxTextureSize:u,maxCubemapSize:t,maxAttributes:w,maxVertexUniforms:B,maxVaryings:z,maxFragmentUniforms:D,vertexTextures:J,floatFragmentTextures:A,floatVertexTextures:K,maxSamples:oa}}function Tb(a){function b(u,t,w,B){const z=null!==u?u.length:0;let D=null;if(0!==z){D=q.value;if(!0!==B||null===D){B=w+4*z;t=t.matrixWorldInverse;m.getNormalMatrix(t);if(null===D||D.length<B)D=new Float32Array(B);for(let J=0,A=w;J!==
z;++J,A+=4)n.copy(u[J]).applyMatrix4(t,m),n.normal.toArray(D,A),D[A+3]=n.constant}q.value=D;q.needsUpdate=!0}c.numPlanes=z;c.numIntersection=0;return D}const c=this;let e=null,g=0,h=!1,l=!1;const n=new Mf,m=new Ub,q={value:null,needsUpdate:!1};this.uniform=q;this.numIntersection=this.numPlanes=0;this.init=function(u,t){const w=0!==u.length||t||0!==g||h;h=t;g=u.length;return w};this.beginShadows=function(){l=!0;b(null)};this.endShadows=function(){l=!1};this.setGlobalState=function(u,t){e=b(u,t,0)};
this.setState=function(u,t,w){const B=u.clippingPlanes,z=u.clipIntersection;var D=u.clipShadows;u=a.get(u);if(!h||null===B||0===B.length||l&&!D)l?b(null):(q.value!==e&&(q.value=e,q.needsUpdate=0<g),c.numPlanes=g,c.numIntersection=0);else{D=l?0:g;const J=4*D;let A=u.clippingState||null;q.value=A;A=b(B,t,J,w);for(t=0;t!==J;++t)A[t]=e[t];u.clippingState=A;this.numIntersection=z?this.numPlanes:0;this.numPlanes+=D}}}function wb(a){function b(g,h){303===h?g.mapping=301:304===h&&(g.mapping=302);return g}
function c(g){g=g.target;g.removeEventListener("dispose",c);const h=e.get(g);void 0!==h&&(e.delete(g),h.dispose())}let e=new WeakMap;return{get:function(g){if(g&&g.isTexture){var h=g.mapping;if(303===h||304===h)return e.has(g)?(h=e.get(g).texture,b(h,g.mapping)):(h=g.image)&&0<h.height?(h=new tk(h.height),h.fromEquirectangularTexture(a,g),e.set(g,h),g.addEventListener("dispose",c),b(h.texture,g.mapping)):null}return g},dispose:function(){e=new WeakMap}}}function Zb(a,b,c){a=new Rd(a,b,c);a.texture.mapping=
306;a.texture.name="PMREM.cubeUv";a.scissorTest=!0;return a}function Q(a,b,c,e,g){a.viewport.set(b,c,e,g);a.scissor.set(b,c,e,g)}function pa(){return new Be({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ob(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include \x3ccommon\x3e\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection \x3d normalize( vOutputDirection );\n\t\t\t\tvec2 uv \x3d equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor \x3d vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function La(){return new Be({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ob(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor \x3d textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function ob(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv \x3d 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction \x3d vec3( uv, 1.0 );\n\n\t\t\tif ( face \x3d\x3d 0.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face \x3d\x3d 1.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face \x3d\x3d 2.0 ) {\n\n\t\t\t\tdirection.x *\x3d -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face \x3d\x3d 3.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face \x3d\x3d 4.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xy *\x3d -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face \x3d\x3d 5.0 ) {\n\n\t\t\t\tdirection.z *\x3d -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection \x3d getDirection( uv, faceIndex );\n\t\t\tgl_Position \x3d vec4( position, 1.0 );\n\n\t\t}\n\t"}
function lb(a){function b(g){g=g.target;g.removeEventListener("dispose",b);const h=c.get(g);void 0!==h&&(c.delete(g),h.dispose())}let c=new WeakMap,e=null;return{get:function(g){if(g&&g.isTexture){var h=g.mapping,l=303===h||304===h,n=301===h||302===h;if(l||n){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate)return g.needsPMREMUpdate=!1,h=c.get(g),null===e&&(e=new bj(a)),h=l?e.fromEquirectangular(g,h):e.fromCubemap(g,h),c.set(g,h),h.texture;if(c.has(g))return c.get(g).texture;h=g.image;var m;if(!(m=
l&&h&&0<h.height)&&(m=n&&h)){m=0;for(n=0;6>n;n++)void 0!==h[n]&&m++;m=6===m}return m?(null===e&&(e=new bj(a)),l=l?e.fromEquirectangular(g):e.fromCubemap(g),c.set(g,l),g.addEventListener("dispose",b),l.texture):null}}return g},dispose:function(){c=new WeakMap;null!==e&&(e.dispose(),e=null)}}}function Fb(a){function b(e){if(void 0!==c[e])return c[e];let g;switch(e){case "WEBGL_depth_texture":g=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");
break;case "EXT_texture_filter_anisotropic":g=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":g=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":g=a.getExtension("WEBGL_compressed_texture_pvrtc")||
a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:g=a.getExtension(e)}return c[e]=g}const c={};return{has:function(e){return null!==b(e)},init:function(e){e.isWebGL2?(b("EXT_color_buffer_float"),b("WEBGL_clip_cull_distance")):(b("WEBGL_depth_texture"),b("OES_texture_float"),b("OES_texture_half_float"),b("OES_texture_half_float_linear"),b("OES_standard_derivatives"),b("OES_element_index_uint"),b("OES_vertex_array_object"),b("ANGLE_instanced_arrays"));b("OES_texture_float_linear");
b("EXT_color_buffer_half_float");b("WEBGL_multisampled_render_to_texture")},get:function(e){const g=b(e);null===g&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported.");return g}}}function Ib(a,b,c,e){function g(m){m=m.target;null!==m.index&&b.remove(m.index);for(var q in m.attributes)b.remove(m.attributes[q]);for(var u in m.morphAttributes){q=m.morphAttributes[u];for(let t=0,w=q.length;t<w;t++)b.remove(q[t])}m.removeEventListener("dispose",g);delete l[m.id];if(u=n.get(m))b.remove(u),
n.delete(m);e.releaseStatesOfGeometry(m);!0===m.isInstancedBufferGeometry&&delete m._maxInstanceCount;c.memory.geometries--}function h(m){var q=[],u=m.index,t=m.attributes.position;if(null!==u){t=u.array;u=u.version;for(let z=0,D=t.length;z<D;z+=3){var w=t[z+0],B=t[z+1];const J=t[z+2];q.push(w,B,B,J,J,w)}}else if(void 0!==t){w=t.array;u=t.version;for(let z=0,D=w.length/3-1;z<D;z+=3)t=z+0,w=z+1,B=z+2,q.push(t,w,w,B,B,t)}else return;q=new (Ic(q)?cj:Nh)(q,1);q.version=u;(u=n.get(m))&&b.remove(u);n.set(m,
q)}const l={},n=new WeakMap;return{get:function(m,q){if(!0===l[q.id])return q;q.addEventListener("dispose",g);l[q.id]=!0;c.memory.geometries++;return q},update:function(m){var q=m.attributes;for(const u in q)b.update(q[u],a.ARRAY_BUFFER);m=m.morphAttributes;for(const u in m){q=m[u];for(let t=0,w=q.length;t<w;t++)b.update(q[t],a.ARRAY_BUFFER)}},getWireframeAttribute:function(m){const q=n.get(m);if(q){const u=m.index;null!==u&&q.version<u.version&&h(m)}else h(m);return n.get(m)}}}function Ob(a,b,c,
e){const g=e.isWebGL2;let h,l,n;this.setMode=function(m){h=m};this.setIndex=function(m){l=m.type;n=m.bytesPerElement};this.render=function(m,q){a.drawElements(h,q,l,m*n);c.update(q,h,1)};this.renderInstances=function(m,q,u){if(0!==u){if(g){var t=a;var w="drawElementsInstanced"}else if(t=b.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===t){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
return}t[w](h,q,l,m*n,u);c.update(q,h,u)}};this.renderMultiDraw=function(m,q,u){if(0!==u){var t=b.get("WEBGL_multi_draw");if(null===t)for(t=0;t<u;t++)this.render(m[t]/n,q[t]);else{t.multiDrawElementsWEBGL(h,q,0,l,m,0,u);m=0;for(t=0;t<u;t++)m+=q[t];c.update(m,h,1)}}}}function tb(a){const b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,autoReset:!0,reset:function(){b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(c,e,g){b.calls++;
switch(e){case a.TRIANGLES:b.triangles+=c/3*g;break;case a.LINES:b.lines+=c/2*g;break;case a.LINE_STRIP:b.lines+=g*(c-1);break;case a.LINE_LOOP:b.lines+=g*c;break;case a.POINTS:b.points+=g*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}}}function Sb(a,b){return a[0]-b[0]}function yd(a,b){return Math.abs(b[1])-Math.abs(a[1])}function md(a,b,c){const e={},g=new Float32Array(8),h=new WeakMap,l=new mc,n=[];for(let m=0;8>m;m++)n[m]=[m,0];return{update:function(m,q,u){var t=m.morphTargetInfluences;
if(!0===b.isWebGL2){var w=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color;w=void 0!==w?w.length:0;var B=h.get(q);if(void 0===B||B.count!==w){void 0!==B&&B.texture.dispose();B=void 0!==q.morphAttributes.position;var z=void 0!==q.morphAttributes.normal,D=void 0!==q.morphAttributes.color;const A=q.morphAttributes.position||[],K=q.morphAttributes.normal||[],oa=q.morphAttributes.color||[];var J=0;!0===B&&(J=1);!0===z&&(J=2);!0===D&&(J=3);let R=q.attributes.position.count*
J,U=1;R>b.maxTextureSize&&(U=Math.ceil(R/b.maxTextureSize),R=b.maxTextureSize);const ja=new Float32Array(R*U*4*w),ka=new Oh(ja,R,U,w);ka.type=1015;ka.needsUpdate=!0;J*=4;for(let xa=0;xa<w;xa++){const ta=A[xa],Da=K[xa],Va=oa[xa],ra=R*U*4*xa;for(let Xa=0;Xa<ta.count;Xa++){const Ja=Xa*J;!0===B&&(l.fromBufferAttribute(ta,Xa),ja[ra+Ja+0]=l.x,ja[ra+Ja+1]=l.y,ja[ra+Ja+2]=l.z,ja[ra+Ja+3]=0);!0===z&&(l.fromBufferAttribute(Da,Xa),ja[ra+Ja+4]=l.x,ja[ra+Ja+5]=l.y,ja[ra+Ja+6]=l.z,ja[ra+Ja+7]=0);!0===D&&(l.fromBufferAttribute(Va,
Xa),ja[ra+Ja+8]=l.x,ja[ra+Ja+9]=l.y,ja[ra+Ja+10]=l.z,ja[ra+Ja+11]=4===Va.itemSize?l.w:1)}}B={count:w,texture:ka,size:new Fa(R,U)};h.set(q,B);function ea(){ka.dispose();h.delete(q);q.removeEventListener("dispose",ea)}q.addEventListener("dispose",ea)}if(!0===m.isInstancedMesh&&null!==m.morphTexture)u.getUniforms().setValue(a,"morphTexture",m.morphTexture,c);else{m=0;for(w=0;w<t.length;w++)m+=t[w];m=q.morphTargetsRelative?1:1-m;u.getUniforms().setValue(a,"morphTargetBaseInfluence",m);u.getUniforms().setValue(a,
"morphTargetInfluences",t)}u.getUniforms().setValue(a,"morphTargetsTexture",B.texture,c);u.getUniforms().setValue(a,"morphTargetsTextureSize",B.size)}else{m=void 0===t?0:t.length;w=e[q.id];if(void 0===w||w.length!==m){w=[];for(B=0;B<m;B++)w[B]=[B,0];e[q.id]=w}for(B=0;B<m;B++)z=w[B],z[0]=B,z[1]=t[B];w.sort(yd);for(t=0;8>t;t++)t<m&&w[t][1]?(n[t][0]=w[t][0],n[t][1]=w[t][1]):(n[t][0]=Number.MAX_SAFE_INTEGER,n[t][1]=0);n.sort(Sb);t=q.morphAttributes.position;m=q.morphAttributes.normal;w=0;for(B=0;8>B;B++)D=
n[B],z=D[0],D=D[1],z!==Number.MAX_SAFE_INTEGER&&D?(t&&q.getAttribute("morphTarget"+B)!==t[z]&&q.setAttribute("morphTarget"+B,t[z]),m&&q.getAttribute("morphNormal"+B)!==m[z]&&q.setAttribute("morphNormal"+B,m[z]),g[B]=D,w+=D):(t&&!0===q.hasAttribute("morphTarget"+B)&&q.deleteAttribute("morphTarget"+B),m&&!0===q.hasAttribute("morphNormal"+B)&&q.deleteAttribute("morphNormal"+B),g[B]=0);t=q.morphTargetsRelative?1:1-w;u.getUniforms().setValue(a,"morphTargetBaseInfluence",t);u.getUniforms().setValue(a,"morphTargetInfluences",
g)}}}}function cd(a,b,c,e){function g(l){l=l.target;l.removeEventListener("dispose",g);c.remove(l.instanceMatrix);null!==l.instanceColor&&c.remove(l.instanceColor)}let h=new WeakMap;return{update:function(l){const n=e.render.frame,m=b.get(l,l.geometry);h.get(m)!==n&&(b.update(m),h.set(m,n));l.isInstancedMesh&&(!1===l.hasEventListener("dispose",g)&&l.addEventListener("dispose",g),h.get(l)!==n&&(c.update(l.instanceMatrix,a.ARRAY_BUFFER),null!==l.instanceColor&&c.update(l.instanceColor,a.ARRAY_BUFFER),
h.set(l,n)));l.isSkinnedMesh&&(l=l.skeleton,h.get(l)!==n&&(l.update(),h.set(l,n)));return m},dispose:function(){h=new WeakMap}}}function Gd(a,b,c){const e=a[0];if(0>=e||0<e)return a;const g=b*c;let h=Oe[g];void 0===h&&(h=new Float32Array(g),Oe[g]=h);if(0!==b){e.toArray(h,0);for(let l=1,n=0;l!==b;++l)n+=c,a[l].toArray(h,n)}return h}function ac(a,b){if(a.length!==b.length)return!1;for(let c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0}function gc(a,b){for(let c=0,e=b.length;c<e;c++)a[c]=b[c]}
function y(a,b){let c=dj[b];void 0===c&&(c=new Int32Array(b),dj[b]=c);for(let e=0;e!==b;++e)c[e]=a.allocateTextureUnit();return c}function E(a,b){const c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function L(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else ac(c,b)||(a.uniform2fv(this.addr,b),gc(c,b))}function C(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3f(this.addr,b.x,
b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else if(void 0!==b.r){if(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b}else ac(c,b)||(a.uniform3fv(this.addr,b),gc(c,b))}function N(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else ac(c,b)||(a.uniform4fv(this.addr,b),gc(c,b))}function X(a,b){const c=this.cache,e=b.elements;void 0===e?ac(c,b)||
(a.uniformMatrix2fv(this.addr,!1,b),gc(c,b)):ac(c,e)||(uk.set(e),a.uniformMatrix2fv(this.addr,!1,uk),gc(c,e))}function T(a,b){const c=this.cache,e=b.elements;void 0===e?ac(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),gc(c,b)):ac(c,e)||(vk.set(e),a.uniformMatrix3fv(this.addr,!1,vk),gc(c,e))}function la(a,b){const c=this.cache,e=b.elements;void 0===e?ac(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),gc(c,b)):ac(c,e)||(El.set(e),a.uniformMatrix4fv(this.addr,!1,El),gc(c,e))}function sa(a,b){const c=this.cache;
c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function Sa(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2i(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else ac(c,b)||(a.uniform2iv(this.addr,b),gc(c,b))}function cb(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3i(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else ac(c,b)||(a.uniform3iv(this.addr,b),gc(c,b))}function Db(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||
c[2]!==b.z||c[3]!==b.w)a.uniform4i(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else ac(c,b)||(a.uniform4iv(this.addr,b),gc(c,b))}function cc(a,b){const c=this.cache;c[0]!==b&&(a.uniform1ui(this.addr,b),c[0]=b)}function $b(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2ui(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else ac(c,b)||(a.uniform2uiv(this.addr,b),gc(c,b))}function Wb(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3ui(this.addr,
b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else ac(c,b)||(a.uniform3uiv(this.addr,b),gc(c,b))}function Yc(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4ui(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else ac(c,b)||(a.uniform4uiv(this.addr,b),gc(c,b))}function $d(a,b,c){const e=this.cache,g=c.allocateTextureUnit();e[0]!==g&&(a.uniform1i(this.addr,g),e[0]=g);a=this.type===a.SAMPLER_2D_SHADOW?wk:Ph;c.setTexture2D(b||a,g)}function zd(a,
b,c){const e=this.cache,g=c.allocateTextureUnit();e[0]!==g&&(a.uniform1i(this.addr,g),e[0]=g);c.setTexture3D(b||xk,g)}function yk(a,b,c){const e=this.cache,g=c.allocateTextureUnit();e[0]!==g&&(a.uniform1i(this.addr,g),e[0]=g);c.setTextureCube(b||eh,g)}function Qh(a,b,c){const e=this.cache,g=c.allocateTextureUnit();e[0]!==g&&(a.uniform1i(this.addr,g),e[0]=g);c.setTexture2DArray(b||Sd,g)}function ej(a){switch(a){case 5126:return E;case 35664:return L;case 35665:return C;case 35666:return N;case 35674:return X;
case 35675:return T;case 35676:return la;case 5124:case 35670:return sa;case 35667:case 35671:return Sa;case 35668:case 35672:return cb;case 35669:case 35673:return Db;case 5125:return cc;case 36294:return $b;case 36295:return Wb;case 36296:return Yc;case 35678:case 36198:case 36298:case 36306:case 35682:return $d;case 35679:case 36299:case 36307:return zd;case 35680:case 36300:case 36308:case 36293:return yk;case 36289:case 36303:case 36311:case 36292:return Qh}}function fj(a,b){a.uniform1fv(this.addr,
b)}function Rh(a,b){b=Gd(b,this.size,2);a.uniform2fv(this.addr,b)}function Zm(a,b){b=Gd(b,this.size,3);a.uniform3fv(this.addr,b)}function Fl(a,b){b=Gd(b,this.size,4);a.uniform4fv(this.addr,b)}function gj(a,b){b=Gd(b,this.size,4);a.uniformMatrix2fv(this.addr,!1,b)}function Gl(a,b){b=Gd(b,this.size,9);a.uniformMatrix3fv(this.addr,!1,b)}function $m(a,b){b=Gd(b,this.size,16);a.uniformMatrix4fv(this.addr,!1,b)}function Sh(a,b){a.uniform1iv(this.addr,b)}function Th(a,b){a.uniform2iv(this.addr,b)}function an(a,
b){a.uniform3iv(this.addr,b)}function bn(a,b){a.uniform4iv(this.addr,b)}function zk(a,b){a.uniform1uiv(this.addr,b)}function Ak(a,b){a.uniform2uiv(this.addr,b)}function Hl(a,b){a.uniform3uiv(this.addr,b)}function Il(a,b){a.uniform4uiv(this.addr,b)}function hj(a,b,c){const e=this.cache,g=b.length,h=y(c,g);ac(e,h)||(a.uniform1iv(this.addr,h),gc(e,h));for(a=0;a!==g;++a)c.setTexture2D(b[a]||Ph,h[a])}function ij(a,b,c){const e=this.cache,g=b.length,h=y(c,g);ac(e,h)||(a.uniform1iv(this.addr,h),gc(e,h));
for(a=0;a!==g;++a)c.setTexture3D(b[a]||xk,h[a])}function Jl(a,b,c){const e=this.cache,g=b.length,h=y(c,g);ac(e,h)||(a.uniform1iv(this.addr,h),gc(e,h));for(a=0;a!==g;++a)c.setTextureCube(b[a]||eh,h[a])}function ae(a,b,c){const e=this.cache,g=b.length,h=y(c,g);ac(e,h)||(a.uniform1iv(this.addr,h),gc(e,h));for(a=0;a!==g;++a)c.setTexture2DArray(b[a]||Sd,h[a])}function cn(a){switch(a){case 5126:return fj;case 35664:return Rh;case 35665:return Zm;case 35666:return Fl;case 35674:return gj;case 35675:return Gl;
case 35676:return $m;case 5124:case 35670:return Sh;case 35667:case 35671:return Th;case 35668:case 35672:return an;case 35669:case 35673:return bn;case 5125:return zk;case 36294:return Ak;case 36295:return Hl;case 36296:return Il;case 35678:case 36198:case 36298:case 36306:case 35682:return hj;case 35679:case 36299:case 36307:return ij;case 35680:case 36300:case 36308:case 36293:return Jl;case 36289:case 36303:case 36311:case 36292:return ae}}function jj(a,b,c){b=a.createShader(b);a.shaderSource(b,
c);a.compileShader(b);return b}function Bk(a,b,c){var e=a.getShaderParameter(b,a.COMPILE_STATUS),g=a.getShaderInfoLog(b).trim();if(e&&""===g)return"";if(e=/ERROR: 0:(\d+)/.exec(g)){e=parseInt(e[1]);c=c.toUpperCase()+"\n\n"+g+"\n\n";a=a.getShaderSource(b).split("\n");b=[];var h=Math.max(e-6,0);for(g=Math.min(e+6,a.length);h<g;h++){const l=h+1;b.push(`${l===e?"\x3e":" "} ${l}: ${a[h]}`)}e=b.join("\n");return c+e}return g}function Kl(a,b){a:{const c=lc.getPrimaries(lc.workingColorSpace),e=lc.getPrimaries(b);
let g;c===e?g="":"p3"===c&&"rec709"===e?g="LinearDisplayP3ToLinearSRGB":"rec709"===c&&"p3"===e&&(g="LinearSRGBToLinearDisplayP3");switch(b){case "srgb-linear":case "display-p3-linear":b=[g,"LinearTransferOETF"];break a;case "srgb":case "display-p3":b=[g,"sRGBTransferOETF"];break a;default:console.warn("THREE.WebGLProgram: Unsupported color space:",b),b=[g,"LinearTransferOETF"]}}return`vec4 ${a}( vec4 value ) { return ${b[0]}( ${b[1]}( value ) ); }`}function dn(a,b){switch(b){case 1:b="Linear";break;
case 2:b="Reinhard";break;case 3:b="OptimizedCineon";break;case 4:b="ACESFilmic";break;case 6:b="AgX";break;case 7:b="Neutral";break;case 5:b="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",b),b="Linear"}return"vec3 "+a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function en(a){const b=[];for(const c in a){const e=a[c];!1!==e&&b.push("#define "+c+" "+e)}return b.join("\n")}function vg(a){return""!==a}function Ck(a,b){const c=b.numSpotLightShadows+b.numSpotLightMaps-
b.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,b.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,b.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,b.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,
b.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,b.numPointLightShadows)}function Ll(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function fh(a,b){a=Vb[b];if(void 0===a){const c=Dk.get(b);if(void 0!==c)a=Vb[c],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',b,c);else throw Error("Can not resolve #include \x3c"+b+"\x3e");}return a.replace(Uh,fh)}function Ml(a,
b,c,e){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=e.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return a}function Ek(a){let b=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	`;a.isWebGL2&&(b+=`precision ${a.precision} sampler3D;
		precision ${a.precision} sampler2DArray;
		precision ${a.precision} sampler2DShadow;
		precision ${a.precision} samplerCubeShadow;
		precision ${a.precision} sampler2DArrayShadow;
		precision ${a.precision} isampler2D;
		precision ${a.precision} isampler3D;
		precision ${a.precision} isamplerCube;
		precision ${a.precision} isampler2DArray;
		precision ${a.precision} usampler2D;
		precision ${a.precision} usampler3D;
		precision ${a.precision} usamplerCube;
		precision ${a.precision} usampler2DArray;
		`);"highp"===a.precision?b+="\n#define HIGH_PRECISION":"mediump"===a.precision?b+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(b+="\n#define LOW_PRECISION");return b}function Nl(a){let b="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?b="SHADOWMAP_TYPE_PCF":2===a.shadowMapType?b="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(b="SHADOWMAP_TYPE_VSM");return b}function fn(a){let b="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case 301:case 302:b="ENVMAP_TYPE_CUBE";break;case 306:b="ENVMAP_TYPE_CUBE_UV"}return b}
function gn(a){let b="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case 302:b="ENVMAP_MODE_REFRACTION"}return b}function hn(a){let b="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case 0:b="ENVMAP_BLENDING_MULTIPLY";break;case 1:b="ENVMAP_BLENDING_MIX";break;case 2:b="ENVMAP_BLENDING_ADD"}return b}function jn(a){a=a.envMapCubeUVHeight;if(null===a)return null;const b=Math.log2(a)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,b),112)),texelHeight:1/a,maxMip:b}}function kn(a,b,c,e){function g(xa){if(a.debug.checkShaderErrors){var ta=
h.getProgramInfoLog(A).trim(),Da=h.getShaderInfoLog(R).trim(),Va=h.getShaderInfoLog(U).trim(),ra=!0,Xa=!0;if(!1===h.getProgramParameter(A,h.LINK_STATUS))if(ra=!1,"function"===typeof a.debug.onShaderError)a.debug.onShaderError(h,A,R,U);else{const Ja=Bk(h,R,"vertex"),ib=Bk(h,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(A,h.VALIDATE_STATUS)+"\n\nMaterial Name: "+xa.name+"\nMaterial Type: "+xa.type+"\n\nProgram Info Log: "+ta+
"\n"+Ja+"\n"+ib)}else if(""!==ta)console.warn("THREE.WebGLProgram: Program Info Log:",ta);else if(""===Da||""===Va)Xa=!1;Xa&&(xa.diagnostics={runnable:ra,programLog:ta,vertexShader:{log:Da,prefix:K},fragmentShader:{log:Va,prefix:oa}})}h.deleteShader(R);h.deleteShader(U);ja=new ef(h,A);xa={};ta=h.getProgramParameter(A,h.ACTIVE_ATTRIBUTES);for(Da=0;Da<ta;Da++)Va=h.getActiveAttrib(A,Da),ra=Va.name,Xa=1,Va.type===h.FLOAT_MAT2&&(Xa=2),Va.type===h.FLOAT_MAT3&&(Xa=3),Va.type===h.FLOAT_MAT4&&(Xa=4),xa[ra]=
{type:Va.type,location:h.getAttribLocation(A,ra),locationSize:Xa};ka=xa}const h=a.getContext();var l=c.defines;let n=c.vertexShader;var m=c.fragmentShader;const q=Nl(c),u=fn(c),t=gn(c),w=hn(c),B=jn(c),z=c.isWebGL2?"":[c.extensionDerivatives||c.envMapCubeUVHeight||c.bumpMap||c.normalMapTangentSpace||c.clearcoatNormalMap||c.flatShading||c.alphaToCoverage||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?
"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vg).join("\n"),D=[c.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",c.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vg).join("\n"),J=en(l),A=h.createProgram();
let K,oa;l=c.glslVersion?"#version "+c.glslVersion+"\n":"";c.isRawShaderMaterial?(K=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,J].filter(vg).join("\n"),0<K.length&&(K+="\n"),oa=[z,"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,J].filter(vg).join("\n"),0<oa.length&&(oa+="\n")):(K=[Ek(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,J,c.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",c.batching?"#define USE_BATCHING":
"",c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.instancingMorph?"#define USE_INSTANCING_MORPH":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+t:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":
"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.displacementMap?"#define USE_DISPLACEMENTMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":
"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":
"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.mapUv?"#define MAP_UV "+c.mapUv:"",c.alphaMapUv?"#define ALPHAMAP_UV "+c.alphaMapUv:"",c.lightMapUv?"#define LIGHTMAP_UV "+c.lightMapUv:"",c.aoMapUv?"#define AOMAP_UV "+c.aoMapUv:"",c.emissiveMapUv?"#define EMISSIVEMAP_UV "+c.emissiveMapUv:"",c.bumpMapUv?"#define BUMPMAP_UV "+c.bumpMapUv:"",c.normalMapUv?"#define NORMALMAP_UV "+c.normalMapUv:"",c.displacementMapUv?"#define DISPLACEMENTMAP_UV "+c.displacementMapUv:"",c.metalnessMapUv?"#define METALNESSMAP_UV "+
c.metalnessMapUv:"",c.roughnessMapUv?"#define ROUGHNESSMAP_UV "+c.roughnessMapUv:"",c.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+c.anisotropyMapUv:"",c.clearcoatMapUv?"#define CLEARCOATMAP_UV "+c.clearcoatMapUv:"",c.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+c.clearcoatNormalMapUv:"",c.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+c.clearcoatRoughnessMapUv:"",c.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+c.iridescenceMapUv:"",c.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+
c.iridescenceThicknessMapUv:"",c.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+c.sheenColorMapUv:"",c.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+c.sheenRoughnessMapUv:"",c.specularMapUv?"#define SPECULARMAP_UV "+c.specularMapUv:"",c.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+c.specularColorMapUv:"",c.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+c.specularIntensityMapUv:"",c.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+c.transmissionMapUv:"",c.thicknessMapUv?"#define THICKNESSMAP_UV "+
c.thicknessMapUv:"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.morphColors&&
c.isWebGL2?"#define USE_MORPHCOLORS":"",0<c.morphTargetsCount&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<c.morphTargetsCount&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",0<c.morphTargetsCount&&c.isWebGL2?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+q:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",0<
c.numLightProbes?"#define USE_LIGHT_PROBES":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;",
"#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )",
"\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) \x26\x26 ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;",
"\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(vg).join("\n"),oa=[z,Ek(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,J,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+
u:"",c.envMap?"#define "+t:"",c.envMap?"#define "+w:"",B?"#define CUBEUV_TEXEL_WIDTH "+B.texelWidth:"",B?"#define CUBEUV_TEXEL_HEIGHT "+B.texelHeight:"",B?"#define CUBEUV_MAX_MIP "+B.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.emissiveMap?"#define USE_EMISSIVEMAP":
"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?
"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":
"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":
"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+q:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",0<c.numLightProbes?"#define USE_LIGHT_PROBES":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",
0!==c.toneMapping?"#define TONE_MAPPING":"",0!==c.toneMapping?Vb.tonemapping_pars_fragment:"",0!==c.toneMapping?dn("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",Vb.colorspace_pars_fragment,Kl("linearToOutputTexel",c.outputColorSpace),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(vg).join("\n"));n=n.replace(Uh,fh);n=Ck(n,c);n=Ll(n,c);m=m.replace(Uh,fh);m=Ck(m,c);m=Ll(m,c);n=n.replace(Fk,Ml);m=m.replace(Fk,Ml);c.isWebGL2&&
!0!==c.isRawShaderMaterial&&(l="#version 300 es\n",K=[D,"precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture"].join("\n")+"\n"+K,oa=["precision mediump sampler2DArray;\n#define varying in","300 es"===c.glslVersion?"":"layout(location \x3d 0) out highp vec4 pc_fragColor;","300 es"===c.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+oa);m=l+oa+m;const R=jj(h,h.VERTEX_SHADER,l+K+n),U=jj(h,h.FRAGMENT_SHADER,m);h.attachShader(A,R);h.attachShader(A,U);void 0!==c.index0AttributeName?h.bindAttribLocation(A,0,c.index0AttributeName):!0===c.morphTargets&&h.bindAttribLocation(A,0,"position");h.linkProgram(A);let ja;this.getUniforms=function(){void 0===ja&&g(this);return ja};let ka;this.getAttributes=function(){void 0===ka&&g(this);return ka};let ea=!1===c.rendererExtensionParallelShaderCompile;this.isReady=function(){!1===ea&&(ea=
h.getProgramParameter(A,37297));return ea};this.destroy=function(){e.releaseStatesOfProgram(this);h.deleteProgram(A);this.program=void 0};this.type=c.shaderType;this.name=c.shaderName;this.id=gh++;this.cacheKey=b;this.usedTimes=1;this.program=A;this.vertexShader=R;this.fragmentShader=U;return this}function Vh(a,b,c,e,g,h,l){function n(A){u.add(A);return 0===A?"uv":`uv${A}`}const m=new Wh,q=new Gk,u=new Set,t=[],w=g.isWebGL2,B=g.logarithmicDepthBuffer,z=g.vertexTextures;let D=g.precision;const J={MeshDepthMaterial:"depth",
MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(A,K,oa,R,U){const ja=R.fog,ka=U.geometry;R=A.isMeshStandardMaterial?R.environment:
null;const ea=(R=(A.isMeshStandardMaterial?c:b).get(A.envMap||R))&&306===R.mapping?R.image.height:null,xa=J[A.type];null!==A.precision&&(D=g.getMaxPrecision(A.precision),D!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",D,"instead."));var ta=ka.morphAttributes.position||ka.morphAttributes.normal||ka.morphAttributes.color;ta=void 0!==ta?ta.length:0;let Da=0;void 0!==ka.morphAttributes.position&&(Da=1);void 0!==ka.morphAttributes.normal&&(Da=2);void 0!==
ka.morphAttributes.color&&(Da=3);let Va;let ra,Xa;if(xa){var Ja=Ce[xa];Va=Ja.vertexShader;Ja=Ja.fragmentShader}else Va=A.vertexShader,Ja=A.fragmentShader,q.update(A),ra=q.getVertexShaderID(A),Xa=q.getFragmentShaderID(A);const ib=a.getRenderTarget(),Cb=!0===U.isInstancedMesh,xb=!0===U.isBatchedMesh,Ya=!!A.map,Ra=!!A.matcap,$a=!!R,vb=!!A.aoMap,G=!!A.lightMap,H=!!A.bumpMap,M=!!A.normalMap,Z=!!A.displacementMap,V=!!A.emissiveMap,Ga=!!A.metalnessMap,fb=!!A.roughnessMap,Wa=0<A.anisotropy,Ea=0<A.clearcoat,
P=0<A.iridescence,Ha=0<A.sheen,za=0<A.transmission,db=Wa&&!!A.anisotropyMap,jb=Ea&&!!A.clearcoatMap,Qb=Ea&&!!A.clearcoatNormalMap,Eb=Ea&&!!A.clearcoatRoughnessMap,tc=P&&!!A.iridescenceMap,Ad=P&&!!A.iridescenceThicknessMap,uc=Ha&&!!A.sheenColorMap,Nc=Ha&&!!A.sheenRoughnessMap,be=!!A.specularMap,hh=!!A.specularColorMap,ff=!!A.specularIntensityMap,kj=za&&!!A.transmissionMap,Ba=za&&!!A.thicknessMap,Vc=!!A.gradientMap,yc=!!A.alphaMap,nc=0<A.alphaTest,De=!!A.alphaHash,oc=!!A.extensions;let Ac=0;!A.toneMapped||
null!==ib&&!0!==ib.isXRRenderTarget||(Ac=a.toneMapping);A={isWebGL2:w,shaderID:xa,shaderType:A.type,shaderName:A.name,vertexShader:Va,fragmentShader:Ja,defines:A.defines,customVertexShaderID:ra,customFragmentShaderID:Xa,isRawShaderMaterial:!0===A.isRawShaderMaterial,glslVersion:A.glslVersion,precision:D,batching:xb,instancing:Cb,instancingColor:Cb&&null!==U.instanceColor,instancingMorph:Cb&&null!==U.morphTexture,supportsVertexTextures:z,outputColorSpace:null===ib?a.outputColorSpace:!0===ib.isXRRenderTarget?
ib.texture.colorSpace:"srgb-linear",alphaToCoverage:!!A.alphaToCoverage,map:Ya,matcap:Ra,envMap:$a,envMapMode:$a&&R.mapping,envMapCubeUVHeight:ea,aoMap:vb,lightMap:G,bumpMap:H,normalMap:M,displacementMap:z&&Z,emissiveMap:V,normalMapObjectSpace:M&&1===A.normalMapType,normalMapTangentSpace:M&&0===A.normalMapType,metalnessMap:Ga,roughnessMap:fb,anisotropy:Wa,anisotropyMap:db,clearcoat:Ea,clearcoatMap:jb,clearcoatNormalMap:Qb,clearcoatRoughnessMap:Eb,iridescence:P,iridescenceMap:tc,iridescenceThicknessMap:Ad,
sheen:Ha,sheenColorMap:uc,sheenRoughnessMap:Nc,specularMap:be,specularColorMap:hh,specularIntensityMap:ff,transmission:za,transmissionMap:kj,thicknessMap:Ba,gradientMap:Vc,opaque:!1===A.transparent&&1===A.blending&&!1===A.alphaToCoverage,alphaMap:yc,alphaTest:nc,alphaHash:De,combine:A.combine,mapUv:Ya&&n(A.map.channel),aoMapUv:vb&&n(A.aoMap.channel),lightMapUv:G&&n(A.lightMap.channel),bumpMapUv:H&&n(A.bumpMap.channel),normalMapUv:M&&n(A.normalMap.channel),displacementMapUv:Z&&n(A.displacementMap.channel),
emissiveMapUv:V&&n(A.emissiveMap.channel),metalnessMapUv:Ga&&n(A.metalnessMap.channel),roughnessMapUv:fb&&n(A.roughnessMap.channel),anisotropyMapUv:db&&n(A.anisotropyMap.channel),clearcoatMapUv:jb&&n(A.clearcoatMap.channel),clearcoatNormalMapUv:Qb&&n(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Eb&&n(A.clearcoatRoughnessMap.channel),iridescenceMapUv:tc&&n(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ad&&n(A.iridescenceThicknessMap.channel),sheenColorMapUv:uc&&n(A.sheenColorMap.channel),
sheenRoughnessMapUv:Nc&&n(A.sheenRoughnessMap.channel),specularMapUv:be&&n(A.specularMap.channel),specularColorMapUv:hh&&n(A.specularColorMap.channel),specularIntensityMapUv:ff&&n(A.specularIntensityMap.channel),transmissionMapUv:kj&&n(A.transmissionMap.channel),thicknessMapUv:Ba&&n(A.thicknessMap.channel),alphaMapUv:yc&&n(A.alphaMap.channel),vertexTangents:!!ka.attributes.tangent&&(M||Wa),vertexColors:A.vertexColors,vertexAlphas:!0===A.vertexColors&&!!ka.attributes.color&&4===ka.attributes.color.itemSize,
pointsUvs:!0===U.isPoints&&!!ka.attributes.uv&&(Ya||yc),fog:!!ja,useFog:!0===A.fog,fogExp2:!!ja&&ja.isFogExp2,flatShading:!0===A.flatShading,sizeAttenuation:!0===A.sizeAttenuation,logarithmicDepthBuffer:B,skinning:!0===U.isSkinnedMesh,morphTargets:void 0!==ka.morphAttributes.position,morphNormals:void 0!==ka.morphAttributes.normal,morphColors:void 0!==ka.morphAttributes.color,morphTargetsCount:ta,morphTextureStride:Da,numDirLights:K.directional.length,numPointLights:K.point.length,numSpotLights:K.spot.length,
numSpotLightMaps:K.spotLightMap.length,numRectAreaLights:K.rectArea.length,numHemiLights:K.hemi.length,numDirLightShadows:K.directionalShadowMap.length,numPointLightShadows:K.pointShadowMap.length,numSpotLightShadows:K.spotShadowMap.length,numSpotLightShadowsWithMaps:K.numSpotLightShadowsWithMaps,numLightProbes:K.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:A.dithering,shadowMapEnabled:a.shadowMap.enabled&&0<oa.length,shadowMapType:a.shadowMap.type,
toneMapping:Ac,useLegacyLights:a._useLegacyLights,decodeVideoTexture:Ya&&!0===A.map.isVideoTexture&&"srgb"===lc.getTransfer(A.map.colorSpace),premultipliedAlpha:A.premultipliedAlpha,doubleSided:2===A.side,flipSided:1===A.side,useDepthPacking:0<=A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:oc&&!0===A.extensions.derivatives,extensionFragDepth:oc&&!0===A.extensions.fragDepth,extensionDrawBuffers:oc&&!0===A.extensions.drawBuffers,extensionShaderTextureLOD:oc&&
!0===A.extensions.shaderTextureLOD,extensionClipCullDistance:oc&&!0===A.extensions.clipCullDistance&&e.has("WEBGL_clip_cull_distance"),extensionMultiDraw:oc&&!0===A.extensions.multiDraw&&e.has("WEBGL_multi_draw"),rendererExtensionFragDepth:w||e.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||e.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||e.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:e.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};
A.vertexUv1s=u.has(1);A.vertexUv2s=u.has(2);A.vertexUv3s=u.has(3);u.clear();return A},getProgramCacheKey:function(A){const K=[];A.shaderID?K.push(A.shaderID):(K.push(A.customVertexShaderID),K.push(A.customFragmentShaderID));if(void 0!==A.defines)for(const oa in A.defines)K.push(oa),K.push(A.defines[oa]);!1===A.isRawShaderMaterial&&(K.push(A.precision),K.push(A.outputColorSpace),K.push(A.envMapMode),K.push(A.envMapCubeUVHeight),K.push(A.mapUv),K.push(A.alphaMapUv),K.push(A.lightMapUv),K.push(A.aoMapUv),
K.push(A.bumpMapUv),K.push(A.normalMapUv),K.push(A.displacementMapUv),K.push(A.emissiveMapUv),K.push(A.metalnessMapUv),K.push(A.roughnessMapUv),K.push(A.anisotropyMapUv),K.push(A.clearcoatMapUv),K.push(A.clearcoatNormalMapUv),K.push(A.clearcoatRoughnessMapUv),K.push(A.iridescenceMapUv),K.push(A.iridescenceThicknessMapUv),K.push(A.sheenColorMapUv),K.push(A.sheenRoughnessMapUv),K.push(A.specularMapUv),K.push(A.specularColorMapUv),K.push(A.specularIntensityMapUv),K.push(A.transmissionMapUv),K.push(A.thicknessMapUv),
K.push(A.combine),K.push(A.fogExp2),K.push(A.sizeAttenuation),K.push(A.morphTargetsCount),K.push(A.morphAttributeCount),K.push(A.numDirLights),K.push(A.numPointLights),K.push(A.numSpotLights),K.push(A.numSpotLightMaps),K.push(A.numHemiLights),K.push(A.numRectAreaLights),K.push(A.numDirLightShadows),K.push(A.numPointLightShadows),K.push(A.numSpotLightShadows),K.push(A.numSpotLightShadowsWithMaps),K.push(A.numLightProbes),K.push(A.shadowMapType),K.push(A.toneMapping),K.push(A.numClippingPlanes),K.push(A.numClipIntersection),
K.push(A.depthPacking),m.disableAll(),A.isWebGL2&&m.enable(0),A.supportsVertexTextures&&m.enable(1),A.instancing&&m.enable(2),A.instancingColor&&m.enable(3),A.instancingMorph&&m.enable(4),A.matcap&&m.enable(5),A.envMap&&m.enable(6),A.normalMapObjectSpace&&m.enable(7),A.normalMapTangentSpace&&m.enable(8),A.clearcoat&&m.enable(9),A.iridescence&&m.enable(10),A.alphaTest&&m.enable(11),A.vertexColors&&m.enable(12),A.vertexAlphas&&m.enable(13),A.vertexUv1s&&m.enable(14),A.vertexUv2s&&m.enable(15),A.vertexUv3s&&
m.enable(16),A.vertexTangents&&m.enable(17),A.anisotropy&&m.enable(18),A.alphaHash&&m.enable(19),A.batching&&m.enable(20),K.push(m.mask),m.disableAll(),A.fog&&m.enable(0),A.useFog&&m.enable(1),A.flatShading&&m.enable(2),A.logarithmicDepthBuffer&&m.enable(3),A.skinning&&m.enable(4),A.morphTargets&&m.enable(5),A.morphNormals&&m.enable(6),A.morphColors&&m.enable(7),A.premultipliedAlpha&&m.enable(8),A.shadowMapEnabled&&m.enable(9),A.useLegacyLights&&m.enable(10),A.doubleSided&&m.enable(11),A.flipSided&&
m.enable(12),A.useDepthPacking&&m.enable(13),A.dithering&&m.enable(14),A.transmission&&m.enable(15),A.sheen&&m.enable(16),A.opaque&&m.enable(17),A.pointsUvs&&m.enable(18),A.decodeVideoTexture&&m.enable(19),A.alphaToCoverage&&m.enable(20),K.push(m.mask),K.push(a.outputColorSpace));K.push(A.customProgramCacheKey);return K.join()},getUniforms:function(A){const K=J[A.type];return K?Nf.clone(Ce[K].uniforms):A.uniforms},acquireProgram:function(A,K){let oa;for(let R=0,U=t.length;R<U;R++){const ja=t[R];if(ja.cacheKey===
K){oa=ja;++oa.usedTimes;break}}void 0===oa&&(oa=new kn(a,K,A,h),t.push(oa));return oa},releaseProgram:function(A){if(0===--A.usedTimes){const K=t.indexOf(A);t[K]=t[t.length-1];t.pop();A.destroy()}},releaseShaderCache:function(A){q.remove(A)},programs:t,dispose:function(){q.dispose()}}}function Ol(){let a=new WeakMap;return{get:function(b){let c=a.get(b);void 0===c&&(c={},a.set(b,c));return c},remove:function(b){a.delete(b)},update:function(b,c,e){a.get(b)[c]=e},dispose:function(){a=new WeakMap}}}
function Pl(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Hk(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Ik(){function a(l,n,m,q,u,t){let w=b[c];void 0===w?(w={id:l.id,object:l,geometry:n,material:m,groupOrder:q,
renderOrder:l.renderOrder,z:u,group:t},b[c]=w):(w.id=l.id,w.object=l,w.geometry=n,w.material=m,w.groupOrder=q,w.renderOrder=l.renderOrder,w.z=u,w.group=t);c++;return w}const b=[];let c=0;const e=[],g=[],h=[];return{opaque:e,transmissive:g,transparent:h,init:function(){c=0;e.length=0;g.length=0;h.length=0},push:function(l,n,m,q,u,t){l=a(l,n,m,q,u,t);0<m.transmission?g.push(l):!0===m.transparent?h.push(l):e.push(l)},unshift:function(l,n,m,q,u,t){l=a(l,n,m,q,u,t);0<m.transmission?g.unshift(l):!0===m.transparent?
h.unshift(l):e.unshift(l)},finish:function(){for(let l=c,n=b.length;l<n;l++){const m=b[l];if(null===m.id)break;m.id=null;m.object=null;m.geometry=null;m.material=null;m.group=null}},sort:function(l,n){1<e.length&&e.sort(l||Pl);1<g.length&&g.sort(n||Hk);1<h.length&&h.sort(n||Hk)}}}function Jk(){let a=new WeakMap;return{get:function(b,c){const e=a.get(b);void 0===e?(c=new Ik,a.set(b,[c])):c>=e.length?(c=new Ik,e.push(c)):c=e[c];return c},dispose:function(){a=new WeakMap}}}function ln(){const a={};return{get:function(b){if(void 0!==
a[b.id])return a[b.id];let c;switch(b.type){case "DirectionalLight":c={direction:new O,color:new nb};break;case "SpotLight":c={position:new O,direction:new O,color:new nb,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":c={position:new O,color:new nb,distance:0,decay:0};break;case "HemisphereLight":c={direction:new O,skyColor:new nb,groundColor:new nb};break;case "RectAreaLight":c={color:new nb,position:new O,halfWidth:new O,halfHeight:new O}}return a[b.id]=c}}}function Ql(){const a=
{};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let c;switch(b.type){case "DirectionalLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fa};break;case "SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fa};break;case "PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fa,shadowCameraNear:1,shadowCameraFar:1E3}}return a[b.id]=c}}}function lj(a,b){return(b.castShadow?2:0)-(a.castShadow?2:0)+(b.map?1:0)-(a.map?
1:0)}function mj(a,b){const c=new ln,e=Ql(),g={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],
pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;9>m;m++)g.probe.push(new O);const h=new O,l=new Mb,n=new Mb;return{setup:function(m,q){let u=0,t=0,w=0;for(var B=0;9>B;B++)g.probe[B].set(0,0,0);let z=B=0,D=0,J=0,A=0,K=0,oa=0,R=0,U=0,ja=0,ka=0;m.sort(lj);q=!0===q?Math.PI:1;for(let ra=0,Xa=m.length;ra<Xa;ra++){var ea=m[ra],xa=ea.color,ta=ea.intensity,Da=ea.distance,Va=ea.shadow&&ea.shadow.map?ea.shadow.map.texture:null;if(ea.isAmbientLight)u+=xa.r*ta*q,t+=xa.g*
ta*q,w+=xa.b*ta*q;else if(ea.isLightProbe){for(Va=0;9>Va;Va++)g.probe[Va].addScaledVector(ea.sh.coefficients[Va],ta);ka++}else if(ea.isDirectionalLight)ta=c.get(ea),ta.color.copy(ea.color).multiplyScalar(ea.intensity*q),ea.castShadow&&(xa=ea.shadow,Da=e.get(ea),Da.shadowBias=xa.bias,Da.shadowNormalBias=xa.normalBias,Da.shadowRadius=xa.radius,Da.shadowMapSize=xa.mapSize,g.directionalShadow[B]=Da,g.directionalShadowMap[B]=Va,g.directionalShadowMatrix[B]=ea.shadow.matrix,K++),g.directional[B]=ta,B++;
else if(ea.isSpotLight){const Ja=c.get(ea);Ja.position.setFromMatrixPosition(ea.matrixWorld);Ja.color.copy(xa).multiplyScalar(ta*q);Ja.distance=Da;Ja.coneCos=Math.cos(ea.angle);Ja.penumbraCos=Math.cos(ea.angle*(1-ea.penumbra));Ja.decay=ea.decay;g.spot[D]=Ja;ta=ea.shadow;ea.map&&(g.spotLightMap[U]=ea.map,U++,ta.updateMatrices(ea),ea.castShadow&&ja++);g.spotLightMatrix[D]=ta.matrix;ea.castShadow&&(ea=e.get(ea),ea.shadowBias=ta.bias,ea.shadowNormalBias=ta.normalBias,ea.shadowRadius=ta.radius,ea.shadowMapSize=
ta.mapSize,g.spotShadow[D]=ea,g.spotShadowMap[D]=Va,R++);D++}else ea.isRectAreaLight?(Va=c.get(ea),Va.color.copy(xa).multiplyScalar(ta),Va.halfWidth.set(.5*ea.width,0,0),Va.halfHeight.set(0,.5*ea.height,0),g.rectArea[J]=Va,J++):ea.isPointLight?(ta=c.get(ea),ta.color.copy(ea.color).multiplyScalar(ea.intensity*q),ta.distance=ea.distance,ta.decay=ea.decay,ea.castShadow&&(xa=ea.shadow,Da=e.get(ea),Da.shadowBias=xa.bias,Da.shadowNormalBias=xa.normalBias,Da.shadowRadius=xa.radius,Da.shadowMapSize=xa.mapSize,
Da.shadowCameraNear=xa.camera.near,Da.shadowCameraFar=xa.camera.far,g.pointShadow[z]=Da,g.pointShadowMap[z]=Va,g.pointShadowMatrix[z]=ea.shadow.matrix,oa++),g.point[z]=ta,z++):ea.isHemisphereLight&&(Va=c.get(ea),Va.skyColor.copy(ea.color).multiplyScalar(ta*q),Va.groundColor.copy(ea.groundColor).multiplyScalar(ta*q),g.hemi[A]=Va,A++)}0<J&&(b.isWebGL2?!0===a.has("OES_texture_float_linear")?(g.rectAreaLTC1=eb.LTC_FLOAT_1,g.rectAreaLTC2=eb.LTC_FLOAT_2):(g.rectAreaLTC1=eb.LTC_HALF_1,g.rectAreaLTC2=eb.LTC_HALF_2):
!0===a.has("OES_texture_float_linear")?(g.rectAreaLTC1=eb.LTC_FLOAT_1,g.rectAreaLTC2=eb.LTC_FLOAT_2):!0===a.has("OES_texture_half_float_linear")?(g.rectAreaLTC1=eb.LTC_HALF_1,g.rectAreaLTC2=eb.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));g.ambient[0]=u;g.ambient[1]=t;g.ambient[2]=w;m=g.hash;if(m.directionalLength!==B||m.pointLength!==z||m.spotLength!==D||m.rectAreaLength!==J||m.hemiLength!==A||m.numDirectionalShadows!==K||m.numPointShadows!==
oa||m.numSpotShadows!==R||m.numSpotMaps!==U||m.numLightProbes!==ka)g.directional.length=B,g.spot.length=D,g.rectArea.length=J,g.point.length=z,g.hemi.length=A,g.directionalShadow.length=K,g.directionalShadowMap.length=K,g.pointShadow.length=oa,g.pointShadowMap.length=oa,g.spotShadow.length=R,g.spotShadowMap.length=R,g.directionalShadowMatrix.length=K,g.pointShadowMatrix.length=oa,g.spotLightMatrix.length=R+U-ja,g.spotLightMap.length=U,g.numSpotLightShadowsWithMaps=ja,g.numLightProbes=ka,m.directionalLength=
B,m.pointLength=z,m.spotLength=D,m.rectAreaLength=J,m.hemiLength=A,m.numDirectionalShadows=K,m.numPointShadows=oa,m.numSpotShadows=R,m.numSpotMaps=U,m.numLightProbes=ka,g.version=Kk++},setupView:function(m,q){let u=0,t=0,w=0,B=0,z=0;q=q.matrixWorldInverse;for(let J=0,A=m.length;J<A;J++){const K=m[J];if(K.isDirectionalLight){var D=g.directional[u];D.direction.setFromMatrixPosition(K.matrixWorld);h.setFromMatrixPosition(K.target.matrixWorld);D.direction.sub(h);D.direction.transformDirection(q);u++}else K.isSpotLight?
(D=g.spot[w],D.position.setFromMatrixPosition(K.matrixWorld),D.position.applyMatrix4(q),D.direction.setFromMatrixPosition(K.matrixWorld),h.setFromMatrixPosition(K.target.matrixWorld),D.direction.sub(h),D.direction.transformDirection(q),w++):K.isRectAreaLight?(D=g.rectArea[B],D.position.setFromMatrixPosition(K.matrixWorld),D.position.applyMatrix4(q),n.identity(),l.copy(K.matrixWorld),l.premultiply(q),n.extractRotation(l),D.halfWidth.set(.5*K.width,0,0),D.halfHeight.set(0,.5*K.height,0),D.halfWidth.applyMatrix4(n),
D.halfHeight.applyMatrix4(n),B++):K.isPointLight?(D=g.point[t],D.position.setFromMatrixPosition(K.matrixWorld),D.position.applyMatrix4(q),t++):K.isHemisphereLight&&(D=g.hemi[z],D.direction.setFromMatrixPosition(K.matrixWorld),D.direction.transformDirection(q),z++)}},state:g}}function gf(a,b){const c=new mj(a,b),e=[],g=[];return{init:function(){e.length=0;g.length=0},state:{lightsArray:e,shadowsArray:g,lights:c},setupLights:function(h){c.setup(e,h)},setupLightsView:function(h){c.setupView(e,h)},pushLight:function(h){e.push(h)},
pushShadow:function(h){g.push(h)}}}function Rl(a,b){let c=new WeakMap;return{get:function(e,g=0){const h=c.get(e);void 0===h?(g=new gf(a,b),c.set(e,[g])):g>=h.length?(g=new gf(a,b),h.push(g)):g=h[g];return g},dispose:function(){c=new WeakMap}}}function Sl(a,b,c){function e(R,U,ja,ka){R=!0===ja.isPointLight?R.customDistanceMaterial:R.customDepthMaterial;if(void 0===R&&(R=!0===ja.isPointLight?t:u,a.localClippingEnabled&&!0===U.clipShadows&&Array.isArray(U.clippingPlanes)&&0!==U.clippingPlanes.length||
U.displacementMap&&0!==U.displacementScale||U.alphaMap&&0<U.alphaTest||U.map&&0<U.alphaTest)){var ea=R.uuid;const xa=U.uuid;let ta=w[ea];void 0===ta&&(ta={},w[ea]=ta);ea=ta[xa];void 0===ea&&(ea=R.clone(),ta[xa]=ea,U.addEventListener("dispose",h));R=ea}R.visible=U.visible;R.wireframe=U.wireframe;R.side=3===ka?null!==U.shadowSide?U.shadowSide:U.side:null!==U.shadowSide?U.shadowSide:z[U.side];R.alphaMap=U.alphaMap;R.alphaTest=U.alphaTest;R.map=U.map;R.clipShadows=U.clipShadows;R.clippingPlanes=U.clippingPlanes;
R.clipIntersection=U.clipIntersection;R.displacementMap=U.displacementMap;R.displacementScale=U.displacementScale;R.displacementBias=U.displacementBias;R.wireframeLinewidth=U.wireframeLinewidth;R.linewidth=U.linewidth;!0===ja.isPointLight&&!0===R.isMeshDistanceMaterial&&(a.properties.get(R).light=ja);return R}function g(R,U,ja,ka,ea){if(!1!==R.visible){if(R.layers.test(U.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&3===ea)&&(!R.frustumCulled||l.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(ja.matrixWorldInverse,
R.matrixWorld);const Da=b.update(R);var xa=R.material;if(Array.isArray(xa)){const Va=Da.groups;for(let ra=0,Xa=Va.length;ra<Xa;ra++){const Ja=Va[ra];var ta=xa[Ja.materialIndex];ta&&ta.visible&&(ta=e(R,ta,ka,ea),R.onBeforeShadow(a,R,U,ja,Da,ta,Ja),a.renderBufferDirect(ja,null,Da,ta,R,Ja),R.onAfterShadow(a,R,U,ja,Da,ta,Ja))}}else xa.visible&&(xa=e(R,xa,ka,ea),R.onBeforeShadow(a,R,U,ja,Da,xa,null),a.renderBufferDirect(ja,null,Da,xa,R,null),R.onAfterShadow(a,R,U,ja,Da,xa,null))}R=R.children;for(let Da=
0,Va=R.length;Da<Va;Da++)g(R[Da],U,ja,ka,ea)}}function h(R){R.target.removeEventListener("dispose",h);for(const U in w){const ja=w[U],ka=R.target.uuid;ka in ja&&(ja[ka].dispose(),delete ja[ka])}}let l=new Ee;const n=new Fa,m=new Fa,q=new mc,u=new Xh({depthPacking:3201}),t=new Pe,w={},B=c.maxTextureSize,z={[0]:1,[1]:0,[2]:2},D=new Be({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fa},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position \x3d vec4( position, 1.0 );\n}",
fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include \x3cpacking\x3e\nvoid main() {\n\tconst float samples \x3d float( VSM_SAMPLES );\n\tfloat mean \x3d 0.0;\n\tfloat squared_mean \x3d 0.0;\n\tfloat uvStride \x3d samples \x3c\x3d 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart \x3d samples \x3c\x3d 1.0 ? 0.0 : - 1.0;\n\tfor ( float i \x3d 0.0; i \x3c samples; i ++ ) {\n\t\tfloat uvOffset \x3d uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution \x3d unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean +\x3d distribution.x;\n\t\t\tsquared_mean +\x3d distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth \x3d unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean +\x3d depth;\n\t\t\tsquared_mean +\x3d depth * depth;\n\t\t#endif\n\t}\n\tmean \x3d mean / samples;\n\tsquared_mean \x3d squared_mean / samples;\n\tfloat std_dev \x3d sqrt( squared_mean - mean * mean );\n\tgl_FragColor \x3d pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
J=D.clone();J.defines.HORIZONTAL_PASS=1;c=new Kb;c.setAttribute("position",new pc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Uc(c,D),K=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;let oa=this.type=1;this.render=function(R,U,ja){if(!1!==K.enabled&&(!1!==K.autoUpdate||!1!==K.needsUpdate)&&0!==R.length){var ka=a.getRenderTarget(),ea=a.getActiveCubeFace(),xa=a.getActiveMipmapLevel(),ta=a.state;ta.setBlending(0);ta.buffers.color.setClear(1,1,1,1);ta.buffers.depth.setTest(!0);
ta.setScissorTest(!1);var Da=3!==oa&&3===this.type,Va=3===oa&&3!==this.type;for(let ib=0,Cb=R.length;ib<Cb;ib++){var ra=R[ib];const xb=ra.shadow;if(void 0===xb)console.warn("THREE.WebGLShadowMap:",ra,"has no shadow.");else if(!1!==xb.autoUpdate||!1!==xb.needsUpdate){n.copy(xb.mapSize);var Xa=xb.getFrameExtents();n.multiply(Xa);m.copy(xb.mapSize);if(n.x>B||n.y>B)n.x>B&&(m.x=Math.floor(B/Xa.x),n.x=m.x*Xa.x,xb.mapSize.x=m.x),n.y>B&&(m.y=Math.floor(B/Xa.y),n.y=m.y*Xa.y,xb.mapSize.y=m.y);if(null===xb.map||
!0===Da||!0===Va)Xa=3!==this.type?{minFilter:1003,magFilter:1003}:{},null!==xb.map&&xb.map.dispose(),xb.map=new Rd(n.x,n.y,Xa),xb.map.texture.name=ra.name+".shadowMap",xb.camera.updateProjectionMatrix();a.setRenderTarget(xb.map);a.clear();Xa=xb.getViewportCount();for(var Ja=0;Ja<Xa;Ja++){const Ya=xb.getViewport(Ja);q.set(m.x*Ya.x,m.y*Ya.y,m.x*Ya.z,m.y*Ya.w);ta.viewport(q);xb.updateMatrices(ra,Ja);l=xb.getFrustum();g(U,ja,xb.camera,ra,this.type)}!0!==xb.isPointLightShadow&&3===this.type&&(ra=xb,Xa=
ja,Ja=b.update(A),D.defines.VSM_SAMPLES!==ra.blurSamples&&(D.defines.VSM_SAMPLES=ra.blurSamples,J.defines.VSM_SAMPLES=ra.blurSamples,D.needsUpdate=!0,J.needsUpdate=!0),null===ra.mapPass&&(ra.mapPass=new Rd(n.x,n.y)),D.uniforms.shadow_pass.value=ra.map.texture,D.uniforms.resolution.value=ra.mapSize,D.uniforms.radius.value=ra.radius,a.setRenderTarget(ra.mapPass),a.clear(),a.renderBufferDirect(Xa,null,Ja,D,A,null),J.uniforms.shadow_pass.value=ra.mapPass.texture,J.uniforms.resolution.value=ra.mapSize,
J.uniforms.radius.value=ra.radius,a.setRenderTarget(ra.map),a.clear(),a.renderBufferDirect(Xa,null,Ja,J,A,null));xb.needsUpdate=!1}}oa=this.type;K.needsUpdate=!1;a.setRenderTarget(ka,ea,xa)}}}function Bc(a,b,c){function e(P,Ha,za,db){const jb=new Uint8Array(4),Qb=a.createTexture();a.bindTexture(P,Qb);a.texParameteri(P,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(P,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let Eb=0;Eb<za;Eb++)!u||P!==a.TEXTURE_3D&&P!==a.TEXTURE_2D_ARRAY?a.texImage2D(Ha+Eb,0,a.RGBA,1,
1,0,a.RGBA,a.UNSIGNED_BYTE,jb):a.texImage3D(Ha,0,a.RGBA,1,1,db,0,a.RGBA,a.UNSIGNED_BYTE,jb);return Qb}function g(P){!0!==J[P]&&(a.enable(P),J[P]=!0)}function h(P){!1!==J[P]&&(a.disable(P),J[P]=!1)}function l(P,Ha,za,db,jb,Qb,Eb,tc,Ad,uc){if(0===P)!0===U&&(h(a.BLEND),U=!1);else if(!1===U&&(g(a.BLEND),U=!0),5!==P){if(P!==ja||uc!==Ja){if(100!==ka||100!==ta)a.blendEquation(a.FUNC_ADD),ta=ka=100;if(uc)switch(P){case 1:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.ONE,
a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",P)}else switch(P){case 1:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case 4:a.blendFunc(a.ZERO,a.SRC_COLOR);break;
default:console.error("THREE.WebGLState: Invalid blending: ",P)}Va=Da=xa=ea=null;ra.set(0,0,0);Xa=0;ja=P;Ja=uc}}else{jb=jb||Ha;Qb=Qb||za;Eb=Eb||db;if(Ha!==ka||jb!==ta)a.blendEquationSeparate(Wa[Ha],Wa[jb]),ka=Ha,ta=jb;if(za!==ea||db!==xa||Qb!==Da||Eb!==Va)a.blendFuncSeparate(Ea[za],Ea[db],Ea[Qb],Ea[Eb]),ea=za,xa=db,Da=Qb,Va=Eb;if(!1===tc.equals(ra)||Ad!==Xa)a.blendColor(tc.r,tc.g,tc.b,Ad),ra.copy(tc),Xa=Ad;ja=P;Ja=!1}}function n(P){ib!==P&&(P?a.frontFace(a.CW):a.frontFace(a.CCW),ib=P)}function m(P){0!==
P?(g(a.CULL_FACE),P!==Cb&&(1===P?a.cullFace(a.BACK):2===P?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):h(a.CULL_FACE);Cb=P}function q(P,Ha,za){if(P){if(g(a.POLYGON_OFFSET_FILL),Ya!==Ha||Ra!==za)a.polygonOffset(Ha,za),Ya=Ha,Ra=za}else h(a.POLYGON_OFFSET_FILL)}const u=c.isWebGL2,t=new function(){let P=!1;const Ha=new mc;let za=null;const db=new mc(0,0,0,0);return{setMask:function(jb){za===jb||P||(a.colorMask(jb,jb,jb,jb),za=jb)},setLocked:function(jb){P=jb},setClear:function(jb,Qb,Eb,tc,Ad){!0===
Ad&&(jb*=tc,Qb*=tc,Eb*=tc);Ha.set(jb,Qb,Eb,tc);!1===db.equals(Ha)&&(a.clearColor(jb,Qb,Eb,tc),db.copy(Ha))},reset:function(){P=!1;za=null;db.set(-1,0,0,0)}}},w=new function(){let P=!1,Ha=null,za=null,db=null;return{setTest:function(jb){jb?g(a.DEPTH_TEST):h(a.DEPTH_TEST)},setMask:function(jb){Ha===jb||P||(a.depthMask(jb),Ha=jb)},setFunc:function(jb){if(za!==jb){switch(jb){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);
break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}za=jb}},setLocked:function(jb){P=jb},setClear:function(jb){db!==jb&&(a.clearDepth(jb),db=jb)},reset:function(){P=!1;db=za=Ha=null}}},B=new function(){let P=!1,Ha=null,za=null,db=null,jb=null,Qb=null,Eb=null,tc=null,Ad=null;return{setTest:function(uc){P||(uc?g(a.STENCIL_TEST):h(a.STENCIL_TEST))},setMask:function(uc){Ha===uc||
P||(a.stencilMask(uc),Ha=uc)},setFunc:function(uc,Nc,be){if(za!==uc||db!==Nc||jb!==be)a.stencilFunc(uc,Nc,be),za=uc,db=Nc,jb=be},setOp:function(uc,Nc,be){if(Qb!==uc||Eb!==Nc||tc!==be)a.stencilOp(uc,Nc,be),Qb=uc,Eb=Nc,tc=be},setLocked:function(uc){P=uc},setClear:function(uc){Ad!==uc&&(a.clearStencil(uc),Ad=uc)},reset:function(){P=!1;Ad=tc=Eb=Qb=jb=db=za=Ha=null}}},z=new WeakMap,D=new WeakMap;let J={},A={},K=new WeakMap,oa=[],R=null,U=!1,ja=null,ka=null,ea=null,xa=null,ta=null,Da=null,Va=null,ra=new nb(0,
0,0),Xa=0,Ja=!1,ib=null,Cb=null,xb=null,Ya=null,Ra=null;const $a=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let vb=!1;var G=0;G=a.getParameter(a.VERSION);-1!==G.indexOf("WebGL")?(G=parseFloat(/^WebGL (\d)/.exec(G)[1]),vb=1<=G):-1!==G.indexOf("OpenGL ES")&&(G=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),vb=2<=G);let H=null,M={};G=a.getParameter(a.SCISSOR_BOX);const Z=a.getParameter(a.VIEWPORT),V=(new mc).fromArray(G),Ga=(new mc).fromArray(Z),fb={};fb[a.TEXTURE_2D]=e(a.TEXTURE_2D,a.TEXTURE_2D,1);
fb[a.TEXTURE_CUBE_MAP]=e(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);u&&(fb[a.TEXTURE_2D_ARRAY]=e(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),fb[a.TEXTURE_3D]=e(a.TEXTURE_3D,a.TEXTURE_3D,1,1));t.setClear(0,0,0,1);w.setClear(1);B.setClear(0);g(a.DEPTH_TEST);w.setFunc(3);n(!1);m(1);g(a.CULL_FACE);l(0);const Wa={[100]:a.FUNC_ADD,[101]:a.FUNC_SUBTRACT,[102]:a.FUNC_REVERSE_SUBTRACT};u?(Wa[103]=a.MIN,Wa[104]=a.MAX):(G=b.get("EXT_blend_minmax"),null!==G&&(Wa[103]=G.MIN_EXT,Wa[104]=G.MAX_EXT));const Ea=
{[200]:a.ZERO,[201]:a.ONE,[202]:a.SRC_COLOR,[204]:a.SRC_ALPHA,[210]:a.SRC_ALPHA_SATURATE,[208]:a.DST_COLOR,[206]:a.DST_ALPHA,[203]:a.ONE_MINUS_SRC_COLOR,[205]:a.ONE_MINUS_SRC_ALPHA,[209]:a.ONE_MINUS_DST_COLOR,[207]:a.ONE_MINUS_DST_ALPHA,[211]:a.CONSTANT_COLOR,[212]:a.ONE_MINUS_CONSTANT_COLOR,[213]:a.CONSTANT_ALPHA,[214]:a.ONE_MINUS_CONSTANT_ALPHA};return{buffers:{color:t,depth:w,stencil:B},enable:g,disable:h,bindFramebuffer:function(P,Ha){return A[P]!==Ha?(a.bindFramebuffer(P,Ha),A[P]=Ha,u&&(P===
a.DRAW_FRAMEBUFFER&&(A[a.FRAMEBUFFER]=Ha),P===a.FRAMEBUFFER&&(A[a.DRAW_FRAMEBUFFER]=Ha)),!0):!1},drawBuffers:function(P,Ha){let za=oa,db=!1;if(P){if(za=K.get(Ha),void 0===za&&(za=[],K.set(Ha,za)),P=P.textures,za.length!==P.length||za[0]!==a.COLOR_ATTACHMENT0){for(let jb=0,Qb=P.length;jb<Qb;jb++)za[jb]=a.COLOR_ATTACHMENT0+jb;za.length=P.length;db=!0}}else za[0]!==a.BACK&&(za[0]=a.BACK,db=!0);if(db)if(c.isWebGL2)a.drawBuffers(za);else if(!0===b.has("WEBGL_draw_buffers"))b.get("WEBGL_draw_buffers").drawBuffersWEBGL(za);
else throw Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension");},useProgram:function(P){return R!==P?(a.useProgram(P),R=P,!0):!1},setBlending:l,setMaterial:function(P,Ha){2===P.side?h(a.CULL_FACE):g(a.CULL_FACE);let za=1===P.side;Ha&&(za=!za);n(za);1===P.blending&&!1===P.transparent?l(0):l(P.blending,P.blendEquation,P.blendSrc,P.blendDst,P.blendEquationAlpha,P.blendSrcAlpha,P.blendDstAlpha,P.blendColor,P.blendAlpha,P.premultipliedAlpha);w.setFunc(P.depthFunc);
w.setTest(P.depthTest);w.setMask(P.depthWrite);t.setMask(P.colorWrite);Ha=P.stencilWrite;B.setTest(Ha);Ha&&(B.setMask(P.stencilWriteMask),B.setFunc(P.stencilFunc,P.stencilRef,P.stencilFuncMask),B.setOp(P.stencilFail,P.stencilZFail,P.stencilZPass));q(P.polygonOffset,P.polygonOffsetFactor,P.polygonOffsetUnits);!0===P.alphaToCoverage?g(a.SAMPLE_ALPHA_TO_COVERAGE):h(a.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:n,setCullFace:m,setLineWidth:function(P){P!==xb&&(vb&&a.lineWidth(P),xb=P)},setPolygonOffset:q,
setScissorTest:function(P){P?g(a.SCISSOR_TEST):h(a.SCISSOR_TEST)},activeTexture:function(P){void 0===P&&(P=a.TEXTURE0+$a-1);H!==P&&(a.activeTexture(P),H=P)},bindTexture:function(P,Ha,za){void 0===za&&(za=null===H?a.TEXTURE0+$a-1:H);let db=M[za];void 0===db&&(db={type:void 0,texture:void 0},M[za]=db);if(db.type!==P||db.texture!==Ha)H!==za&&(a.activeTexture(za),H=za),a.bindTexture(P,Ha||fb[P]),db.type=P,db.texture=Ha},unbindTexture:function(){const P=M[H];void 0!==P&&void 0!==P.type&&(a.bindTexture(P.type,
null),P.type=void 0,P.texture=void 0)},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexImage3D:function(){try{a.compressedTexImage3D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage3D:function(){try{a.texImage3D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},
updateUBOMapping:function(P,Ha){let za=D.get(Ha);void 0===za&&(za=new WeakMap,D.set(Ha,za));let db=za.get(P);void 0===db&&(db=a.getUniformBlockIndex(Ha,P.name),za.set(P,db))},uniformBlockBinding:function(P,Ha){const za=D.get(Ha).get(P);z.get(Ha)!==za&&(a.uniformBlockBinding(Ha,za,P.__bindingPointIndex),z.set(Ha,za))},texStorage2D:function(){try{a.texStorage2D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texStorage3D:function(){try{a.texStorage3D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",
P)}},texSubImage2D:function(){try{a.texSubImage2D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texSubImage3D:function(){try{a.texSubImage3D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexSubImage2D:function(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexSubImage3D:function(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},scissor:function(P){!1===
V.equals(P)&&(a.scissor(P.x,P.y,P.z,P.w),V.copy(P))},viewport:function(P){!1===Ga.equals(P)&&(a.viewport(P.x,P.y,P.z,P.w),Ga.copy(P))},reset:function(){a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.POLYGON_OFFSET_FILL);a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO);a.blendColor(0,0,0,0);a.colorMask(!0,!0,!0,!0);a.clearColor(0,
0,0,0);a.depthMask(!0);a.depthFunc(a.LESS);a.clearDepth(1);a.stencilMask(4294967295);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.clearStencil(0);a.cullFace(a.BACK);a.frontFace(a.CCW);a.polygonOffset(0,0);a.activeTexture(a.TEXTURE0);a.bindFramebuffer(a.FRAMEBUFFER,null);!0===u&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null));a.useProgram(null);a.lineWidth(1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.viewport(0,0,a.canvas.width,
a.canvas.height);J={};H=null;M={};A={};K=new WeakMap;oa=[];R=null;U=!1;Va=Da=ta=xa=ea=ka=ja=null;ra=new nb(0,0,0);Xa=0;Ja=!1;Ra=Ya=xb=Cb=ib=null;V.set(0,0,a.canvas.width,a.canvas.height);Ga.set(0,0,a.canvas.width,a.canvas.height);t.reset();w.reset();B.reset()}}}function Lk(a,b,c,e,g,h,l){function n(G,H,M,Z){var V=1;const Ga=ta(G);if(Ga.width>Z||Ga.height>Z)V=Z/Math.max(Ga.width,Ga.height);if(1>V||!0===H){if("undefined"!==typeof HTMLImageElement&&G instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&
G instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&G instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&G instanceof VideoFrame)return Z=H?xc:Math.floor,H=Z(V*Ga.width),V=Z(V*Ga.height),void 0===ib&&(ib=xb?new OffscreenCanvas(H,V):fc("canvas")),M=M?xb?new OffscreenCanvas(H,V):fc("canvas"):ib,M.width=H,M.height=V,M.getContext("2d").drawImage(G,0,0,H,V),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ga.width+"x"+Ga.height+") to ("+H+"x"+V+")."),M;"data"in G&&
console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ga.width+"x"+Ga.height+").")}return G}function m(G){G=ta(G);return kc(G.width)&&kc(G.height)}function q(G,H){return G.generateMipmaps&&H&&1003!==G.minFilter&&1006!==G.minFilter}function u(G,H,M,Z,V=!1){if(!1===Da)return H;if(null!==G){if(void 0!==a[G])return a[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}G=H;H===a.RED&&(M===a.FLOAT&&(G=a.R32F),M===a.HALF_FLOAT&&(G=a.R16F),M===
a.UNSIGNED_BYTE&&(G=a.R8));H===a.RED_INTEGER&&(M===a.UNSIGNED_BYTE&&(G=a.R8UI),M===a.UNSIGNED_SHORT&&(G=a.R16UI),M===a.UNSIGNED_INT&&(G=a.R32UI),M===a.BYTE&&(G=a.R8I),M===a.SHORT&&(G=a.R16I),M===a.INT&&(G=a.R32I));H===a.RG&&(M===a.FLOAT&&(G=a.RG32F),M===a.HALF_FLOAT&&(G=a.RG16F),M===a.UNSIGNED_BYTE&&(G=a.RG8));H===a.RG_INTEGER&&(M===a.UNSIGNED_BYTE&&(G=a.RG8UI),M===a.UNSIGNED_SHORT&&(G=a.RG16UI),M===a.UNSIGNED_INT&&(G=a.RG32UI),M===a.BYTE&&(G=a.RG8I),M===a.SHORT&&(G=a.RG16I),M===a.INT&&(G=a.RG32I));
H===a.RGBA&&(H=V?"linear":lc.getTransfer(Z),M===a.FLOAT&&(G=a.RGBA32F),M===a.HALF_FLOAT&&(G=a.RGBA16F),M===a.UNSIGNED_BYTE&&(G="srgb"===H?a.SRGB8_ALPHA8:a.RGBA8),M===a.UNSIGNED_SHORT_4_4_4_4&&(G=a.RGBA4),M===a.UNSIGNED_SHORT_5_5_5_1&&(G=a.RGB5_A1));G!==a.R16F&&G!==a.R32F&&G!==a.RG16F&&G!==a.RG32F&&G!==a.RGBA16F&&G!==a.RGBA32F||b.get("EXT_color_buffer_float");return G}function t(G,H,M){return!0===q(G,M)||G.isFramebufferTexture&&1003!==G.minFilter&&1006!==G.minFilter?Math.log2(Math.max(H.width,H.height))+
1:void 0!==G.mipmaps&&0<G.mipmaps.length?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?H.mipmaps.length:1}function w(G){return 1003===G||1004===G||1005===G?a.NEAREST:a.LINEAR}function B(G){G=G.target;G.removeEventListener("dispose",B);var H=e.get(G);if(void 0!==H.__webglInit){var M=G.source,Z=Cb.get(M);Z&&(H=Z[H.__cacheKey],H.usedTimes--,0===H.usedTimes&&D(G),0===Object.keys(Z).length&&Cb.delete(M));e.remove(G)}G.isVideoTexture&&Ja.delete(G)}function z(G){G=G.target;G.removeEventListener("dispose",
z);var H=e.get(G);G.depthTexture&&G.depthTexture.dispose();if(G.isWebGLCubeRenderTarget)for(var M=0;6>M;M++){if(Array.isArray(H.__webglFramebuffer[M]))for(let Z=0;Z<H.__webglFramebuffer[M].length;Z++)a.deleteFramebuffer(H.__webglFramebuffer[M][Z]);else a.deleteFramebuffer(H.__webglFramebuffer[M]);H.__webglDepthbuffer&&a.deleteRenderbuffer(H.__webglDepthbuffer[M])}else{if(Array.isArray(H.__webglFramebuffer))for(M=0;M<H.__webglFramebuffer.length;M++)a.deleteFramebuffer(H.__webglFramebuffer[M]);else a.deleteFramebuffer(H.__webglFramebuffer);
H.__webglDepthbuffer&&a.deleteRenderbuffer(H.__webglDepthbuffer);H.__webglMultisampledFramebuffer&&a.deleteFramebuffer(H.__webglMultisampledFramebuffer);if(H.__webglColorRenderbuffer)for(M=0;M<H.__webglColorRenderbuffer.length;M++)H.__webglColorRenderbuffer[M]&&a.deleteRenderbuffer(H.__webglColorRenderbuffer[M]);H.__webglDepthRenderbuffer&&a.deleteRenderbuffer(H.__webglDepthRenderbuffer)}H=G.textures;for(let Z=0,V=H.length;Z<V;Z++)M=e.get(H[Z]),M.__webglTexture&&(a.deleteTexture(M.__webglTexture),
l.memory.textures--),e.remove(H[Z]);e.remove(G)}function D(G){const H=e.get(G);a.deleteTexture(H.__webglTexture);delete Cb.get(G.source)[H.__cacheKey];l.memory.textures--}function J(G,H){const M=e.get(G);if(G.isVideoTexture){var Z=l.render.frame;Ja.get(G)!==Z&&(Ja.set(G,Z),G.update())}if(!1===G.isRenderTargetTexture&&0<G.version&&M.__version!==G.version)if(Z=G.image,null===Z)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===Z.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
else{oa(M,G,H);return}c.bindTexture(a.TEXTURE_2D,M.__webglTexture,a.TEXTURE0+H)}function A(G,H,M){1015!==H.type||!1!==b.has("OES_texture_float_linear")||1006!==H.magFilter&&1007!==H.magFilter&&1005!==H.magFilter&&1008!==H.magFilter&&1006!==H.minFilter&&1007!==H.minFilter&&1005!==H.minFilter&&1008!==H.minFilter||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.");M?(a.texParameteri(G,a.TEXTURE_WRAP_S,
Ra[H.wrapS]),a.texParameteri(G,a.TEXTURE_WRAP_T,Ra[H.wrapT]),G!==a.TEXTURE_3D&&G!==a.TEXTURE_2D_ARRAY||a.texParameteri(G,a.TEXTURE_WRAP_R,Ra[H.wrapR]),a.texParameteri(G,a.TEXTURE_MAG_FILTER,$a[H.magFilter]),a.texParameteri(G,a.TEXTURE_MIN_FILTER,$a[H.minFilter])):(a.texParameteri(G,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(G,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),G!==a.TEXTURE_3D&&G!==a.TEXTURE_2D_ARRAY||a.texParameteri(G,a.TEXTURE_WRAP_R,a.CLAMP_TO_EDGE),1001===H.wrapS&&1001===H.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),
a.texParameteri(G,a.TEXTURE_MAG_FILTER,w(H.magFilter)),a.texParameteri(G,a.TEXTURE_MIN_FILTER,w(H.minFilter)),1003!==H.minFilter&&1006!==H.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));H.compareFunction&&(a.texParameteri(G,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(G,a.TEXTURE_COMPARE_FUNC,vb[H.compareFunction]));!0!==b.has("EXT_texture_filter_anisotropic")||1003===H.magFilter||
1005!==H.minFilter&&1008!==H.minFilter||1015===H.type&&!1===b.has("OES_texture_float_linear")||!1===Da&&1016===H.type&&!1===b.has("OES_texture_half_float_linear")||!(1<H.anisotropy||e.get(H).__currentAnisotropy)||(M=b.get("EXT_texture_filter_anisotropic"),a.texParameterf(G,M.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,g.getMaxAnisotropy())),e.get(H).__currentAnisotropy=H.anisotropy)}function K(G,H){let M=!1;void 0===G.__webglInit&&(G.__webglInit=!0,H.addEventListener("dispose",B));var Z=H.source;
let V=Cb.get(Z);void 0===V&&(V={},Cb.set(Z,V));Z=[];Z.push(H.wrapS);Z.push(H.wrapT);Z.push(H.wrapR||0);Z.push(H.magFilter);Z.push(H.minFilter);Z.push(H.anisotropy);Z.push(H.internalFormat);Z.push(H.format);Z.push(H.type);Z.push(H.generateMipmaps);Z.push(H.premultiplyAlpha);Z.push(H.flipY);Z.push(H.unpackAlignment);Z.push(H.colorSpace);Z=Z.join();if(Z!==G.__cacheKey){void 0===V[Z]&&(V[Z]={texture:a.createTexture(),usedTimes:0},l.memory.textures++,M=!0);V[Z].usedTimes++;const Ga=V[G.__cacheKey];void 0!==
Ga&&(V[G.__cacheKey].usedTimes--,0===Ga.usedTimes&&D(H));G.__cacheKey=Z;G.__webglTexture=V[Z].texture}return M}function oa(G,H,M){let Z=a.TEXTURE_2D;if(H.isDataArrayTexture||H.isCompressedArrayTexture)Z=a.TEXTURE_2D_ARRAY;H.isData3DTexture&&(Z=a.TEXTURE_3D);var V=K(G,H);const Ga=H.source;c.bindTexture(Z,G.__webglTexture,a.TEXTURE0+M);const fb=e.get(Ga);if(Ga.version!==fb.__version||!0===V){c.activeTexture(a.TEXTURE0+M);M=lc.getPrimaries(lc.workingColorSpace);var Wa=""===H.colorSpace?null:lc.getPrimaries(H.colorSpace);
M=""===H.colorSpace||M===Wa?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,H.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,H.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,M);M=Da?!1:1001!==H.wrapS||1001!==H.wrapT||1003!==H.minFilter&&1006!==H.minFilter;M=M&&!1===m(H.image);var Ea=n(H.image,M,!1,g.maxTextureSize);Ea=xa(H,Ea);M=m(Ea)||Da;Wa=h.convert(H.format,H.colorSpace);let za=h.convert(H.type),
db=u(H.internalFormat,Wa,za,H.colorSpace,H.isVideoTexture);A(Z,H,M);var P=H.mipmaps,Ha=Da&&!0!==H.isVideoTexture&&36196!==db;const jb=void 0===fb.__version||!0===V,Qb=Ga.dataReady;V=t(H,Ea,M);if(H.isDepthTexture)db=a.DEPTH_COMPONENT,Da?db=1015===H.type?a.DEPTH_COMPONENT32F:1014===H.type?a.DEPTH_COMPONENT24:1020===H.type?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT16:1015===H.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===H.format&&db===a.DEPTH_COMPONENT&&1012!==
H.type&&1014!==H.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),H.type=1014,za=h.convert(H.type)),1027===H.format&&db===a.DEPTH_COMPONENT&&(db=a.DEPTH_STENCIL,1020!==H.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),H.type=1020,za=h.convert(H.type))),jb&&(Ha?c.texStorage2D(a.TEXTURE_2D,1,db,Ea.width,Ea.height):c.texImage2D(a.TEXTURE_2D,0,db,Ea.width,Ea.height,0,Wa,za,null));
else if(H.isDataTexture)if(0<P.length&&M){Ha&&jb&&c.texStorage2D(a.TEXTURE_2D,V,db,P[0].width,P[0].height);for(let Eb=0,tc=P.length;Eb<tc;Eb++)V=P[Eb],Ha?Qb&&c.texSubImage2D(a.TEXTURE_2D,Eb,0,0,V.width,V.height,Wa,za,V.data):c.texImage2D(a.TEXTURE_2D,Eb,db,V.width,V.height,0,Wa,za,V.data);H.generateMipmaps=!1}else Ha?(jb&&c.texStorage2D(a.TEXTURE_2D,V,db,Ea.width,Ea.height),Qb&&c.texSubImage2D(a.TEXTURE_2D,0,0,0,Ea.width,Ea.height,Wa,za,Ea.data)):c.texImage2D(a.TEXTURE_2D,0,db,Ea.width,Ea.height,
0,Wa,za,Ea.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Ha&&jb&&c.texStorage3D(a.TEXTURE_2D_ARRAY,V,db,P[0].width,P[0].height,Ea.depth);for(let Eb=0,tc=P.length;Eb<tc;Eb++)V=P[Eb],1023!==H.format?null!==Wa?Ha?Qb&&c.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Eb,0,0,0,V.width,V.height,Ea.depth,Wa,V.data,0,0):c.compressedTexImage3D(a.TEXTURE_2D_ARRAY,Eb,db,V.width,V.height,Ea.depth,0,V.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
Ha?Qb&&c.texSubImage3D(a.TEXTURE_2D_ARRAY,Eb,0,0,0,V.width,V.height,Ea.depth,Wa,za,V.data):c.texImage3D(a.TEXTURE_2D_ARRAY,Eb,db,V.width,V.height,Ea.depth,0,Wa,za,V.data)}else{Ha&&jb&&c.texStorage2D(a.TEXTURE_2D,V,db,P[0].width,P[0].height);for(let Eb=0,tc=P.length;Eb<tc;Eb++)V=P[Eb],1023!==H.format?null!==Wa?Ha?Qb&&c.compressedTexSubImage2D(a.TEXTURE_2D,Eb,0,0,V.width,V.height,Wa,V.data):c.compressedTexImage2D(a.TEXTURE_2D,Eb,db,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
Ha?Qb&&c.texSubImage2D(a.TEXTURE_2D,Eb,0,0,V.width,V.height,Wa,za,V.data):c.texImage2D(a.TEXTURE_2D,Eb,db,V.width,V.height,0,Wa,za,V.data)}else if(H.isDataArrayTexture)Ha?(jb&&c.texStorage3D(a.TEXTURE_2D_ARRAY,V,db,Ea.width,Ea.height,Ea.depth),Qb&&c.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,Ea.width,Ea.height,Ea.depth,Wa,za,Ea.data)):c.texImage3D(a.TEXTURE_2D_ARRAY,0,db,Ea.width,Ea.height,Ea.depth,0,Wa,za,Ea.data);else if(H.isData3DTexture)Ha?(jb&&c.texStorage3D(a.TEXTURE_3D,V,db,Ea.width,Ea.height,
Ea.depth),Qb&&c.texSubImage3D(a.TEXTURE_3D,0,0,0,0,Ea.width,Ea.height,Ea.depth,Wa,za,Ea.data)):c.texImage3D(a.TEXTURE_3D,0,db,Ea.width,Ea.height,Ea.depth,0,Wa,za,Ea.data);else if(H.isFramebufferTexture){if(jb)if(Ha)c.texStorage2D(a.TEXTURE_2D,V,db,Ea.width,Ea.height);else for(P=Ea.width,Ea=Ea.height,Ha=0;Ha<V;Ha++)c.texImage2D(a.TEXTURE_2D,Ha,db,P,Ea,0,Wa,za,null),P>>=1,Ea>>=1}else if(0<P.length&&M){Ha&&jb&&(Ea=ta(P[0]),c.texStorage2D(a.TEXTURE_2D,V,db,Ea.width,Ea.height));for(let Eb=0,tc=P.length;Eb<
tc;Eb++)V=P[Eb],Ha?Qb&&c.texSubImage2D(a.TEXTURE_2D,Eb,0,0,Wa,za,V):c.texImage2D(a.TEXTURE_2D,Eb,db,Wa,za,V);H.generateMipmaps=!1}else Ha?(jb&&(P=ta(Ea),c.texStorage2D(a.TEXTURE_2D,V,db,P.width,P.height)),Qb&&c.texSubImage2D(a.TEXTURE_2D,0,0,0,Wa,za,Ea)):c.texImage2D(a.TEXTURE_2D,0,db,Wa,za,Ea);q(H,M)&&a.generateMipmap(Z);fb.__version=Ga.version;if(H.onUpdate)H.onUpdate(H)}G.__version=H.version}function R(G,H,M,Z,V,Ga){const fb=h.convert(M.format,M.colorSpace),Wa=h.convert(M.type),Ea=u(M.internalFormat,
fb,Wa,M.colorSpace);if(!e.get(H).__hasExternalTextures){const P=Math.max(1,H.width>>Ga),Ha=Math.max(1,H.height>>Ga);V===a.TEXTURE_3D||V===a.TEXTURE_2D_ARRAY?c.texImage3D(V,Ga,Ea,P,Ha,H.depth,0,fb,Wa,null):c.texImage2D(V,Ga,Ea,P,Ha,0,fb,Wa,null)}c.bindFramebuffer(a.FRAMEBUFFER,G);ea(H)?Va.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,Z,V,e.get(M).__webglTexture,0,ka(H)):(V===a.TEXTURE_2D||V>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&V<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,Z,
V,e.get(M).__webglTexture,Ga);c.bindFramebuffer(a.FRAMEBUFFER,null)}function U(G,H,M){a.bindRenderbuffer(a.RENDERBUFFER,G);if(H.depthBuffer&&!H.stencilBuffer){var Z=!0===Da?a.DEPTH_COMPONENT24:a.DEPTH_COMPONENT16;M||ea(H)?((M=H.depthTexture)&&M.isDepthTexture&&(1015===M.type?Z=a.DEPTH_COMPONENT32F:1014===M.type&&(Z=a.DEPTH_COMPONENT24)),M=ka(H),ea(H)?Va.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,M,Z,H.width,H.height):a.renderbufferStorageMultisample(a.RENDERBUFFER,M,Z,H.width,H.height)):a.renderbufferStorage(a.RENDERBUFFER,
Z,H.width,H.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,G)}else if(H.depthBuffer&&H.stencilBuffer)Z=ka(H),M&&!1===ea(H)?a.renderbufferStorageMultisample(a.RENDERBUFFER,Z,a.DEPTH24_STENCIL8,H.width,H.height):ea(H)?Va.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Z,a.DEPTH24_STENCIL8,H.width,H.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,H.width,H.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,G);else for(G=
H.textures,Z=0;Z<G.length;Z++){var V=G[Z],Ga=h.convert(V.format,V.colorSpace);const fb=h.convert(V.type);V=u(V.internalFormat,Ga,fb,V.colorSpace);Ga=ka(H);M&&!1===ea(H)?a.renderbufferStorageMultisample(a.RENDERBUFFER,Ga,V,H.width,H.height):ea(H)?Va.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,Ga,V,H.width,H.height):a.renderbufferStorage(a.RENDERBUFFER,V,H.width,H.height)}a.bindRenderbuffer(a.RENDERBUFFER,null)}function ja(G){var H=e.get(G),M=!0===G.isWebGLCubeRenderTarget;if(G.depthTexture&&!H.__autoAllocateDepthBuffer){if(M)throw Error("target.depthTexture not supported in Cube render targets");
H=H.__webglFramebuffer;if(G&&G.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");c.bindFramebuffer(a.FRAMEBUFFER,H);if(!G.depthTexture||!G.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");e.get(G.depthTexture).__webglTexture&&G.depthTexture.image.width===G.width&&G.depthTexture.image.height===G.height||(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=
!0);J(G.depthTexture,0);H=e.get(G.depthTexture).__webglTexture;M=ka(G);if(1026===G.depthTexture.format)ea(G)?Va.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,H,0,M):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,H,0);else if(1027===G.depthTexture.format)ea(G)?Va.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,H,0,M):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,H,0);else throw Error("Unknown depthTexture format");
}else if(M)for(H.__webglDepthbuffer=[],M=0;6>M;M++)c.bindFramebuffer(a.FRAMEBUFFER,H.__webglFramebuffer[M]),H.__webglDepthbuffer[M]=a.createRenderbuffer(),U(H.__webglDepthbuffer[M],G,!1);else c.bindFramebuffer(a.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer=a.createRenderbuffer(),U(H.__webglDepthbuffer,G,!1);c.bindFramebuffer(a.FRAMEBUFFER,null)}function ka(G){return Math.min(g.maxSamples,G.samples)}function ea(G){const H=e.get(G);return Da&&0<G.samples&&!0===b.has("WEBGL_multisampled_render_to_texture")&&
!1!==H.__useRenderToTexture}function xa(G,H){const M=G.colorSpace,Z=G.format,V=G.type;if(!0===G.isCompressedTexture||!0===G.isVideoTexture||1035===G.format)return H;"srgb-linear"!==M&&""!==M&&("srgb"===lc.getTransfer(M)?!1===Da?!0===b.has("EXT_sRGB")&&1023===Z?(G.format=1035,G.minFilter=1006,G.generateMipmaps=!1):H=aj.sRGBToLinear(H):1023===Z&&1009===V||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",
M));return H}function ta(G){"undefined"!==typeof HTMLImageElement&&G instanceof HTMLImageElement?(Xa.width=G.naturalWidth||G.width,Xa.height=G.naturalHeight||G.height):"undefined"!==typeof VideoFrame&&G instanceof VideoFrame?(Xa.width=G.displayWidth,Xa.height=G.displayHeight):(Xa.width=G.width,Xa.height=G.height);return Xa}const Da=g.isWebGL2,Va=b.has("WEBGL_multisampled_render_to_texture")?b.get("WEBGL_multisampled_render_to_texture"):null,ra="undefined"===typeof navigator?!1:/OculusBrowser/g.test(navigator.userAgent),
Xa=new Fa,Ja=new WeakMap;let ib;const Cb=new WeakMap;let xb=!1;try{xb="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(G){}let Ya=0;const Ra={[1E3]:a.REPEAT,[1001]:a.CLAMP_TO_EDGE,[1002]:a.MIRRORED_REPEAT},$a={[1003]:a.NEAREST,[1004]:a.NEAREST_MIPMAP_NEAREST,[1005]:a.NEAREST_MIPMAP_LINEAR,[1006]:a.LINEAR,[1007]:a.LINEAR_MIPMAP_NEAREST,[1008]:a.LINEAR_MIPMAP_LINEAR},vb={[512]:a.NEVER,[519]:a.ALWAYS,[513]:a.LESS,[515]:a.LEQUAL,[514]:a.EQUAL,[518]:a.GEQUAL,
[516]:a.GREATER,[517]:a.NOTEQUAL};this.allocateTextureUnit=function(){const G=Ya;G>=g.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+g.maxTextures);Ya+=1;return G};this.resetTextureUnits=function(){Ya=0};this.setTexture2D=J;this.setTexture2DArray=function(G,H){const M=e.get(G);0<G.version&&M.__version!==G.version?oa(M,G,H):c.bindTexture(a.TEXTURE_2D_ARRAY,M.__webglTexture,a.TEXTURE0+H)};this.setTexture3D=function(G,H){const M=e.get(G);
0<G.version&&M.__version!==G.version?oa(M,G,H):c.bindTexture(a.TEXTURE_3D,M.__webglTexture,a.TEXTURE0+H)};this.setTextureCube=function(G,H){const M=e.get(G);if(0<G.version&&M.__version!==G.version){if(6===G.image.length){var Z=K(M,G),V=G.source;c.bindTexture(a.TEXTURE_CUBE_MAP,M.__webglTexture,a.TEXTURE0+H);var Ga=e.get(V);if(V.version!==Ga.__version||!0===Z){c.activeTexture(a.TEXTURE0+H);H=lc.getPrimaries(lc.workingColorSpace);var fb=""===G.colorSpace?null:lc.getPrimaries(G.colorSpace);H=""===G.colorSpace||
H===fb?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,G.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,G.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,H);var Wa=G.isCompressedTexture||G.image[0].isCompressedTexture,Ea=G.image[0]&&G.image[0].isDataTexture;H=[];for(fb=0;6>fb;fb++)H[fb]=Wa||Ea?Ea?G.image[fb].image:G.image[fb]:n(G.image[fb],!1,!0,g.maxCubemapSize),H[fb]=xa(G,H[fb]);var P=H[0];fb=m(P)||
Da;const db=h.convert(G.format,G.colorSpace),jb=h.convert(G.type),Qb=u(G.internalFormat,db,jb,G.colorSpace),Eb=Da&&!0!==G.isVideoTexture;var Ha=void 0===Ga.__version||!0===Z;Z=V.dataReady;var za=t(G,P,fb);A(a.TEXTURE_CUBE_MAP,G,fb);if(Wa)for(Eb&&Ha&&c.texStorage2D(a.TEXTURE_CUBE_MAP,za,Qb,P.width,P.height),Ea=0;6>Ea;Ea++)for(Wa=H[Ea].mipmaps,za=0;za<Wa.length;za++)P=Wa[za],1023!==G.format?null!==db?Eb?Z&&c.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ea,za,0,0,P.width,P.height,db,P.data):
c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ea,za,Qb,P.width,P.height,0,P.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Eb?Z&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ea,za,0,0,P.width,P.height,db,jb,P.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ea,za,Qb,P.width,P.height,0,db,jb,P.data);else for(Wa=G.mipmaps,Eb&&Ha&&(0<Wa.length&&za++,P=ta(H[0]),c.texStorage2D(a.TEXTURE_CUBE_MAP,za,Qb,P.width,P.height)),za=
0;6>za;za++)if(Ea)for(Eb?Z&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,0,0,0,H[za].width,H[za].height,db,jb,H[za].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,0,Qb,H[za].width,H[za].height,0,db,jb,H[za].data),P=0;P<Wa.length;P++)Ha=Wa[P].image[za].image,Eb?Z&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,P+1,0,0,Ha.width,Ha.height,db,jb,Ha.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,P+1,Qb,Ha.width,Ha.height,0,db,jb,Ha.data);else for(Eb?Z&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
za,0,0,0,db,jb,H[za]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,0,Qb,db,jb,H[za]),P=0;P<Wa.length;P++)Ha=Wa[P],Eb?Z&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,P+1,0,0,db,jb,Ha.image[za]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+za,P+1,Qb,db,jb,Ha.image[za]);q(G,fb)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);Ga.__version=V.version;if(G.onUpdate)G.onUpdate(G)}M.__version=G.version}}else c.bindTexture(a.TEXTURE_CUBE_MAP,M.__webglTexture,a.TEXTURE0+H)};this.rebindTextures=function(G,H,M){const Z=
e.get(G);void 0!==H&&R(Z.__webglFramebuffer,G,G.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0);void 0!==M&&ja(G)};this.setupRenderTarget=function(G){var H=G.texture;const M=e.get(G);var Z=e.get(H);G.addEventListener("dispose",z);var V=G.textures;const Ga=!0===G.isWebGLCubeRenderTarget,fb=1<V.length,Wa=m(G)||Da;fb||(void 0===Z.__webglTexture&&(Z.__webglTexture=a.createTexture()),Z.__version=H.version,l.memory.textures++);if(Ga){M.__webglFramebuffer=[];for(var Ea=0;6>Ea;Ea++)if(Da&&H.mipmaps&&0<H.mipmaps.length){M.__webglFramebuffer[Ea]=
[];for(var P=0;P<H.mipmaps.length;P++)M.__webglFramebuffer[Ea][P]=a.createFramebuffer()}else M.__webglFramebuffer[Ea]=a.createFramebuffer()}else{if(Da&&H.mipmaps&&0<H.mipmaps.length)for(M.__webglFramebuffer=[],Ea=0;Ea<H.mipmaps.length;Ea++)M.__webglFramebuffer[Ea]=a.createFramebuffer();else M.__webglFramebuffer=a.createFramebuffer();if(fb)if(g.drawBuffers)for(let za=0,db=V.length;za<db;za++)Ea=e.get(V[za]),void 0===Ea.__webglTexture&&(Ea.__webglTexture=a.createTexture(),l.memory.textures++);else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
if(Da&&0<G.samples&&!1===ea(G)){M.__webglMultisampledFramebuffer=a.createFramebuffer();M.__webglColorRenderbuffer=[];c.bindFramebuffer(a.FRAMEBUFFER,M.__webglMultisampledFramebuffer);for(Ea=0;Ea<V.length;Ea++){P=V[Ea];M.__webglColorRenderbuffer[Ea]=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,M.__webglColorRenderbuffer[Ea]);var Ha=h.convert(P.format,P.colorSpace);const za=h.convert(P.type);P=u(P.internalFormat,Ha,za,P.colorSpace,!0===G.isXRRenderTarget);Ha=ka(G);a.renderbufferStorageMultisample(a.RENDERBUFFER,
Ha,P,G.width,G.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+Ea,a.RENDERBUFFER,M.__webglColorRenderbuffer[Ea])}a.bindRenderbuffer(a.RENDERBUFFER,null);G.depthBuffer&&(M.__webglDepthRenderbuffer=a.createRenderbuffer(),U(M.__webglDepthRenderbuffer,G,!0));c.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Ga){c.bindTexture(a.TEXTURE_CUBE_MAP,Z.__webglTexture);A(a.TEXTURE_CUBE_MAP,H,Wa);for(V=0;6>V;V++)if(Da&&H.mipmaps&&0<H.mipmaps.length)for(Z=0;Z<H.mipmaps.length;Z++)R(M.__webglFramebuffer[V][Z],
G,H,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+V,Z);else R(M.__webglFramebuffer[V],G,H,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+V,0);q(H,Wa)&&a.generateMipmap(a.TEXTURE_CUBE_MAP)}else if(fb)for(let za=0,db=V.length;za<db;za++)H=V[za],Z=e.get(H),c.bindTexture(a.TEXTURE_2D,Z.__webglTexture),A(a.TEXTURE_2D,H,Wa),R(M.__webglFramebuffer,G,H,a.COLOR_ATTACHMENT0+za,a.TEXTURE_2D,0),q(H,Wa)&&a.generateMipmap(a.TEXTURE_2D);else{V=a.TEXTURE_2D;if(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)Da?
V=G.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");c.bindTexture(V,Z.__webglTexture);A(V,H,Wa);if(Da&&H.mipmaps&&0<H.mipmaps.length)for(Z=0;Z<H.mipmaps.length;Z++)R(M.__webglFramebuffer[Z],G,H,a.COLOR_ATTACHMENT0,V,Z);else R(M.__webglFramebuffer,G,H,a.COLOR_ATTACHMENT0,V,0);q(H,Wa)&&a.generateMipmap(V)}c.unbindTexture();G.depthBuffer&&ja(G)};this.updateRenderTargetMipmap=function(G){const H=
m(G)||Da,M=G.textures;for(let V=0,Ga=M.length;V<Ga;V++){var Z=M[V];if(q(Z,H)){const fb=G.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;Z=e.get(Z).__webglTexture;c.bindTexture(fb,Z);a.generateMipmap(fb);c.unbindTexture()}}};this.updateMultisampleRenderTarget=function(G){if(Da&&0<G.samples&&!1===ea(G)){const V=G.textures;var H=G.width;const Ga=G.height;let fb=a.COLOR_BUFFER_BIT;const Wa=[],Ea=G.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,P=e.get(G),Ha=1<V.length;if(Ha)for(var M=
0;M<V.length;M++)c.bindFramebuffer(a.FRAMEBUFFER,P.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+M,a.RENDERBUFFER,null),c.bindFramebuffer(a.FRAMEBUFFER,P.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+M,a.TEXTURE_2D,null,0);c.bindFramebuffer(a.READ_FRAMEBUFFER,P.__webglMultisampledFramebuffer);c.bindFramebuffer(a.DRAW_FRAMEBUFFER,P.__webglFramebuffer);for(M=0;M<V.length;M++){Wa.push(a.COLOR_ATTACHMENT0+M);G.depthBuffer&&
Wa.push(Ea);var Z=void 0!==P.__ignoreDepthValues?P.__ignoreDepthValues:!1;!1===Z&&(G.depthBuffer&&(fb|=a.DEPTH_BUFFER_BIT),G.stencilBuffer&&(fb|=a.STENCIL_BUFFER_BIT));Ha&&a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,P.__webglColorRenderbuffer[M]);!0===Z&&(a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[Ea]),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[Ea]));Ha&&(Z=e.get(V[M]).__webglTexture,a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Z,
0));a.blitFramebuffer(0,0,H,Ga,0,0,H,Ga,fb,a.NEAREST);ra&&a.invalidateFramebuffer(a.READ_FRAMEBUFFER,Wa)}c.bindFramebuffer(a.READ_FRAMEBUFFER,null);c.bindFramebuffer(a.DRAW_FRAMEBUFFER,null);if(Ha)for(G=0;G<V.length;G++)c.bindFramebuffer(a.FRAMEBUFFER,P.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+G,a.RENDERBUFFER,P.__webglColorRenderbuffer[G]),H=e.get(V[G]).__webglTexture,c.bindFramebuffer(a.FRAMEBUFFER,P.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,
a.COLOR_ATTACHMENT0+G,a.TEXTURE_2D,H,0);c.bindFramebuffer(a.DRAW_FRAMEBUFFER,P.__webglMultisampledFramebuffer)}};this.setupDepthRenderbuffer=ja;this.setupFrameBufferTexture=R;this.useMultisampledRTT=ea}function ih(a,b,c){const e=c.isWebGL2;return{convert:function(g,h=""){const l=lc.getTransfer(h);if(1009===g)return a.UNSIGNED_BYTE;if(1017===g)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===g)return a.UNSIGNED_SHORT_5_5_5_1;if(1010===g)return a.BYTE;if(1011===g)return a.SHORT;if(1012===g)return a.UNSIGNED_SHORT;
if(1013===g)return a.INT;if(1014===g)return a.UNSIGNED_INT;if(1015===g)return a.FLOAT;if(1016===g){if(e)return a.HALF_FLOAT;h=b.get("OES_texture_half_float");return null!==h?h.HALF_FLOAT_OES:null}if(1021===g)return a.ALPHA;if(1023===g)return a.RGBA;if(1024===g)return a.LUMINANCE;if(1025===g)return a.LUMINANCE_ALPHA;if(1026===g)return a.DEPTH_COMPONENT;if(1027===g)return a.DEPTH_STENCIL;if(1035===g)return h=b.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1028===g)return a.RED;if(1029===g)return a.RED_INTEGER;
if(1030===g)return a.RG;if(1031===g)return a.RG_INTEGER;if(1033===g)return a.RGBA_INTEGER;if(33776===g||33777===g||33778===g||33779===g)if("srgb"===l)if(h=b.get("WEBGL_compressed_texture_s3tc_srgb"),null!==h){if(33776===g)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===g)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===g)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===g)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(h=b.get("WEBGL_compressed_texture_s3tc"),
null!==h){if(33776===g)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===g)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===g)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===g)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===g||35841===g||35842===g||35843===g)if(h=b.get("WEBGL_compressed_texture_pvrtc"),null!==h){if(35840===g)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===g)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===g)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===
g)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===g)return h=b.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===g||37496===g)if(h=b.get("WEBGL_compressed_texture_etc"),null!==h){if(37492===g)return"srgb"===l?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(37808===g||37809===g||37810===g||37811===g||37812===g||37813===g||37814===
g||37815===g||37816===g||37817===g||37818===g||37819===g||37820===g||37821===g)if(h=b.get("WEBGL_compressed_texture_astc"),null!==h){if(37808===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:
h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:
h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===g)return"srgb"===l?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:
h.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(36492===g||36494===g||36495===g)if(h=b.get("EXT_texture_compression_bptc"),null!==h){if(36492===g)return"srgb"===l?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===g)return h.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===g)return h.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(36283===g||36284===g||36285===g||36286===g)if(h=b.get("EXT_texture_compression_rgtc"),null!==h){if(36492===g)return h.COMPRESSED_RED_RGTC1_EXT;
if(36284===g)return h.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===g)return h.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===g)return h.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(1020===g){if(e)return a.UNSIGNED_INT_24_8;h=b.get("WEBGL_depth_texture");return null!==h?h.UNSIGNED_INT_24_8_WEBGL:null}return void 0!==a[g]?a[g]:null}}}function Tl(a,b){function c(g,h){!0===g.matrixAutoUpdate&&g.updateMatrix();h.value.copy(g.matrix)}function e(g,h){g.opacity.value=h.opacity;h.color&&g.diffuse.value.copy(h.color);
h.emissive&&g.emissive.value.copy(h.emissive).multiplyScalar(h.emissiveIntensity);h.map&&(g.map.value=h.map,c(h.map,g.mapTransform));h.alphaMap&&(g.alphaMap.value=h.alphaMap,c(h.alphaMap,g.alphaMapTransform));h.bumpMap&&(g.bumpMap.value=h.bumpMap,c(h.bumpMap,g.bumpMapTransform),g.bumpScale.value=h.bumpScale,1===h.side&&(g.bumpScale.value*=-1));h.normalMap&&(g.normalMap.value=h.normalMap,c(h.normalMap,g.normalMapTransform),g.normalScale.value.copy(h.normalScale),1===h.side&&g.normalScale.value.negate());
h.displacementMap&&(g.displacementMap.value=h.displacementMap,c(h.displacementMap,g.displacementMapTransform),g.displacementScale.value=h.displacementScale,g.displacementBias.value=h.displacementBias);h.emissiveMap&&(g.emissiveMap.value=h.emissiveMap,c(h.emissiveMap,g.emissiveMapTransform));h.specularMap&&(g.specularMap.value=h.specularMap,c(h.specularMap,g.specularMapTransform));0<h.alphaTest&&(g.alphaTest.value=h.alphaTest);var l=b.get(h);const n=l.envMap;l=l.envMapRotation;n&&(g.envMap.value=n,
Hd.copy(l),Hd.x*=-1,Hd.y*=-1,Hd.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(Hd.y*=-1,Hd.z*=-1),g.envMapRotation.value.setFromMatrix4(Ul.makeRotationFromEuler(Hd)),g.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,g.reflectivity.value=h.reflectivity,g.ior.value=h.ior,g.refractionRatio.value=h.refractionRatio);h.lightMap&&(g.lightMap.value=h.lightMap,g.lightMapIntensity.value=h.lightMapIntensity*(!0===a._useLegacyLights?Math.PI:1),c(h.lightMap,g.lightMapTransform));h.aoMap&&
(g.aoMap.value=h.aoMap,g.aoMapIntensity.value=h.aoMapIntensity,c(h.aoMap,g.aoMapTransform))}return{refreshFogUniforms:function(g,h){h.color.getRGB(g.fogColor.value,Na(a));h.isFog?(g.fogNear.value=h.near,g.fogFar.value=h.far):h.isFogExp2&&(g.fogDensity.value=h.density)},refreshMaterialUniforms:function(g,h,l,n,m){h.isMeshBasicMaterial?e(g,h):h.isMeshLambertMaterial?e(g,h):h.isMeshToonMaterial?(e(g,h),h.gradientMap&&(g.gradientMap.value=h.gradientMap)):h.isMeshPhongMaterial?(e(g,h),g.specular.value.copy(h.specular),
g.shininess.value=Math.max(h.shininess,1E-4)):h.isMeshStandardMaterial?(e(g,h),g.metalness.value=h.metalness,h.metalnessMap&&(g.metalnessMap.value=h.metalnessMap,c(h.metalnessMap,g.metalnessMapTransform)),g.roughness.value=h.roughness,h.roughnessMap&&(g.roughnessMap.value=h.roughnessMap,c(h.roughnessMap,g.roughnessMapTransform)),b.get(h).envMap&&(g.envMapIntensity.value=h.envMapIntensity),h.isMeshPhysicalMaterial&&(g.ior.value=h.ior,0<h.sheen&&(g.sheenColor.value.copy(h.sheenColor).multiplyScalar(h.sheen),
g.sheenRoughness.value=h.sheenRoughness,h.sheenColorMap&&(g.sheenColorMap.value=h.sheenColorMap,c(h.sheenColorMap,g.sheenColorMapTransform)),h.sheenRoughnessMap&&(g.sheenRoughnessMap.value=h.sheenRoughnessMap,c(h.sheenRoughnessMap,g.sheenRoughnessMapTransform))),0<h.clearcoat&&(g.clearcoat.value=h.clearcoat,g.clearcoatRoughness.value=h.clearcoatRoughness,h.clearcoatMap&&(g.clearcoatMap.value=h.clearcoatMap,c(h.clearcoatMap,g.clearcoatMapTransform)),h.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=
h.clearcoatRoughnessMap,c(h.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),h.clearcoatNormalMap&&(g.clearcoatNormalMap.value=h.clearcoatNormalMap,c(h.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(h.clearcoatNormalScale),1===h.side&&g.clearcoatNormalScale.value.negate())),0<h.iridescence&&(g.iridescence.value=h.iridescence,g.iridescenceIOR.value=h.iridescenceIOR,g.iridescenceThicknessMinimum.value=h.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=
h.iridescenceThicknessRange[1],h.iridescenceMap&&(g.iridescenceMap.value=h.iridescenceMap,c(h.iridescenceMap,g.iridescenceMapTransform)),h.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=h.iridescenceThicknessMap,c(h.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),0<h.transmission&&(g.transmission.value=h.transmission,g.transmissionSamplerMap.value=m.texture,g.transmissionSamplerSize.value.set(m.width,m.height),h.transmissionMap&&(g.transmissionMap.value=h.transmissionMap,
c(h.transmissionMap,g.transmissionMapTransform)),g.thickness.value=h.thickness,h.thicknessMap&&(g.thicknessMap.value=h.thicknessMap,c(h.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=h.attenuationDistance,g.attenuationColor.value.copy(h.attenuationColor)),0<h.anisotropy&&(g.anisotropyVector.value.set(h.anisotropy*Math.cos(h.anisotropyRotation),h.anisotropy*Math.sin(h.anisotropyRotation)),h.anisotropyMap&&(g.anisotropyMap.value=h.anisotropyMap,c(h.anisotropyMap,g.anisotropyMapTransform))),
g.specularIntensity.value=h.specularIntensity,g.specularColor.value.copy(h.specularColor),h.specularColorMap&&(g.specularColorMap.value=h.specularColorMap,c(h.specularColorMap,g.specularColorMapTransform)),h.specularIntensityMap&&(g.specularIntensityMap.value=h.specularIntensityMap,c(h.specularIntensityMap,g.specularIntensityMapTransform)))):h.isMeshMatcapMaterial?(e(g,h),h.matcap&&(g.matcap.value=h.matcap)):h.isMeshDepthMaterial?e(g,h):h.isMeshDistanceMaterial?(e(g,h),h=b.get(h).light,g.referencePosition.value.setFromMatrixPosition(h.matrixWorld),
g.nearDistance.value=h.shadow.camera.near,g.farDistance.value=h.shadow.camera.far):h.isMeshNormalMaterial?e(g,h):h.isLineBasicMaterial?(g.diffuse.value.copy(h.color),g.opacity.value=h.opacity,h.map&&(g.map.value=h.map,c(h.map,g.mapTransform)),h.isLineDashedMaterial&&(g.dashSize.value=h.dashSize,g.totalSize.value=h.dashSize+h.gapSize,g.scale.value=h.scale)):h.isPointsMaterial?(g.diffuse.value.copy(h.color),g.opacity.value=h.opacity,g.size.value=h.size*l,g.scale.value=.5*n,h.map&&(g.map.value=h.map,
c(h.map,g.uvTransform)),h.alphaMap&&(g.alphaMap.value=h.alphaMap,c(h.alphaMap,g.alphaMapTransform)),0<h.alphaTest&&(g.alphaTest.value=h.alphaTest)):h.isSpriteMaterial?(g.diffuse.value.copy(h.color),g.opacity.value=h.opacity,g.rotation.value=h.rotation,h.map&&(g.map.value=h.map,c(h.map,g.mapTransform)),h.alphaMap&&(g.alphaMap.value=h.alphaMap,c(h.alphaMap,g.alphaMapTransform)),0<h.alphaTest&&(g.alphaTest.value=h.alphaTest)):h.isShadowMaterial?(g.color.value.copy(h.color),g.opacity.value=h.opacity):
h.isShaderMaterial&&(h.uniformsNeedUpdate=!1)}}}function Mk(a,b,c,e){function g(t){var w=t.uniforms;let B=0;for(let z=0,D=w.length;z<D;z++){const J=Array.isArray(w[z])?w[z]:[w[z]];for(let A=0,K=J.length;A<K;A++){const oa=J[A],R=Array.isArray(oa.value)?oa.value:[oa.value];for(let U=0,ja=R.length;U<ja;U++){const ka=h(R[U]),ea=B%16;0!==ea&&16-ea<ka.boundary&&(B+=16-ea);oa.__data=new Float32Array(ka.storage/Float32Array.BYTES_PER_ELEMENT);oa.__offset=B;B+=ka.storage}}}w=B%16;0<w&&(B+=16-w);t.__size=B;
t.__cache={};return this}function h(t){const w={boundary:0,storage:0};"number"===typeof t||"boolean"===typeof t?(w.boundary=4,w.storage=4):t.isVector2?(w.boundary=8,w.storage=8):t.isVector3||t.isColor?(w.boundary=16,w.storage=12):t.isVector4?(w.boundary=16,w.storage=16):t.isMatrix3?(w.boundary=48,w.storage=48):t.isMatrix4?(w.boundary=64,w.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",
t);return w}function l(t){t=t.target;t.removeEventListener("dispose",l);const w=q.indexOf(t.__bindingPointIndex);q.splice(w,1);a.deleteBuffer(n[t.id]);delete n[t.id];delete m[t.id]}let n={},m={},q=[];const u=c.isWebGL2?a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS):0;return{bind:function(t,w){e.uniformBlockBinding(t,w.program)},update:function(t,w){var B=n[t.id];if(void 0===B){g(t);a:{for(B=0;B<u;B++)if(-1===q.indexOf(B)){q.push(B);break a}console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.");
B=0}t.__bindingPointIndex=B;var z=a.createBuffer(),D=t.__size,J=t.usage;a.bindBuffer(a.UNIFORM_BUFFER,z);a.bufferData(a.UNIFORM_BUFFER,D,J);a.bindBuffer(a.UNIFORM_BUFFER,null);a.bindBufferBase(a.UNIFORM_BUFFER,B,z);B=z;n[t.id]=B;t.addEventListener("dispose",l)}e.updateUBOMapping(t,w.program);w=b.render.frame;if(m[t.id]!==w){B=t.uniforms;z=t.__cache;a.bindBuffer(a.UNIFORM_BUFFER,n[t.id]);for(let R=0,U=B.length;R<U;R++){D=Array.isArray(B[R])?B[R]:[B[R]];for(let ja=0,ka=D.length;ja<ka;ja++){J=D[ja];
a:{var A=J.value;var K=R+"_"+ja;if(void 0===z[K])z[K]="number"===typeof A||"boolean"===typeof A?A:A.clone(),A=!0;else{var oa=z[K];if("number"===typeof A||"boolean"===typeof A){if(oa!==A){z[K]=A;A=!0;break a}}else if(!1===oa.equals(A)){oa.copy(A);A=!0;break a}A=!1}}if(!0===A){A=J.__offset;K=Array.isArray(J.value)?J.value:[J.value];oa=0;for(let ea=0;ea<K.length;ea++){const xa=K[ea],ta=h(xa);"number"===typeof xa||"boolean"===typeof xa?(J.__data[0]=xa,a.bufferSubData(a.UNIFORM_BUFFER,A+oa,J.__data)):
xa.isMatrix3?(J.__data[0]=xa.elements[0],J.__data[1]=xa.elements[1],J.__data[2]=xa.elements[2],J.__data[3]=0,J.__data[4]=xa.elements[3],J.__data[5]=xa.elements[4],J.__data[6]=xa.elements[5],J.__data[7]=0,J.__data[8]=xa.elements[6],J.__data[9]=xa.elements[7],J.__data[10]=xa.elements[8],J.__data[11]=0):(xa.toArray(J.__data,oa),oa+=ta.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,A,J.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null);m[t.id]=w}},dispose:function(){for(const t in n)a.deleteBuffer(n[t]);
q=[];n={};m={}}}}function Of(a,b,c,e,g,h){Pf.subVectors(a,c).addScalar(.5).multiply(e);void 0!==g?(Yh.x=h*Pf.x-g*Pf.y,Yh.y=g*Pf.x+h*Pf.y):Yh.copy(Pf);a.copy(b);a.x+=Yh.x;a.y+=Yh.y;a.applyMatrix4(Nk)}function nj(a,b){return a.z-b.z}function jh(a,b){return b.z-a.z}function Vl(a,b,c=0){const e=b.itemSize;if(a.isInterleavedBufferAttribute||a.array.constructor!==b.array.constructor){const g=a.count;for(let h=0;h<g;h++)for(let l=0;l<e;l++)b.setComponent(h+c,l,a.getComponent(h,l))}else b.array.set(a.array,
c*e);b.needsUpdate=!0}function Ok(a,b,c,e,g,h,l){const n=Pk.distanceSqToPoint(a);n<c&&(c=new O,Pk.closestPointToPoint(a,c),c.applyMatrix4(e),a=g.ray.origin.distanceTo(c),a<g.near||a>g.far||h.push({distance:a,distanceToRay:Math.sqrt(n),point:c,index:b,face:null,object:l}))}function kh(){let a=0,b=0,c=0,e=0;return{initCatmullRom:function(g,h,l,n,m){g=m*(l-g);n=m*(n-h);a=h;b=g;c=-3*h+3*l-2*g-n;e=2*h-2*l+g+n},initNonuniformCatmullRom:function(g,h,l,n,m,q,u){g=((h-g)/m-(l-g)/(m+q)+(l-h)/q)*q;n=((l-h)/
q-(n-h)/(q+u)+(n-l)/u)*q;a=h;b=g;c=-3*h+3*l-2*g-n;e=2*h-2*l+g+n},calc:function(g){const h=g*g;return a+b*g+c*h+e*h*g}}}function Zh(a,b,c,e,g){b=.5*(e-b);g=.5*(g-c);const h=a*a;return(2*c-2*e+b+g)*a*h+(-3*c+3*e-2*b-g)*h+b*a+c}function wg(a,b,c,e){const g=1-a;return g*g*b+2*(1-a)*a*c+a*a*e}function $h(a,b,c,e,g){const h=1-a,l=1-a;return h*h*h*b+3*l*l*a*c+3*(1-a)*a*a*e+a*a*a*g}function oj(a,b,c,e,g){let h,l=0;for(let n=b,m=c-e;n<c;n+=e)l+=(a[m]-a[n])*(a[n+1]+a[m+1]),m=n;if(g===0<l)for(g=b;g<c;g+=e)h=
Qk(g,a[g],a[g+1],h);else for(g=c-e;g>=b;g-=e)h=Qk(g,a[g],a[g+1],h);h&&vc(h,h.next)&&(Qf(h),h=h.next);return h}function Td(a,b){if(!a)return a;b||(b=a);let c;do if(c=!1,a.steiner||!vc(a,a.next)&&0!==qc(a.prev,a,a.next))a=a.next;else{Qf(a);a=b=a.prev;if(a===a.next)break;c=!0}while(c||a!==b);return b}function lh(a,b,c,e,g,h,l){if(a){if(!l&&h){var n=a,m=n;do 0===m.z&&(m.z=Rf(m.x,m.y,e,g,h)),m.prevZ=m.prev,m=m.nextZ=m.next;while(m!==n);m.prevZ.nextZ=null;m.prevZ=null;n=m;var q,u,t,w,B=1;do{m=n;var z=n=
null;for(u=0;m;){u++;var D=m;for(q=t=0;q<B&&(t++,D=D.nextZ,D);q++);for(w=B;0<t||0<w&&D;)0!==t&&(0===w||!D||m.z<=D.z)?(q=m,m=m.nextZ,t--):(q=D,D=D.nextZ,w--),z?z.nextZ=q:n=q,q.prevZ=z,z=q;m=D}z.nextZ=null;B*=2}while(1<u)}for(n=a;a.prev!==a.next;){m=a.prev;D=a.next;if(h)z=xg(a,e,g,h);else a:{z=a.prev;var J=a;w=a.next;if(0<=qc(z,J,w)){z=!1;break a}u=z.x;t=J.x;B=w.x;q=z.y;J=J.y;const A=w.y,K=u<t?u<B?u:B:t<B?t:B,oa=q<J?q<A?q:A:J<A?J:A,R=u>t?u>B?u:B:t>B?t:B,U=q>J?q>A?q:A:J>A?J:A;for(w=w.next;w!==z;){if(w.x>=
K&&w.x<=R&&w.y>=oa&&w.y<=U&&hf(u,q,t,J,B,A,w.x,w.y)&&0<=qc(w.prev,w,w.next)){z=!1;break a}w=w.next}z=!0}if(z)b.push(m.i/c|0),b.push(a.i/c|0),b.push(D.i/c|0),Qf(a),n=a=D.next;else if(a=D,a===n){if(!l)lh(Td(a),b,c,e,g,h,1);else if(1===l){a=Td(a);l=b;n=c;m=a;do D=m.prev,z=m.next.next,!vc(D,z)&&zc(D,m,m.next,z)&&Sf(D,z)&&Sf(z,D)&&(l.push(D.i/n|0),l.push(m.i/n|0),l.push(z.i/n|0),Qf(m),Qf(m.next),m=a=z),m=m.next;while(m!==a);a=Td(m);lh(a,b,c,e,g,h,2)}else if(2===l)a:{l=a;do{for(n=l.next.next;n!==l.prev;){if(m=
l.i!==n.i){m=l;D=n;if(z=m.next.i!==D.i&&m.prev.i!==D.i){b:{z=m;do{if(z.i!==m.i&&z.next.i!==m.i&&z.i!==D.i&&z.next.i!==D.i&&zc(z,z.next,m,D)){z=!0;break b}z=z.next}while(z!==m);z=!1}z=!z}if(z){if(z=Sf(m,D)&&Sf(D,m)){z=m;u=!1;t=(m.x+D.x)/2;B=(m.y+D.y)/2;do z.y>B!==z.next.y>B&&z.next.y!==z.y&&t<(z.next.x-z.x)*(B-z.y)/(z.next.y-z.y)+z.x&&(u=!u),z=z.next;while(z!==m);z=u}z=z&&(qc(m.prev,m,D.prev)||qc(m,D.prev,D))||vc(m,D)&&0<qc(m.prev,m,m.next)&&0<qc(D.prev,D,D.next)}m=z}if(m){a=Rk(l,n);l=Td(l,l.next);
a=Td(a,a.next);lh(l,b,c,e,g,h,0);lh(a,b,c,e,g,h,0);break a}n=n.next}l=l.next}while(l!==a)}break}}}}function xg(a,b,c,e){const g=a.prev,h=a.next;if(0<=qc(g,a,h))return!1;const l=g.x,n=a.x,m=h.x,q=g.y,u=a.y,t=h.y,w=l<n?l<m?l:m:n<m?n:m,B=q<u?q<t?q:t:u<t?u:t,z=l>n?l>m?l:m:n>m?n:m,D=q>u?q>t?q:t:u>t?u:t,J=Rf(w,B,b,c,e);b=Rf(z,D,b,c,e);c=a.prevZ;for(a=a.nextZ;c&&c.z>=J&&a&&a.z<=b;){if(c.x>=w&&c.x<=z&&c.y>=B&&c.y<=D&&c!==g&&c!==h&&hf(l,q,n,u,m,t,c.x,c.y)&&0<=qc(c.prev,c,c.next))return!1;c=c.prevZ;if(a.x>=
w&&a.x<=z&&a.y>=B&&a.y<=D&&a!==g&&a!==h&&hf(l,q,n,u,m,t,a.x,a.y)&&0<=qc(a.prev,a,a.next))return!1;a=a.nextZ}for(;c&&c.z>=J;){if(c.x>=w&&c.x<=z&&c.y>=B&&c.y<=D&&c!==g&&c!==h&&hf(l,q,n,u,m,t,c.x,c.y)&&0<=qc(c.prev,c,c.next))return!1;c=c.prevZ}for(;a&&a.z<=b;){if(a.x>=w&&a.x<=z&&a.y>=B&&a.y<=D&&a!==g&&a!==h&&hf(l,q,n,u,m,t,a.x,a.y)&&0<=qc(a.prev,a,a.next))return!1;a=a.nextZ}return!0}function ai(a,b){return a.x-b.x}function Rf(a,b,c,e,g){a=(a-c)*g|0;b=(b-e)*g|0;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;
a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function hf(a,b,c,e,g,h,l,n){return(g-l)*(b-n)>=(a-l)*(h-n)&&(a-l)*(e-n)>=(c-l)*(b-n)&&(c-l)*(h-n)>=(g-l)*(e-n)}function qc(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function vc(a,b){return a.x===b.x&&a.y===b.y}function zc(a,b,c,e){const g=nd(qc(a,b,c)),h=nd(qc(a,b,e)),l=nd(qc(c,e,a)),n=nd(qc(c,e,b));return g!==h&&l!==n||0===g&&jf(a,c,b)||0===h&&jf(a,e,b)||
0===l&&jf(c,a,e)||0===n&&jf(c,b,e)?!0:!1}function jf(a,b,c){return b.x<=Math.max(a.x,c.x)&&b.x>=Math.min(a.x,c.x)&&b.y<=Math.max(a.y,c.y)&&b.y>=Math.min(a.y,c.y)}function nd(a){return 0<a?1:0>a?-1:0}function Sf(a,b){return 0>qc(a.prev,a,a.next)?0<=qc(a,b,a.next)&&0<=qc(a,a.prev,b):0>qc(a,b,a.prev)||0>qc(a,a.next,b)}function Rk(a,b){const c=new pj(a.i,a.x,a.y),e=new pj(b.i,b.x,b.y),g=a.next,h=b.prev;a.next=b;b.prev=a;c.next=g;g.prev=c;e.next=c;c.prev=e;h.next=e;e.prev=h;return e}function Qk(a,b,c,
e){a=new pj(a,b,c);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function Qf(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function pj(a,b,c){this.i=a;this.x=b;this.y=c;this.next=this.prev=null;this.z=0;this.nextZ=this.prevZ=null;this.steiner=!1}function Sk(a){const b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function Wl(a,b){for(let c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}function kf(a,b,c){const e=
`${a.x},${a.y},${a.z}-${b.x},${b.y},${b.z}`;a=`${b.x},${b.y},${b.z}-${a.x},${a.y},${a.z}`;if(!0===c.has(e)||!0===c.has(a))return!1;c.add(e);c.add(a);return!0}function ce(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)}function Tk(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function qj(a){const b=a.length,c=Array(b);for(let e=0;e!==b;++e)c[e]=e;c.sort(function(e,g){return a[e]-a[g]});return c}function bi(a,b,c){const e=
a.length,g=new a.constructor(e);for(let h=0,l=0;l!==e;++h){const n=c[h]*b;for(let m=0;m!==b;++m)g[l++]=a[n+m]}return g}function rj(a,b,c,e){let g=1,h=a[0];for(;void 0!==h&&void 0===h[e];)h=a[g++];if(void 0!==h){var l=h[e];if(void 0!==l)if(Array.isArray(l)){do l=h[e],void 0!==l&&(b.push(h.time),c.push.apply(c,l)),h=a[g++];while(void 0!==h)}else if(void 0!==l.toArray){do l=h[e],void 0!==l&&(b.push(h.time),l.toArray(c,c.length)),h=a[g++];while(void 0!==h)}else{do l=h[e],void 0!==l&&(b.push(h.time),c.push(l)),
h=a[g++];while(void 0!==h)}}}function Xl(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return de;case "vector":case "vector2":case "vector3":case "vector4":return Id;case "color":return Fe;case "quaternion":return hd;case "bool":case "boolean":return ee;case "string":return rc}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}function sj(){return("undefined"===typeof performance?Date:performance).now()}function tj(a,b){return a.distance-
b.distance}function uj(a,b,c,e){a.layers.test(b.layers)&&a.raycast(b,c);if(!0===e){a=a.children;for(let g=0,h=a.length;g<h;g++)uj(a[g],b,c,!0)}}function ci(a){const b=[];!0===a.isBone&&b.push(a);for(let c=0;c<a.children.length;c++)b.push.apply(b,ci(a.children[c]));return b}function Oc(a,b,c,e,g,h,l){Za.set(g,h,l).unproject(e);a=b[a];if(void 0!==a){c=c.getAttribute("position");for(let n=0,m=a.length;n<m;n++)c.setXYZ(a[n],Za.x,Za.y,Za.z)}}class Jd{addEventListener(a,b){void 0===this._listeners&&(this._listeners=
{});const c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)}hasEventListener(a,b){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)}removeEventListener(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))}dispatchEvent(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(let c=0,e=b.length;c<e;c++)b[c].call(this,
a);a.target=null}}}}const bd="00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35 36 37 38 39 3a 3b 3c 3d 3e 3f 40 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d 4e 4f 50 51 52 53 54 55 56 57 58 59 5a 5b 5c 5d 5e 5f 60 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 78 79 7a 7b 7c 7d 7e 7f 80 81 82 83 84 85 86 87 88 89 8a 8b 8c 8d 8e 8f 90 91 92 93 94 95 96 97 98 99 9a 9b 9c 9d 9e 9f a0 a1 a2 a3 a4 a5 a6 a7 a8 a9 aa ab ac ad ae af b0 b1 b2 b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 ca cb cc cd ce cf d0 d1 d2 d3 d4 d5 d6 d7 d8 d9 da db dc dd de df e0 e1 e2 e3 e4 e5 e6 e7 e8 e9 ea eb ec ed ee ef f0 f1 f2 f3 f4 f5 f6 f7 f8 f9 fa fb fc fd fe ff".split(" ");
let pe=1234567;const lf=Math.PI/180,Tf=180/Math.PI,mh={DEG2RAD:lf,RAD2DEG:Tf,generateUUID:wa,clamp:Gb,euclideanModulo:Nb,mapLinear:function(a,b,c,e,g){return e+(a-b)*(g-e)/(c-b)},inverseLerp:function(a,b,c){return a!==b?(c-a)/(b-a):0},lerp:Xb,damp:function(a,b,c,e){return Xb(a,b,1-Math.exp(-c*e))},pingpong:function(a,b=1){return b-Math.abs(Nb(a,2*b)-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=
c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},seededRandom:function(a){void 0!==a&&(pe=a);a=pe+=1831565813;a=Math.imul(a^a>>>15,a|1);a^=a+Math.imul(a^a>>>7,a|61);return((a^a>>>14)>>>0)/4294967296},degToRad:function(a){return a*lf},radToDeg:function(a){return a*Tf},isPowerOfTwo:kc,ceilPowerOfTwo:function(a){return Math.pow(2,
Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:xc,setQuaternionFromProperEuler:function(a,b,c,e,g){var h=Math.cos;const l=Math.sin,n=h(c/2);c=l(c/2);const m=h((b+e)/2),q=l((b+e)/2),u=h((b-e)/2),t=l((b-e)/2);h=h((e-b)/2);b=l((e-b)/2);switch(g){case "XYX":a.set(n*q,c*u,c*t,n*m);break;case "YZY":a.set(c*t,n*q,c*u,n*m);break;case "ZXZ":a.set(c*u,c*t,n*q,n*m);break;case "XZX":a.set(n*q,c*b,c*h,n*m);break;case "YXY":a.set(c*h,n*q,c*b,n*m);break;case "ZYZ":a.set(c*b,c*h,n*q,n*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+
g)}},normalize:rb,denormalize:hb};class Fa{constructor(a=0,b=0){Fa.prototype.isVector2=!0;this.x=a;this.y=b}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,b){this.x=a;this.y=b;return this}setScalar(a){this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y)}copy(a){this.x=a.x;this.y=a.y;return this}add(a){this.x+=a.x;this.y+=a.y;return this}addScalar(a){this.x+=a;this.y+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;return this}sub(a){this.x-=a.x;this.y-=a.y;return this}subScalar(a){this.x-=a;this.y-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-
b.y;return this}multiply(a){this.x*=a.x;this.y*=a.y;return this}multiplyScalar(a){this.x*=a;this.y*=a;return this}divide(a){this.x/=a.x;this.y/=a.y;return this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this}clamp(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));return this}clampLength(a,b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=
Math.trunc(this.x);this.y=Math.trunc(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(a){const b=Math.sqrt(this.lengthSq()*a.lengthSq());
if(0===b)return Math.PI/2;a=this.dot(a)/b;return Math.acos(Gb(a,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=this.x-a.x;a=this.y-a.y;return b*b+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this}lerpVectors(a,b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;return this}equals(a){return a.x===this.x&&a.y===
this.y}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);return this}rotateAround(a,b){const c=Math.cos(b);b=Math.sin(b);const e=this.x-a.x,g=this.y-a.y;this.x=e*c-g*b+a.x;this.y=e*b+g*c+a.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}class Ub{constructor(a,b,c,e,g,h,l,n,m){Ub.prototype.isMatrix3=!0;this.elements=
[1,0,0,0,1,0,0,0,1];void 0!==a&&this.set(a,b,c,e,g,h,l,n,m)}set(a,b,c,e,g,h,l,n,m){const q=this.elements;q[0]=a;q[1]=e;q[2]=l;q[3]=b;q[4]=g;q[5]=n;q[6]=c;q[7]=h;q[8]=m;return this}identity(){this.set(1,0,0,0,1,0,0,0,1);return this}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this}extractBasis(a,b,c){a.setFromMatrix3Column(this,0);b.setFromMatrix3Column(this,1);c.setFromMatrix3Column(this,2);return this}setFromMatrix4(a){a=
a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var c=a.elements,e=b.elements;b=this.elements;a=c[0];const g=c[3],h=c[6],l=c[1],n=c[4],m=c[7],q=c[2],u=c[5];c=c[8];const t=e[0],w=e[3],B=e[6],z=e[1],D=e[4],J=e[7],A=e[2],K=e[5];e=e[8];b[0]=a*t+g*z+h*A;b[3]=a*w+g*D+h*K;b[6]=a*B+g*J+h*e;b[1]=l*t+n*z+m*A;b[4]=l*w+n*D+m*K;b[7]=l*B+n*J+m*e;b[2]=q*t+u*z+
c*A;b[5]=q*w+u*D+c*K;b[8]=q*B+u*J+c*e;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this}determinant(){var a=this.elements;const b=a[0],c=a[1],e=a[2],g=a[3],h=a[4],l=a[5],n=a[6],m=a[7];a=a[8];return b*h*a-b*l*m-c*g*a+c*l*n+e*g*m-e*h*n}invert(){const a=this.elements,b=a[0],c=a[1],e=a[2],g=a[3],h=a[4],l=a[5],n=a[6],m=a[7],q=a[8],u=q*h-l*m,t=l*n-q*g,w=m*g-h*n;var B=b*u+c*t+e*w;if(0===B)return this.set(0,0,0,0,0,0,0,
0,0);B=1/B;a[0]=u*B;a[1]=(e*m-q*c)*B;a[2]=(l*c-e*h)*B;a[3]=t*B;a[4]=(q*b-e*n)*B;a[5]=(e*g-l*b)*B;a[6]=w*B;a[7]=(c*n-m*b)*B;a[8]=(h*b-c*g)*B;return this}transpose(){let a;const b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}setUvTransform(a,
b,c,e,g,h,l){const n=Math.cos(g);g=Math.sin(g);this.set(c*n,c*g,-c*(n*h+g*l)+h+a,-e*g,e*n,-e*(-g*h+n*l)+l+b,0,0,1);return this}scale(a,b){this.premultiply(vj.makeScale(a,b));return this}rotate(a){this.premultiply(vj.makeRotation(-a));return this}translate(a,b){this.premultiply(vj.makeTranslation(a,b));return this}makeTranslation(a,b){a.isVector2?this.set(1,0,a.x,0,1,a.y,0,0,1):this.set(1,0,a,0,1,b,0,0,1);return this}makeRotation(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,a,b,0,0,0,1);return this}makeScale(a,
b){this.set(a,0,0,0,b,0,0,0,1);return this}equals(a){const b=this.elements;a=a.elements;for(let c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0}fromArray(a,b=0){for(let c=0;9>c;c++)this.elements[c]=a[c+b];return this}toArray(a=[],b=0){const c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}clone(){return(new this.constructor).fromArray(this.elements)}}const vj=new Ub,Ud={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,
Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array},$i={},Uk=(new Ub).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Qe=(new Ub).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ge={["srgb-linear"]:{transfer:"linear",primaries:"rec709",toReference:a=>a,fromReference:a=>a},srgb:{transfer:"srgb",primaries:"rec709",toReference:a=>a.convertSRGBToLinear(),fromReference:a=>a.convertLinearToSRGB()},["display-p3-linear"]:{transfer:"linear",primaries:"p3",
toReference:a=>a.applyMatrix3(Qe),fromReference:a=>a.applyMatrix3(Uk)},["display-p3"]:{transfer:"srgb",primaries:"p3",toReference:a=>a.convertSRGBToLinear().applyMatrix3(Qe),fromReference:a=>a.applyMatrix3(Uk).convertLinearToSRGB()}},wj=new Set(["srgb-linear","display-p3-linear"]),lc={enabled:!0,_workingColorSpace:"srgb-linear",get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(a){if(!wj.has(a))throw Error(`Unsupported working color space, "${a}".`);this._workingColorSpace=
a},convert:function(a,b,c){if(!1===this.enabled||b===c||!b||!c)return a;b=Ge[b].toReference;c=Ge[c].fromReference;return c(b(a))},fromWorkingColorSpace:function(a,b){return this.convert(a,this._workingColorSpace,b)},toWorkingColorSpace:function(a,b){return this.convert(a,b,this._workingColorSpace)},getPrimaries:function(a){return Ge[a].primaries},getTransfer:function(a){return""===a?"linear":Ge[a].transfer}};let mf;class aj{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"===typeof HTMLCanvasElement)return a.src;
if(a instanceof HTMLCanvasElement)var b=a;else void 0===mf&&(mf=fc("canvas")),mf.width=a.width,mf.height=a.height,b=mf.getContext("2d"),a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height),b=mf;return 2048<b.width||2048<b.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),b.toDataURL("image/jpeg",.6)):b.toDataURL("image/png")}static sRGBToLinear(a){if("undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement||
"undefined"!==typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap){var b=fc("canvas");b.width=a.width;b.height=a.height;var c=b.getContext("2d");c.drawImage(a,0,0,a.width,a.height);a=c.getImageData(0,0,a.width,a.height);const e=a.data;for(let g=0;g<e.length;g++)e[g]=255*ab(e[g]/255);c.putImageData(a,0,0);return b}if(a.data){b=a.data.slice(0);for(c=0;c<b.length;c++)b[c]=b instanceof Uint8Array||b instanceof Uint8ClampedArray?Math.floor(255*
ab(b[c]/255)):ab(b[c]);return{data:b,width:a.width,height:a.height}}console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.");return a}}let Vk=0;class Uf{constructor(a=null){this.isSource=!0;Object.defineProperty(this,"id",{value:Vk++});this.uuid=wa();this.data=a;this.dataReady=!0;this.version=0}set needsUpdate(a){!0===a&&this.version++}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.images[this.uuid])return a.images[this.uuid];
const c={uuid:this.uuid,url:""},e=this.data;if(null!==e){let g;if(Array.isArray(e)){g=[];for(let h=0,l=e.length;h<l;h++)e[h].isDataTexture?g.push(Y(e[h].image)):g.push(Y(e[h]))}else g=Y(e);c.url=g}b||(a.images[this.uuid]=c);return c}}let Yl=0;class Pc extends Jd{constructor(a=Pc.DEFAULT_IMAGE,b=Pc.DEFAULT_MAPPING,c=1001,e=1001,g=1006,h=1008,l=1023,n=1009,m=Pc.DEFAULT_ANISOTROPY,q=""){super();this.isTexture=!0;Object.defineProperty(this,"id",{value:Yl++});this.uuid=wa();this.name="";this.source=new Uf(a);
this.mipmaps=[];this.mapping=b;this.channel=0;this.wrapS=c;this.wrapT=e;this.magFilter=g;this.minFilter=h;this.anisotropy=m;this.format=l;this.internalFormat=null;this.type=n;this.offset=new Fa(0,0);this.repeat=new Fa(1,1);this.center=new Fa(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new Ub;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.colorSpace=q;this.userData={};this.version=0;this.onUpdate=null;this.needsPMREMUpdate=this.isRenderTargetTexture=
!1}get image(){return this.source.data}set image(a=null){this.source.data=a}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.source=a.source;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.channel=a.channel;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;
this.format=a.format;this.internalFormat=a.internalFormat;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.colorSpace=a.colorSpace;this.userData=JSON.parse(JSON.stringify(a.userData));this.needsUpdate=!0;return this}toJSON(a){const b=
void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const c={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(a).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,
colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};0<Object.keys(this.userData).length&&(c.userData=this.userData);b||(a.textures[this.uuid]=c);return c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=
Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}set needsUpdate(a){!0===a&&(this.version++,this.source.needsUpdate=!0)}}Pc.DEFAULT_IMAGE=null;Pc.DEFAULT_MAPPING=300;Pc.DEFAULT_ANISOTROPY=1;class mc{constructor(a=
0,b=0,c=0,e=1){mc.prototype.isVector4=!0;this.x=a;this.y=b;this.z=c;this.w=e}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this}setScalar(a){this.w=this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setW(a){this.w=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;
case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;this.w+=
a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this}sub(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this}multiply(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this}multiplyScalar(a){this.x*=
a;this.y*=a;this.z*=a;this.w*=a;return this}applyMatrix4(a){const b=this.x,c=this.y,e=this.z,g=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12]*g;this.y=a[1]*b+a[5]*c+a[9]*e+a[13]*g;this.z=a[2]*b+a[6]*c+a[10]*e+a[14]*g;this.w=a[3]*b+a[7]*c+a[11]*e+a[15]*g;return this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this}setAxisAngleFromRotationMatrix(a){a=
a.elements;var b=a[0];var c=a[4];var e=a[8];const g=a[1];var h=a[5],l=a[9];var n=a[2];var m=a[6];var q=a[10];if(.01>Math.abs(c-g)&&.01>Math.abs(e-n)&&.01>Math.abs(l-m)){if(.1>Math.abs(c+g)&&.1>Math.abs(e+n)&&.1>Math.abs(l+m)&&.1>Math.abs(b+h+q-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;h=(h+1)/2;q=(q+1)/2;c=(c+g)/4;e=(e+n)/4;l=(l+m)/4;b>h&&b>q?.01>b?(m=0,c=n=.707106781):(m=Math.sqrt(b),n=c/m,c=e/m):h>q?.01>h?(m=.707106781,n=0,c=.707106781):(n=Math.sqrt(h),m=c/n,c=l/n):.01>q?(n=m=.707106781,
c=0):(c=Math.sqrt(q),m=e/c,n=l/c);this.set(m,n,c,a);return this}a=Math.sqrt((m-l)*(m-l)+(e-n)*(e-n)+(g-c)*(g-c));.001>Math.abs(a)&&(a=1);this.x=(m-l)/a;this.y=(e-n)/a;this.z=(g-c)/a;this.w=Math.acos((b+h+q-1)/2);return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this}clamp(a,b){this.x=
Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));this.w=Math.max(a,Math.min(b,this.w));return this}clampLength(a,b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this}roundToZero(){this.x=Math.trunc(this.x);this.y=Math.trunc(this.y);this.z=Math.trunc(this.z);this.w=Math.trunc(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=
-this.z;this.w=-this.w;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*
b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this}lerpVectors(a,b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;this.z=a.z+(b.z-a.z)*c;this.w=a.w+(b.w-a.w)*c;return this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a}fromBufferAttribute(a,b){this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=
a.getW(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}class nh extends Jd{constructor(a=1,b=1,c={}){super();this.isRenderTarget=!0;this.width=a;this.height=b;this.depth=1;this.scissor=new mc(0,0,a,b);this.scissorTest=!1;this.viewport=new mc(0,0,a,b);a={width:a,height:b,depth:1};c=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,
stencilBuffer:!1,depthTexture:null,samples:0,count:1},c);a=new Pc(a,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.colorSpace);a.flipY=!1;a.generateMipmaps=c.generateMipmaps;a.internalFormat=c.internalFormat;this.textures=[];b=c.count;for(let e=0;e<b;e++)this.textures[e]=a.clone(),this.textures[e].isRenderTargetTexture=!0;this.depthBuffer=c.depthBuffer;this.stencilBuffer=c.stencilBuffer;this.depthTexture=c.depthTexture;this.samples=c.samples}get texture(){return this.textures[0]}set texture(a){this.textures[0]=
a}setSize(a,b,c=1){if(this.width!==a||this.height!==b||this.depth!==c){this.width=a;this.height=b;this.depth=c;for(let e=0,g=this.textures.length;e<g;e++)this.textures[e].image.width=a,this.textures[e].image.height=b,this.textures[e].image.depth=c;this.dispose()}this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width;this.height=a.height;this.depth=a.depth;this.scissor.copy(a.scissor);this.scissorTest=a.scissorTest;this.viewport.copy(a.viewport);
this.textures.length=0;for(let c=0,e=a.textures.length;c<e;c++)this.textures[c]=a.textures[c].clone(),this.textures[c].isRenderTargetTexture=!0;const b=Object.assign({},a.texture.image);this.texture.source=new Uf(b);this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;null!==a.depthTexture&&(this.depthTexture=a.depthTexture.clone());this.samples=a.samples;return this}dispose(){this.dispatchEvent({type:"dispose"})}}class Rd extends nh{constructor(a=1,b=1,c={}){super(a,b,c);this.isWebGLRenderTarget=
!0}}class Oh extends Pc{constructor(a=null,b=1,c=1,e=1){super(null);this.isDataArrayTexture=!0;this.image={data:a,width:b,height:c,depth:e};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class Zl extends Rd{constructor(a=1,b=1,c=1,e={}){super(a,b,e);this.isWebGLArrayRenderTarget=!0;this.depth=c;this.texture=new Oh(null,a,b,c);this.texture.isRenderTargetTexture=!0}}class nf extends Pc{constructor(a=null,b=1,c=1,e=1){super(null);this.isData3DTexture=
!0;this.image={data:a,width:b,height:c,depth:e};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}class Wk extends Rd{constructor(a=1,b=1,c=1,e={}){super(a,b,e);this.isWebGL3DRenderTarget=!0;this.depth=c;this.texture=new nf(null,a,b,c);this.texture.isRenderTargetTexture=!0}}class dd{constructor(a=0,b=0,c=0,e=1){this.isQuaternion=!0;this._x=a;this._y=b;this._z=c;this._w=e}static slerpFlat(a,b,c,e,g,h,l){let n=c[e+0],m=c[e+1],q=c[e+2];c=c[e+
3];e=g[h+0];const u=g[h+1],t=g[h+2];g=g[h+3];if(0===l)a[b+0]=n,a[b+1]=m,a[b+2]=q,a[b+3]=c;else if(1===l)a[b+0]=e,a[b+1]=u,a[b+2]=t,a[b+3]=g;else{if(c!==g||n!==e||m!==u||q!==t){h=1-l;var w=n*e+m*u+q*t+c*g,B=0<=w?1:-1,z=1-w*w;z>Number.EPSILON&&(z=Math.sqrt(z),w=Math.atan2(z,w*B),h=Math.sin(h*w)/z,l=Math.sin(l*w)/z);B*=l;n=n*h+e*B;m=m*h+u*B;q=q*h+t*B;c=c*h+g*B;h===1-l&&(l=1/Math.sqrt(n*n+m*m+q*q+c*c),n*=l,m*=l,q*=l,c*=l)}a[b]=n;a[b+1]=m;a[b+2]=q;a[b+3]=c}}static multiplyQuaternionsFlat(a,b,c,e,g,h){const l=
c[e],n=c[e+1],m=c[e+2];c=c[e+3];e=g[h];const q=g[h+1],u=g[h+2];g=g[h+3];a[b]=l*g+c*e+n*u-m*q;a[b+1]=n*g+c*q+m*e-l*u;a[b+2]=m*g+c*u+l*q-n*e;a[b+3]=c*g-l*e-n*q-m*u;return a}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a;this._onChangeCallback()}set(a,b,c,e){this._x=a;this._y=b;this._z=c;this._w=e;this._onChangeCallback();
return this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this._onChangeCallback();return this}setFromEuler(a,b=!0){var c=a._x,e=a._y,g=a._z;a=a._order;var h=Math.cos;const l=Math.sin,n=h(c/2),m=h(e/2);h=h(g/2);c=l(c/2);e=l(e/2);g=l(g/2);switch(a){case "XYZ":this._x=c*m*h+n*e*g;this._y=n*e*h-c*m*g;this._z=n*m*g+c*e*h;this._w=n*m*h-c*e*g;break;case "YXZ":this._x=c*m*h+n*e*g;this._y=n*e*h-c*m*g;this._z=n*m*g-c*e*h;this._w=
n*m*h+c*e*g;break;case "ZXY":this._x=c*m*h-n*e*g;this._y=n*e*h+c*m*g;this._z=n*m*g+c*e*h;this._w=n*m*h-c*e*g;break;case "ZYX":this._x=c*m*h-n*e*g;this._y=n*e*h+c*m*g;this._z=n*m*g-c*e*h;this._w=n*m*h+c*e*g;break;case "YZX":this._x=c*m*h+n*e*g;this._y=n*e*h+c*m*g;this._z=n*m*g-c*e*h;this._w=n*m*h-c*e*g;break;case "XZY":this._x=c*m*h-n*e*g;this._y=n*e*h-c*m*g;this._z=n*m*g+c*e*h;this._w=n*m*h+c*e*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}!0===
b&&this._onChangeCallback();return this}setFromAxisAngle(a,b){b/=2;const c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this._onChangeCallback();return this}setFromRotationMatrix(a){var b=a.elements,c=b[0];a=b[4];const e=b[8],g=b[1],h=b[5],l=b[9],n=b[2],m=b[6];b=b[10];const q=c+h+b;0<q?(c=.5/Math.sqrt(q+1),this._w=.25/c,this._x=(m-l)*c,this._y=(e-n)*c,this._z=(g-a)*c):c>h&&c>b?(c=2*Math.sqrt(1+c-h-b),this._w=(m-l)/c,this._x=.25*c,this._y=(a+g)/c,this._z=(e+n)/c):h>b?(c=
2*Math.sqrt(1+h-c-b),this._w=(e-n)/c,this._x=(a+g)/c,this._y=.25*c,this._z=(l+m)/c):(c=2*Math.sqrt(1+b-c-h),this._w=(g-a)/c,this._x=(e+n)/c,this._y=(l+m)/c,this._z=.25*c);this._onChangeCallback();return this}setFromUnitVectors(a,b){let c=a.dot(b)+1;c<Number.EPSILON?(c=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0):(this._x=0,this._y=-a.z,this._z=a.y)):(this._x=a.y*b.z-a.z*b.y,this._y=a.z*b.x-a.x*b.z,this._z=a.x*b.y-a.y*b.x);this._w=c;return this.normalize()}angleTo(a){return 2*
Math.acos(Math.abs(Gb(this.dot(a),-1,1)))}rotateTowards(a,b){const c=this.angleTo(a);if(0===c)return this;this.slerp(a,Math.min(1,b/c));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+
this._z*this._z+this._w*this._w)}normalize(){let a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this._onChangeCallback();return this}multiply(a){return this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,b){const c=a._x,e=a._y,g=a._z;a=a._w;const h=b._x,l=b._y,n=b._z;b=b._w;this._x=c*b+a*h+e*n-g*l;this._y=e*b+a*l+g*h-c*n;this._z=g*b+a*n+c*l-e*h;this._w=a*b-c*h-e*l-g*n;this._onChangeCallback();
return this}slerp(a,b){if(0===b)return this;if(1===b)return this.copy(a);const c=this._x,e=this._y,g=this._z,h=this._w;var l=h*a._w+c*a._x+e*a._y+g*a._z;0>l?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,l=-l):this.copy(a);if(1<=l)return this._w=h,this._x=c,this._y=e,this._z=g,this;a=1-l*l;if(a<=Number.EPSILON)return l=1-b,this._w=l*h+b*this._w,this._x=l*c+b*this._x,this._y=l*e+b*this._y,this._z=l*g+b*this._z,this.normalize(),this;a=Math.sqrt(a);const n=Math.atan2(a,l);l=Math.sin((1-b)*
n)/a;b=Math.sin(b*n)/a;this._w=h*l+this._w*b;this._x=c*l+this._x*b;this._y=e*l+this._y*b;this._z=g*l+this._z*b;this._onChangeCallback();return this}slerpQuaternions(a,b,c){return this.copy(a).slerp(b,c)}random(){const a=2*Math.PI*Math.random(),b=2*Math.PI*Math.random();var c=Math.random();const e=Math.sqrt(1-c);c=Math.sqrt(c);return this.set(e*Math.sin(a),e*Math.cos(a),c*Math.sin(b),c*Math.cos(b))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,b=0){this._x=
a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this._onChangeCallback();return this}toArray(a=[],b=0){a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a}fromBufferAttribute(a,b){this._x=a.getX(b);this._y=a.getY(b);this._z=a.getZ(b);this._w=a.getW(b);this._onChangeCallback();return this}toJSON(){return this.toArray()}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._w}}class O{constructor(a=
0,b=0,c=0){O.prototype.isVector3=!0;this.x=a;this.y=b;this.z=c}set(a,b,c){void 0===c&&(c=this.z);this.x=a;this.y=b;this.z=c;return this}setScalar(a){this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;
default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;return this}add(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this}sub(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this}subScalar(a){this.x-=a;this.y-=
a;this.z-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this}multiply(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;return this}multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this}applyEuler(a){return this.applyQuaternion(di.setFromEuler(a))}applyAxisAngle(a,b){return this.applyQuaternion(di.setFromAxisAngle(a,b))}applyMatrix3(a){const b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*
b+a[3]*c+a[6]*e;this.y=a[1]*b+a[4]*c+a[7]*e;this.z=a[2]*b+a[5]*c+a[8]*e;return this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const b=this.x,c=this.y,e=this.z;a=a.elements;const g=1/(a[3]*b+a[7]*c+a[11]*e+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*e+a[12])*g;this.y=(a[1]*b+a[5]*c+a[9]*e+a[13])*g;this.z=(a[2]*b+a[6]*c+a[10]*e+a[14])*g;return this}applyQuaternion(a){const b=this.x,c=this.y,e=this.z,g=a.x,h=a.y,l=a.z;a=a.w;const n=2*(h*e-l*c),m=2*(l*b-g*e),q=2*(g*c-h*b);this.x=
b+a*n+h*q-l*m;this.y=c+a*m+l*n-g*q;this.z=e+a*q+g*m-h*n;return this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e;this.y=a[1]*b+a[5]*c+a[9]*e;this.z=a[2]*b+a[6]*c+a[10]*e;return this.normalize()}divide(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this}divideScalar(a){return this.multiplyScalar(1/
a)}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));return this}clampLength(a,
b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=Math.trunc(this.x);this.y=Math.trunc(this.y);this.z=Math.trunc(this.z);return this}negate(){this.x=
-this.x;this.y=-this.y;this.z=-this.z;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this}lerpVectors(a,
b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;this.z=a.z+(b.z-a.z)*c;return this}cross(a){return this.crossVectors(this,a)}crossVectors(a,b){const c=a.x,e=a.y;a=a.z;const g=b.x,h=b.y;b=b.z;this.x=e*b-a*h;this.y=a*g-c*b;this.z=c*h-e*g;return this}projectOnVector(a){var b=a.lengthSq();if(0===b)return this.set(0,0,0);b=a.dot(this)/b;return this.copy(a).multiplyScalar(b)}projectOnPlane(a){ei.copy(this).projectOnVector(a);return this.sub(ei)}reflect(a){return this.sub(ei.copy(a).multiplyScalar(2*
this.dot(a)))}angleTo(a){const b=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===b)return Math.PI/2;a=this.dot(a)/b;return Math.acos(Gb(a,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,b,c){const e=Math.sin(b)*
a;this.x=e*Math.sin(c);this.y=Math.cos(b)*a;this.z=e*Math.cos(c);return this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,b,c){this.x=a*Math.sin(b);this.y=c;this.z=a*Math.cos(b);return this}setFromMatrixPosition(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this}setFromMatrixScale(a){const b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;
this.y=c;this.z=a;return this}setFromMatrixColumn(a,b){return this.fromArray(a.elements,4*b)}setFromMatrix3Column(a,b){return this.fromArray(a.elements,3*b)}setFromEuler(a){this.x=a._x;this.y=a._y;this.z=a._z;return this}setFromColor(a){this.x=a.r;this.y=a.g;this.z=a.b;return this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,b=0){this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}toArray(a=[],b=0){a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a}fromBufferAttribute(a,b){this.x=
a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this}randomDirection(){const a=Math.random()*Math.PI*2,b=2*Math.random()-1,c=Math.sqrt(1-b*b);this.x=c*Math.cos(a);this.y=b;this.z=c*Math.sin(a);return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z}}const ei=new O,di=new dd;class od{constructor(a=new O(Infinity,Infinity,Infinity),b=new O(-Infinity,-Infinity,-Infinity)){this.isBox3=!0;this.min=a;
this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromArray(a){this.makeEmpty();for(let b=0,c=a.length;b<c;b+=3)this.expandByPoint(fe.fromArray(a,b));return this}setFromBufferAttribute(a){this.makeEmpty();for(let b=0,c=a.count;b<c;b++)this.expandByPoint(fe.fromBufferAttribute(a,b));return this}setFromPoints(a){this.makeEmpty();for(let b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=fe.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);
return this}setFromObject(a,b=!1){this.makeEmpty();return this.expandByObject(a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?
a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}expandByObject(a,b=!1){a.updateWorldMatrix(!1,!1);const c=a.geometry;if(void 0!==c){const e=c.getAttribute("position");if(!0===b&&void 0!==e&&!0!==a.isInstancedMesh)for(let g=0,h=e.count;g<h;g++)!0===a.isMesh?a.getVertexPosition(g,fe):fe.fromBufferAttribute(e,
g),fe.applyMatrix4(a.matrixWorld),this.expandByPoint(fe);else void 0!==a.boundingBox?(null===a.boundingBox&&a.computeBoundingBox(),oh.copy(a.boundingBox)):(null===c.boundingBox&&c.computeBoundingBox(),oh.copy(c.boundingBox)),oh.applyMatrix4(a.matrixWorld),this.union(oh)}a=a.children;for(let e=0,g=a.length;e<g;e++)this.expandByObject(a[e],b);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0}containsBox(a){return this.min.x<=
a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0}intersectsSphere(a){this.clampPoint(a.center,fe);return fe.distanceToSquared(a.center)<=
a.radius*a.radius}intersectsPlane(a){let b,c;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=-a.constant&&c>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(ph);fi.subVectors(this.max,
ph);Vf.subVectors(a.a,ph);Kd.subVectors(a.b,ph);pd.subVectors(a.c,ph);qe.subVectors(Kd,Vf);Re.subVectors(pd,Kd);of.subVectors(Vf,pd);a=[0,-qe.z,qe.y,0,-Re.z,Re.y,0,-of.z,of.y,qe.z,0,-qe.x,Re.z,0,-Re.x,of.z,0,-of.x,-qe.y,qe.x,0,-Re.y,Re.x,0,-of.y,of.x,0];if(!ca(a,Vf,Kd,pd,fi))return!1;a=[1,0,0,0,1,0,0,0,1];if(!ca(a,Vf,Kd,pd,fi))return!1;gi.crossVectors(qe,Re);a=[gi.x,gi.y,gi.z];return ca(a,Vf,Kd,pd,fi)}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,
fe).distanceTo(a)}getBoundingSphere(a){this.isEmpty()?a.makeEmpty():(this.getCenter(a.center),a.radius=.5*this.getSize(fe).length());return a}intersect(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}applyMatrix4(a){if(this.isEmpty())return this;Fc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a);Fc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a);Fc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a);
Fc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a);Fc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a);Fc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a);Fc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a);Fc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a);this.setFromPoints(Fc);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const Fc=[new O,new O,new O,new O,new O,new O,
new O,new O],fe=new O,oh=new od,Vf=new O,Kd=new O,pd=new O,qe=new O,Re=new O,of=new O,ph=new O,fi=new O,gi=new O,If=new O,$l=new od,qh=new O,xj=new O;class qd{constructor(a=new O,b=-1){this.isSphere=!0;this.center=a;this.radius=b}set(a,b){this.center.copy(a);this.radius=b;return this}setFromPoints(a,b){const c=this.center;void 0!==b?c.copy(b):$l.setFromPoints(a).getCenter(c);b=0;for(let e=0,g=a.length;e<g;e++)b=Math.max(b,c.distanceToSquared(a[e]));this.radius=Math.sqrt(b);return this}copy(a){this.center.copy(a.center);
this.radius=a.radius;return this}isEmpty(){return 0>this.radius}makeEmpty(){this.center.set(0,0,0);this.radius=-1;return this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,
b){const c=this.center.distanceToSquared(a);b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b}getBoundingBox(a){if(this.isEmpty())return a.makeEmpty(),a;a.set(this.center,this.center);a.expandByScalar(this.radius);return a}applyMatrix4(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this}translate(a){this.center.add(a);return this}expandByPoint(a){if(this.isEmpty())return this.center.copy(a),this.radius=
0,this;qh.subVectors(a,this.center);a=qh.lengthSq();if(a>this.radius*this.radius){a=Math.sqrt(a);const b=.5*(a-this.radius);this.center.addScaledVector(qh,b/a);this.radius+=b}return this}union(a){if(a.isEmpty())return this;if(this.isEmpty())return this.copy(a),this;!0===this.center.equals(a.center)?this.radius=Math.max(this.radius,a.radius):(xj.subVectors(a.center,this.center).setLength(a.radius),this.expandByPoint(qh.copy(a.center).add(xj)),this.expandByPoint(qh.copy(a.center).sub(xj)));return this}equals(a){return a.center.equals(this.center)&&
a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ge=new O,yj=new O,yg=new O,He=new O,zj=new O,rh=new O,Aj=new O;class zg{constructor(a=new O,b=new O(0,0,-1)){this.origin=a;this.direction=b}set(a,b){this.origin.copy(a);this.direction.copy(b);return this}copy(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this}at(a,b){return b.copy(this.origin).addScaledVector(this.direction,a)}lookAt(a){this.direction.copy(a).sub(this.origin).normalize();return this}recast(a){this.origin.copy(this.at(a,
ge));return this}closestPointToPoint(a,b){b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.origin).addScaledVector(this.direction,a)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const b=ge.subVectors(a,this.origin).dot(this.direction);if(0>b)return this.origin.distanceToSquared(a);ge.copy(this.origin).addScaledVector(this.direction,b);return ge.distanceToSquared(a)}distanceSqToSegment(a,b,c,e){yj.copy(a).add(b).multiplyScalar(.5);
yg.copy(b).sub(a).normalize();He.copy(this.origin).sub(yj);var g=.5*a.distanceTo(b),h=-this.direction.dot(yg);const l=He.dot(this.direction),n=-He.dot(yg),m=He.lengthSq(),q=Math.abs(1-h*h);let u;0<q?(a=h*n-l,b=h*l-n,u=g*q,0<=a?b>=-u?b<=u?(g=1/q,a*=g,b*=g,h=a*(a+h*b+2*l)+b*(h*a+b+2*n)+m):(b=g,a=Math.max(0,-(h*b+l)),h=-a*a+b*(b+2*n)+m):(b=-g,a=Math.max(0,-(h*b+l)),h=-a*a+b*(b+2*n)+m):b<=-u?(a=Math.max(0,-(-h*g+l)),b=0<a?-g:Math.min(Math.max(-g,-n),g),h=-a*a+b*(b+2*n)+m):b<=u?(a=0,b=Math.min(Math.max(-g,
-n),g),h=b*(b+2*n)+m):(a=Math.max(0,-(h*g+l)),b=0<a?g:Math.min(Math.max(-g,-n),g),h=-a*a+b*(b+2*n)+m)):(b=0<h?-g:g,a=Math.max(0,-(h*b+l)),h=-a*a+b*(b+2*n)+m);c&&c.copy(this.origin).addScaledVector(this.direction,a);e&&e.copy(yj).addScaledVector(yg,b);return h}intersectSphere(a,b){ge.subVectors(a.center,this.origin);var c=ge.dot(this.direction),e=ge.dot(ge)-c*c;a=a.radius*a.radius;if(e>a)return null;a=Math.sqrt(a-e);e=c-a;c+=a;return 0>c?null:0>e?this.at(c,b):this.at(e,b)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=
a.radius*a.radius}distanceToPlane(a){const b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null}intersectPlane(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)}intersectsPlane(a){const b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1}intersectBox(a,b){let c;var e=1/this.direction.x;var g=1/this.direction.y;const h=1/this.direction.z,l=this.origin;
0<=e?(c=(a.min.x-l.x)*e,e*=a.max.x-l.x):(c=(a.max.x-l.x)*e,e*=a.min.x-l.x);if(0<=g){var n=(a.min.y-l.y)*g;g*=a.max.y-l.y}else n=(a.max.y-l.y)*g,g*=a.min.y-l.y;if(c>g||n>e)return null;if(n>c||isNaN(c))c=n;if(g<e||isNaN(e))e=g;0<=h?(n=(a.min.z-l.z)*h,a=(a.max.z-l.z)*h):(n=(a.max.z-l.z)*h,a=(a.min.z-l.z)*h);if(c>a||n>e)return null;if(n>c||c!==c)c=n;if(a<e||e!==e)e=a;return 0>e?null:this.at(0<=c?c:e,b)}intersectsBox(a){return null!==this.intersectBox(a,ge)}intersectTriangle(a,b,c,e,g){zj.subVectors(b,
a);rh.subVectors(c,a);Aj.crossVectors(zj,rh);b=this.direction.dot(Aj);if(0<b){if(e)return null;e=1}else if(0>b)e=-1,b=-b;else return null;He.subVectors(this.origin,a);a=e*this.direction.dot(rh.crossVectors(He,rh));if(0>a)return null;c=e*this.direction.dot(zj.cross(He));if(0>c||a+c>b)return null;a=-e*He.dot(Aj);return 0>a?null:this.at(a/b,g)}applyMatrix4(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}
class Mb{constructor(a,b,c,e,g,h,l,n,m,q,u,t,w,B,z,D){Mb.prototype.isMatrix4=!0;this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];void 0!==a&&this.set(a,b,c,e,g,h,l,n,m,q,u,t,w,B,z,D)}set(a,b,c,e,g,h,l,n,m,q,u,t,w,B,z,D){const J=this.elements;J[0]=a;J[4]=b;J[8]=c;J[12]=e;J[1]=g;J[5]=h;J[9]=l;J[13]=n;J[2]=m;J[6]=q;J[10]=u;J[14]=t;J[3]=w;J[7]=B;J[11]=z;J[15]=D;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new Mb).fromArray(this.elements)}copy(a){const b=this.elements;
a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this}copyPosition(a){const b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this}setFromMatrix3(a){a=a.elements;this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1);return this}extractBasis(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,
2);return this}makeBasis(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this}extractRotation(a){const b=this.elements,c=a.elements,e=1/Ag.setFromMatrixColumn(a,0).length(),g=1/Ag.setFromMatrixColumn(a,1).length();a=1/Ag.setFromMatrixColumn(a,2).length();b[0]=c[0]*e;b[1]=c[1]*e;b[2]=c[2]*e;b[3]=0;b[4]=c[4]*g;b[5]=c[5]*g;b[6]=c[6]*g;b[7]=0;b[8]=c[8]*a;b[9]=c[9]*a;b[10]=c[10]*a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromEuler(a){const b=this.elements;
var c=a.x,e=a.y,g=a.z;const h=Math.cos(c);c=Math.sin(c);const l=Math.cos(e);e=Math.sin(e);const n=Math.cos(g);g=Math.sin(g);if("XYZ"===a.order){a=h*n;var m=h*g,q=c*n,u=c*g;b[0]=l*n;b[4]=-l*g;b[8]=e;b[1]=m+q*e;b[5]=a-u*e;b[9]=-c*l;b[2]=u-a*e;b[6]=q+m*e;b[10]=h*l}else"YXZ"===a.order?(a=l*n,m=l*g,q=e*n,u=e*g,b[0]=a+u*c,b[4]=q*c-m,b[8]=h*e,b[1]=h*g,b[5]=h*n,b[9]=-c,b[2]=m*c-q,b[6]=u+a*c,b[10]=h*l):"ZXY"===a.order?(a=l*n,m=l*g,q=e*n,u=e*g,b[0]=a-u*c,b[4]=-h*g,b[8]=q+m*c,b[1]=m+q*c,b[5]=h*n,b[9]=u-a*c,
b[2]=-h*e,b[6]=c,b[10]=h*l):"ZYX"===a.order?(a=h*n,m=h*g,q=c*n,u=c*g,b[0]=l*n,b[4]=q*e-m,b[8]=a*e+u,b[1]=l*g,b[5]=u*e+a,b[9]=m*e-q,b[2]=-e,b[6]=c*l,b[10]=h*l):"YZX"===a.order?(a=h*l,m=h*e,q=c*l,u=c*e,b[0]=l*n,b[4]=u-a*g,b[8]=q*g+m,b[1]=g,b[5]=h*n,b[9]=-c*n,b[2]=-e*n,b[6]=m*g+q,b[10]=a-u*g):"XZY"===a.order&&(a=h*l,m=h*e,q=c*l,u=c*e,b[0]=l*n,b[4]=-g,b[8]=e*n,b[1]=a*g+u,b[5]=h*n,b[9]=m*g-q,b[2]=q*g-m,b[6]=c*n,b[10]=u*g+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromQuaternion(a){return this.compose(am,
a,bm)}lookAt(a,b,c){const e=this.elements;Bd.subVectors(a,b);0===Bd.lengthSq()&&(Bd.z=1);Bd.normalize();pf.crossVectors(c,Bd);0===pf.lengthSq()&&(1===Math.abs(c.z)?Bd.x+=1E-4:Bd.z+=1E-4,Bd.normalize(),pf.crossVectors(c,Bd));pf.normalize();Bj.crossVectors(Bd,pf);e[0]=pf.x;e[4]=Bj.x;e[8]=Bd.x;e[1]=pf.y;e[5]=Bj.y;e[9]=Bd.y;e[2]=pf.z;e[6]=Bj.z;e[10]=Bd.z;return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var c=a.elements,
e=b.elements;b=this.elements;a=c[0];const g=c[4],h=c[8],l=c[12],n=c[1],m=c[5],q=c[9],u=c[13],t=c[2],w=c[6],B=c[10],z=c[14],D=c[3],J=c[7],A=c[11];c=c[15];const K=e[0],oa=e[4],R=e[8],U=e[12],ja=e[1],ka=e[5],ea=e[9],xa=e[13],ta=e[2],Da=e[6],Va=e[10],ra=e[14],Xa=e[3],Ja=e[7],ib=e[11];e=e[15];b[0]=a*K+g*ja+h*ta+l*Xa;b[4]=a*oa+g*ka+h*Da+l*Ja;b[8]=a*R+g*ea+h*Va+l*ib;b[12]=a*U+g*xa+h*ra+l*e;b[1]=n*K+m*ja+q*ta+u*Xa;b[5]=n*oa+m*ka+q*Da+u*Ja;b[9]=n*R+m*ea+q*Va+u*ib;b[13]=n*U+m*xa+q*ra+u*e;b[2]=t*K+w*ja+B*ta+
z*Xa;b[6]=t*oa+w*ka+B*Da+z*Ja;b[10]=t*R+w*ea+B*Va+z*ib;b[14]=t*U+w*xa+B*ra+z*e;b[3]=D*K+J*ja+A*ta+c*Xa;b[7]=D*oa+J*ka+A*Da+c*Ja;b[11]=D*R+J*ea+A*Va+c*ib;b[15]=D*U+J*xa+A*ra+c*e;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this}determinant(){const a=this.elements,b=a[0],c=a[4],e=a[8],g=a[12],h=a[1],l=a[5],n=a[9],m=a[13],q=a[2],u=a[6],t=a[10],w=a[14];return a[3]*
(+g*n*u-e*m*u-g*l*t+c*m*t+e*l*w-c*n*w)+a[7]*(+b*n*w-b*m*t+g*h*t-e*h*w+e*m*q-g*n*q)+a[11]*(+b*m*u-b*l*w-g*h*u+c*h*w+g*l*q-c*m*q)+a[15]*(-e*l*q-b*n*u+b*l*t+e*h*u-c*h*t+c*n*q)}transpose(){const a=this.elements;let b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this}setPosition(a,b,c){const e=this.elements;a.isVector3?(e[12]=a.x,e[13]=a.y,e[14]=a.z):(e[12]=a,e[13]=b,e[14]=c);return this}invert(){const a=
this.elements,b=a[0],c=a[1],e=a[2],g=a[3],h=a[4],l=a[5],n=a[6],m=a[7],q=a[8],u=a[9],t=a[10],w=a[11],B=a[12],z=a[13],D=a[14],J=a[15],A=u*D*m-z*t*m+z*n*w-l*D*w-u*n*J+l*t*J,K=B*t*m-q*D*m-B*n*w+h*D*w+q*n*J-h*t*J,oa=q*z*m-B*u*m+B*l*w-h*z*w-q*l*J+h*u*J,R=B*u*n-q*z*n-B*l*t+h*z*t+q*l*D-h*u*D;var U=b*A+c*K+e*oa+g*R;if(0===U)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);U=1/U;a[0]=A*U;a[1]=(z*t*g-u*D*g-z*e*w+c*D*w+u*e*J-c*t*J)*U;a[2]=(l*D*g-z*n*g+z*e*m-c*D*m-l*e*J+c*n*J)*U;a[3]=(u*n*g-l*t*g-u*e*m+c*t*m+
l*e*w-c*n*w)*U;a[4]=K*U;a[5]=(q*D*g-B*t*g+B*e*w-b*D*w-q*e*J+b*t*J)*U;a[6]=(B*n*g-h*D*g-B*e*m+b*D*m+h*e*J-b*n*J)*U;a[7]=(h*t*g-q*n*g+q*e*m-b*t*m-h*e*w+b*n*w)*U;a[8]=oa*U;a[9]=(B*u*g-q*z*g-B*c*w+b*z*w+q*c*J-b*u*J)*U;a[10]=(h*z*g-B*l*g+B*c*m-b*z*m-h*c*J+b*l*J)*U;a[11]=(q*l*g-h*u*g-q*c*m+b*u*m+h*c*w-b*l*w)*U;a[12]=R*U;a[13]=(q*z*e-B*u*e+B*c*t-b*z*t-q*c*D+b*u*D)*U;a[14]=(B*l*e-h*z*e-B*c*n+b*z*n+h*c*D-b*l*D)*U;a[15]=(h*u*e-q*l*e+q*c*n-b*u*n-h*c*t+b*l*t)*U;return this}scale(a){const b=this.elements,c=a.x,
e=a.y;a=a.z;b[0]*=c;b[4]*=e;b[8]*=a;b[1]*=c;b[5]*=e;b[9]*=a;b[2]*=c;b[6]*=e;b[10]*=a;b[3]*=c;b[7]*=e;b[11]*=a;return this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,b,c){a.isVector3?this.set(1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1):this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this}makeRotationX(a){const b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,
b,0,0,0,0,1);return this}makeRotationY(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this}makeRotationZ(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(a,b){const c=Math.cos(b);b=Math.sin(b);const e=1-c,g=a.x,h=a.y;a=a.z;const l=e*g,n=e*h;this.set(l*g+c,l*h-b*a,l*a+b*h,0,l*h+b*a,n*h+c,n*a-b*g,0,l*a-b*h,n*a+b*g,e*a*a+c,0,0,0,0,1);return this}makeScale(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,
1);return this}makeShear(a,b,c,e,g,h){this.set(1,c,g,0,a,1,h,0,b,e,1,0,0,0,0,1);return this}compose(a,b,c){const e=this.elements;var g=b._x,h=b._y,l=b._z,n=b._w,m=g+g,q=h+h,u=l+l;b=g*m;const t=g*q;g*=u;const w=h*q;h*=u;l*=u;m*=n;q*=n;n*=u;u=c.x;const B=c.y;c=c.z;e[0]=(1-(w+l))*u;e[1]=(t+n)*u;e[2]=(g-q)*u;e[3]=0;e[4]=(t-n)*B;e[5]=(1-(b+l))*B;e[6]=(h+m)*B;e[7]=0;e[8]=(g+q)*c;e[9]=(h-m)*c;e[10]=(1-(b+w))*c;e[11]=0;e[12]=a.x;e[13]=a.y;e[14]=a.z;e[15]=1;return this}decompose(a,b,c){var e=this.elements;
let g=Ag.set(e[0],e[1],e[2]).length();const h=Ag.set(e[4],e[5],e[6]).length(),l=Ag.set(e[8],e[9],e[10]).length();0>this.determinant()&&(g=-g);a.x=e[12];a.y=e[13];a.z=e[14];Qc.copy(this);a=1/g;e=1/h;const n=1/l;Qc.elements[0]*=a;Qc.elements[1]*=a;Qc.elements[2]*=a;Qc.elements[4]*=e;Qc.elements[5]*=e;Qc.elements[6]*=e;Qc.elements[8]*=n;Qc.elements[9]*=n;Qc.elements[10]*=n;b.setFromRotationMatrix(Qc);c.x=g;c.y=h;c.z=l;return this}makePerspective(a,b,c,e,g,h,l=2E3){const n=this.elements;if(2E3===l)l=
-(h+g)/(h-g),h=-2*h*g/(h-g);else if(2001===l)l=-h/(h-g),h=-h*g/(h-g);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);n[0]=2*g/(b-a);n[4]=0;n[8]=(b+a)/(b-a);n[12]=0;n[1]=0;n[5]=2*g/(c-e);n[9]=(c+e)/(c-e);n[13]=0;n[2]=0;n[6]=0;n[10]=l;n[14]=h;n[3]=0;n[7]=0;n[11]=-1;n[15]=0;return this}makeOrthographic(a,b,c,e,g,h,l=2E3){const n=this.elements,m=1/(b-a),q=1/(c-e);var u=1/(h-g);if(2E3===l)g=(h+g)*u,u*=-2;else if(2001===l)g*=u,u*=-1;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+
l);n[0]=2*m;n[4]=0;n[8]=0;n[12]=-((b+a)*m);n[1]=0;n[5]=2*q;n[9]=0;n[13]=-((c+e)*q);n[2]=0;n[6]=0;n[10]=u;n[14]=-g;n[3]=0;n[7]=0;n[11]=0;n[15]=1;return this}equals(a){const b=this.elements;a=a.elements;for(let c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0}fromArray(a,b=0){for(let c=0;16>c;c++)this.elements[c]=a[c+b];return this}toArray(a=[],b=0){const c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];
a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}}const Ag=new O,Qc=new Mb,am=new O(0,0,0),bm=new O(1,1,1),pf=new O,Bj=new O,Bd=new O,cm=new Mb,dm=new dd;class he{constructor(a=0,b=0,c=0,e=he.DEFAULT_ORDER){this.isEuler=!0;this._x=a;this._y=b;this._z=c;this._order=e}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get order(){return this._order}set order(a){this._order=
a;this._onChangeCallback()}set(a,b,c,e=this._order){this._x=a;this._y=b;this._z=c;this._order=e;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._onChangeCallback();return this}setFromRotationMatrix(a,b=this._order,c=!0){var e=a.elements;a=e[0];const g=e[4],h=e[8],l=e[1],n=e[5],m=e[9],q=e[2],u=e[6];e=e[10];switch(b){case "XYZ":this._y=Math.asin(Gb(h,-1,1));.9999999>
Math.abs(h)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(u,n),this._z=0);break;case "YXZ":this._x=Math.asin(-Gb(m,-1,1));.9999999>Math.abs(m)?(this._y=Math.atan2(h,e),this._z=Math.atan2(l,n)):(this._y=Math.atan2(-q,a),this._z=0);break;case "ZXY":this._x=Math.asin(Gb(u,-1,1));.9999999>Math.abs(u)?(this._y=Math.atan2(-q,e),this._z=Math.atan2(-g,n)):(this._y=0,this._z=Math.atan2(l,a));break;case "ZYX":this._y=Math.asin(-Gb(q,-1,1));.9999999>Math.abs(q)?(this._x=Math.atan2(u,
e),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-g,n));break;case "YZX":this._z=Math.asin(Gb(l,-1,1));.9999999>Math.abs(l)?(this._x=Math.atan2(-m,n),this._y=Math.atan2(-q,a)):(this._x=0,this._y=Math.atan2(h,e));break;case "XZY":this._z=Math.asin(-Gb(g,-1,1));.9999999>Math.abs(g)?(this._x=Math.atan2(u,n),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-m,e),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+b)}this._order=b;!0===c&&this._onChangeCallback();
return this}setFromQuaternion(a,b,c){cm.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(cm,b,c)}setFromVector3(a,b=this._order){return this.set(a.x,a.y,a.z,b)}reorder(a){dm.setFromEuler(this);return this.setFromQuaternion(dm,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._onChangeCallback();return this}toArray(a=[],b=0){a[b]=this._x;a[b+1]=this._y;
a[b+2]=this._z;a[b+3]=this._order;return a}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x;yield this._y;yield this._z;yield this._order}}he.DEFAULT_ORDER="XYZ";class Wh{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask=this.mask|1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!==(this.mask&a.mask)}isEnabled(a){return 0!==(this.mask&
(1<<a|0))}}let em=0;const Bg=new O,Wf=new dd,Ie=new Mb,hi=new O,sh=new O,fm=new O,gm=new dd,Xk=new O(1,0,0),rd=new O(0,1,0),Yk=new O(0,0,1),hm={type:"added"},im={type:"removed"},Cj={type:"childadded",child:null},Dj={type:"childremoved",child:null};class ec extends Jd{constructor(){super();this.isObject3D=!0;Object.defineProperty(this,"id",{value:em++});this.uuid=wa();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=ec.DEFAULT_UP.clone();const a=new O,b=new he,c=new dd,e=
new O(1,1,1);b._onChange(function(){c.setFromEuler(b,!1)});c._onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:e},modelViewMatrix:{value:new Mb},normalMatrix:{value:new Ub}});this.matrix=new Mb;this.matrixWorld=new Mb;this.matrixAutoUpdate=ec.DEFAULT_MATRIX_AUTO_UPDATE;this.matrixWorldAutoUpdate=
ec.DEFAULT_MATRIX_WORLD_AUTO_UPDATE;this.matrixWorldNeedsUpdate=!1;this.layers=new Wh;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.animations=[];this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(a);this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){this.quaternion.premultiply(a);return this}setRotationFromAxisAngle(a,
b){this.quaternion.setFromAxisAngle(a,b)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,b){Wf.setFromAxisAngle(a,b);this.quaternion.multiply(Wf);return this}rotateOnWorldAxis(a,b){Wf.setFromAxisAngle(a,b);this.quaternion.premultiply(Wf);return this}rotateX(a){return this.rotateOnAxis(Xk,a)}rotateY(a){return this.rotateOnAxis(rd,a)}rotateZ(a){return this.rotateOnAxis(Yk,
a)}translateOnAxis(a,b){Bg.copy(a).applyQuaternion(this.quaternion);this.position.add(Bg.multiplyScalar(b));return this}translateX(a){return this.translateOnAxis(Xk,a)}translateY(a){return this.translateOnAxis(rd,a)}translateZ(a){return this.translateOnAxis(Yk,a)}localToWorld(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){this.updateWorldMatrix(!0,!1);return a.applyMatrix4(Ie.copy(this.matrixWorld).invert())}lookAt(a,b,c){a.isVector3?hi.copy(a):hi.set(a,b,
c);a=this.parent;this.updateWorldMatrix(!0,!1);sh.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?Ie.lookAt(sh,hi,this.up):Ie.lookAt(hi,sh,this.up);this.quaternion.setFromRotationMatrix(Ie);a&&(Ie.extractRotation(a.matrixWorld),Wf.setFromRotationMatrix(Ie),this.quaternion.premultiply(Wf.invert()))}add(a){if(1<arguments.length){for(let b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",
a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(hm),Cj.child=a,this.dispatchEvent(Cj),Cj.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this}remove(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1),a.dispatchEvent(im),Dj.child=a,this.dispatchEvent(Dj),Dj.child=
null);return this}removeFromParent(){const a=this.parent;null!==a&&a.remove(this);return this}clear(){return this.remove(...this.children)}attach(a){this.updateWorldMatrix(!0,!1);Ie.copy(this.matrixWorld).invert();null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),Ie.multiply(a.parent.matrixWorld));a.applyMatrix4(Ie);this.add(a);a.updateWorldMatrix(!1,!0);return this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,
b){if(this[a]===b)return this;for(let c=0,e=this.children.length;c<e;c++){const g=this.children[c].getObjectByProperty(a,b);if(void 0!==g)return g}}getObjectsByProperty(a,b,c=[]){this[a]===b&&c.push(this);const e=this.children;for(let g=0,h=e.length;g<h;g++)e[g].getObjectsByProperty(a,b,c);return c}getWorldPosition(a){this.updateWorldMatrix(!0,!1);return a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(sh,a,fm);return a}getWorldScale(a){this.updateWorldMatrix(!0,
!1);this.matrixWorld.decompose(sh,gm,a);return a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()}raycast(){}traverse(a){a(this);const b=this.children;for(let c=0,e=b.length;c<e;c++)b[c].traverse(a)}traverseVisible(a){if(!1!==this.visible){a(this);var b=this.children;for(let c=0,e=b.length;c<e;c++)b[c].traverseVisible(a)}}traverseAncestors(a){const b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,
this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;const b=this.children;for(let c=0,e=b.length;c<e;c++){const g=b[c];!0!==g.matrixWorldAutoUpdate&&!0!==a||g.updateMatrixWorld(a)}}updateWorldMatrix(a,b){const c=this.parent;!0===a&&null!==
c&&!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b){a=this.children;for(let e=0,g=a.length;e<g;e++)b=a[e],!0===b.matrixWorldAutoUpdate&&b.updateWorldMatrix(!1,!0)}}toJSON(a){function b(n,m){void 0===n[m.uuid]&&(n[m.uuid]=m.toJSON(a));return m.uuid}function c(n){const m=[];for(const q in n){const u=n[q];delete u.metadata;
m.push(u)}return m}var e=void 0===a||"string"===typeof a;const g={};e&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},g.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const h={};h.uuid=this.uuid;h.type=this.type;""!==this.name&&(h.name=this.name);!0===this.castShadow&&(h.castShadow=!0);!0===this.receiveShadow&&(h.receiveShadow=!0);!1===this.visible&&(h.visible=!1);!1===this.frustumCulled&&(h.frustumCulled=!1);0!==this.renderOrder&&
(h.renderOrder=this.renderOrder);0<Object.keys(this.userData).length&&(h.userData=this.userData);h.layers=this.layers.mask;h.matrix=this.matrix.toArray();h.up=this.up.toArray();!1===this.matrixAutoUpdate&&(h.matrixAutoUpdate=!1);this.isInstancedMesh&&(h.type="InstancedMesh",h.count=this.count,h.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(h.instanceColor=this.instanceColor.toJSON()));this.isBatchedMesh&&(h.type="BatchedMesh",h.perObjectFrustumCulled=this.perObjectFrustumCulled,
h.sortObjects=this.sortObjects,h.drawRanges=this._drawRanges,h.reservedRanges=this._reservedRanges,h.visibility=this._visibility,h.active=this._active,h.bounds=this._bounds.map(n=>({boxInitialized:n.boxInitialized,boxMin:n.box.min.toArray(),boxMax:n.box.max.toArray(),sphereInitialized:n.sphereInitialized,sphereRadius:n.sphere.radius,sphereCenter:n.sphere.center.toArray()})),h.maxGeometryCount=this._maxGeometryCount,h.maxVertexCount=this._maxVertexCount,h.maxIndexCount=this._maxIndexCount,h.geometryInitialized=
this._geometryInitialized,h.geometryCount=this._geometryCount,h.matricesTexture=this._matricesTexture.toJSON(a),null!==this.boundingSphere&&(h.boundingSphere={center:h.boundingSphere.center.toArray(),radius:h.boundingSphere.radius}),null!==this.boundingBox&&(h.boundingBox={min:h.boundingBox.min.toArray(),max:h.boundingBox.max.toArray()}));if(this.isScene)this.background&&(this.background.isColor?h.background=this.background.toJSON():this.background.isTexture&&(h.background=this.background.toJSON(a).uuid)),
this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(h.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){h.geometry=b(a.geometries,this.geometry);var l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes)if(l=l.shapes,Array.isArray(l))for(let n=0,m=l.length;n<m;n++)b(a.shapes,l[n]);else b(a.shapes,l)}this.isSkinnedMesh&&(h.bindMode=this.bindMode,h.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(b(a.skeletons,
this.skeleton),h.skeleton=this.skeleton.uuid));if(void 0!==this.material)if(Array.isArray(this.material)){l=[];for(let n=0,m=this.material.length;n<m;n++)l.push(b(a.materials,this.material[n]));h.material=l}else h.material=b(a.materials,this.material);if(0<this.children.length)for(h.children=[],l=0;l<this.children.length;l++)h.children.push(this.children[l].toJSON(a).object);if(0<this.animations.length)for(h.animations=[],l=0;l<this.animations.length;l++)h.animations.push(b(a.animations,this.animations[l]));
if(e){e=c(a.geometries);l=c(a.materials);const n=c(a.textures),m=c(a.images),q=c(a.shapes),u=c(a.skeletons),t=c(a.animations),w=c(a.nodes);0<e.length&&(g.geometries=e);0<l.length&&(g.materials=l);0<n.length&&(g.textures=n);0<m.length&&(g.images=m);0<q.length&&(g.shapes=q);0<u.length&&(g.skeletons=u);0<t.length&&(g.animations=t);0<w.length&&(g.nodes=w)}g.object=h;return g}clone(a){return(new this.constructor).copy(this,a)}copy(a,b=!0){this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);
this.rotation.order=a.rotation.order;this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldAutoUpdate=a.matrixWorldAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.animations=
a.animations.slice();this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}}ec.DEFAULT_UP=new O(0,1,0);ec.DEFAULT_MATRIX_AUTO_UPDATE=!0;ec.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const re=new O,Je=new O,Ej=new O,Ke=new O,Cg=new O,Xf=new O,ii=new O,Zk=new O,Fj=new O,ji=new O;class Zd{constructor(a=new O,b=new O,c=new O){this.a=a;this.b=b;this.c=c}static getNormal(a,b,c,e){e.subVectors(c,b);re.subVectors(a,b);e.cross(re);
a=e.lengthSq();return 0<a?e.multiplyScalar(1/Math.sqrt(a)):e.set(0,0,0)}static getBarycoord(a,b,c,e,g){re.subVectors(e,b);Je.subVectors(c,b);Ej.subVectors(a,b);a=re.dot(re);b=re.dot(Je);c=re.dot(Ej);var h=Je.dot(Je);e=Je.dot(Ej);var l=a*h-b*b;if(0===l)return g.set(0,0,0),null;l=1/l;h=(h*c-b*e)*l;a=(a*e-b*c)*l;return g.set(1-h-a,a,h)}static containsPoint(a,b,c,e){return null===this.getBarycoord(a,b,c,e,Ke)?!1:0<=Ke.x&&0<=Ke.y&&1>=Ke.x+Ke.y}static getInterpolation(a,b,c,e,g,h,l,n){if(null===this.getBarycoord(a,
b,c,e,Ke))return n.x=0,n.y=0,"z"in n&&(n.z=0),"w"in n&&(n.w=0),null;n.setScalar(0);n.addScaledVector(g,Ke.x);n.addScaledVector(h,Ke.y);n.addScaledVector(l,Ke.z);return n}static isFrontFacing(a,b,c,e){re.subVectors(c,b);Je.subVectors(a,b);return 0>re.cross(Je).dot(e)?!0:!1}set(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this}setFromPointsAndIndices(a,b,c,e){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[e]);return this}setFromAttributeAndIndices(a,b,c,e){this.a.fromBufferAttribute(a,
b);this.b.fromBufferAttribute(a,c);this.c.fromBufferAttribute(a,e);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this}getArea(){re.subVectors(this.c,this.b);Je.subVectors(this.a,this.b);return.5*re.cross(Je).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Zd.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,
b){return Zd.getBarycoord(a,this.a,this.b,this.c,b)}getInterpolation(a,b,c,e,g){return Zd.getInterpolation(a,this.a,this.b,this.c,b,c,e,g)}containsPoint(a){return Zd.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Zd.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,b){const c=this.a;var e=this.b,g=this.c;Cg.subVectors(e,c);Xf.subVectors(g,c);Zk.subVectors(a,c);var h=Cg.dot(Zk),l=Xf.dot(Zk);if(0>=h&&0>=l)return b.copy(c);Fj.subVectors(a,
e);const n=Cg.dot(Fj),m=Xf.dot(Fj);if(0<=n&&m<=n)return b.copy(e);var q=h*m-n*l;if(0>=q&&0<=h&&0>=n)return e=h/(h-n),b.copy(c).addScaledVector(Cg,e);ji.subVectors(a,g);a=Cg.dot(ji);const u=Xf.dot(ji);if(0<=u&&a<=u)return b.copy(g);h=a*l-h*u;if(0>=h&&0<=l&&0>=u)return q=l/(l-u),b.copy(c).addScaledVector(Xf,q);l=n*u-a*m;if(0>=l&&0<=m-n&&0<=a-u)return ii.subVectors(g,e),q=(m-n)/(m-n+(a-u)),b.copy(e).addScaledVector(ii,q);g=1/(l+h+q);e=h*g;q*=g;return b.copy(c).addScaledVector(Cg,e).addScaledVector(Xf,
q)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}const ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cd={h:0,s:0,l:0},Gj={h:0,s:0,l:0};class nb{constructor(a,b,c){this.isColor=!0;this.b=this.g=this.r=1;return this.set(a,b,c)}set(a,b,c){void 0===b&&void 0===c?a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a):
this.setRGB(a,b,c);return this}setScalar(a){this.b=this.g=this.r=a;return this}setHex(a,b="srgb"){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;lc.toWorkingColorSpace(this,b);return this}setRGB(a,b,c,e=lc.workingColorSpace){this.r=a;this.g=b;this.b=c;lc.toWorkingColorSpace(this,e);return this}setHSL(a,b,c,e=lc.workingColorSpace){a=Nb(a,1);b=Gb(b,0,1);c=Gb(c,0,1);0===b?this.r=this.g=this.b=c:(b=.5>=c?c*(1+b):c+b-c*b,c=2*c-b,this.r=na(c,b,a+1/3),this.g=na(c,b,a),this.b=
na(c,b,a-1/3));lc.toWorkingColorSpace(this,e);return this}setStyle(a,b="srgb"){function c(h){void 0!==h&&1>parseFloat(h)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var e;if(e=/^(\w+)\(([^\)]*)\)/.exec(a)){var g=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return c(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,b);if(e=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return c(e[4]),
this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,b);break;case "hsl":case "hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return c(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,b);break;default:console.warn("THREE.Color: Unknown color model "+a)}}else if(e=/^#([A-Fa-f\d]+)$/.exec(a)){g=e[1];e=g.length;if(3===e)return this.setRGB(parseInt(g.charAt(0),
16)/15,parseInt(g.charAt(1),16)/15,parseInt(g.charAt(2),16)/15,b);if(6===e)return this.setHex(parseInt(g,16),b);console.warn("THREE.Color: Invalid hex color "+a)}else if(a&&0<a.length)return this.setColorName(a,b);return this}setColorName(a,b="srgb"){const c=ki[a.toLowerCase()];void 0!==c?this.setHex(c,b):console.warn("THREE.Color: Unknown color "+a);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){this.r=a.r;this.g=a.g;this.b=a.b;return this}copySRGBToLinear(a){this.r=
ab(a.r);this.g=ab(a.g);this.b=ab(a.b);return this}copyLinearToSRGB(a){this.r=ya(a.r);this.g=ya(a.g);this.b=ya(a.b);return this}convertSRGBToLinear(){this.copySRGBToLinear(this);return this}convertLinearToSRGB(){this.copyLinearToSRGB(this);return this}getHex(a="srgb"){lc.fromWorkingColorSpace(ic.copy(this),a);return 65536*Math.round(Gb(255*ic.r,0,255))+256*Math.round(Gb(255*ic.g,0,255))+Math.round(Gb(255*ic.b,0,255))}getHexString(a="srgb"){return("000000"+this.getHex(a).toString(16)).slice(-6)}getHSL(a,
b=lc.workingColorSpace){lc.fromWorkingColorSpace(ic.copy(this),b);b=ic.r;const c=ic.g,e=ic.b,g=Math.max(b,c,e);var h=Math.min(b,c,e);let l;const n=(h+g)/2;if(h===g)h=l=0;else{const m=g-h;h=.5>=n?m/(g+h):m/(2-g-h);switch(g){case b:l=(c-e)/m+(c<e?6:0);break;case c:l=(e-b)/m+2;break;case e:l=(b-c)/m+4}l/=6}a.h=l;a.s=h;a.l=n;return a}getRGB(a,b=lc.workingColorSpace){lc.fromWorkingColorSpace(ic.copy(this),b);a.r=ic.r;a.g=ic.g;a.b=ic.b;return a}getStyle(a="srgb"){lc.fromWorkingColorSpace(ic.copy(this),
a);const b=ic.r,c=ic.g,e=ic.b;return"srgb"!==a?`color(${a} ${b.toFixed(3)} ${c.toFixed(3)} ${e.toFixed(3)})`:`rgb(${Math.round(255*b)},${Math.round(255*c)},${Math.round(255*e)})`}offsetHSL(a,b,c){this.getHSL(Cd);return this.setHSL(Cd.h+a,Cd.s+b,Cd.l+c)}add(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this}addColors(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this}addScalar(a){this.r+=a;this.g+=a;this.b+=a;return this}sub(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);
this.b=Math.max(0,this.b-a.b);return this}multiply(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this}multiplyScalar(a){this.r*=a;this.g*=a;this.b*=a;return this}lerp(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this}lerpColors(a,b,c){this.r=a.r+(b.r-a.r)*c;this.g=a.g+(b.g-a.g)*c;this.b=a.b+(b.b-a.b)*c;return this}lerpHSL(a,b){this.getHSL(Cd);a.getHSL(Gj);a=Xb(Cd.h,Gj.h,b);const c=Xb(Cd.s,Gj.s,b);b=Xb(Cd.l,Gj.l,b);this.setHSL(a,c,b);return this}setFromVector3(a){this.r=
a.x;this.g=a.y;this.b=a.z;return this}applyMatrix3(a){const b=this.r,c=this.g,e=this.b;a=a.elements;this.r=a[0]*b+a[3]*c+a[6]*e;this.g=a[1]*b+a[4]*c+a[7]*e;this.b=a[2]*b+a[5]*c+a[8]*e;return this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,b=0){this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this}toArray(a=[],b=0){a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}fromBufferAttribute(a,b){this.r=a.getX(b);this.g=a.getY(b);this.b=a.getZ(b);return this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r;
yield this.g;yield this.b}}const ic=new nb;nb.NAMES=ki;let mn=0;class Dd extends Jd{constructor(){super();this.isMaterial=!0;Object.defineProperty(this,"id",{value:mn++});this.uuid=wa();this.name="";this.type="Material";this.blending=1;this.side=0;this.vertexColors=!1;this.opacity=1;this.alphaHash=this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.blendColor=new nb(0,0,0);this.blendAlpha=0;this.depthFunc=
3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=519;this.stencilRef=0;this.stencilFuncMask=255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.forceSinglePass=this.premultipliedAlpha=this.alphaToCoverage=this.dithering=!1;this.toneMapped=
this.visible=!0;this.userData={};this._alphaTest=this.version=0}get alphaTest(){return this._alphaTest}set alphaTest(a){0<this._alphaTest!==0<a&&this.version++;this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const b in a){const c=a[b];if(void 0===c){console.warn(`THREE.Material: parameter '${b}' has value of undefined.`);continue}const e=this[b];void 0===e?console.warn(`THREE.Material: '${b}' is not a property of THREE.${this.type}.`):
e&&e.isColor?e.set(c):e&&e.isVector3&&c&&c.isVector3?e.copy(c):this[b]=c}}toJSON(a){function b(g){const h=[];for(const l in g){const n=g[l];delete n.metadata;h.push(n)}return h}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});const e={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);this.color&&this.color.isColor&&(e.color=this.color.getHex());void 0!==this.roughness&&(e.roughness=this.roughness);
void 0!==this.metalness&&(e.metalness=this.metalness);void 0!==this.sheen&&(e.sheen=this.sheen);this.sheenColor&&this.sheenColor.isColor&&(e.sheenColor=this.sheenColor.getHex());void 0!==this.sheenRoughness&&(e.sheenRoughness=this.sheenRoughness);this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex());void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(e.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex());
void 0!==this.specularIntensity&&(e.specularIntensity=this.specularIntensity);this.specularColor&&this.specularColor.isColor&&(e.specularColor=this.specularColor.getHex());void 0!==this.shininess&&(e.shininess=this.shininess);void 0!==this.clearcoat&&(e.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&(e.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(a).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&
(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray());void 0!==this.iridescence&&(e.iridescence=this.iridescence);void 0!==this.iridescenceIOR&&(e.iridescenceIOR=this.iridescenceIOR);void 0!==this.iridescenceThicknessRange&&(e.iridescenceThicknessRange=this.iridescenceThicknessRange);this.iridescenceMap&&
this.iridescenceMap.isTexture&&(e.iridescenceMap=this.iridescenceMap.toJSON(a).uuid);this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(e.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(a).uuid);void 0!==this.anisotropy&&(e.anisotropy=this.anisotropy);void 0!==this.anisotropyRotation&&(e.anisotropyRotation=this.anisotropyRotation);this.anisotropyMap&&this.anisotropyMap.isTexture&&(e.anisotropyMap=this.anisotropyMap.toJSON(a).uuid);this.map&&this.map.isTexture&&(e.map=
this.map.toJSON(a).uuid);this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(a).uuid,e.lightMapIntensity=this.lightMapIntensity);this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(a).uuid,e.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(a).uuid,e.bumpScale=
this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(a).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(a).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&
(e.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(a).uuid);this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(e.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid);this.specularColorMap&&this.specularColorMap.isTexture&&(e.specularColorMap=this.specularColorMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&
(e.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(e.combine=this.combine));void 0!==this.envMapRotation&&(e.envMapRotation=this.envMapRotation.toArray());void 0!==this.envMapIntensity&&(e.envMapIntensity=this.envMapIntensity);void 0!==this.reflectivity&&(e.reflectivity=this.reflectivity);void 0!==this.refractionRatio&&(e.refractionRatio=this.refractionRatio);this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.transmission&&(e.transmission=
this.transmission);this.transmissionMap&&this.transmissionMap.isTexture&&(e.transmissionMap=this.transmissionMap.toJSON(a).uuid);void 0!==this.thickness&&(e.thickness=this.thickness);this.thicknessMap&&this.thicknessMap.isTexture&&(e.thicknessMap=this.thicknessMap.toJSON(a).uuid);void 0!==this.attenuationDistance&&Infinity!==this.attenuationDistance&&(e.attenuationDistance=this.attenuationDistance);void 0!==this.attenuationColor&&(e.attenuationColor=this.attenuationColor.getHex());void 0!==this.size&&
(e.size=this.size);null!==this.shadowSide&&(e.shadowSide=this.shadowSide);void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(e.blending=this.blending);0!==this.side&&(e.side=this.side);!0===this.vertexColors&&(e.vertexColors=!0);1>this.opacity&&(e.opacity=this.opacity);!0===this.transparent&&(e.transparent=!0);204!==this.blendSrc&&(e.blendSrc=this.blendSrc);205!==this.blendDst&&(e.blendDst=this.blendDst);100!==this.blendEquation&&(e.blendEquation=this.blendEquation);
null!==this.blendSrcAlpha&&(e.blendSrcAlpha=this.blendSrcAlpha);null!==this.blendDstAlpha&&(e.blendDstAlpha=this.blendDstAlpha);null!==this.blendEquationAlpha&&(e.blendEquationAlpha=this.blendEquationAlpha);this.blendColor&&this.blendColor.isColor&&(e.blendColor=this.blendColor.getHex());0!==this.blendAlpha&&(e.blendAlpha=this.blendAlpha);3!==this.depthFunc&&(e.depthFunc=this.depthFunc);!1===this.depthTest&&(e.depthTest=this.depthTest);!1===this.depthWrite&&(e.depthWrite=this.depthWrite);!1===this.colorWrite&&
(e.colorWrite=this.colorWrite);255!==this.stencilWriteMask&&(e.stencilWriteMask=this.stencilWriteMask);519!==this.stencilFunc&&(e.stencilFunc=this.stencilFunc);0!==this.stencilRef&&(e.stencilRef=this.stencilRef);255!==this.stencilFuncMask&&(e.stencilFuncMask=this.stencilFuncMask);7680!==this.stencilFail&&(e.stencilFail=this.stencilFail);7680!==this.stencilZFail&&(e.stencilZFail=this.stencilZFail);7680!==this.stencilZPass&&(e.stencilZPass=this.stencilZPass);!0===this.stencilWrite&&(e.stencilWrite=
this.stencilWrite);void 0!==this.rotation&&0!==this.rotation&&(e.rotation=this.rotation);!0===this.polygonOffset&&(e.polygonOffset=!0);0!==this.polygonOffsetFactor&&(e.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(e.polygonOffsetUnits=this.polygonOffsetUnits);void 0!==this.linewidth&&1!==this.linewidth&&(e.linewidth=this.linewidth);void 0!==this.dashSize&&(e.dashSize=this.dashSize);void 0!==this.gapSize&&(e.gapSize=this.gapSize);void 0!==this.scale&&(e.scale=this.scale);
!0===this.dithering&&(e.dithering=!0);0<this.alphaTest&&(e.alphaTest=this.alphaTest);!0===this.alphaHash&&(e.alphaHash=!0);!0===this.alphaToCoverage&&(e.alphaToCoverage=!0);!0===this.premultipliedAlpha&&(e.premultipliedAlpha=!0);!0===this.forceSinglePass&&(e.forceSinglePass=!0);!0===this.wireframe&&(e.wireframe=!0);1<this.wireframeLinewidth&&(e.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(e.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&
(e.wireframeLinejoin=this.wireframeLinejoin);!0===this.flatShading&&(e.flatShading=!0);!1===this.visible&&(e.visible=!1);!1===this.toneMapped&&(e.toneMapped=!1);!1===this.fog&&(e.fog=!1);0<Object.keys(this.userData).length&&(e.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(e.textures=c),0<a.length&&(e.images=a));return e}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=
a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.blendColor.copy(a.blendColor);this.blendAlpha=a.blendAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.stencilWriteMask=a.stencilWriteMask;this.stencilFunc=a.stencilFunc;this.stencilRef=a.stencilRef;this.stencilFuncMask=
a.stencilFuncMask;this.stencilFail=a.stencilFail;this.stencilZFail=a.stencilZFail;this.stencilZPass=a.stencilZPass;this.stencilWrite=a.stencilWrite;const b=a.clippingPlanes;let c=null;if(null!==b){const e=b.length;c=Array(e);for(let g=0;g!==e;++g)c[g]=b[g].clone()}this.clippingPlanes=c;this.clipIntersection=a.clipIntersection;this.clipShadows=a.clipShadows;this.shadowSide=a.shadowSide;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=
a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.alphaHash=a.alphaHash;this.alphaToCoverage=a.alphaToCoverage;this.premultipliedAlpha=a.premultipliedAlpha;this.forceSinglePass=a.forceSinglePass;this.visible=a.visible;this.toneMapped=a.toneMapped;this.userData=JSON.parse(JSON.stringify(a.userData));return this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}class ie extends Dd{constructor(a){super();
this.isMeshBasicMaterial=!0;this.type="MeshBasicMaterial";this.color=new nb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.envMapRotation=new he;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;
this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapRotation.copy(a.envMapRotation);this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=
a.fog;return this}}const Ae=function(){var a=new ArrayBuffer(4);const b=new Float32Array(a);a=new Uint32Array(a);const c=new Uint32Array(512),e=new Uint32Array(512);for(var g=0;256>g;++g){var h=g-127;-27>h?(c[g]=0,c[g|256]=32768,e[g]=24,e[g|256]=24):-14>h?(c[g]=1024>>-h-14,c[g|256]=1024>>-h-14|32768,e[g]=-h-1,e[g|256]=-h-1):15>=h?(c[g]=h+15<<10,c[g|256]=h+15<<10|32768,e[g]=13,e[g|256]=13):128>h?(c[g]=31744,c[g|256]=64512,e[g]=24,e[g|256]=24):(c[g]=31744,c[g|256]=64512,e[g]=13,e[g|256]=13)}g=new Uint32Array(2048);
h=new Uint32Array(64);const l=new Uint32Array(64);for(var n=1;1024>n;++n){let m=n<<13,q=0;for(;0===(m&8388608);)m<<=1,q-=8388608;m&=-8388609;q+=947912704;g[n]=m|q}for(n=1024;2048>n;++n)g[n]=939524096+(n-1024<<13);for(n=1;31>n;++n)h[n]=n<<23;h[31]=1199570944;h[32]=2147483648;for(n=33;63>n;++n)h[n]=2147483648+(n-32<<23);h[63]=3347054592;for(n=1;64>n;++n)32!==n&&(l[n]=1024);return{floatView:b,uint32View:a,baseTable:c,shiftTable:e,mantissaTable:g,exponentTable:h,offsetTable:l}}(),nn={toHalfFloat:aa,fromHalfFloat:da},
Gc=new O,Dg=new Fa;class pc{constructor(a,b,c=!1){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0;this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=c;this.usage=35044;this._updateRange={offset:0,count:-1};this.updateRanges=[];this.gpuType=1015;this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}get updateRange(){sb("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead.");
return this._updateRange}setUsage(a){this.usage=a;return this}addUpdateRange(a,b){this.updateRanges.push({start:a,count:b})}clearUpdateRanges(){this.updateRanges.length=0}copy(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.usage=a.usage;this.gpuType=a.gpuType;return this}copyAt(a,b,c){a*=this.itemSize;c*=b.itemSize;for(let e=0,g=this.itemSize;e<g;e++)this.array[a+e]=b.array[c+e];return this}copyArray(a){this.array.set(a);
return this}applyMatrix3(a){if(2===this.itemSize)for(let b=0,c=this.count;b<c;b++)Dg.fromBufferAttribute(this,b),Dg.applyMatrix3(a),this.setXY(b,Dg.x,Dg.y);else if(3===this.itemSize)for(let b=0,c=this.count;b<c;b++)Gc.fromBufferAttribute(this,b),Gc.applyMatrix3(a),this.setXYZ(b,Gc.x,Gc.y,Gc.z);return this}applyMatrix4(a){for(let b=0,c=this.count;b<c;b++)Gc.fromBufferAttribute(this,b),Gc.applyMatrix4(a),this.setXYZ(b,Gc.x,Gc.y,Gc.z);return this}applyNormalMatrix(a){for(let b=0,c=this.count;b<c;b++)Gc.fromBufferAttribute(this,
b),Gc.applyNormalMatrix(a),this.setXYZ(b,Gc.x,Gc.y,Gc.z);return this}transformDirection(a){for(let b=0,c=this.count;b<c;b++)Gc.fromBufferAttribute(this,b),Gc.transformDirection(a),this.setXYZ(b,Gc.x,Gc.y,Gc.z);return this}set(a,b=0){this.array.set(a,b);return this}getComponent(a,b){a=this.array[a*this.itemSize+b];this.normalized&&(a=hb(a,this.array));return a}setComponent(a,b,c){this.normalized&&(c=rb(c,this.array));this.array[a*this.itemSize+b]=c;return this}getX(a){a=this.array[a*this.itemSize];
this.normalized&&(a=hb(a,this.array));return a}setX(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize]=b;return this}getY(a){a=this.array[a*this.itemSize+1];this.normalized&&(a=hb(a,this.array));return a}setY(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+1]=b;return this}getZ(a){a=this.array[a*this.itemSize+2];this.normalized&&(a=hb(a,this.array));return a}setZ(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+2]=b;return this}getW(a){a=
this.array[a*this.itemSize+3];this.normalized&&(a=hb(a,this.array));return a}setW(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+3]=b;return this}setXY(a,b,c){a*=this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array));this.array[a+0]=b;this.array[a+1]=c;return this}setXYZ(a,b,c,e){a*=this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array),e=rb(e,this.array));this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=e;return this}setXYZW(a,b,c,e,g){a*=
this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array),e=rb(e,this.array),g=rb(g,this.array));this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=e;this.array[a+3]=g;return this}onUpload(a){this.onUploadCallback=a;return this}clone(){return(new this.constructor(this.array,this.itemSize)).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};""!==this.name&&(a.name=this.name);35044!==this.usage&&
(a.usage=this.usage);return a}}class jm extends pc{constructor(a,b,c){super(new Int8Array(a),b,c)}}class km extends pc{constructor(a,b,c){super(new Uint8Array(a),b,c)}}class lm extends pc{constructor(a,b,c){super(new Uint8ClampedArray(a),b,c)}}class $k extends pc{constructor(a,b,c){super(new Int16Array(a),b,c)}}class Nh extends pc{constructor(a,b,c){super(new Uint16Array(a),b,c)}}class Yf extends pc{constructor(a,b,c){super(new Int32Array(a),b,c)}}class cj extends pc{constructor(a,b,c){super(new Uint32Array(a),
b,c)}}class mm extends pc{constructor(a,b,c){super(new Uint16Array(a),b,c);this.isFloat16BufferAttribute=!0}getX(a){a=da(this.array[a*this.itemSize]);this.normalized&&(a=hb(a,this.array));return a}setX(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize]=aa(b);return this}getY(a){a=da(this.array[a*this.itemSize+1]);this.normalized&&(a=hb(a,this.array));return a}setY(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+1]=aa(b);return this}getZ(a){a=da(this.array[a*
this.itemSize+2]);this.normalized&&(a=hb(a,this.array));return a}setZ(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+2]=aa(b);return this}getW(a){a=da(this.array[a*this.itemSize+3]);this.normalized&&(a=hb(a,this.array));return a}setW(a,b){this.normalized&&(b=rb(b,this.array));this.array[a*this.itemSize+3]=aa(b);return this}setXY(a,b,c){a*=this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array));this.array[a+0]=aa(b);this.array[a+1]=aa(c);return this}setXYZ(a,b,
c,e){a*=this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array),e=rb(e,this.array));this.array[a+0]=aa(b);this.array[a+1]=aa(c);this.array[a+2]=aa(e);return this}setXYZW(a,b,c,e,g){a*=this.itemSize;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array),e=rb(e,this.array),g=rb(g,this.array));this.array[a+0]=aa(b);this.array[a+1]=aa(c);this.array[a+2]=aa(e);this.array[a+3]=aa(g);return this}}class pb extends pc{constructor(a,b,c){super(new Float32Array(a),b,c)}}let nm=0;const Wc=new Mb,
al=new ec,Eg=new O,Vd=new od,th=new od,ed=new O;class Kb extends Jd{constructor(){super();this.isBufferGeometry=!0;Object.defineProperty(this,"id",{value:nm++});this.uuid=wa();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}getIndex(){return this.index}setIndex(a){Array.isArray(a)?this.index=new (Ic(a)?cj:
Nh)(a,1):this.index=a;return this}getAttribute(a){return this.attributes[a]}setAttribute(a,b){this.attributes[a]=b;return this}deleteAttribute(a){delete this.attributes[a];return this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,b,c=0){this.groups.push({start:a,count:b,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(a,b){this.drawRange.start=a;this.drawRange.count=b}applyMatrix4(a){var b=this.attributes.position;void 0!==b&&(b.applyMatrix4(a),b.needsUpdate=!0);b=this.attributes.normal;
if(void 0!==b){const c=(new Ub).getNormalMatrix(a);b.applyNormalMatrix(c);b.needsUpdate=!0}b=this.attributes.tangent;void 0!==b&&(b.transformDirection(a),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this}applyQuaternion(a){Wc.makeRotationFromQuaternion(a);this.applyMatrix4(Wc);return this}rotateX(a){Wc.makeRotationX(a);this.applyMatrix4(Wc);return this}rotateY(a){Wc.makeRotationY(a);this.applyMatrix4(Wc);return this}rotateZ(a){Wc.makeRotationZ(a);
this.applyMatrix4(Wc);return this}translate(a,b,c){Wc.makeTranslation(a,b,c);this.applyMatrix4(Wc);return this}scale(a,b,c){Wc.makeScale(a,b,c);this.applyMatrix4(Wc);return this}lookAt(a){al.lookAt(a);al.updateMatrix();this.applyMatrix4(al.matrix);return this}center(){this.computeBoundingBox();this.boundingBox.getCenter(Eg).negate();this.translate(Eg.x,Eg.y,Eg.z);return this}setFromPoints(a){const b=[];for(let c=0,e=a.length;c<e;c++){const g=a[c];b.push(g.x,g.y,g.z||0)}this.setAttribute("position",
new pb(b,3));return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new od);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new O(-Infinity,-Infinity,-Infinity),new O(Infinity,Infinity,Infinity));else{if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),b)for(let c=0,e=b.length;c<e;c++)Vd.setFromBufferAttribute(b[c]),
this.morphTargetsRelative?(ed.addVectors(this.boundingBox.min,Vd.min),this.boundingBox.expandByPoint(ed),ed.addVectors(this.boundingBox.max,Vd.max),this.boundingBox.expandByPoint(ed)):(this.boundingBox.expandByPoint(Vd.min),this.boundingBox.expandByPoint(Vd.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new qd);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new O,Infinity);else if(a){const c=this.boundingSphere.center;Vd.setFromBufferAttribute(a);if(b)for(let g=0,h=b.length;g<h;g++)th.setFromBufferAttribute(b[g]),this.morphTargetsRelative?
(ed.addVectors(Vd.min,th.min),Vd.expandByPoint(ed),ed.addVectors(Vd.max,th.max),Vd.expandByPoint(ed)):(Vd.expandByPoint(th.min),Vd.expandByPoint(th.max));Vd.getCenter(c);let e=0;for(let g=0,h=a.count;g<h;g++)ed.fromBufferAttribute(a,g),e=Math.max(e,c.distanceToSquared(ed));if(b)for(let g=0,h=b.length;g<h;g++){const l=b[g],n=this.morphTargetsRelative;for(let m=0,q=l.count;m<q;m++)ed.fromBufferAttribute(l,m),n&&(Eg.fromBufferAttribute(a,m),ed.add(Eg)),e=Math.max(e,c.distanceToSquared(ed))}this.boundingSphere.radius=
Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){function a(ea,xa,ta){u.fromBufferAttribute(g,ea);t.fromBufferAttribute(g,xa);w.fromBufferAttribute(g,ta);B.fromBufferAttribute(l,ea);z.fromBufferAttribute(l,xa);D.fromBufferAttribute(l,ta);t.sub(u);w.sub(u);z.sub(B);D.sub(B);const Da=1/(z.x*D.y-D.x*z.y);isFinite(Da)&&(J.copy(t).multiplyScalar(D.y).addScaledVector(w,
-z.y).multiplyScalar(Da),A.copy(w).multiplyScalar(z.x).addScaledVector(t,-D.x).multiplyScalar(Da),m[ea].add(J),m[xa].add(J),m[ta].add(J),q[ea].add(A),q[xa].add(A),q[ta].add(A))}function b(ea){ja.fromBufferAttribute(h,ea);ka.copy(ja);var xa=m[ea];R.copy(xa);R.sub(ja.multiplyScalar(ja.dot(xa))).normalize();U.crossVectors(ka,xa);xa=U.dot(q[ea]);n.setXYZW(ea,R.x,R.y,R.z,0>xa?-1:1)}const c=this.index;var e=this.attributes;if(null===c||void 0===e.position||void 0===e.normal||void 0===e.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
else{var g=e.position,h=e.normal,l=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new pc(new Float32Array(4*g.count),4));var n=this.getAttribute("tangent"),m=[],q=[];for(e=0;e<g.count;e++)m[e]=new O,q[e]=new O;var u=new O,t=new O,w=new O,B=new Fa,z=new Fa,D=new Fa,J=new O,A=new O;e=this.groups;0===e.length&&(e=[{start:0,count:c.count}]);for(let ea=0,xa=e.length;ea<xa;++ea){var K=e[ea],oa=K.start;K=K.count;for(let ta=oa,Da=oa+K;ta<Da;ta+=3)a(c.getX(ta+0),c.getX(ta+1),c.getX(ta+
2))}var R=new O,U=new O,ja=new O,ka=new O;for(let ea=0,xa=e.length;ea<xa;++ea){K=e[ea];oa=K.start;K=K.count;for(let ta=oa,Da=oa+K;ta<Da;ta+=3)b(c.getX(ta+0)),b(c.getX(ta+1)),b(c.getX(ta+2))}}}computeVertexNormals(){const a=this.index,b=this.getAttribute("position");if(void 0!==b){let c=this.getAttribute("normal");if(void 0===c)c=new pc(new Float32Array(3*b.count),3),this.setAttribute("normal",c);else for(let t=0,w=c.count;t<w;t++)c.setXYZ(t,0,0,0);const e=new O,g=new O,h=new O,l=new O,n=new O,m=new O,
q=new O,u=new O;if(a)for(let t=0,w=a.count;t<w;t+=3){const B=a.getX(t+0),z=a.getX(t+1),D=a.getX(t+2);e.fromBufferAttribute(b,B);g.fromBufferAttribute(b,z);h.fromBufferAttribute(b,D);q.subVectors(h,g);u.subVectors(e,g);q.cross(u);l.fromBufferAttribute(c,B);n.fromBufferAttribute(c,z);m.fromBufferAttribute(c,D);l.add(q);n.add(q);m.add(q);c.setXYZ(B,l.x,l.y,l.z);c.setXYZ(z,n.x,n.y,n.z);c.setXYZ(D,m.x,m.y,m.z)}else for(let t=0,w=b.count;t<w;t+=3)e.fromBufferAttribute(b,t+0),g.fromBufferAttribute(b,t+1),
h.fromBufferAttribute(b,t+2),q.subVectors(h,g),u.subVectors(e,g),q.cross(u),c.setXYZ(t+0,q.x,q.y,q.z),c.setXYZ(t+1,q.x,q.y,q.z),c.setXYZ(t+2,q.x,q.y,q.z);this.normalizeNormals();c.needsUpdate=!0}}normalizeNormals(){const a=this.attributes.normal;for(let b=0,c=a.count;b<c;b++)ed.fromBufferAttribute(a,b),ed.normalize(),a.setXYZ(b,ed.x,ed.y,ed.z)}toNonIndexed(){function a(n,m){const q=n.array,u=n.itemSize,t=n.normalized,w=new q.constructor(m.length*u);let B,z=0;for(let D=0,J=m.length;D<J;D++){B=n.isInterleavedBufferAttribute?
m[D]*n.data.stride+n.offset:m[D]*u;for(let A=0;A<u;A++)w[z++]=q[B++]}return new pc(w,u,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const b=new Kb;var c=this.index.array,e=this.attributes;for(var g in e){var h=a(e[g],c);b.setAttribute(g,h)}e=this.morphAttributes;for(var l in e){g=[];h=e[l];for(let n=0,m=h.length;n<m;n++){const q=a(h[n],c);g.push(q)}b.morphAttributes[l]=g}b.morphTargetsRelative=this.morphTargetsRelative;
c=this.groups;for(let n=0,m=c.length;n<m;n++)l=c[n],b.addGroup(l.start,l.count,l.materialIndex);return b}toJSON(){const a={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};c=this.index;null!==c&&(a.data.index={type:c.array.constructor.name,
array:Array.prototype.slice.call(c.array)});c=this.attributes;for(var e in c)a.data.attributes[e]=c[e].toJSON(a.data);e={};c=!1;for(b in this.morphAttributes){const g=this.morphAttributes[b],h=[];for(let l=0,n=g.length;l<n;l++)h.push(g[l].toJSON(a.data));0<h.length&&(e[b]=h,c=!0)}c&&(a.data.morphAttributes=e,a.data.morphTargetsRelative=this.morphTargetsRelative);b=this.groups;0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b)));b=this.boundingSphere;null!==b&&(a.data.boundingSphere={center:b.center.toArray(),
radius:b.radius});return a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;var b={};this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone(b));c=a.attributes;for(var e in c)this.setAttribute(e,c[e].clone(b));e=a.morphAttributes;for(var g in e){c=[];const h=e[g];for(let l=0,n=h.length;l<n;l++)c.push(h[l].clone(b));this.morphAttributes[g]=c}this.morphTargetsRelative=a.morphTargetsRelative;
b=a.groups;for(let h=0,l=b.length;h<l;h++)g=b[h],this.addGroup(g.start,g.count,g.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this}dispose(){this.dispatchEvent({type:"dispose"})}}const qf=new Mb,sd=new zg,td=new qd,bl=new O,cf=new O,df=new O,sg=new O,Se=new O,li=new O,bh=new Fa,Ne=new Fa,ch=new Fa,Kf=new O,
rk=new O,sk=new O,Jf=new O,tg=new O;class Uc extends ec{constructor(a=new Kb,b=new ie){super();this.isMesh=!0;this.type="Mesh";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));this.material=Array.isArray(a.material)?a.material.slice():a.material;this.geometry=a.geometry;
return this}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let c=0,e=a.length;c<e;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=c}}getVertexPosition(a,b){var c=this.geometry;const e=c.morphAttributes.position,g=c.morphTargetsRelative;b.fromBufferAttribute(c.attributes.position,a);c=this.morphTargetInfluences;if(e&&c){li.set(0,
0,0);for(let h=0,l=e.length;h<l;h++){const n=c[h];0!==n&&(Se.fromBufferAttribute(e[h],a),g?li.addScaledVector(Se,n):li.addScaledVector(Se.sub(b),n))}b.add(li)}return b}raycast(a,b){const c=this.geometry,e=this.matrixWorld;void 0!==this.material&&(null===c.boundingSphere&&c.computeBoundingSphere(),td.copy(c.boundingSphere),td.applyMatrix4(e),sd.copy(a.ray).recast(a.near),!1===td.containsPoint(sd.origin)&&(null===sd.intersectSphere(td,bl)||sd.origin.distanceToSquared(bl)>(a.far-a.near)**2)||(qf.copy(e).invert(),
sd.copy(a.ray).applyMatrix4(qf),null!==c.boundingBox&&!1===sd.intersectsBox(c.boundingBox)||this._computeIntersections(a,b,sd)))}_computeIntersections(a,b,c){var e=this.geometry;const g=this.material;var h=e.index,l=e.attributes.position;const n=e.attributes.uv,m=e.attributes.uv1,q=e.attributes.normal;var u=e.groups;e=e.drawRange;if(null!==h)if(Array.isArray(g))for(let z=0,D=u.length;z<D;z++){l=u[z];var t=g[l.materialIndex];var w=Math.max(l.start,e.start);var B=Math.min(h.count,Math.min(l.start+l.count,
e.start+e.count));for(let J=w,A=B;J<A;J+=3){w=h.getX(J);B=h.getX(J+1);const K=h.getX(J+2);if(w=va(this,t,a,c,n,m,q,w,B,K))w.faceIndex=Math.floor(J/3),w.face.materialIndex=l.materialIndex,b.push(w)}}else{u=Math.max(0,e.start);e=Math.min(h.count,e.start+e.count);for(let z=u,D=e;z<D;z+=3)if(e=h.getX(z),u=h.getX(z+1),l=h.getX(z+2),w=va(this,g,a,c,n,m,q,e,u,l))w.faceIndex=Math.floor(z/3),b.push(w)}else if(void 0!==l)if(Array.isArray(g))for(let z=0,D=u.length;z<D;z++){h=u[z];t=g[h.materialIndex];w=Math.max(h.start,
e.start);B=Math.min(l.count,Math.min(h.start+h.count,e.start+e.count));for(let J=w,A=B;J<A;J+=3)if(w=va(this,t,a,c,n,m,q,J,J+1,J+2))w.faceIndex=Math.floor(J/3),w.face.materialIndex=h.materialIndex,b.push(w)}else{h=Math.max(0,e.start);e=Math.min(l.count,e.start+e.count);for(let z=h,D=e;z<D;z+=3)if(w=va(this,g,a,c,n,m,q,z,z+1,z+2))w.faceIndex=Math.floor(z/3),b.push(w)}}}class ug extends Kb{constructor(a=1,b=1,c=1,e=1,g=1,h=1){function l(z,D,J,A,K,oa,R,U,ja,ka,ea){const xa=oa/ja,ta=R/ka,Da=oa/2,Va=R/
2,ra=U/2;R=ja+1;const Xa=ka+1;let Ja=oa=0;const ib=new O;for(let Cb=0;Cb<Xa;Cb++){const xb=Cb*ta-Va;for(let Ya=0;Ya<R;Ya++)ib[z]=(Ya*xa-Da)*A,ib[D]=xb*K,ib[J]=ra,q.push(ib.x,ib.y,ib.z),ib[z]=0,ib[D]=0,ib[J]=0<U?1:-1,u.push(ib.x,ib.y,ib.z),t.push(Ya/ja),t.push(1-Cb/ka),oa+=1}for(z=0;z<ka;z++)for(D=0;D<ja;D++)J=w+D+R*(z+1),A=w+(D+1)+R*(z+1),K=w+(D+1)+R*z,m.push(w+D+R*z,J,K),m.push(J,A,K),Ja+=6;n.addGroup(B,Ja,ea);B+=Ja;w+=oa}super();this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,
widthSegments:e,heightSegments:g,depthSegments:h};const n=this;e=Math.floor(e);g=Math.floor(g);h=Math.floor(h);const m=[],q=[],u=[],t=[];let w=0,B=0;l("z","y","x",-1,-1,c,b,a,h,g,0);l("z","y","x",1,-1,c,b,-a,h,g,1);l("x","z","y",1,1,a,c,b,e,h,2);l("x","z","y",1,-1,a,c,-b,e,h,3);l("x","y","z",1,-1,a,b,c,e,g,4);l("x","y","z",-1,-1,a,b,-c,e,g,5);this.setIndex(m);this.setAttribute("position",new pb(q,3));this.setAttribute("normal",new pb(u,3));this.setAttribute("uv",new pb(t,2))}copy(a){super.copy(a);
this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new ug(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}const Nf={clone:Ka,merge:Oa};class Be extends Dd{constructor(a){super();this.isShaderMaterial=!0;this.type="ShaderMaterial";this.defines={};this.uniforms={};this.uniformsGroups=[];this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";
this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.clipping=this.lights=this.fog=!1;this.forceSinglePass=!0;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;this.glslVersion=null;void 0!==a&&this.setValues(a)}copy(a){super.copy(a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;
this.uniforms=Ka(a.uniforms);var b=a.uniformsGroups;const c=[];for(let e=0;e<b.length;e++)c.push(b[e].clone());this.uniformsGroups=c;this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.clipping=a.clipping;this.extensions=Object.assign({},a.extensions);this.glslVersion=a.glslVersion;return this}toJSON(a){const b=super.toJSON(a);b.glslVersion=this.glslVersion;b.uniforms={};for(const c in this.uniforms){const e=
this.uniforms[c].value;b.uniforms[c]=e&&e.isTexture?{type:"t",value:e.toJSON(a).uuid}:e&&e.isColor?{type:"c",value:e.getHex()}:e&&e.isVector2?{type:"v2",value:e.toArray()}:e&&e.isVector3?{type:"v3",value:e.toArray()}:e&&e.isVector4?{type:"v4",value:e.toArray()}:e&&e.isMatrix3?{type:"m3",value:e.toArray()}:e&&e.isMatrix4?{type:"m4",value:e.toArray()}:{value:e}}0<Object.keys(this.defines).length&&(b.defines=this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;b.lights=
this.lights;b.clipping=this.clipping;a={};for(const c in this.extensions)!0===this.extensions[c]&&(a[c]=!0);0<Object.keys(a).length&&(b.extensions=a);return b}}class rf extends ec{constructor(){super();this.isCamera=!0;this.type="Camera";this.matrixWorldInverse=new Mb;this.projectionMatrix=new Mb;this.projectionMatrixInverse=new Mb;this.coordinateSystem=2E3}copy(a,b){super.copy(a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);
this.coordinateSystem=a.coordinateSystem;return this}getWorldDirection(a){return super.getWorldDirection(a).negate()}updateMatrixWorld(a){super.updateMatrixWorld(a);this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,b){super.updateWorldMatrix(a,b);this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const sf=new O,Jc=new Fa,om=new Fa;class id extends rf{constructor(a=50,b=1,c=.1,e=2E3){super();this.isPerspectiveCamera=!0;
this.type="PerspectiveCamera";this.fov=a;this.zoom=1;this.near=c;this.far=e;this.focus=10;this.aspect=b;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}copy(a,b){super.copy(a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this}setFocalLength(a){a=.5*this.getFilmHeight()/a;this.fov=2*Tf*Math.atan(a);
this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*lf*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*Tf*Math.atan(Math.tan(.5*lf*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(a,b,c){sf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse);b.set(sf.x,sf.y).multiplyScalar(-a/sf.z);sf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse);c.set(sf.x,
sf.y).multiplyScalar(-a/sf.z)}getViewSize(a,b){this.getViewBounds(a,Jc,om);return b.subVectors(om,Jc)}setViewOffset(a,b,c,e,g,h){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=e;this.view.width=g;this.view.height=h;this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){const a=
this.near;let b=a*Math.tan(.5*lf*this.fov)/this.zoom,c=2*b,e=this.aspect*c,g=-.5*e;var h=this.view;if(null!==this.view&&this.view.enabled){const l=h.fullWidth,n=h.fullHeight;g+=h.offsetX*e/l;b-=h.offsetY*c/n;e*=h.width/l;c*=h.height/n}h=this.filmOffset;0!==h&&(g+=a*h/this.getFilmWidth());this.projectionMatrix.makePerspective(g,g+e,b,b-c,a,this.far,this.coordinateSystem);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.fov=this.fov;a.object.zoom=
this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}}class pm extends ec{constructor(a,b,c){super();this.type="CubeCamera";this.renderTarget=c;this.coordinateSystem=null;this.activeMipmapLevel=0;c=new id(-90,1,a,b);c.layers=this.layers;this.add(c);c=new id(-90,1,a,b);c.layers=this.layers;this.add(c);c=
new id(-90,1,a,b);c.layers=this.layers;this.add(c);c=new id(-90,1,a,b);c.layers=this.layers;this.add(c);c=new id(-90,1,a,b);c.layers=this.layers;this.add(c);a=new id(-90,1,a,b);a.layers=this.layers;this.add(a)}updateCoordinateSystem(){const a=this.coordinateSystem,b=this.children.concat(),[c,e,g,h,l,n]=b;for(const m of b)this.remove(m);if(2E3===a)c.up.set(0,1,0),c.lookAt(1,0,0),e.up.set(0,1,0),e.lookAt(-1,0,0),g.up.set(0,0,-1),g.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,
0,1),n.up.set(0,1,0),n.lookAt(0,0,-1);else if(2001===a)c.up.set(0,-1,0),c.lookAt(-1,0,0),e.up.set(0,-1,0),e.lookAt(1,0,0),g.up.set(0,0,1),g.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),n.up.set(0,-1,0),n.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+a);for(const m of b)this.add(m),m.updateMatrixWorld()}update(a,b){null===this.parent&&this.updateMatrixWorld();const {renderTarget:c,activeMipmapLevel:e}=this;
this.coordinateSystem!==a.coordinateSystem&&(this.coordinateSystem=a.coordinateSystem,this.updateCoordinateSystem());const [g,h,l,n,m,q]=this.children,u=a.getRenderTarget(),t=a.getActiveCubeFace(),w=a.getActiveMipmapLevel(),B=a.xr.enabled;a.xr.enabled=!1;const z=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;a.setRenderTarget(c,0,e);a.render(b,g);a.setRenderTarget(c,1,e);a.render(b,h);a.setRenderTarget(c,2,e);a.render(b,l);a.setRenderTarget(c,3,e);a.render(b,n);a.setRenderTarget(c,4,e);a.render(b,
m);c.texture.generateMipmaps=z;a.setRenderTarget(c,5,e);a.render(b,q);a.setRenderTarget(u,t,w);a.xr.enabled=B;c.texture.needsPMREMUpdate=!0}}class mi extends Pc{constructor(a,b,c,e,g,h,l,n,m,q){a=void 0!==a?a:[];super(a,void 0!==b?b:301,c,e,g,h,l,n,m,q);this.isCubeTexture=!0;this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}class tk extends Rd{constructor(a=1,b={}){super(a,a,b);this.isWebGLCubeRenderTarget=!0;a={width:a,height:a,depth:1};this.texture=new mi([a,a,a,a,a,a],b.mapping,
b.wrapS,b.wrapT,b.magFilter,b.minFilter,b.format,b.type,b.anisotropy,b.colorSpace);this.texture.isRenderTargetTexture=!0;this.texture.generateMipmaps=void 0!==b.generateMipmaps?b.generateMipmaps:!1;this.texture.minFilter=void 0!==b.minFilter?b.minFilter:1006}fromEquirectangularTexture(a,b){this.texture.type=b.type;this.texture.colorSpace=b.colorSpace;this.texture.generateMipmaps=b.generateMipmaps;this.texture.minFilter=b.minFilter;this.texture.magFilter=b.magFilter;var c=new ug(5,5,5),e=new Be({name:"CubemapFromEquirect",
uniforms:Ka({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include \x3cbegin_vertex\x3e\n\t\t\t\t\t#include \x3cproject_vertex\x3e\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include \x3ccommon\x3e\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction \x3d normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV \x3d equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
side:1,blending:0});e.uniforms.tEquirect.value=b;c=new Uc(c,e);e=b.minFilter;1008===b.minFilter&&(b.minFilter=1006);(new pm(1,10,this)).update(a,c);b.minFilter=e;c.geometry.dispose();c.material.dispose();return this}clear(a,b,c,e){const g=a.getRenderTarget();for(let h=0;6>h;h++)a.setRenderTarget(this,h),a.clear(b,c,e);a.setRenderTarget(g)}}const cl=new O,se=new O,dl=new Ub;class Mf{constructor(a=new O(1,0,0),b=0){this.isPlane=!0;this.normal=a;this.constant=b}set(a,b){this.normal.copy(a);this.constant=
b;return this}setComponents(a,b,c,e){this.normal.set(a,b,c);this.constant=e;return this}setFromNormalAndCoplanarPoint(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this}setFromCoplanarPoints(a,b,c){b=cl.subVectors(c,b).cross(se.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this}copy(a){this.normal.copy(a.normal);this.constant=a.constant;return this}normalize(){const a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this}negate(){this.constant*=
-1;this.normal.negate();return this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,b){return b.copy(a).addScaledVector(this.normal,-this.distanceToPoint(a))}intersectLine(a,b){const c=a.delta(cl);var e=this.normal.dot(c);if(0===e)return 0===this.distanceToPoint(a.start)?b.copy(a.start):null;e=-(a.start.dot(this.normal)+this.constant)/e;return 0>e||1<e?null:b.copy(a.start).addScaledVector(c,e)}intersectsLine(a){const b=
this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,b){b=b||dl.getNormalMatrix(a);a=this.coplanarPoint(cl).applyMatrix4(a);b=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(b);return this}translate(a){this.constant-=a.dot(this.normal);return this}equals(a){return a.normal.equals(this.normal)&&
a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Wd=new qd,Fg=new O;class Ee{constructor(a=new Mf,b=new Mf,c=new Mf,e=new Mf,g=new Mf,h=new Mf){this.planes=[a,b,c,e,g,h]}set(a,b,c,e,g,h){const l=this.planes;l[0].copy(a);l[1].copy(b);l[2].copy(c);l[3].copy(e);l[4].copy(g);l[5].copy(h);return this}copy(a){const b=this.planes;for(let c=0;6>c;c++)b[c].copy(a.planes[c]);return this}setFromProjectionMatrix(a,b=2E3){const c=this.planes;var e=a.elements;a=e[0];const g=e[1],
h=e[2],l=e[3],n=e[4],m=e[5],q=e[6],u=e[7],t=e[8],w=e[9],B=e[10],z=e[11],D=e[12],J=e[13],A=e[14];e=e[15];c[0].setComponents(l-a,u-n,z-t,e-D).normalize();c[1].setComponents(l+a,u+n,z+t,e+D).normalize();c[2].setComponents(l+g,u+m,z+w,e+J).normalize();c[3].setComponents(l-g,u-m,z-w,e-J).normalize();c[4].setComponents(l-h,u-q,z-B,e-A).normalize();if(2E3===b)c[5].setComponents(l+h,u+q,z+B,e+A).normalize();else if(2001===b)c[5].setComponents(h,q,B,A).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+
b);return this}intersectsObject(a){if(void 0!==a.boundingSphere)null===a.boundingSphere&&a.computeBoundingSphere(),Wd.copy(a.boundingSphere).applyMatrix4(a.matrixWorld);else{const b=a.geometry;null===b.boundingSphere&&b.computeBoundingSphere();Wd.copy(b.boundingSphere).applyMatrix4(a.matrixWorld)}return this.intersectsSphere(Wd)}intersectsSprite(a){Wd.center.set(0,0,0);Wd.radius=.7071067811865476;Wd.applyMatrix4(a.matrixWorld);return this.intersectsSphere(Wd)}intersectsSphere(a){const b=this.planes,
c=a.center;a=-a.radius;for(let e=0;6>e;e++)if(b[e].distanceToPoint(c)<a)return!1;return!0}intersectsBox(a){const b=this.planes;for(let c=0;6>c;c++){const e=b[c];Fg.x=0<e.normal.x?a.max.x:a.min.x;Fg.y=0<e.normal.y?a.max.y:a.min.y;Fg.z=0<e.normal.z?a.max.z:a.min.z;if(0>e.distanceToPoint(Fg))return!1}return!0}containsPoint(a){const b=this.planes;for(let c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Lf extends Kb{constructor(a=1,b=1,
c=1,e=1){super();this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:e};var g=a/2,h=b/2;c=Math.floor(c);e=Math.floor(e);const l=c+1;var n=e+1,m=a/c,q=b/e;b=[];a=[];const u=[],t=[];for(let w=0;w<n;w++){const B=w*q-h;for(let z=0;z<l;z++)a.push(z*m-g,-B,0),u.push(0,0,1),t.push(z/c),t.push(1-w/e)}for(g=0;g<e;g++)for(h=0;h<c;h++)n=h+l*(g+1),m=h+1+l*(g+1),q=h+1+l*g,b.push(h+l*g,n,q),b.push(n,m,q);this.setIndex(b);this.setAttribute("position",new pb(a,3));this.setAttribute("normal",
new pb(u,3));this.setAttribute("uv",new pb(t,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Lf(a.width,a.height,a.widthSegments,a.heightSegments)}}const Vb={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a \x3c getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE \x3d 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv \x3d max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale \x3d 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales \x3d vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha \x3d vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor \x3d fract( log2( pixScale ) );\n\t\tfloat x \x3d ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a \x3d min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases \x3d vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold \x3d ( x \x3c ( 1.0 - a ) )\n\t\t\t? ( ( x \x3c a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",
alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a \x3d smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a \x3d\x3d 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a \x3c alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",
aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *\x3d ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *\x3d ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD )\n\t\tfloat dotNV \x3d saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size \x3d textureSize( batchingTexture, 0 ).x;\n\t\tint j \x3d int( i ) * 4;\n\t\tint x \x3d j % size;\n\t\tint y \x3d j / size;\n\t\tvec4 v1 \x3d texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 \x3d texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 \x3d texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 \x3d texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",
batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix \x3d getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed \x3d vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition \x3d vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal \x3d vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent \x3d vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",
iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 \x3d mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 \x3d sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase \x3d 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val \x3d vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos \x3d vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var \x3d vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz \x3d val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x +\x3d 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /\x3d 1.0685e-7;\n\t\tvec3 rgb \x3d XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR \x3d mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq \x3d pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq \x3d 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq \x3c 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 \x3d sqrt( cosTheta2Sq );\n\t\tfloat R0 \x3d IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 \x3d F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 \x3d 1.0 - R12;\n\t\tfloat phi12 \x3d 0.0;\n\t\tif ( iridescenceIOR \x3c outsideIOR ) phi12 \x3d PI;\n\t\tfloat phi21 \x3d PI - phi12;\n\t\tvec3 baseIOR \x3d Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 \x3d IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 \x3d F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 \x3d vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] \x3c iridescenceIOR ) phi23[ 0 ] \x3d PI;\n\t\tif ( baseIOR[ 1 ] \x3c iridescenceIOR ) phi23[ 1 ] \x3d PI;\n\t\tif ( baseIOR[ 2 ] \x3c iridescenceIOR ) phi23[ 2 ] \x3d PI;\n\t\tfloat OPD \x3d 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi \x3d vec3( phi21 ) + phi23;\n\t\tvec3 R123 \x3d clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 \x3d sqrt( R123 );\n\t\tvec3 Rs \x3d pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 \x3d R12 + Rs;\n\t\tI \x3d C0;\n\t\tvec3 Cm \x3d Rs - T121;\n\t\tfor ( int m \x3d 1; m \x3c\x3d 2; ++ m ) {\n\t\t\tCm *\x3d r123;\n\t\t\tvec3 Sm \x3d 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI +\x3d Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vBumpMapUv );\n\t\tvec2 dSTdy \x3d dFdy( vBumpMapUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX \x3d normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY \x3d normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity \x3d 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tdistanceToPlane \x3d - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient \x3d fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *\x3d smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity \x3d\x3d 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity \x3d 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane \x3d - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient \x3d fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *\x3d 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *\x3d 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *\x3d clipOpacity;\n\t\tif ( diffuseColor.a \x3d\x3d 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\t\tbool clipped \x3d true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\t\tclipped \x3d ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvClipPosition \x3d - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *\x3d vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",
color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor \x3d vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor \x3d vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *\x3d color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *\x3d instanceColor.xyz;\n#endif",
common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent \x3d max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights \x3d vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] \x3d\x3d - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u \x3d atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v \x3d asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection \x3d abs( direction );\n\t\tfloat face \x3d - 1.0;\n\t\tif ( absDirection.x \x3e absDirection.z ) {\n\t\t\tif ( absDirection.x \x3e absDirection.y )\n\t\t\t\tface \x3d direction.x \x3e 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z \x3e absDirection.y )\n\t\t\t\tface \x3d direction.z \x3e 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face \x3d\x3d 0.0 ) {\n\t\t\tuv \x3d vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 1.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face \x3d\x3d 2.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face \x3d\x3d 3.0 ) {\n\t\t\tuv \x3d vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 4.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv \x3d vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face \x3d getFace( direction );\n\t\tfloat filterInt \x3d max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt \x3d max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize \x3d exp2( mipInt );\n\t\thighp vec2 uv \x3d getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face \x3e 2.0 ) {\n\t\t\tuv.y +\x3d faceSize;\n\t\t\tface -\x3d 3.0;\n\t\t}\n\t\tuv.x +\x3d face * faceSize;\n\t\tuv.x +\x3d filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y +\x3d 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *\x3d CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *\x3d CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip \x3d 0.0;\n\t\tif ( roughness \x3e\x3d cubeUV_r1 ) {\n\t\t\tmip \x3d ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r4 ) {\n\t\t\tmip \x3d ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r5 ) {\n\t\t\tmip \x3d ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness \x3e\x3d cubeUV_r6 ) {\n\t\t\tmip \x3d ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip \x3d - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip \x3d clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF \x3d fract( mip );\n\t\tfloat mipInt \x3d floor( mip );\n\t\tvec3 color0 \x3d bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF \x3d\x3d 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 \x3d bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal \x3d objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent \x3d objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm \x3d mat3( batchingMatrix );\n\ttransformedNormal /\x3d vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal \x3d bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent \x3d bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im \x3d mat3( instanceMatrix );\n\ttransformedNormal /\x3d vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal \x3d im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent \x3d im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal \x3d normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent \x3d ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent \x3d - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor \x3d linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 \x3d mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB \x3d mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag \x3d normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec \x3d reflect( - viewDir, normal );\n\t\t\treflectVec \x3d normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal \x3d cross( bitangent, viewDir );\n\t\t\t\tbentNormal \x3d normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal \x3d normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tvFogDepth \x3d - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL \x3d dot( normal, lightDirection );\n\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw \x3d fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel \x3d texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse +\x3d lightMapIrradiance;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularStrength \x3d specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance \x3e 0.0 \x26\x26 decayExponent \x3e 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance \x3e 0.0 ) {\n\t\t\tdistanceFalloff *\x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color \x3d directionalLight.color;\n\t\tlight.direction \x3d directionalLight.direction;\n\t\tlight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector \x3d pointLight.position - geometryPosition;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tlight.color \x3d pointLight.color;\n\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector \x3d spotLight.position - geometryPosition;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat angleCos \x3d dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation \x3d getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation \x3e 0.0 ) {\n\t\t\tfloat lightDistance \x3d length( lVector );\n\t\t\tlight.color \x3d spotLight.color * spotAttenuation;\n\t\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color \x3d vec3( 0.0 );\n\t\t\tlight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL \x3d dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance \x3d getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy \x3d max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness \x3d max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness \x3d max( roughnessFactor, 0.0525 );material.roughness +\x3d geometryRoughness;\nmaterial.roughness \x3d min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior \x3d ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor \x3d specularIntensity;\n\t\tvec3 specularColorFactor \x3d specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *\x3d texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *\x3d texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 \x3d mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor \x3d 1.0;\n\t\tvec3 specularColorFactor \x3d vec3( 1.0 );\n\t\tmaterial.specularF90 \x3d 1.0;\n\t#endif\n\tmaterial.specularColor \x3d mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 \x3d 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat \x3d clearcoat;\n\tmaterial.clearcoatRoughness \x3d clearcoatRoughness;\n\tmaterial.clearcoatF0 \x3d vec3( 0.04 );\n\tmaterial.clearcoatF90 \x3d 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *\x3d texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *\x3d texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat \x3d saturate( material.clearcoat );\tmaterial.clearcoatRoughness \x3d max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness +\x3d geometryRoughness;\n\tmaterial.clearcoatRoughness \x3d min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence \x3d iridescence;\n\tmaterial.iridescenceIOR \x3d iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *\x3d texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness \x3d (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness \x3d iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor \x3d sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *\x3d texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness \x3d clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *\x3d texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat \x3d mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar \x3d texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV \x3d anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV \x3d anisotropyVector;\n\t#endif\n\tmaterial.anisotropy \x3d length( anisotropyV );\n\tif( material.anisotropy \x3d\x3d 0.0 ) {\n\t\tanisotropyV \x3d vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /\x3d material.anisotropy;\n\t\tmaterial.anisotropy \x3d saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT \x3d mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT \x3d tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB \x3d tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect \x3d vec3( 0.0 );\nvec3 clearcoatSpecularIndirect \x3d vec3( 0.0 );\nvec3 sheenSpecularDirect \x3d vec3( 0.0 );\nvec3 sheenSpecularIndirect \x3d vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x \x3d clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 \x3d x * x;\n    float x5 \x3d clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv \x3d dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl \x3d dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v \x3d 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 \x3d alphaT * alphaB;\n\t\thighp vec3 v \x3d vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 \x3d dot( v, v );\n\t\tfloat w2 \x3d a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 \x3d material.clearcoatF0;\n\t\tfloat f90 \x3d material.clearcoatF90;\n\t\tfloat roughness \x3d material.clearcoatRoughness;\n\t\tfloat alpha \x3d pow2( roughness );\n\t\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\t\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F \x3d F_Schlick( f0, f90, dotVH );\n\t\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D \x3d D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 \x3d material.specularColor;\n\tfloat f90 \x3d material.specularF90;\n\tfloat roughness \x3d material.roughness;\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF \x3d mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL \x3d dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV \x3d dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH \x3d dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL \x3d dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV \x3d dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH \x3d dot( material.anisotropyB, halfDir );\n\t\tfloat V \x3d V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D \x3d D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D \x3d D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS \x3d 0.5 / LUT_SIZE;\n\tfloat dotNV \x3d saturate( dot( N, V ) );\n\tvec2 uv \x3d vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b \x3d 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d ( x \x3e 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result \x3d LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha \x3d pow2( roughness );\n\tfloat invAlpha \x3d 1.0 / alpha;\n\tfloat cos2h \x3d dotNH * dotNH;\n\tfloat sin2h \x3d max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat D \x3d D_Charlie( sheenRoughness, dotNH );\n\tfloat V \x3d V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat r2 \x3d roughness * roughness;\n\tfloat a \x3d roughness \x3c 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b \x3d roughness \x3c 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG \x3d exp( a * dotNV + b ) + ( roughness \x3c 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab \x3d vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr \x3d mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr \x3d specularColor;\n\t#endif\n\tvec3 FssEss \x3d Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess \x3d fab.x + fab.y;\n\tfloat Ems \x3d 1.0 - Ess;\n\tvec3 Favg \x3d Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms \x3d FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter +\x3d FssEss;\n\tmultiScatter +\x3d Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometryNormal;\n\t\tvec3 viewDir \x3d geometryViewDir;\n\t\tvec3 position \x3d geometryPosition;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos + halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 \x3d texture2D( ltc_1, uv );\n\t\tvec4 t2 \x3d texture2D( ltc_2, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel \x3d ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular +\x3d lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc \x3d saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance \x3d dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect +\x3d ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect +\x3d irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect +\x3d clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect +\x3d irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering \x3d vec3( 0.0 );\n\tvec3 multiScattering \x3d vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance \x3d irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering \x3d singleScattering + multiScattering;\n\tvec3 diffuse \x3d material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular +\x3d radiance * singleScattering;\n\treflectedLight.indirectSpecular +\x3d multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse +\x3d diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nvec3 geometryPosition \x3d - vViewPosition;\nvec3 geometryNormal \x3d normal;\nvec3 geometryViewDir \x3d ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal \x3d vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal \x3d clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi \x3d saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness \x3d\x3d 0.0 ) {\n\t\tmaterial.iridescence \x3d 0.0;\n\t} else {\n\t\tmaterial.iridescence \x3d saturate( material.iridescence );\n\t}\n\tif ( material.iridescence \x3e 0.0 ) {\n\t\tmaterial.iridescenceFresnel \x3d evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 \x3d Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow \x3d pointLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX \x3c NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord \x3d vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap \x3d all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor \x3d texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color \x3d inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow \x3d spotLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow \x3d directionalLightShadows[ i ];\n\t\tdirectLight.color *\x3d ( directLight.visible \x26\x26 receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance \x3d vec3( 0.0 );\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance +\x3d getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d vec3( 0.0 );\n\tvec3 clearcoatRadiance \x3d vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance \x3d lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance +\x3d getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance +\x3d getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance +\x3d getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance +\x3d getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d vIsPerspective \x3d\x3d 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t\tvIsPerspective \x3d float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *\x3d gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor \x3d texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor \x3d vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *\x3d sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv \x3d vUv;\n\t#else\n\t\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *\x3d texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence \x3d texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] \x3d  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",
morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) \x26\x26 defined( MORPHTARGETS_TEXTURE )\n\tvColor *\x3d morphTargetBaseInfluence;\n\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) vColor +\x3d getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) objectNormal +\x3d getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal +\x3d morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal +\x3d morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal +\x3d morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal +\x3d morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex \x3d vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y \x3d texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x \x3d texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV \x3d ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] !\x3d 0.0 ) transformed +\x3d getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed +\x3d morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed +\x3d morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed +\x3d morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed +\x3d morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed +\x3d morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed +\x3d morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed +\x3d morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed +\x3d morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection \x3d gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx \x3d dFdx( vViewPosition );\n\tvec3 fdy \x3d dFdy( vViewPosition );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *\x3d faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn \x3d mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn \x3d getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) \x26\x26 ! defined( FLAT_SHADED )\n\t\ttbn[0] *\x3d faceDirection;\n\t\ttbn[1] *\x3d faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 \x3d mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 \x3d getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) \x26\x26 ! defined( FLAT_SHADED )\n\t\ttbn2[0] *\x3d faceDirection;\n\t\ttbn2[1] *\x3d faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal \x3d normal;",
normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal \x3d texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal \x3d - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\tnormal \x3d normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN \x3d texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *\x3d normalScale;\n\tnormal \x3d normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) \x26\x26 ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 \x3d dFdx( eye_pos.xyz );\n\t\tvec3 q1 \x3d dFdy( eye_pos.xyz );\n\t\tvec2 st0 \x3d dFdx( uv.st );\n\t\tvec2 st1 \x3d dFdy( uv.st );\n\t\tvec3 N \x3d surf_norm;\n\t\tvec3 q1perp \x3d cross( q1, N );\n\t\tvec3 q0perp \x3d cross( N, q0 );\n\t\tvec3 T \x3d q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B \x3d q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det \x3d max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale \x3d ( det \x3d\x3d 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal \x3d nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN \x3d texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *\x3d clearcoatNormalScale;\n\tclearcoatNormal \x3d normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",
iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a \x3d 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *\x3d material.transmissionAlpha;\n#endif\ngl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r \x3d vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition \x3d vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition \x3d batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition \x3d instanceMatrix * mvPosition;\n#endif\nmvPosition \x3d modelViewMatrix * mvPosition;\ngl_Position \x3d projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif",
dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif",
roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS \x3e 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion \x3d 1.0;\n\t\tvec2 distribution \x3d texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow \x3d step( compare , distribution.x );\n\t\tif (hard_shadow !\x3d 1.0 ) {\n\t\t\tfloat distance \x3d compare - distribution.x ;\n\t\t\tfloat variance \x3d max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability \x3d variance / (variance + distance * distance );\t\t\tsoftness_probability \x3d clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion \x3d clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbool inFrustum \x3d shadowCoord.x \x3e\x3d 0.0 \x26\x26 shadowCoord.x \x3c\x3d 1.0 \x26\x26 shadowCoord.y \x3e\x3d 0.0 \x26\x26 shadowCoord.y \x3c\x3d 1.0;\n\t\tbool frustumTest \x3d inFrustum \x26\x26 shadowCoord.z \x3c\x3d 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 \x3d dx0 / 2.0;\n\t\t\tfloat dy2 \x3d dy0 / 2.0;\n\t\t\tfloat dx3 \x3d dx1 / 2.0;\n\t\t\tfloat dy3 \x3d dy1 / 2.0;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx \x3d texelSize.x;\n\t\t\tfloat dy \x3d texelSize.y;\n\t\t\tvec2 uv \x3d shadowCoord.xy;\n\t\t\tvec2 f \x3d fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -\x3d f * texelSize;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow \x3d VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) \x26\x26 ( NUM_DIR_LIGHT_SHADOWS \x3e 0 || NUM_POINT_LIGHT_SHADOWS \x3e 0 ) ) || ( NUM_SPOT_LIGHT_COORDS \x3e 0 )\n\tvec3 shadowWorldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) \x26\x26 UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz +\x3d shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] \x3d spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight \x3d spotLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight \x3d pointLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size \x3d textureSize( boneTexture, 0 ).x;\n\t\tint j \x3d int( i ) * 4;\n\t\tint x \x3d j % size;\n\t\tint y \x3d j / size;\n\t\tvec4 v1 \x3d texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 \x3d texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 \x3d texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 \x3d texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent \x3d vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a \x3d v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b \x3d v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat \x3d mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat \x3d mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *\x3d toneMappingExposure / 0.6;\n\tcolor \x3d ACESInputMat * color;\n\tcolor \x3d RRTAndODTFit( color );\n\tcolor \x3d ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB \x3d mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 \x3d mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 \x3d x * x;\n\tvec3 x4 \x3d x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix \x3d mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix \x3d mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv \x3d - 12.47393;\tconst float AgxMaxEv \x3d 4.026069;\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor \x3d AgXInsetMatrix * color;\n\tcolor \x3d max( color, 1e-10 );\tcolor \x3d log2( color );\n\tcolor \x3d ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor \x3d clamp( color, 0.0, 1.0 );\n\tcolor \x3d agxDefaultContrastApprox( color );\n\tcolor \x3d AgXOutsetMatrix * color;\n\tcolor \x3d pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor \x3d LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor \x3d clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression \x3d 0.8 - 0.04;\n\tfloat desaturation \x3d 0.15;\n\tcolor *\x3d toneMappingExposure;\n\tfloat x \x3d min(color.r, min(color.g, color.b));\n\tfloat offset \x3d x \x3c 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -\x3d offset;\n\tfloat peak \x3d max(color.r, max(color.g, color.b));\n\tif (peak \x3c startCompression) return color;\n\tfloat d \x3d 1. - startCompression;\n\tfloat newPeak \x3d 1. - d * d / (peak + d - startCompression);\n\tcolor *\x3d newPeak / peak;\n\tfloat g \x3d 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission \x3d transmission;\n\tmaterial.transmissionAlpha \x3d 1.0;\n\tmaterial.thickness \x3d thickness;\n\tmaterial.attenuationDistance \x3d attenuationDistance;\n\tmaterial.attenuationColor \x3d attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *\x3d texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *\x3d texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos \x3d vWorldPosition;\n\tvec3 v \x3d normalize( cameraPosition - pos );\n\tvec3 n \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted \x3d getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha \x3d mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse \x3d mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",
transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv \x3d uv * texelSize.zw + 0.5;\n\t\tvec2 iuv \x3d floor( uv );\n\t\tvec2 fuv \x3d fract( uv );\n\t\tfloat g0x \x3d g0( fuv.x );\n\t\tfloat g1x \x3d g1( fuv.x );\n\t\tfloat h0x \x3d h0( fuv.x );\n\t\tfloat h1x \x3d h1( fuv.x );\n\t\tfloat h0y \x3d h0( fuv.y );\n\t\tfloat h1y \x3d h1( fuv.y );\n\t\tvec2 p0 \x3d ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 \x3d ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 \x3d ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 \x3d ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize \x3d vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize \x3d vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv \x3d 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv \x3d 1.0 / cLodSize;\n\t\tvec4 fSample \x3d bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample \x3d bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector \x3d refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x \x3d length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y \x3d length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z \x3d length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod \x3d log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient \x3d -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance \x3d exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay \x3d getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit \x3d position + transmissionRay;\n\t\tvec4 ndcPos \x3d projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords \x3d ndcPos.xy / ndcPos.w;\n\t\trefractionCoords +\x3d 1.0;\n\t\trefractionCoords /\x3d 2.0;\n\t\tvec4 transmittedLight \x3d getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance \x3d diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor \x3d transmittance * transmittedLight.rgb;\n\t\tvec3 F \x3d EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor \x3d ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",
uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv \x3d vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv \x3d ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv \x3d ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv \x3d ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv \x3d ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv \x3d ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv \x3d ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv \x3d ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv \x3d ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv \x3d ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv \x3d ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv \x3d ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv \x3d ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv \x3d ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv \x3d ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv \x3d ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv \x3d ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv \x3d ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv \x3d ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv \x3d ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv \x3d ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv \x3d ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv \x3d ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv \x3d ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",
worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS \x3e 0\n\tvec4 worldPosition \x3d vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition \x3d batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition \x3d instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition \x3d modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position \x3d vec4( position.xy, 1.0, 1.0 );\n}",
background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor \x3d texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor \x3d vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n}",
backgroundCube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include \x3ccube_uv_reflection_fragment\x3e\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor \x3d textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor \x3d textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *\x3d backgroundIntensity;\n\tgl_FragColor \x3d texColor;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor \x3d textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor \x3d texColor;\n\tgl_FragColor.a *\x3d opacity;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n}",
depth_vert:"#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvHighPrecisionZW \x3d gl_Position.zw;\n}",
depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cclipping_planes_fragment\x3e\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\tfloat fragCoordZ \x3d 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldDirection );\n\tvec2 sampleUV \x3d equirectUv( direction );\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvLineDistance \x3d scale * lineDistance;\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinbase_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse +\x3d lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_lambert_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_lambert_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tvec3 viewDir \x3d normalize( vViewPosition );\n\tvec3 x \x3d normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y \x3d cross( viewDir, x );\n\tvec2 uv \x3d vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor \x3d texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor \x3d vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight \x3d diffuseColor.rgb * matcapColor.rgb;\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}",
meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( 0.0, 0.0, 0.0, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a \x3d 1.0;\n\t#endif\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n#ifdef USE_TRANSMISSION\n\tvWorldPosition \x3d worldPosition.xyz;\n#endif\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3ciridescence_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_physical_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3ctransmission_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cclearcoat_pars_fragment\x3e\n#include \x3ciridescence_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cclearcoat_normal_fragment_begin\x3e\n\t#include \x3cclearcoat_normal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 totalDiffuse \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular \x3d reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include \x3ctransmission_fragment\x3e\n\tvec3 outgoingLight \x3d totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp \x3d 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight \x3d outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc \x3d saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc \x3d F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight \x3d outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_toon_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_toon_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphcolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_PointSize \x3d size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *\x3d ( scale / - mvPosition.z );\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
shadow_vert:"#include \x3ccommon\x3e\n#include \x3cbatching_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbatching_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphinstance_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\t#include \x3clogdepthbuf_fragment\x3e\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x \x3d length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y \x3d length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *\x3d - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition \x3d ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3calphahash_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3calphahash_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3copaque_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3ccolorspace_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}"},
eb={common:{diffuse:{value:new nb(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ub},alphaMap:{value:null},alphaMapTransform:{value:new Ub},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ub}},envmap:{envMap:{value:null},envMapRotation:{value:new Ub},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ub}},lightmap:{lightMap:{value:null},
lightMapIntensity:{value:1},lightMapTransform:{value:new Ub}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ub},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ub},normalScale:{value:new Fa(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ub},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ub}},metalnessmap:{metalnessMap:{value:null},
metalnessMapTransform:{value:new Ub}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ub}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new nb(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},
directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},
shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nb(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ub},alphaTest:{value:0},uvTransform:{value:new Ub}},
sprite:{diffuse:{value:new nb(16777215)},opacity:{value:1},center:{value:new Fa(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ub},alphaMap:{value:null},alphaMapTransform:{value:new Ub},alphaTest:{value:0}}},Ce={basic:{uniforms:Oa([eb.common,eb.specularmap,eb.envmap,eb.aomap,eb.lightmap,eb.fog]),vertexShader:Vb.meshbasic_vert,fragmentShader:Vb.meshbasic_frag},lambert:{uniforms:Oa([eb.common,eb.specularmap,eb.envmap,eb.aomap,eb.lightmap,eb.emissivemap,eb.bumpmap,eb.normalmap,eb.displacementmap,
eb.fog,eb.lights,{emissive:{value:new nb(0)}}]),vertexShader:Vb.meshlambert_vert,fragmentShader:Vb.meshlambert_frag},phong:{uniforms:Oa([eb.common,eb.specularmap,eb.envmap,eb.aomap,eb.lightmap,eb.emissivemap,eb.bumpmap,eb.normalmap,eb.displacementmap,eb.fog,eb.lights,{emissive:{value:new nb(0)},specular:{value:new nb(1118481)},shininess:{value:30}}]),vertexShader:Vb.meshphong_vert,fragmentShader:Vb.meshphong_frag},standard:{uniforms:Oa([eb.common,eb.envmap,eb.aomap,eb.lightmap,eb.emissivemap,eb.bumpmap,
eb.normalmap,eb.displacementmap,eb.roughnessmap,eb.metalnessmap,eb.fog,eb.lights,{emissive:{value:new nb(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vb.meshphysical_vert,fragmentShader:Vb.meshphysical_frag},toon:{uniforms:Oa([eb.common,eb.aomap,eb.lightmap,eb.emissivemap,eb.bumpmap,eb.normalmap,eb.displacementmap,eb.gradientmap,eb.fog,eb.lights,{emissive:{value:new nb(0)}}]),vertexShader:Vb.meshtoon_vert,fragmentShader:Vb.meshtoon_frag},matcap:{uniforms:Oa([eb.common,
eb.bumpmap,eb.normalmap,eb.displacementmap,eb.fog,{matcap:{value:null}}]),vertexShader:Vb.meshmatcap_vert,fragmentShader:Vb.meshmatcap_frag},points:{uniforms:Oa([eb.points,eb.fog]),vertexShader:Vb.points_vert,fragmentShader:Vb.points_frag},dashed:{uniforms:Oa([eb.common,eb.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vb.linedashed_vert,fragmentShader:Vb.linedashed_frag},depth:{uniforms:Oa([eb.common,eb.displacementmap]),vertexShader:Vb.depth_vert,fragmentShader:Vb.depth_frag},
normal:{uniforms:Oa([eb.common,eb.bumpmap,eb.normalmap,eb.displacementmap,{opacity:{value:1}}]),vertexShader:Vb.meshnormal_vert,fragmentShader:Vb.meshnormal_frag},sprite:{uniforms:Oa([eb.sprite,eb.fog]),vertexShader:Vb.sprite_vert,fragmentShader:Vb.sprite_frag},background:{uniforms:{uvTransform:{value:new Ub},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vb.background_vert,fragmentShader:Vb.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},
backgroundIntensity:{value:1},backgroundRotation:{value:new Ub}},vertexShader:Vb.backgroundCube_vert,fragmentShader:Vb.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vb.cube_vert,fragmentShader:Vb.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vb.equirect_vert,fragmentShader:Vb.equirect_frag},distanceRGBA:{uniforms:Oa([eb.common,eb.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1E3}}]),
vertexShader:Vb.distanceRGBA_vert,fragmentShader:Vb.distanceRGBA_frag},shadow:{uniforms:Oa([eb.lights,eb.fog,{color:{value:new nb(0)},opacity:{value:1}}]),vertexShader:Vb.shadow_vert,fragmentShader:Vb.shadow_frag}};Ce.physical={uniforms:Oa([Ce.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ub},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ub},clearcoatNormalScale:{value:new Fa(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},
clearcoatRoughnessMapTransform:{value:new Ub},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ub},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ub},sheen:{value:0},sheenColor:{value:new nb(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ub},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ub},
transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ub},transmissionSamplerSize:{value:new Fa},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ub},attenuationDistance:{value:0},attenuationColor:{value:new nb(0)},specularColor:{value:new nb(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ub},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ub},
anisotropyVector:{value:new Fa},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ub}}]),vertexShader:Vb.meshphysical_vert,fragmentShader:Vb.meshphysical_frag};const dh={r:0,b:0,g:0},oe=new he,Dl=new Mb;class ni extends rf{constructor(a=-1,b=1,c=1,e=-1,g=.1,h=2E3){super();this.isOrthographicCamera=!0;this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=e;this.near=g;this.far=h;this.updateProjectionMatrix()}copy(a,b){super.copy(a,b);this.left=
a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this}setViewOffset(a,b,c,e,g,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=e;this.view.width=g;this.view.height=h;this.updateProjectionMatrix()}clearViewOffset(){null!==
this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,e=(this.top+this.bottom)/2;let g=c-a;c+=a;a=e+b;b=e-b;null!==this.view&&this.view.enabled&&(e=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom,g+=e*this.view.offsetX,c=g+e*this.view.width,a-=b*this.view.offsetY,b=a-b*this.view.height);this.projectionMatrix.makeOrthographic(g,
c,a,b,this.near,this.far,this.coordinateSystem);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}}const oi=[.125,.215,.35,.446,.526,.582],uh=new ni,el=new nb;let pi=null,fl=0,qi=0;const Te=(1+Math.sqrt(5))/2,Zf=1/Te,
ri=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,Te,Zf),new O(0,Te,-Zf),new O(Zf,0,Te),new O(-Zf,0,Te),new O(Te,Zf,0),new O(-Te,Zf,0)];class bj{constructor(a){this._renderer=a;this._pingPongRenderTarget=null;this._cubeSize=this._lodMax=0;this._lodPlanes=[];this._sizeLods=[];this._sigmas=[];this._equirectMaterial=this._cubemapMaterial=this._blurMaterial=null;this._compileMaterial(this._blurMaterial)}fromScene(a,b=0,c=.1,e=100){pi=this._renderer.getRenderTarget();fl=this._renderer.getActiveCubeFace();
qi=this._renderer.getActiveMipmapLevel();this._setSize(256);const g=this._allocateTargets();g.depthBuffer=!0;this._sceneToCubeUV(a,c,e,g);0<b&&this._blur(g,0,0,b);this._applyPMREM(g);this._cleanup(g);return g}fromEquirectangular(a,b=null){return this._fromTexture(a,b)}fromCubemap(a,b=null){return this._fromTexture(a,b)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=La(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&
(this._equirectMaterial=pa(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose();null!==this._cubemapMaterial&&this._cubemapMaterial.dispose();null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a));this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose();null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(pi,
fl,qi);a.scissorTest=!1;Q(a,0,0,a.width,a.height)}_fromTexture(a,b){301===a.mapping||302===a.mapping?this._setSize(0===a.image.length?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4);pi=this._renderer.getRenderTarget();fl=this._renderer.getActiveCubeFace();qi=this._renderer.getActiveMipmapLevel();b=b||this._allocateTargets();this._textureToCubeUV(a,b);this._applyPMREM(b);this._cleanup(b);return b}_allocateTargets(){const a=3*Math.max(this._cubeSize,112),b=4*this._cubeSize;
var c={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1};const e=Zb(a,b,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a||this._pingPongRenderTarget.height!==b){null!==this._pingPongRenderTarget&&this._dispose();this._pingPongRenderTarget=Zb(a,b,c);({_lodMax:c}=this);var g=[],h=[];const q=[];let u=c;const t=c-4+1+oi.length;for(let w=0;w<t;w++){var l=Math.pow(2,u);h.push(l);var n=1/l;w>c-4?n=oi[w-c+4-1]:0===
w&&(n=0);q.push(n);n=1/(l-2);l=-n;n=1+n;var m=[l,l,n,l,n,n,l,l,n,n,l,n];l=new Float32Array(108);n=new Float32Array(72);const B=new Float32Array(36);for(let z=0;6>z;z++){const D=z%3*2/3-1,J=2<z?0:-1;l.set([D,J,0,D+2/3,J,0,D+2/3,J+1,0,D,J,0,D+2/3,J+1,0,D,J+1,0],18*z);n.set(m,12*z);B.set([z,z,z,z,z,z],6*z)}m=new Kb;m.setAttribute("position",new pc(l,3));m.setAttribute("uv",new pc(n,2));m.setAttribute("faceIndex",new pc(B,1));g.push(m);4<u&&u--}({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=
{lodPlanes:g,sizeLods:h,sigmas:q});g=new Float32Array(20);h=new O(0,1,0);this._blurMaterial=new Be({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/b,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:g},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:h}},vertexShader:ob(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include \x3ccube_uv_reflection_fragment\x3e\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta \x3d cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection \x3d vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis \x3d latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis \x3d vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis \x3d normalize( axis );\n\n\t\t\t\tgl_FragColor \x3d vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb +\x3d weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i \x3d 1; i \x3c n; i++ ) {\n\n\t\t\t\t\tif ( i \x3e\x3d samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta \x3d dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb +\x3d weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}return e}_compileMaterial(a){a=new Uc(this._lodPlanes[0],a);this._renderer.compile(a,uh)}_sceneToCubeUV(a,b,c,e){b=new id(90,1,b,c);c=[1,-1,1,1,1,1];const g=[1,1,1,-1,-1,-1],h=this._renderer,l=h.autoClear,n=h.toneMapping;h.getClearColor(el);h.toneMapping=0;h.autoClear=!1;var m=new ie({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1});const q=new Uc(new ug,m);let u=!1;const t=a.background;t?t.isColor&&(m.color.copy(t),a.background=null,u=!0):(m.color.copy(el),
u=!0);for(m=0;6>m;m++){const w=m%3;0===w?(b.up.set(0,c[m],0),b.lookAt(g[m],0,0)):1===w?(b.up.set(0,0,c[m]),b.lookAt(0,g[m],0)):(b.up.set(0,c[m],0),b.lookAt(0,0,g[m]));const B=this._cubeSize;Q(e,w*B,2<m?B:0,B,B);h.setRenderTarget(e);u&&h.render(q,b);h.render(a,b)}q.geometry.dispose();q.material.dispose();h.toneMapping=n;h.autoClear=l;a.background=t}_textureToCubeUV(a,b){const c=this._renderer;var e=301===a.mapping||302===a.mapping;e?(null===this._cubemapMaterial&&(this._cubemapMaterial=La()),this._cubemapMaterial.uniforms.flipEnvMap.value=
!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pa());const g=e?this._cubemapMaterial:this._equirectMaterial;e=new Uc(this._lodPlanes[0],g);g.uniforms.envMap.value=a;a=this._cubeSize;Q(b,0,0,3*a,2*a);c.setRenderTarget(b);c.render(e,uh)}_applyPMREM(a){const b=this._renderer,c=b.autoClear;b.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++)this._blur(a,e-1,e,Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),ri[(e-1)%ri.length]);
b.autoClear=c}_blur(a,b,c,e,g){const h=this._pingPongRenderTarget;this._halfBlur(a,h,b,c,e,"latitudinal",g);this._halfBlur(h,a,c,c,e,"longitudinal",g)}_halfBlur(a,b,c,e,g,h,l){const n=this._renderer;var m=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const q=new Uc(this._lodPlanes[e],m);m=m.uniforms;var u=this._sizeLods[c]-1;u=isFinite(g)?Math.PI/(2*u):2*Math.PI/39;var t=g/u;const w=isFinite(g)?1+Math.floor(3*
t):20;20<w&&console.warn(`sigmaRadians, ${g}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${20}`);g=[];let B=0;for(let D=0;20>D;++D){var z=D/t;z=Math.exp(-z*z/2);g.push(z);0===D?B+=z:D<w&&(B+=2*z)}for(t=0;t<g.length;t++)g[t]/=B;m.envMap.value=a.texture;m.samples.value=w;m.weights.value=g;m.latitudinal.value="latitudinal"===h;l&&(m.poleAxis.value=l);({_lodMax:a}=this);m.dTheta.value=u;m.mipInt.value=a-c;c=this._sizeLods[e];Q(b,3*c*(e>a-4?e-a+4:0),4*(this._cubeSize-
c),3*c,2*c);n.setRenderTarget(b);n.render(q,uh)}}class gl extends Pc{constructor(a,b,c,e,g,h,l,n,m,q){q=void 0!==q?q:1026;if(1026!==q&&1027!==q)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===q&&(c=1014);void 0===c&&1027===q&&(c=1020);super(null,e,g,h,l,n,q,c,m);this.isDepthTexture=!0;this.image={width:a,height:b};this.magFilter=void 0!==l?l:1003;this.minFilter=void 0!==n?n:1003;this.generateMipmaps=this.flipY=!1;this.compareFunction=
null}copy(a){super.copy(a);this.compareFunction=a.compareFunction;return this}toJSON(a){a=super.toJSON(a);null!==this.compareFunction&&(a.compareFunction=this.compareFunction);return a}}const Ph=new Pc,wk=new gl(1,1);wk.compareFunction=515;const Sd=new Oh,xk=new nf,eh=new mi,Oe=[],dj=[],El=new Float32Array(16),vk=new Float32Array(9),uk=new Float32Array(4);class ud{constructor(a,b,c){this.id=a;this.addr=c;this.cache=[];this.type=b.type;this.setValue=ej(b.type)}}class hl{constructor(a,b,c){this.id=
a;this.addr=c;this.cache=[];this.type=b.type;this.size=b.size;this.setValue=cn(b.type)}}class tf{constructor(a){this.id=a;this.seq=[];this.map={}}setValue(a,b,c){const e=this.seq;for(let g=0,h=e.length;g!==h;++g){const l=e[g];l.setValue(a,b[l.id],c)}}}const vh=/(\w+)(\])?(\[|\.)?/g;class ef{constructor(a,b){this.seq=[];this.map={};const c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(let q=0;q<c;++q){var e=a.getActiveUniform(b,q),g=a.getUniformLocation(b,e.name),h=this,l=e.name;const u=l.length;
for(vh.lastIndex=0;;){const t=vh.exec(l),w=vh.lastIndex;var n=t[1],m=t[3];"]"===t[2]&&(n|=0);if(void 0===m||"["===m&&w+2===u){l=h;e=void 0===m?new ud(n,e,g):new hl(n,e,g);l.seq.push(e);l.map[e.id]=e;break}else m=h.map[n],void 0===m&&(m=new tf(n),n=h,h=m,n.seq.push(h),n.map[h.id]=h),h=m}}}setValue(a,b,c,e){b=this.map[b];void 0!==b&&b.setValue(a,c,e)}setOptional(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)}static upload(a,b,c,e){for(let g=0,h=b.length;g!==h;++g){const l=b[g],n=c[l.id];!1!==n.needsUpdate&&
l.setValue(a,n.value,e)}}static seqWithValue(a,b){const c=[];for(let e=0,g=a.length;e!==g;++e){const h=a[e];h.id in b&&c.push(h)}return c}}let gh=0;const Uh=/^[ \t]*#include +<([\w\d./]+)>/gm,Dk=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]),Fk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;let qm=0;class Gk{constructor(){this.shaderCache=
new Map;this.materialCache=new Map}update(a){var b=a.fragmentShader;const c=this._getShaderStage(a.vertexShader);b=this._getShaderStage(b);a=this._getShaderCacheForMaterial(a);!1===a.has(c)&&(a.add(c),c.usedTimes++);!1===a.has(b)&&(a.add(b),b.usedTimes++);return this}remove(a){const b=this.materialCache.get(a);for(const c of b)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c.code);this.materialCache.delete(a);return this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear();
this.materialCache.clear()}_getShaderCacheForMaterial(a){const b=this.materialCache;let c=b.get(a);void 0===c&&(c=new Set,b.set(a,c));return c}_getShaderStage(a){const b=this.shaderCache;let c=b.get(a);void 0===c&&(c=new il(a),b.set(a,c));return c}}class il{constructor(a){this.id=qm++;this.code=a;this.usedTimes=0}}let Kk=0;class Xh extends Dd{constructor(a){super();this.isMeshDepthMaterial=!0;this.type="MeshDepthMaterial";this.depthPacking=3200;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=
1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)}copy(a){super.copy(a);this.depthPacking=a.depthPacking;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this}}class Pe extends Dd{constructor(a){super();this.isMeshDistanceMaterial=!0;this.type="MeshDistanceMaterial";this.displacementMap=
this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.setValues(a)}copy(a){super.copy(a);this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this}}class jl extends id{constructor(a=[]){super();this.isArrayCamera=!0;this.cameras=a}}class Gg extends ec{constructor(){super();this.isGroup=!0;this.type="Group"}}const Kc={type:"move"};class si{constructor(){this._hand=
this._grip=this._targetRay=null}getHandSpace(){null===this._hand&&(this._hand=new Gg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1});return this._hand}getTargetRaySpace(){null===this._targetRay&&(this._targetRay=new Gg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O);return this._targetRay}getGripSpace(){null===
this._grip&&(this._grip=new Gg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O);return this._grip}dispatchEvent(a){null!==this._targetRay&&this._targetRay.dispatchEvent(a);null!==this._grip&&this._grip.dispatchEvent(a);null!==this._hand&&this._hand.dispatchEvent(a);return this}connect(a){if(a&&a.hand){const b=this._hand;if(b)for(const c of a.hand.values())this._getHandJoint(b,
c)}this.dispatchEvent({type:"connected",data:a});return this}disconnect(a){this.dispatchEvent({type:"disconnected",data:a});null!==this._targetRay&&(this._targetRay.visible=!1);null!==this._grip&&(this._grip.visible=!1);null!==this._hand&&(this._hand.visible=!1);return this}update(a,b,c){let e=null,g=null,h=null;const l=this._targetRay,n=this._grip,m=this._hand;if(a&&"visible-blurred"!==b.session.visibilityState){if(m&&a.hand){h=!0;for(var q of a.hand.values()){const u=b.getJointPose(q,c),t=this._getHandJoint(m,
q);null!==u&&(t.matrix.fromArray(u.transform.matrix),t.matrix.decompose(t.position,t.rotation,t.scale),t.matrixWorldNeedsUpdate=!0,t.jointRadius=u.radius);t.visible=null!==u}q=m.joints["index-finger-tip"].position.distanceTo(m.joints["thumb-tip"].position);m.inputState.pinching&&.025<q?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!m.inputState.pinching&&.015>=q&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,
target:this}))}else null!==n&&a.gripSpace&&(g=b.getPose(a.gripSpace,c),null!==g&&(n.matrix.fromArray(g.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,g.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(g.linearVelocity)):n.hasLinearVelocity=!1,g.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(g.angularVelocity)):n.hasAngularVelocity=!1));null!==l&&(e=b.getPose(a.targetRaySpace,c),null===e&&null!==g&&(e=g),null!==e&&(l.matrix.fromArray(e.transform.matrix),
l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,e.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(e.linearVelocity)):l.hasLinearVelocity=!1,e.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(e.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Kc)))}null!==l&&(l.visible=null!==e);null!==n&&(n.visible=null!==g);null!==m&&(m.visible=null!==h);return this}_getHandJoint(a,b){if(void 0===a.joints[b.jointName]){const c=new Gg;c.matrixAutoUpdate=
!1;c.visible=!1;a.joints[b.jointName]=c;a.add(c)}return a.joints[b.jointName]}}class kl{constructor(){this.mesh=this.texture=null;this.depthFar=this.depthNear=0}init(a,b,c){if(null===this.texture){const e=new Pc;a.properties.get(e).__webglTexture=b.texture;if(b.depthNear!=c.depthNear||b.depthFar!=c.depthFar)this.depthNear=b.depthNear,this.depthFar=b.depthFar;this.texture=e}}render(a,b){if(null!==this.texture){if(null===this.mesh){var c=b.cameras[0].viewport;c=new Be({extensions:{fragDepth:!0},vertexShader:"\nvoid main() {\n\n\tgl_Position \x3d vec4( position, 1.0 );\n\n}",
fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord \x3d vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x \x3e\x3d 1.0 ) {\n\n\t\tgl_FragDepthEXT \x3d texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT \x3d texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:c.z},
depthHeight:{value:c.w}}});this.mesh=new Uc(new Lf(20,20),c)}a.render(this.mesh,b)}}reset(){this.mesh=this.texture=null}}class ti extends Jd{constructor(a,b){function c(Ra){var $a=ka.indexOf(Ra.inputSource);-1!==$a&&($a=ja[$a],void 0!==$a&&($a.update(Ra.inputSource,Ra.frame,w||q),$a.dispatchEvent({type:Ra.type,data:Ra.inputSource})))}function e(){n.removeEventListener("select",c);n.removeEventListener("selectstart",c);n.removeEventListener("selectend",c);n.removeEventListener("squeeze",c);n.removeEventListener("squeezestart",
c);n.removeEventListener("squeezeend",c);n.removeEventListener("end",e);n.removeEventListener("inputsourceschange",g);for(let Ra=0;Ra<ja.length;Ra++){const $a=ka[Ra];null!==$a&&(ka[Ra]=null,ja[Ra].disconnect($a))}Ja=Xa=null;K.reset();a.setRenderTarget(R);U=n=z=D=J=null;Ya.stop();l.isPresenting=!1;a.setPixelRatio(xa);a.setSize(ea.width,ea.height,!1);l.dispatchEvent({type:"sessionend"})}function g(Ra){for(var $a=0;$a<Ra.removed.length;$a++){var vb=Ra.removed[$a],G=ka.indexOf(vb);0<=G&&(ka[G]=null,ja[G].disconnect(vb))}for($a=
0;$a<Ra.added.length;$a++){vb=Ra.added[$a];G=ka.indexOf(vb);if(-1===G){for(let H=0;H<ja.length;H++)if(H>=ka.length){ka.push(vb);G=H;break}else if(null===ka[H]){ka[H]=vb;G=H;break}if(-1===G)break}(G=ja[G])&&G.connect(vb)}}function h(Ra,$a){null===$a?Ra.matrixWorld.copy(Ra.matrix):Ra.matrixWorld.multiplyMatrices($a.matrixWorld,Ra.matrix);Ra.matrixWorldInverse.copy(Ra.matrixWorld).invert()}super();const l=this;let n=null,m=1,q=null,u="local-floor",t=1,w=null,B=null,z=null,D=null,J=null,A=null;const K=
new kl,oa=b.getContextAttributes();let R=null,U=null;const ja=[],ka=[],ea=new Fa;let xa=null;const ta=new id;ta.layers.enable(1);ta.viewport=new mc;const Da=new id;Da.layers.enable(2);Da.viewport=new mc;const Va=[ta,Da],ra=new jl;ra.layers.enable(1);ra.layers.enable(2);let Xa=null,Ja=null;this.cameraAutoUpdate=!0;this.isPresenting=this.enabled=!1;this.getController=function(Ra){let $a=ja[Ra];void 0===$a&&($a=new si,ja[Ra]=$a);return $a.getTargetRaySpace()};this.getControllerGrip=function(Ra){let $a=
ja[Ra];void 0===$a&&($a=new si,ja[Ra]=$a);return $a.getGripSpace()};this.getHand=function(Ra){let $a=ja[Ra];void 0===$a&&($a=new si,ja[Ra]=$a);return $a.getHandSpace()};this.setFramebufferScaleFactor=function(Ra){m=Ra;!0===l.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};this.setReferenceSpaceType=function(Ra){u=Ra;!0===l.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=
function(){return w||q};this.setReferenceSpace=function(Ra){w=Ra};this.getBaseLayer=function(){return null!==D?D:J};this.getBinding=function(){return z};this.getFrame=function(){return A};this.getSession=function(){return n};this.setSession=async function(Ra){n=Ra;if(null!==n){R=a.getRenderTarget();n.addEventListener("select",c);n.addEventListener("selectstart",c);n.addEventListener("selectend",c);n.addEventListener("squeeze",c);n.addEventListener("squeezestart",c);n.addEventListener("squeezeend",
c);n.addEventListener("end",e);n.addEventListener("inputsourceschange",g);!0!==oa.xrCompatible&&await b.makeXRCompatible();xa=a.getPixelRatio();a.getSize(ea);if(void 0===n.renderState.layers||!1===a.capabilities.isWebGL2)J=new XRWebGLLayer(n,b,{antialias:void 0===n.renderState.layers?oa.antialias:!0,alpha:!0,depth:oa.depth,stencil:oa.stencil,framebufferScaleFactor:m}),n.updateRenderState({baseLayer:J}),a.setPixelRatio(1),a.setSize(J.framebufferWidth,J.framebufferHeight,!1),U=new Rd(J.framebufferWidth,
J.framebufferHeight,{format:1023,type:1009,colorSpace:a.outputColorSpace,stencilBuffer:oa.stencil});else{let vb=Ra=null;var $a=null;oa.depth&&($a=oa.stencil?b.DEPTH24_STENCIL8:b.DEPTH_COMPONENT24,Ra=oa.stencil?1027:1026,vb=oa.stencil?1020:1014);$a={colorFormat:b.RGBA8,depthFormat:$a,scaleFactor:m};z=new XRWebGLBinding(n,b);D=z.createProjectionLayer($a);n.updateRenderState({layers:[D]});a.setPixelRatio(1);a.setSize(D.textureWidth,D.textureHeight,!1);U=new Rd(D.textureWidth,D.textureHeight,{format:1023,
type:1009,depthTexture:new gl(D.textureWidth,D.textureHeight,vb,void 0,void 0,void 0,void 0,void 0,void 0,Ra),stencilBuffer:oa.stencil,colorSpace:a.outputColorSpace,samples:oa.antialias?4:0});a.properties.get(U).__ignoreDepthValues=D.ignoreDepthValues}U.isXRRenderTarget=!0;this.setFoveation(t);w=null;q=await n.requestReferenceSpace(u);Ya.setContext(n);Ya.start();l.isPresenting=!0;l.dispatchEvent({type:"sessionstart"})}};this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode};
const ib=new O,Cb=new O;this.updateCamera=function(Ra){if(null!==n){null!==K.texture&&(Ra.near=K.depthNear,Ra.far=K.depthFar);ra.near=Da.near=ta.near=Ra.near;ra.far=Da.far=ta.far=Ra.far;if(Xa!==ra.near||Ja!==ra.far)n.updateRenderState({depthNear:ra.near,depthFar:ra.far}),Xa=ra.near,Ja=ra.far,ta.near=Xa,ta.far=Ja,Da.near=Xa,Da.far=Ja,ta.updateProjectionMatrix(),Da.updateProjectionMatrix(),Ra.updateProjectionMatrix();var $a=Ra.parent,vb=ra.cameras;h(ra,$a);for(var G=0;G<vb.length;G++)h(vb[G],$a);if(2===
vb.length){ib.setFromMatrixPosition(ta.matrixWorld);Cb.setFromMatrixPosition(Da.matrixWorld);vb=ib.distanceTo(Cb);var H=ta.projectionMatrix.elements,M=Da.projectionMatrix.elements,Z=H[14]/(H[10]-1);G=H[14]/(H[10]+1);const fb=(H[9]+1)/H[5],Wa=(H[9]-1)/H[5];var V=(H[8]-1)/H[0],Ga=(M[8]+1)/M[0];M=Z*V;H=Z*Ga;Ga=vb/(-V+Ga);V=Ga*-V;ta.matrixWorld.decompose(ra.position,ra.quaternion,ra.scale);ra.translateX(V);ra.translateZ(Ga);ra.matrixWorld.compose(ra.position,ra.quaternion,ra.scale);ra.matrixWorldInverse.copy(ra.matrixWorld).invert();
Z+=Ga;Ga=G+Ga;ra.projectionMatrix.makePerspective(M-V,H+(vb-V),fb*G/Ga*Z,Wa*G/Ga*Z,Z,Ga);ra.projectionMatrixInverse.copy(ra.projectionMatrix).invert()}else ra.projectionMatrix.copy(ta.projectionMatrix);null===$a?Ra.matrix.copy(ra.matrixWorld):(Ra.matrix.copy($a.matrixWorld),Ra.matrix.invert(),Ra.matrix.multiply(ra.matrixWorld));Ra.matrix.decompose(Ra.position,Ra.quaternion,Ra.scale);Ra.updateMatrixWorld(!0);Ra.projectionMatrix.copy(ra.projectionMatrix);Ra.projectionMatrixInverse.copy(ra.projectionMatrixInverse);
Ra.isPerspectiveCamera&&(Ra.fov=2*Tf*Math.atan(1/Ra.projectionMatrix.elements[5]),Ra.zoom=1)}};this.getCamera=function(){return ra};this.getFoveation=function(){if(null!==D||null!==J)return t};this.setFoveation=function(Ra){t=Ra;null!==D&&(D.fixedFoveation=Ra);null!==J&&void 0!==J.fixedFoveation&&(J.fixedFoveation=Ra)};this.hasDepthSensing=function(){return null!==K.texture};let xb=null;const Ya=new bb;Ya.setAnimationLoop(function(Ra,$a){B=$a.getViewerPose(w||q);A=$a;if(null!==B){var vb=B.views;null!==
J&&(a.setRenderTargetFramebuffer(U,J.framebuffer),a.setRenderTarget(U));var G=!1;vb.length!==ra.cameras.length&&(ra.cameras.length=0,G=!0);for(var H=0;H<vb.length;H++){const Z=vb[H];let V;if(null!==J)V=J.getViewport(Z);else{var M=z.getViewSubImage(D,Z);V=M.viewport;0===H&&(a.setRenderTargetTextures(U,M.colorTexture,D.ignoreDepthValues?void 0:M.depthStencilTexture),a.setRenderTarget(U))}M=Va[H];void 0===M&&(M=new id,M.layers.enable(H),M.viewport=new mc,Va[H]=M);M.matrix.fromArray(Z.transform.matrix);
M.matrix.decompose(M.position,M.quaternion,M.scale);M.projectionMatrix.fromArray(Z.projectionMatrix);M.projectionMatrixInverse.copy(M.projectionMatrix).invert();M.viewport.set(V.x,V.y,V.width,V.height);0===H&&(ra.matrix.copy(M.matrix),ra.matrix.decompose(ra.position,ra.quaternion,ra.scale));!0===G&&ra.cameras.push(M)}(G=n.enabledFeatures)&&G.includes("depth-sensing")&&(vb=z.getDepthInformation(vb[0]))&&vb.isValid&&vb.texture&&K.init(a,vb,n.renderState)}for(vb=0;vb<ja.length;vb++)G=ka[vb],H=ja[vb],
null!==G&&void 0!==H&&H.update(G,$a,w||q);K.render(a,ra);xb&&xb(Ra,$a);$a.detectedPlanes&&l.dispatchEvent({type:"planesdetected",data:$a});A=null});this.setAnimationLoop=function(Ra){xb=Ra};this.dispose=function(){}}}const Hd=new he,Ul=new Mb;class wh{constructor(a={}){function b(I,fa){for(let Aa=0;Aa<I.length;Aa++){const Ca=K.getContext(I[Aa],fa);if(null!==Ca)return Ca}return null}function c(){Vc=new Fb(Ba);yc=new kb(Ba,Vc,a);Vc.init(yc);$f=new ih(Ba,Vc,yc);nc=new Bc(Ba,Vc,yc);De=new tb(Ba);oc=new Ol;
Ac=new Lk(Ba,Vc,nc,oc,yc,$f,De);Hj=new wb(Ya);Ij=new lb(Ya);ll=new mb(Ba,yc);ui=new Ia(Ba,Vc,ll,yc);on=new Ib(Ba,ll,De,ui);Jj=new cd(Ba,on,ll,De);En=new md(Ba,yc,Ac);ag=new Tb(oc);Hg=new Vh(Ya,Hj,Ij,Vc,yc,ui,ag);pn=new Tl(Ya,oc);rm=new Jk;sm=new Rl(Vc,yc);bg=new Ua(Ya,Hj,Ij,nc,Jj,Va,ea);uf=new Sl(Ya,Jj,yc);tm=new Mk(Ba,De,yc,nc);Fn=new Ma(Ba,Vc,De,yc);Gn=new Ob(Ba,Vc,De,yc);De.programs=Hg.programs;Ya.capabilities=yc;Ya.extensions=Vc;Ya.properties=oc;Ya.renderLists=rm;Ya.shadowMap=uf;Ya.state=nc;Ya.info=
De}function e(I){I.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");Ra=!0}function g(){console.log("THREE.WebGLRenderer: Context Restored.");Ra=!1;const I=De.autoReset,fa=uf.enabled,Aa=uf.autoUpdate,Ca=uf.needsUpdate,ma=uf.type;c();De.autoReset=I;uf.enabled=fa;uf.autoUpdate=Aa;uf.needsUpdate=Ca;uf.type=ma}function h(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function l(I){I=I.target;I.removeEventListener("dispose",l);n(I);
oc.remove(I)}function n(I){const fa=oc.get(I).programs;void 0!==fa&&(fa.forEach(function(Aa){Hg.releaseProgram(Aa)}),I.isShaderMaterial&&Hg.releaseShaderCache(I))}function m(I,fa,Aa){!0===I.transparent&&2===I.side&&!1===I.forceSinglePass?(I.side=1,I.needsUpdate=!0,D(I,fa,Aa),I.side=0,I.needsUpdate=!0,D(I,fa,Aa),I.side=2):D(I,fa,Aa)}function q(){vi.stop()}function u(){vi.start()}function t(I,fa,Aa,Ca){if(!1!==I.visible){if(I.layers.test(fa.layers))if(I.isGroup)Aa=I.renderOrder;else if(I.isLOD)!0===
I.autoUpdate&&I.update(fa);else if(I.isLight)ib.pushLight(I),I.castShadow&&ib.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||tc.intersectsSprite(I)){Ca&&ff.setFromMatrixPosition(I.matrixWorld).applyMatrix4(be);var ma=Jj.update(I),zb=I.material;zb.visible&&Ja.push(I,ma,zb,Aa,ff.z,null)}}else if(I.isMesh||I.isLine||I.isPoints)if(!I.frustumCulled||tc.intersectsObject(I))if(ma=Jj.update(I),zb=I.material,Ca&&(void 0!==I.boundingSphere?(null===I.boundingSphere&&I.computeBoundingSphere(),ff.copy(I.boundingSphere.center)):
(null===ma.boundingSphere&&ma.computeBoundingSphere(),ff.copy(ma.boundingSphere.center)),ff.applyMatrix4(I.matrixWorld).applyMatrix4(be)),Array.isArray(zb)){const Hb=ma.groups;for(let yb=0,jc=Hb.length;yb<jc;yb++){const Cc=Hb[yb],dc=zb[Cc.materialIndex];dc&&dc.visible&&Ja.push(I,ma,dc,Aa,ff.z,Cc)}}else zb.visible&&Ja.push(I,ma,zb,Aa,ff.z,null);I=I.children;for(let Hb=0,yb=I.length;Hb<yb;Hb++)t(I[Hb],fa,Aa,Ca)}}function w(I,fa,Aa,Ca){const ma=I.opaque,zb=I.transmissive;I=I.transparent;ib.setupLightsView(Aa);
!0===Ad&&ag.setGlobalState(Ya.clippingPlanes,Aa);if(0<zb.length&&null===(!0===fa.isScene?fa.overrideMaterial:null)){var Hb=yc.isWebGL2;null===Nc&&(Nc=new Rd(1,1,{generateMipmaps:!0,type:Vc.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:Hb?4:0}));Ya.getDrawingBufferSize(hh);Hb?Nc.setSize(hh.x,hh.y):Nc.setSize(xc(hh.x),xc(hh.y));Hb=Ya.getRenderTarget();Ya.setRenderTarget(Nc);Ya.getClearColor(fb);Wa=Ya.getClearAlpha();1>Wa&&Ya.setClearColor(16777215,.5);Ya.clear();var yb=Ya.toneMapping;
Ya.toneMapping=0;B(ma,fa,Aa);Ac.updateMultisampleRenderTarget(Nc);Ac.updateRenderTargetMipmap(Nc);var jc=!1;for(let dc=0,Ld=zb.length;dc<Ld;dc++){var Cc=zb[dc];const cg=Cc.object,vf=Cc.geometry,wf=Cc.material;Cc=Cc.group;2===wf.side&&cg.layers.test(Aa.layers)&&(jc=wf.side,wf.side=1,wf.needsUpdate=!0,z(cg,fa,Aa,vf,wf,Cc),wf.side=jc,jc=wf.needsUpdate=!0)}!0===jc&&(Ac.updateMultisampleRenderTarget(Nc),Ac.updateRenderTargetMipmap(Nc));Ya.setRenderTarget(Hb);Ya.setClearColor(fb,Wa);Ya.toneMapping=yb}Ca&&
nc.viewport(Z.copy(Ca));0<ma.length&&B(ma,fa,Aa);0<zb.length&&B(zb,fa,Aa);0<I.length&&B(I,fa,Aa);nc.buffers.depth.setTest(!0);nc.buffers.depth.setMask(!0);nc.buffers.color.setMask(!0);nc.setPolygonOffset(!1)}function B(I,fa,Aa){const Ca=!0===fa.isScene?fa.overrideMaterial:null;for(let zb=0,Hb=I.length;zb<Hb;zb++){var ma=I[zb];const yb=ma.object,jc=ma.geometry,Cc=null===Ca?ma.material:Ca;ma=ma.group;yb.layers.test(Aa.layers)&&z(yb,fa,Aa,jc,Cc,ma)}}function z(I,fa,Aa,Ca,ma,zb){I.onBeforeRender(Ya,fa,
Aa,Ca,ma,zb);I.modelViewMatrix.multiplyMatrices(Aa.matrixWorldInverse,I.matrixWorld);I.normalMatrix.getNormalMatrix(I.modelViewMatrix);ma.onBeforeRender(Ya,fa,Aa,Ca,I,zb);!0===ma.transparent&&2===ma.side&&!1===ma.forceSinglePass?(ma.side=1,ma.needsUpdate=!0,Ya.renderBufferDirect(Aa,fa,Ca,ma,I,zb),ma.side=0,ma.needsUpdate=!0,Ya.renderBufferDirect(Aa,fa,Ca,ma,I,zb),ma.side=2):Ya.renderBufferDirect(Aa,fa,Ca,ma,I,zb);I.onAfterRender(Ya,fa,Aa,Ca,ma,zb)}function D(I,fa,Aa){!0!==fa.isScene&&(fa=kj);const Ca=
oc.get(I),ma=ib.state.lights,zb=ma.state.version,Hb=Hg.getParameters(I,ma.state,ib.state.shadowsArray,fa,Aa),yb=Hg.getProgramCacheKey(Hb);let jc=Ca.programs;Ca.environment=I.isMeshStandardMaterial?fa.environment:null;Ca.fog=fa.fog;Ca.envMap=(I.isMeshStandardMaterial?Ij:Hj).get(I.envMap||Ca.environment);Ca.envMapRotation=null!==Ca.environment&&null===I.envMap?fa.environmentRotation:I.envMapRotation;void 0===jc&&(I.addEventListener("dispose",l),jc=new Map,Ca.programs=jc);fa=jc.get(yb);if(void 0!==fa){if(Ca.currentProgram===
fa&&Ca.lightsStateVersion===zb)return A(I,Hb),fa}else Hb.uniforms=Hg.getUniforms(I),I.onBuild(Aa,Hb,Ya),I.onBeforeCompile(Hb,Ya),fa=Hg.acquireProgram(Hb,yb),jc.set(yb,fa),Ca.uniforms=Hb.uniforms;Aa=Ca.uniforms;if(!I.isShaderMaterial&&!I.isRawShaderMaterial||!0===I.clipping)Aa.clippingPlanes=ag.uniform;A(I,Hb);Ca.needsLights=I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&!0===I.lights;Ca.lightsStateVersion=zb;
Ca.needsLights&&(Aa.ambientLightColor.value=ma.state.ambient,Aa.lightProbe.value=ma.state.probe,Aa.directionalLights.value=ma.state.directional,Aa.directionalLightShadows.value=ma.state.directionalShadow,Aa.spotLights.value=ma.state.spot,Aa.spotLightShadows.value=ma.state.spotShadow,Aa.rectAreaLights.value=ma.state.rectArea,Aa.ltc_1.value=ma.state.rectAreaLTC1,Aa.ltc_2.value=ma.state.rectAreaLTC2,Aa.pointLights.value=ma.state.point,Aa.pointLightShadows.value=ma.state.pointShadow,Aa.hemisphereLights.value=
ma.state.hemi,Aa.directionalShadowMap.value=ma.state.directionalShadowMap,Aa.directionalShadowMatrix.value=ma.state.directionalShadowMatrix,Aa.spotShadowMap.value=ma.state.spotShadowMap,Aa.spotLightMatrix.value=ma.state.spotLightMatrix,Aa.spotLightMap.value=ma.state.spotLightMap,Aa.pointShadowMap.value=ma.state.pointShadowMap,Aa.pointShadowMatrix.value=ma.state.pointShadowMatrix);Ca.currentProgram=fa;Ca.uniformsList=null;return fa}function J(I){if(null===I.uniformsList){const fa=I.currentProgram.getUniforms();
I.uniformsList=ef.seqWithValue(fa.seq,I.uniforms)}return I.uniformsList}function A(I,fa){I=oc.get(I);I.outputColorSpace=fa.outputColorSpace;I.batching=fa.batching;I.instancing=fa.instancing;I.instancingColor=fa.instancingColor;I.instancingMorph=fa.instancingMorph;I.skinning=fa.skinning;I.morphTargets=fa.morphTargets;I.morphNormals=fa.morphNormals;I.morphColors=fa.morphColors;I.morphTargetsCount=fa.morphTargetsCount;I.numClippingPlanes=fa.numClippingPlanes;I.numIntersection=fa.numClipIntersection;
I.vertexAlphas=fa.vertexAlphas;I.vertexTangents=fa.vertexTangents;I.toneMapping=fa.toneMapping}const {canvas:K=ia(),context:oa=null,depth:R=!0,stencil:U=!0,alpha:ja=!1,antialias:ka=!1,premultipliedAlpha:ea=!0,preserveDrawingBuffer:xa=!1,powerPreference:ta="default",failIfMajorPerformanceCaveat:Da=!1}=a;this.isWebGLRenderer=!0;let Va;Va=null!==oa?oa.getContextAttributes().alpha:ja;const ra=new Uint32Array(4),Xa=new Int32Array(4);let Ja=null,ib=null;const Cb=[],xb=[];this.domElement=K;this.debug={checkShaderErrors:!0,
onShaderError:null};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this._outputColorSpace="srgb";this._useLegacyLights=!1;this.toneMapping=0;this.toneMappingExposure=1;const Ya=this;let Ra=!1,$a=0,vb=0,G=null,H=-1,M=null;const Z=new mc,V=new mc;let Ga=null;const fb=new nb(0);let Wa=0,Ea=K.width,P=K.height,Ha=1,za=null,db=null;const jb=new mc(0,0,Ea,P),Qb=new mc(0,0,Ea,P);let Eb=!1;const tc=new Ee;
let Ad=!1,uc=!1,Nc=null;const be=new Mb,hh=new Fa,ff=new O,kj={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ba=oa;try{const I={alpha:!0,depth:R,stencil:U,antialias:ka,premultipliedAlpha:ea,preserveDrawingBuffer:xa,powerPreference:ta,failIfMajorPerformanceCaveat:Da};"setAttribute"in K&&K.setAttribute("data-engine","three.js r162");K.addEventListener("webglcontextlost",e,!1);K.addEventListener("webglcontextrestored",g,!1);K.addEventListener("webglcontextcreationerror",
h,!1);if(null===Ba){const fa=["webgl2","webgl","experimental-webgl"];!0===Ya.isWebGL1Renderer&&fa.shift();Ba=b(fa,I);if(null===Ba){if(b(fa))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}}"undefined"!==typeof WebGLRenderingContext&&Ba instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.");void 0===Ba.getShaderPrecisionFormat&&(Ba.getShaderPrecisionFormat=
function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I;}let Vc,yc,nc,De,oc,Ac,Hj,Ij,ll,on,Jj,Hg,pn,rm,sm,ag,uf,bg,En,Fn,Gn,$f,ui,tm;c();const Xd=new ti(Ya,Ba);this.xr=Xd;this.getContext=function(){return Ba};this.getContextAttributes=function(){return Ba.getContextAttributes()};this.forceContextLoss=function(){const I=Vc.get("WEBGL_lose_context");I&&I.loseContext()};this.forceContextRestore=function(){const I=Vc.get("WEBGL_lose_context");
I&&I.restoreContext()};this.getPixelRatio=function(){return Ha};this.setPixelRatio=function(I){void 0!==I&&(Ha=I,this.setSize(Ea,P,!1))};this.getSize=function(I){return I.set(Ea,P)};this.setSize=function(I,fa,Aa=!0){Xd.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ea=I,P=fa,K.width=Math.floor(I*Ha),K.height=Math.floor(fa*Ha),!0===Aa&&(K.style.width=I+"px",K.style.height=fa+"px"),this.setViewport(0,0,I,fa))};this.getDrawingBufferSize=function(I){return I.set(Ea*
Ha,P*Ha).floor()};this.setDrawingBufferSize=function(I,fa,Aa){Ea=I;P=fa;Ha=Aa;K.width=Math.floor(I*Aa);K.height=Math.floor(fa*Aa);this.setViewport(0,0,I,fa)};this.getCurrentViewport=function(I){return I.copy(Z)};this.getViewport=function(I){return I.copy(jb)};this.setViewport=function(I,fa,Aa,Ca){I.isVector4?jb.set(I.x,I.y,I.z,I.w):jb.set(I,fa,Aa,Ca);nc.viewport(Z.copy(jb).multiplyScalar(Ha).round())};this.getScissor=function(I){return I.copy(Qb)};this.setScissor=function(I,fa,Aa,Ca){I.isVector4?
Qb.set(I.x,I.y,I.z,I.w):Qb.set(I,fa,Aa,Ca);nc.scissor(V.copy(Qb).multiplyScalar(Ha).round())};this.getScissorTest=function(){return Eb};this.setScissorTest=function(I){nc.setScissorTest(Eb=I)};this.setOpaqueSort=function(I){za=I};this.setTransparentSort=function(I){db=I};this.getClearColor=function(I){return I.copy(bg.getClearColor())};this.setClearColor=function(){bg.setClearColor.apply(bg,arguments)};this.getClearAlpha=function(){return bg.getClearAlpha()};this.setClearAlpha=function(){bg.setClearAlpha.apply(bg,
arguments)};this.clear=function(I=!0,fa=!0,Aa=!0){let Ca=0;if(I)if(I=!1,null!==G&&(I=G.texture.format,I=1033===I||1031===I||1029===I),I){I=G.texture.type;I=1009===I||1014===I||1012===I||1020===I||1017===I||1018===I;var ma=bg.getClearColor();const zb=bg.getClearAlpha(),Hb=ma.r,yb=ma.g;ma=ma.b;I?(ra[0]=Hb,ra[1]=yb,ra[2]=ma,ra[3]=zb,Ba.clearBufferuiv(Ba.COLOR,0,ra)):(Xa[0]=Hb,Xa[1]=yb,Xa[2]=ma,Xa[3]=zb,Ba.clearBufferiv(Ba.COLOR,0,Xa))}else Ca|=Ba.COLOR_BUFFER_BIT;fa&&(Ca|=Ba.DEPTH_BUFFER_BIT);Aa&&(Ca|=
Ba.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295));Ba.clear(Ca)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){K.removeEventListener("webglcontextlost",e,!1);K.removeEventListener("webglcontextrestored",g,!1);K.removeEventListener("webglcontextcreationerror",h,!1);rm.dispose();sm.dispose();oc.dispose();Hj.dispose();Ij.dispose();Jj.dispose();ui.dispose();
tm.dispose();Hg.dispose();Xd.dispose();Xd.removeEventListener("sessionstart",q);Xd.removeEventListener("sessionend",u);Nc&&(Nc.dispose(),Nc=null);vi.stop()};this.renderBufferDirect=function(I,fa,Aa,Ca,ma,zb){null===fa&&(fa=kj);var Hb=ma.isMesh&&0>ma.matrixWorld.determinant(),yb=fa;!0!==yb.isScene&&(yb=kj);Ac.resetTextureUnits();fa=yb.fog;var jc=Ca.isMeshStandardMaterial?yb.environment:null,Cc=null===G?Ya.outputColorSpace:!0===G.isXRRenderTarget?G.texture.colorSpace:"srgb-linear";jc=(Ca.isMeshStandardMaterial?
Ij:Hj).get(Ca.envMap||jc);var dc=!0===Ca.vertexColors&&!!Aa.attributes.color&&4===Aa.attributes.color.itemSize,Ld=!!Aa.attributes.tangent&&(!!Ca.normalMap||0<Ca.anisotropy),cg=!!Aa.morphAttributes.position,vf=!!Aa.morphAttributes.normal;const wf=!!Aa.morphAttributes.color;let um=0;!Ca.toneMapped||null!==G&&!0!==G.isXRRenderTarget||(um=Ya.toneMapping);var Rb=Aa.morphAttributes.position||Aa.morphAttributes.normal||Aa.morphAttributes.color;const Hn=void 0!==Rb?Rb.length:0;Rb=oc.get(Ca);const In=ib.state.lights;
!0!==Ad||!0!==uc&&I===M||ag.setState(Ca,I,I===M&&Ca.id===H);let Rc=!1;Ca.version===Rb.__version?Rb.needsLights&&Rb.lightsStateVersion!==In.state.version?Rc=!0:Rb.outputColorSpace!==Cc?Rc=!0:ma.isBatchedMesh&&!1===Rb.batching?Rc=!0:ma.isBatchedMesh||!0!==Rb.batching?ma.isInstancedMesh&&!1===Rb.instancing?Rc=!0:ma.isInstancedMesh||!0!==Rb.instancing?ma.isSkinnedMesh&&!1===Rb.skinning?Rc=!0:ma.isSkinnedMesh||!0!==Rb.skinning?ma.isInstancedMesh&&!0===Rb.instancingColor&&null===ma.instanceColor?Rc=!0:
ma.isInstancedMesh&&!1===Rb.instancingColor&&null!==ma.instanceColor?Rc=!0:ma.isInstancedMesh&&!0===Rb.instancingMorph&&null===ma.morphTexture?Rc=!0:ma.isInstancedMesh&&!1===Rb.instancingMorph&&null!==ma.morphTexture?Rc=!0:Rb.envMap!==jc?Rc=!0:!0===Ca.fog&&Rb.fog!==fa?Rc=!0:void 0===Rb.numClippingPlanes||Rb.numClippingPlanes===ag.numPlanes&&Rb.numIntersection===ag.numIntersection?Rb.vertexAlphas!==dc?Rc=!0:Rb.vertexTangents!==Ld?Rc=!0:Rb.morphTargets!==cg?Rc=!0:Rb.morphNormals!==vf?Rc=!0:Rb.morphColors!==
wf?Rc=!0:Rb.toneMapping!==um?Rc=!0:!0===yc.isWebGL2&&Rb.morphTargetsCount!==Hn&&(Rc=!0):Rc=!0:Rc=!0:Rc=!0:Rc=!0:(Rc=!0,Rb.__version=Ca.version);Cc=Rb.currentProgram;!0===Rc&&(Cc=D(Ca,yb,ma));cg=Ld=vf=!1;yb=Cc.getUniforms();dc=Rb.uniforms;nc.useProgram(Cc.program)&&(cg=Ld=vf=!0);Ca.id!==H&&(H=Ca.id,Ld=!0);if(vf||M!==I)yb.setValue(Ba,"projectionMatrix",I.projectionMatrix),yb.setValue(Ba,"viewMatrix",I.matrixWorldInverse),vf=yb.map.cameraPosition,void 0!==vf&&vf.setValue(Ba,ff.setFromMatrixPosition(I.matrixWorld)),
yc.logarithmicDepthBuffer&&yb.setValue(Ba,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),(Ca.isMeshPhongMaterial||Ca.isMeshToonMaterial||Ca.isMeshLambertMaterial||Ca.isMeshBasicMaterial||Ca.isMeshStandardMaterial||Ca.isShaderMaterial)&&yb.setValue(Ba,"isOrthographic",!0===I.isOrthographicCamera),M!==I&&(M=I,cg=Ld=!0);ma.isSkinnedMesh&&(yb.setOptional(Ba,ma,"bindMatrix"),yb.setOptional(Ba,ma,"bindMatrixInverse"),I=ma.skeleton)&&(yc.floatVertexTextures?(null===I.boneTexture&&I.computeBoneTexture(),
yb.setValue(Ba,"boneTexture",I.boneTexture,Ac)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));ma.isBatchedMesh&&(yb.setOptional(Ba,ma,"batchingTexture"),yb.setValue(Ba,"batchingTexture",ma._matricesTexture,Ac));I=Aa.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===yc.isWebGL2)&&En.update(ma,Aa,Cc);if(Ld||Rb.receiveShadow!==ma.receiveShadow)Rb.receiveShadow=ma.receiveShadow,
yb.setValue(Ba,"receiveShadow",ma.receiveShadow);Ca.isMeshGouraudMaterial&&null!==Ca.envMap&&(dc.envMap.value=jc,dc.flipEnvMap.value=jc.isCubeTexture&&!1===jc.isRenderTargetTexture?-1:1);Ld&&(yb.setValue(Ba,"toneMappingExposure",Ya.toneMappingExposure),Rb.needsLights&&(I=cg,dc.ambientLightColor.needsUpdate=I,dc.lightProbe.needsUpdate=I,dc.directionalLights.needsUpdate=I,dc.directionalLightShadows.needsUpdate=I,dc.pointLights.needsUpdate=I,dc.pointLightShadows.needsUpdate=I,dc.spotLights.needsUpdate=
I,dc.spotLightShadows.needsUpdate=I,dc.rectAreaLights.needsUpdate=I,dc.hemisphereLights.needsUpdate=I),fa&&!0===Ca.fog&&pn.refreshFogUniforms(dc,fa),pn.refreshMaterialUniforms(dc,Ca,Ha,P,Nc),ef.upload(Ba,J(Rb),dc,Ac));Ca.isShaderMaterial&&!0===Ca.uniformsNeedUpdate&&(ef.upload(Ba,J(Rb),dc,Ac),Ca.uniformsNeedUpdate=!1);Ca.isSpriteMaterial&&yb.setValue(Ba,"center",ma.center);yb.setValue(Ba,"modelViewMatrix",ma.modelViewMatrix);yb.setValue(Ba,"normalMatrix",ma.normalMatrix);yb.setValue(Ba,"modelMatrix",
ma.matrixWorld);if(Ca.isShaderMaterial||Ca.isRawShaderMaterial){fa=Ca.uniformsGroups;for(let qn=0,Jn=fa.length;qn<Jn;qn++)yc.isWebGL2?(I=fa[qn],tm.update(I,Cc),tm.bind(I,Cc)):console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}fa=Cc;nc.setMaterial(Ca,Hb);I=Aa.index;jc=1;if(!0===Ca.wireframe){I=on.getWireframeAttribute(Aa);if(void 0===I)return;jc=2}yb=Aa.drawRange;Rb=Aa.attributes.position;Hb=yb.start*jc;yb=(yb.start+yb.count)*jc;null!==zb&&(Hb=Math.max(Hb,zb.start*
jc),yb=Math.min(yb,(zb.start+zb.count)*jc));null!==I?(Hb=Math.max(Hb,0),yb=Math.min(yb,I.count)):void 0!==Rb&&null!==Rb&&(Hb=Math.max(Hb,0),yb=Math.min(yb,Rb.count));zb=yb-Hb;0>zb||Infinity===zb||(ui.setup(ma,Ca,fa,Aa,I),fa=Fn,null!==I&&(I=ll.get(I),fa=Gn,fa.setIndex(I)),ma.isMesh?!0===Ca.wireframe?(nc.setLineWidth(Ca.wireframeLinewidth*(null===G?Ha:1)),fa.setMode(Ba.LINES)):fa.setMode(Ba.TRIANGLES):ma.isLine?(Ca=Ca.linewidth,void 0===Ca&&(Ca=1),nc.setLineWidth(Ca*(null===G?Ha:1)),ma.isLineSegments?
fa.setMode(Ba.LINES):ma.isLineLoop?fa.setMode(Ba.LINE_LOOP):fa.setMode(Ba.LINE_STRIP)):ma.isPoints?fa.setMode(Ba.POINTS):ma.isSprite&&fa.setMode(Ba.TRIANGLES),ma.isBatchedMesh?fa.renderMultiDraw(ma._multiDrawStarts,ma._multiDrawCounts,ma._multiDrawCount):ma.isInstancedMesh?fa.renderInstances(Hb,zb,ma.count):Aa.isInstancedBufferGeometry?fa.renderInstances(Hb,zb,Math.min(Aa.instanceCount,void 0!==Aa._maxInstanceCount?Aa._maxInstanceCount:Infinity)):fa.render(Hb,zb))};this.compile=function(I,fa,Aa=null){null===
Aa&&(Aa=I);ib=sm.get(Aa);ib.init();xb.push(ib);Aa.traverseVisible(function(ma){ma.isLight&&ma.layers.test(fa.layers)&&(ib.pushLight(ma),ma.castShadow&&ib.pushShadow(ma))});I!==Aa&&I.traverseVisible(function(ma){ma.isLight&&ma.layers.test(fa.layers)&&(ib.pushLight(ma),ma.castShadow&&ib.pushShadow(ma))});ib.setupLights(Ya._useLegacyLights);const Ca=new Set;I.traverse(function(ma){const zb=ma.material;if(zb)if(Array.isArray(zb))for(let Hb=0;Hb<zb.length;Hb++){const yb=zb[Hb];m(yb,Aa,ma);Ca.add(yb)}else m(zb,
Aa,ma),Ca.add(zb)});xb.pop();ib=null;return Ca};this.compileAsync=function(I,fa,Aa=null){const Ca=this.compile(I,fa,Aa);return new Promise(ma=>{function zb(){Ca.forEach(function(Hb){oc.get(Hb).currentProgram.isReady()&&Ca.delete(Hb)});0===Ca.size?ma(I):setTimeout(zb,10)}null!==Vc.get("KHR_parallel_shader_compile")?zb():setTimeout(zb,10)})};let rn=null;const vi=new bb;vi.setAnimationLoop(function(I){rn&&rn(I)});"undefined"!==typeof self&&vi.setContext(self);this.setAnimationLoop=function(I){rn=I;Xd.setAnimationLoop(I);
null===I?vi.stop():vi.start()};Xd.addEventListener("sessionstart",q);Xd.addEventListener("sessionend",u);this.render=function(I,fa){if(void 0!==fa&&!0!==fa.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==Ra){!0===I.matrixWorldAutoUpdate&&I.updateMatrixWorld();null===fa.parent&&!0===fa.matrixWorldAutoUpdate&&fa.updateMatrixWorld();!0===Xd.enabled&&!0===Xd.isPresenting&&(!0===Xd.cameraAutoUpdate&&Xd.updateCamera(fa),fa=Xd.getCamera());if(!0===
I.isScene)I.onBeforeRender(Ya,I,fa,G);ib=sm.get(I,xb.length);ib.init();xb.push(ib);be.multiplyMatrices(fa.projectionMatrix,fa.matrixWorldInverse);tc.setFromProjectionMatrix(be);uc=this.localClippingEnabled;Ad=ag.init(this.clippingPlanes,uc);Ja=rm.get(I,Cb.length);Ja.init();Cb.push(Ja);t(I,fa,0,Ya.sortObjects);Ja.finish();!0===Ya.sortObjects&&Ja.sort(za,db);this.info.render.frame++;!0===Ad&&ag.beginShadows();uf.render(ib.state.shadowsArray,I,fa);!0===Ad&&ag.endShadows();!0===this.info.autoReset&&this.info.reset();
!1!==Xd.enabled&&!1!==Xd.isPresenting&&!1!==Xd.hasDepthSensing()||bg.render(Ja,I);ib.setupLights(Ya._useLegacyLights);if(fa.isArrayCamera){const Aa=fa.cameras;for(let Ca=0,ma=Aa.length;Ca<ma;Ca++){const zb=Aa[Ca];w(Ja,I,zb,zb.viewport)}}else w(Ja,I,fa);null!==G&&(Ac.updateMultisampleRenderTarget(G),Ac.updateRenderTargetMipmap(G));if(!0===I.isScene)I.onAfterRender(Ya,I,fa);ui.resetDefaultState();H=-1;M=null;xb.pop();ib=0<xb.length?xb[xb.length-1]:null;Cb.pop();Ja=0<Cb.length?Cb[Cb.length-1]:null}};
this.getActiveCubeFace=function(){return $a};this.getActiveMipmapLevel=function(){return vb};this.getRenderTarget=function(){return G};this.setRenderTargetTextures=function(I,fa,Aa){oc.get(I.texture).__webglTexture=fa;oc.get(I.depthTexture).__webglTexture=Aa;I=oc.get(I);I.__hasExternalTextures=!0;I.__autoAllocateDepthBuffer=void 0===Aa;I.__autoAllocateDepthBuffer||!0!==Vc.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),
I.__useRenderToTexture=!1)};this.setRenderTargetFramebuffer=function(I,fa){I=oc.get(I);I.__webglFramebuffer=fa;I.__useDefaultFramebuffer=void 0===fa};this.setRenderTarget=function(I,fa=0,Aa=0){G=I;$a=fa;vb=Aa;let Ca=!0;var ma=null;let zb=!1,Hb=!1;if(I){ma=oc.get(I);void 0!==ma.__useDefaultFramebuffer?(nc.bindFramebuffer(Ba.FRAMEBUFFER,null),Ca=!1):void 0===ma.__webglFramebuffer?Ac.setupRenderTarget(I):ma.__hasExternalTextures&&Ac.rebindTextures(I,oc.get(I.texture).__webglTexture,oc.get(I.depthTexture).__webglTexture);
ma=I.texture;if(ma.isData3DTexture||ma.isDataArrayTexture||ma.isCompressedArrayTexture)Hb=!0;ma=oc.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(ma=Array.isArray(ma[fa])?ma[fa][Aa]:ma[fa],zb=!0):ma=yc.isWebGL2&&0<I.samples&&!1===Ac.useMultisampledRTT(I)?oc.get(I).__webglMultisampledFramebuffer:Array.isArray(ma)?ma[Aa]:ma;Z.copy(I.viewport);V.copy(I.scissor);Ga=I.scissorTest}else Z.copy(jb).multiplyScalar(Ha).floor(),V.copy(Qb).multiplyScalar(Ha).floor(),Ga=Eb;nc.bindFramebuffer(Ba.FRAMEBUFFER,
ma)&&yc.drawBuffers&&Ca&&nc.drawBuffers(I,ma);nc.viewport(Z);nc.scissor(V);nc.setScissorTest(Ga);zb?(I=oc.get(I.texture),Ba.framebufferTexture2D(Ba.FRAMEBUFFER,Ba.COLOR_ATTACHMENT0,Ba.TEXTURE_CUBE_MAP_POSITIVE_X+fa,I.__webglTexture,Aa)):Hb&&(I=oc.get(I.texture),Ba.framebufferTextureLayer(Ba.FRAMEBUFFER,Ba.COLOR_ATTACHMENT0,I.__webglTexture,Aa||0,fa||0));H=-1};this.readRenderTargetPixels=function(I,fa,Aa,Ca,ma,zb,Hb){if(I&&I.isWebGLRenderTarget){var yb=oc.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget&&
void 0!==Hb&&(yb=yb[Hb]);if(yb){nc.bindFramebuffer(Ba.FRAMEBUFFER,yb);try{const Cc=I.texture,dc=Cc.format,Ld=Cc.type;if(1023!==dc&&$f.convert(dc)!==Ba.getParameter(Ba.IMPLEMENTATION_COLOR_READ_FORMAT))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");else{var jc=1016===Ld&&(Vc.has("EXT_color_buffer_half_float")||yc.isWebGL2&&Vc.has("EXT_color_buffer_float"));1009===Ld||$f.convert(Ld)===Ba.getParameter(Ba.IMPLEMENTATION_COLOR_READ_TYPE)||
1015===Ld&&(yc.isWebGL2||Vc.has("OES_texture_float")||Vc.has("WEBGL_color_buffer_float"))||jc?0<=fa&&fa<=I.width-Ca&&0<=Aa&&Aa<=I.height-ma&&Ba.readPixels(fa,Aa,Ca,ma,$f.convert(dc),$f.convert(Ld),zb):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{I=null!==G?oc.get(G).__webglFramebuffer:null,nc.bindFramebuffer(Ba.FRAMEBUFFER,I)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};
this.copyFramebufferToTexture=function(I,fa,Aa=0){var Ca=Math.pow(2,-Aa);const ma=Math.floor(fa.image.width*Ca);Ca=Math.floor(fa.image.height*Ca);Ac.setTexture2D(fa,0);Ba.copyTexSubImage2D(Ba.TEXTURE_2D,Aa,0,0,I.x,I.y,ma,Ca);nc.unbindTexture()};this.copyTextureToTexture=function(I,fa,Aa,Ca=0){const ma=fa.image.width,zb=fa.image.height,Hb=$f.convert(Aa.format),yb=$f.convert(Aa.type);Ac.setTexture2D(Aa,0);Ba.pixelStorei(Ba.UNPACK_FLIP_Y_WEBGL,Aa.flipY);Ba.pixelStorei(Ba.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
Aa.premultiplyAlpha);Ba.pixelStorei(Ba.UNPACK_ALIGNMENT,Aa.unpackAlignment);fa.isDataTexture?Ba.texSubImage2D(Ba.TEXTURE_2D,Ca,I.x,I.y,ma,zb,Hb,yb,fa.image.data):fa.isCompressedTexture?Ba.compressedTexSubImage2D(Ba.TEXTURE_2D,Ca,I.x,I.y,fa.mipmaps[0].width,fa.mipmaps[0].height,Hb,fa.mipmaps[0].data):Ba.texSubImage2D(Ba.TEXTURE_2D,Ca,I.x,I.y,Hb,yb,fa.image);0===Ca&&Aa.generateMipmaps&&Ba.generateMipmap(Ba.TEXTURE_2D);nc.unbindTexture()};this.copyTextureToTexture3D=function(I,fa,Aa,Ca,ma=0){if(Ya.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
else{var zb=Math.round(I.max.x-I.min.x),Hb=Math.round(I.max.y-I.min.y),yb=I.max.z-I.min.z+1,jc=$f.convert(Ca.format),Cc=$f.convert(Ca.type);if(Ca.isData3DTexture){Ac.setTexture3D(Ca,0);var dc=Ba.TEXTURE_3D}else if(Ca.isDataArrayTexture||Ca.isCompressedArrayTexture)Ac.setTexture2DArray(Ca,0),dc=Ba.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ba.pixelStorei(Ba.UNPACK_FLIP_Y_WEBGL,Ca.flipY);Ba.pixelStorei(Ba.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
Ca.premultiplyAlpha);Ba.pixelStorei(Ba.UNPACK_ALIGNMENT,Ca.unpackAlignment);var Ld=Ba.getParameter(Ba.UNPACK_ROW_LENGTH),cg=Ba.getParameter(Ba.UNPACK_IMAGE_HEIGHT),vf=Ba.getParameter(Ba.UNPACK_SKIP_PIXELS),wf=Ba.getParameter(Ba.UNPACK_SKIP_ROWS),um=Ba.getParameter(Ba.UNPACK_SKIP_IMAGES),Rb=Aa.isCompressedTexture?Aa.mipmaps[ma]:Aa.image;Ba.pixelStorei(Ba.UNPACK_ROW_LENGTH,Rb.width);Ba.pixelStorei(Ba.UNPACK_IMAGE_HEIGHT,Rb.height);Ba.pixelStorei(Ba.UNPACK_SKIP_PIXELS,I.min.x);Ba.pixelStorei(Ba.UNPACK_SKIP_ROWS,
I.min.y);Ba.pixelStorei(Ba.UNPACK_SKIP_IMAGES,I.min.z);Aa.isDataTexture||Aa.isData3DTexture?Ba.texSubImage3D(dc,ma,fa.x,fa.y,fa.z,zb,Hb,yb,jc,Cc,Rb.data):Ca.isCompressedArrayTexture?Ba.compressedTexSubImage3D(dc,ma,fa.x,fa.y,fa.z,zb,Hb,yb,jc,Rb.data):Ba.texSubImage3D(dc,ma,fa.x,fa.y,fa.z,zb,Hb,yb,jc,Cc,Rb);Ba.pixelStorei(Ba.UNPACK_ROW_LENGTH,Ld);Ba.pixelStorei(Ba.UNPACK_IMAGE_HEIGHT,cg);Ba.pixelStorei(Ba.UNPACK_SKIP_PIXELS,vf);Ba.pixelStorei(Ba.UNPACK_SKIP_ROWS,wf);Ba.pixelStorei(Ba.UNPACK_SKIP_IMAGES,
um);0===ma&&Ca.generateMipmaps&&Ba.generateMipmap(dc);nc.unbindTexture()}};this.initTexture=function(I){I.isCubeTexture?Ac.setTextureCube(I,0):I.isData3DTexture?Ac.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?Ac.setTexture2DArray(I,0):Ac.setTexture2D(I,0);nc.unbindTexture()};this.resetState=function(){vb=$a=0;G=null;nc.reset();ui.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2E3}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(a){this._outputColorSpace=
a;const b=this.getContext();b.drawingBufferColorSpace="display-p3"===a?"display-p3":"srgb";b.unpackColorSpace="display-p3-linear"===lc.workingColorSpace?"display-p3":"srgb"}get useLegacyLights(){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.");return this._useLegacyLights}set useLegacyLights(a){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.");
this._useLegacyLights=a}}class vm extends wh{}vm.prototype.isWebGL1Renderer=!0;class ml{constructor(a,b=2.5E-4){this.isFogExp2=!0;this.name="";this.color=new nb(a);this.density=b}clone(){return new ml(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wi{constructor(a,b=1,c=1E3){this.isFog=!0;this.name="";this.color=new nb(a);this.near=b;this.far=c}clone(){return new wi(this.color,this.near,this.far)}toJSON(){return{type:"Fog",
name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Kj extends ec{constructor(){super();this.isScene=!0;this.type="Scene";this.fog=this.environment=this.background=null;this.backgroundBlurriness=0;this.backgroundIntensity=1;this.backgroundRotation=new he;this.environmentRotation=new he;this.overrideMaterial=null;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,b){super.copy(a,b);null!==a.background&&
(this.background=a.background.clone());null!==a.environment&&(this.environment=a.environment.clone());null!==a.fog&&(this.fog=a.fog.clone());this.backgroundBlurriness=a.backgroundBlurriness;this.backgroundIntensity=a.backgroundIntensity;this.backgroundRotation.copy(a.backgroundRotation);this.environmentRotation.copy(a.environmentRotation);null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.matrixAutoUpdate=a.matrixAutoUpdate;return this}toJSON(a){a=super.toJSON(a);null!==
this.fog&&(a.object.fog=this.fog.toJSON());0<this.backgroundBlurriness&&(a.object.backgroundBlurriness=this.backgroundBlurriness);1!==this.backgroundIntensity&&(a.object.backgroundIntensity=this.backgroundIntensity);a.object.backgroundRotation=this.backgroundRotation.toArray();a.object.environmentRotation=this.environmentRotation.toArray();return a}}class xf{constructor(a,b){this.isInterleavedBuffer=!0;this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.usage=35044;this._updateRange=
{offset:0,count:-1};this.updateRanges=[];this.version=0;this.uuid=wa()}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}get updateRange(){sb("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead.");return this._updateRange}setUsage(a){this.usage=a;return this}addUpdateRange(a,b){this.updateRanges.push({start:a,count:b})}clearUpdateRanges(){this.updateRanges.length=0}copy(a){this.array=new a.array.constructor(a.array);this.count=
a.count;this.stride=a.stride;this.usage=a.usage;return this}copyAt(a,b,c){a*=this.stride;c*=b.stride;for(let e=0,g=this.stride;e<g;e++)this.array[a+e]=b.array[c+e];return this}set(a,b=0){this.array.set(a,b);return this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wa());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);a=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]);
a=new this.constructor(a,this.stride);a.setUsage(this.usage);return a}onUpload(a){this.onUploadCallback=a;return this}toJSON(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wa());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer)));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zc=new O;class dg{constructor(a,
b,c,e=!1){this.isInterleavedBufferAttribute=!0;this.name="";this.data=a;this.itemSize=b;this.offset=c;this.normalized=e}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let b=0,c=this.data.count;b<c;b++)Zc.fromBufferAttribute(this,b),Zc.applyMatrix4(a),this.setXYZ(b,Zc.x,Zc.y,Zc.z);return this}applyNormalMatrix(a){for(let b=0,c=this.count;b<c;b++)Zc.fromBufferAttribute(this,b),Zc.applyNormalMatrix(a),this.setXYZ(b,
Zc.x,Zc.y,Zc.z);return this}transformDirection(a){for(let b=0,c=this.count;b<c;b++)Zc.fromBufferAttribute(this,b),Zc.transformDirection(a),this.setXYZ(b,Zc.x,Zc.y,Zc.z);return this}getComponent(a,b){a=this.array[a*this.data.stride+this.offset+b];this.normalized&&(a=hb(a,this.array));return a}setComponent(a,b,c){this.normalized&&(c=rb(c,this.array));this.data.array[a*this.data.stride+this.offset+b]=c;return this}setX(a,b){this.normalized&&(b=rb(b,this.array));this.data.array[a*this.data.stride+this.offset]=
b;return this}setY(a,b){this.normalized&&(b=rb(b,this.array));this.data.array[a*this.data.stride+this.offset+1]=b;return this}setZ(a,b){this.normalized&&(b=rb(b,this.array));this.data.array[a*this.data.stride+this.offset+2]=b;return this}setW(a,b){this.normalized&&(b=rb(b,this.array));this.data.array[a*this.data.stride+this.offset+3]=b;return this}getX(a){a=this.data.array[a*this.data.stride+this.offset];this.normalized&&(a=hb(a,this.array));return a}getY(a){a=this.data.array[a*this.data.stride+this.offset+
1];this.normalized&&(a=hb(a,this.array));return a}getZ(a){a=this.data.array[a*this.data.stride+this.offset+2];this.normalized&&(a=hb(a,this.array));return a}getW(a){a=this.data.array[a*this.data.stride+this.offset+3];this.normalized&&(a=hb(a,this.array));return a}setXY(a,b,c){a=a*this.data.stride+this.offset;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array));this.data.array[a+0]=b;this.data.array[a+1]=c;return this}setXYZ(a,b,c,e){a=a*this.data.stride+this.offset;this.normalized&&(b=rb(b,this.array),
c=rb(c,this.array),e=rb(e,this.array));this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=e;return this}setXYZW(a,b,c,e,g){a=a*this.data.stride+this.offset;this.normalized&&(b=rb(b,this.array),c=rb(c,this.array),e=rb(e,this.array),g=rb(g,this.array));this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=e;this.data.array[a+3]=g;return this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const c=b*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)a.push(this.data.array[c+e])}return new pc(new this.array.constructor(a),this.itemSize,this.normalized)}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a));return new dg(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const c=b*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)a.push(this.data.array[c+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a));return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}
class xi extends Dd{constructor(a){super();this.isSpriteMaterial=!0;this.type="SpriteMaterial";this.color=new nb(16777215);this.alphaMap=this.map=null;this.rotation=0;this.fog=this.transparent=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}let Ue;const yf=new O,zf=new O,Af=new O,Pf=new Fa,Yh=new Fa,Nk=new Mb,yi=new O,zi=new O,
Lj=new O,Sc=new Fa,nl=new Fa,Mj=new Fa;class ol extends ec{constructor(a=new xi){super();this.isSprite=!0;this.type="Sprite";if(void 0===Ue){Ue=new Kb;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b=new xf(b,5);Ue.setIndex([0,1,2,0,2,3]);Ue.setAttribute("position",new dg(b,3,0,!1));Ue.setAttribute("uv",new dg(b,2,3,!1))}this.geometry=Ue;this.material=a;this.center=new Fa(.5,.5)}raycast(a,b){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');
zf.setFromMatrixScale(this.matrixWorld);Nk.copy(a.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld);Af.setFromMatrixPosition(this.modelViewMatrix);a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&zf.multiplyScalar(-Af.z);var c=this.material.rotation;let e;if(0!==c){e=Math.cos(c);var g=Math.sin(c)}c=this.center;Of(yi.set(-.5,-.5,0),Af,c,zf,g,e);Of(zi.set(.5,-.5,0),Af,c,zf,g,e);Of(Lj.set(.5,.5,0),Af,c,zf,g,e);Sc.set(0,0);nl.set(1,
0);Mj.set(1,1);let h=a.ray.intersectTriangle(yi,zi,Lj,!1,yf);if(null===h&&(Of(zi.set(-.5,.5,0),Af,c,zf,g,e),nl.set(0,1),h=a.ray.intersectTriangle(yi,Lj,zi,!1,yf),null===h))return;g=a.ray.origin.distanceTo(yf);g<a.near||g>a.far||b.push({distance:g,point:yf.clone(),uv:Zd.getInterpolation(yf,yi,zi,Lj,Sc,nl,Mj,new Fa),face:null,object:this})}copy(a,b){super.copy(a,b);void 0!==a.center&&this.center.copy(a.center);this.material=a.material;return this}}const Ig=new O,wm=new O;class pl extends ec{constructor(){super();
this._currentLevel=0;this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});this.autoUpdate=!0}copy(a){super.copy(a,!1);const b=a.levels;for(let c=0,e=b.length;c<e;c++){const g=b[c];this.addLevel(g.object.clone(),g.distance,g.hysteresis)}this.autoUpdate=a.autoUpdate;return this}addLevel(a,b=0,c=0){b=Math.abs(b);const e=this.levels;let g;for(g=0;g<e.length&&!(b<e[g].distance);g++);e.splice(g,0,{distance:b,hysteresis:c,object:a});this.add(a);return this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const b=
this.levels;if(0<b.length){let c,e;c=1;for(e=b.length;c<e;c++){let g=b[c].distance;b[c].object.visible&&(g-=g*b[c].hysteresis);if(a<g)break}return b[c-1].object}return null}raycast(a,b){if(0<this.levels.length){Ig.setFromMatrixPosition(this.matrixWorld);const c=a.ray.origin.distanceTo(Ig);this.getObjectForDistance(c).raycast(a,b)}}update(a){const b=this.levels;if(1<b.length){Ig.setFromMatrixPosition(a.matrixWorld);wm.setFromMatrixPosition(this.matrixWorld);a=Ig.distanceTo(wm)/a.zoom;b[0].object.visible=
!0;let c,e;c=1;for(e=b.length;c<e;c++){let g=b[c].distance;b[c].object.visible&&(g-=g*b[c].hysteresis);if(a>=g)b[c-1].object.visible=!1,b[c].object.visible=!0;else break}for(this._currentLevel=c-1;c<e;c++)b[c].object.visible=!1}}toJSON(a){a=super.toJSON(a);!1===this.autoUpdate&&(a.object.autoUpdate=!1);a.object.levels=[];const b=this.levels;for(let c=0,e=b.length;c<e;c++){const g=b[c];a.object.levels.push({object:g.object.uuid,distance:g.distance,hysteresis:g.hysteresis})}return a}}const Ai=new O,
Le=new mc,te=new mc,sn=new O,xm=new Mb,Jg=new O,xh=new qd,sc=new Mb,Bi=new zg;class Ci extends Uc{constructor(a,b){super(a,b);this.isSkinnedMesh=!0;this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new Mb;this.bindMatrixInverse=new Mb;this.boundingSphere=this.boundingBox=null}computeBoundingBox(){var a=this.geometry;null===this.boundingBox&&(this.boundingBox=new od);this.boundingBox.makeEmpty();a=a.getAttribute("position");for(let b=0;b<a.count;b++)this.getVertexPosition(b,Jg),this.boundingBox.expandByPoint(Jg)}computeBoundingSphere(){var a=
this.geometry;null===this.boundingSphere&&(this.boundingSphere=new qd);this.boundingSphere.makeEmpty();a=a.getAttribute("position");for(let b=0;b<a.count;b++)this.getVertexPosition(b,Jg),this.boundingSphere.expandByPoint(Jg)}copy(a,b){super.copy(a,b);this.bindMode=a.bindMode;this.bindMatrix.copy(a.bindMatrix);this.bindMatrixInverse.copy(a.bindMatrixInverse);this.skeleton=a.skeleton;null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());
return this}raycast(a,b){const c=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),xh.copy(this.boundingSphere),xh.applyMatrix4(c),!1!==a.ray.intersectsSphere(xh)&&(sc.copy(c).invert(),Bi.copy(a.ray).applyMatrix4(sc),null!==this.boundingBox&&!1===Bi.intersectsBox(this.boundingBox)||this._computeIntersections(a,b,Bi)))}getVertexPosition(a,b){super.getVertexPosition(a,b);this.applyBoneTransform(a,b);return b}bind(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),
this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.copy(b).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new mc,b=this.geometry.attributes.skinWeight;for(let c=0,e=b.count;c<e;c++){a.fromBufferAttribute(b,c);const g=1/a.manhattanLength();Infinity!==g?a.multiplyScalar(g):a.set(1,0,0,0);b.setXYZW(c,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a);"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():
"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(a,b){const c=this.skeleton;var e=this.geometry;Le.fromBufferAttribute(e.attributes.skinIndex,a);te.fromBufferAttribute(e.attributes.skinWeight,a);Ai.copy(b).applyMatrix4(this.bindMatrix);b.set(0,0,0);for(a=0;4>a;a++)if(e=te.getComponent(a),0!==e){const g=Le.getComponent(a);xm.multiplyMatrices(c.bones[g].matrixWorld,c.boneInverses[g]);
b.addScaledVector(sn.copy(Ai).applyMatrix4(xm),e)}return b.applyMatrix4(this.bindMatrixInverse)}}class Ve extends ec{constructor(){super();this.isBone=!0;this.type="Bone"}}class Md extends Pc{constructor(a=null,b=1,c=1,e,g,h,l,n,m=1003,q=1003,u,t){super(null,h,l,n,m,q,e,g,u,t);this.isDataTexture=!0;this.image={data:a,width:b,height:c};this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}const Bf=new Mb,Di=new Mb;class Kg{constructor(a=[],b=[]){this.uuid=wa();this.bones=a.slice(0);this.boneInverses=
b;this.boneTexture=this.boneMatrices=null;this.init()}init(){const a=this.bones,b=this.boneInverses;this.boneMatrices=new Float32Array(16*a.length);if(0===b.length)this.calculateInverses();else if(a.length!==b.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.");this.boneInverses=[];for(let c=0,e=this.bones.length;c<e;c++)this.boneInverses.push(new Mb)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,b=this.bones.length;a<b;a++){const c=
new Mb;this.bones[a]&&c.copy(this.bones[a].matrixWorld).invert();this.boneInverses.push(c)}}pose(){for(let b=0,c=this.bones.length;b<c;b++){var a=this.bones[b];a&&a.matrixWorld.copy(this.boneInverses[b]).invert()}for(let b=0,c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}update(){const a=this.bones,b=this.boneInverses,
c=this.boneMatrices,e=this.boneTexture;for(let g=0,h=a.length;g<h;g++)Bf.multiplyMatrices(a[g]?a[g].matrixWorld:Di,b[g]),Bf.toArray(c,16*g);null!==e&&(e.needsUpdate=!0)}clone(){return new Kg(this.bones,this.boneInverses)}computeBoneTexture(){var a=Math.sqrt(4*this.bones.length);a=4*Math.ceil(a/4);a=Math.max(a,4);const b=new Float32Array(a*a*4);b.set(this.boneMatrices);a=new Md(b,a,a,1023,1015);a.needsUpdate=!0;this.boneMatrices=b;this.boneTexture=a;return this}getBoneByName(a){for(let b=0,c=this.bones.length;b<
c;b++){const e=this.bones[b];if(e.name===a)return e}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,b){this.uuid=a.uuid;for(let c=0,e=a.bones.length;c<e;c++){const g=a.bones[c];let h=b[g];void 0===h&&(console.warn("THREE.Skeleton: No bone found with UUID:",g),h=new Ve);this.bones.push(h);this.boneInverses.push((new Mb).fromArray(a.boneInverses[c]))}this.init();return this}toJSON(){const a={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},
bones:[],boneInverses:[]};a.uuid=this.uuid;const b=this.bones,c=this.boneInverses;for(let e=0,g=b.length;e<g;e++)a.bones.push(b[e].uuid),a.boneInverses.push(c[e].toArray());return a}}class je extends pc{constructor(a,b,c,e=1){super(a,b,c);this.isInstancedBufferAttribute=!0;this.meshPerAttribute=e}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}toJSON(){const a=super.toJSON();a.meshPerAttribute=this.meshPerAttribute;a.isInstancedBufferAttribute=!0;return a}}const yh=new Mb,
Lg=new Mb,Mg=[],Ei=new od,eg=new Mb,Ng=new Uc,fg=new qd;class Og extends Uc{constructor(a,b,c){super(a,b);this.isInstancedMesh=!0;this.instanceMatrix=new je(new Float32Array(16*c),16);this.morphTexture=this.instanceColor=null;this.count=c;this.boundingSphere=this.boundingBox=null;for(a=0;a<c;a++)this.setMatrixAt(a,eg)}computeBoundingBox(){const a=this.geometry,b=this.count;null===this.boundingBox&&(this.boundingBox=new od);null===a.boundingBox&&a.computeBoundingBox();this.boundingBox.makeEmpty();
for(let c=0;c<b;c++)this.getMatrixAt(c,yh),Ei.copy(a.boundingBox).applyMatrix4(yh),this.boundingBox.union(Ei)}computeBoundingSphere(){const a=this.geometry,b=this.count;null===this.boundingSphere&&(this.boundingSphere=new qd);null===a.boundingSphere&&a.computeBoundingSphere();this.boundingSphere.makeEmpty();for(let c=0;c<b;c++)this.getMatrixAt(c,yh),fg.copy(a.boundingSphere).applyMatrix4(yh),this.boundingSphere.union(fg)}copy(a,b){super.copy(a,b);this.instanceMatrix.copy(a.instanceMatrix);null!==
a.instanceColor&&(this.instanceColor=a.instanceColor.clone());this.count=a.count;null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this}getColorAt(a,b){b.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,b){b.fromArray(this.instanceMatrix.array,16*a)}getMorphAt(a,b){b=b.morphTargetInfluences;const c=this.morphTexture.source.data.data;a=a*(b.length+1)+1;for(let e=0;e<b.length;e++)b[e]=c[a+e]}raycast(a,b){const c=
this.matrixWorld,e=this.count;Ng.geometry=this.geometry;Ng.material=this.material;if(void 0!==Ng.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),fg.copy(this.boundingSphere),fg.applyMatrix4(c),!1!==a.ray.intersectsSphere(fg)))for(let g=0;g<e;g++){this.getMatrixAt(g,yh);Lg.multiplyMatrices(c,yh);Ng.matrixWorld=Lg;Ng.raycast(a,Mg);for(let h=0,l=Mg.length;h<l;h++){const n=Mg[h];n.instanceId=g;n.object=this;b.push(n)}Mg.length=0}}setColorAt(a,b){null===this.instanceColor&&(this.instanceColor=
new je(new Float32Array(3*this.instanceMatrix.count),3));b.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,b){b.toArray(this.instanceMatrix.array,16*a)}setMorphAt(a,b){b=b.morphTargetInfluences;const c=b.length+1;null===this.morphTexture&&(this.morphTexture=new Md(new Float32Array(c*this.count),c,this.count,1028,1015));const e=this.morphTexture.source.data.data;let g=0;for(let h=0;h<b.length;h++)g+=b[h];a*=c;e[a]=this.geometry.morphTargetsRelative?1:1-g;e.set(b,a+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}
class ql{constructor(){this.index=0;this.pool=[];this.list=[]}push(a,b){var c=this.pool;const e=this.list;this.index>=c.length&&c.push({start:-1,count:-1,z:-1});c=c[this.index];e.push(c);this.index++;c.start=a.start;c.count=a.count;c.z=b}reset(){this.index=this.list.length=0}}const ue=new Mb,ym=new Mb,rl=new Mb,Nj=new Mb,Pg=new Ee,Qg=new od,gg=new qd,Fi=new O,sl=new ql,Ed=new Uc,zh=[];class zm extends Uc{get maxGeometryCount(){return this._maxGeometryCount}constructor(a,b,c=2*b,e){super(new Kb,e);
this.sortObjects=this.perObjectFrustumCulled=this.isBatchedMesh=!0;this.customSort=this.boundingSphere=this.boundingBox=null;this._drawRanges=[];this._reservedRanges=[];this._visibility=[];this._active=[];this._bounds=[];this._maxGeometryCount=a;this._maxVertexCount=b;this._maxIndexCount=c;this._geometryInitialized=!1;this._geometryCount=0;this._multiDrawCounts=new Int32Array(a);this._multiDrawStarts=new Int32Array(a);this._multiDrawCount=0;this._visibilityChanged=!0;this._matricesTexture=null;this._initMatricesTexture()}_initMatricesTexture(){let a=
Math.sqrt(4*this._maxGeometryCount);a=4*Math.ceil(a/4);a=Math.max(a,4);const b=new Float32Array(a*a*4);this._matricesTexture=new Md(b,a,a,1023,1015)}_initializeGeometry(a){const b=this.geometry;var c=this._maxVertexCount;const e=this._maxGeometryCount,g=this._maxIndexCount;if(!1===this._geometryInitialized){for(const l in a.attributes){const n=a.getAttribute(l),{array:m,itemSize:q,normalized:u}=n;var h=new m.constructor(c*q);h=new n.constructor(h,q,u);h.setUsage(n.usage);b.setAttribute(l,h)}null!==
a.getIndex()&&(a=65536<c?new Uint32Array(g):new Uint16Array(g),b.setIndex(new pc(a,1)));c=65536<e?new Uint32Array(c):new Uint16Array(c);b.setAttribute("batchId",new pc(c,1));this._geometryInitialized=!0}}_validateGeometry(a){if(a.getAttribute("batchId"))throw Error('BatchedMesh: Geometry cannot use attribute "batchId"');const b=this.geometry;if(!!a.getIndex()!==!!b.getIndex())throw Error('BatchedMesh: All geometries must consistently have "index".');for(const c in b.attributes){if("batchId"===c)continue;
if(!a.hasAttribute(c))throw Error(`BatchedMesh: Added geometry missing "${c}". All geometries must have consistent attributes.`);const e=a.getAttribute(c),g=b.getAttribute(c);if(e.itemSize!==g.itemSize||e.normalized!==g.normalized)throw Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.");}}setCustomSort(a){this.customSort=a;return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new od);const a=this._geometryCount,b=this.boundingBox,c=this._active;
b.makeEmpty();for(let e=0;e<a;e++)!1!==c[e]&&(this.getMatrixAt(e,ue),this.getBoundingBoxAt(e,Qg).applyMatrix4(ue),b.union(Qg))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new qd);const a=this._geometryCount,b=this.boundingSphere,c=this._active;b.makeEmpty();for(let e=0;e<a;e++)!1!==c[e]&&(this.getMatrixAt(e,ue),this.getBoundingSphereAt(e,gg).applyMatrix4(ue),b.union(gg))}addGeometry(a,b=-1,c=-1){this._initializeGeometry(a);this._validateGeometry(a);if(this._geometryCount>=
this._maxGeometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");const e={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};var g=null,h=this._reservedRanges,l=this._drawRanges;const n=this._bounds;0!==this._geometryCount&&(g=h[h.length-1]);e.vertexCount=-1===b?a.getAttribute("position").count:b;e.vertexStart=null===g?0:g.vertexStart+g.vertexCount;var m=a.getIndex();if(b=null!==m)e.indexCount=-1===c?m.count:c,e.indexStart=null===g?0:g.indexStart+g.indexCount;if(-1!==e.indexStart&&
e.indexStart+e.indexCount>this._maxIndexCount||e.vertexStart+e.vertexCount>this._maxVertexCount)throw Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");c=this._active;g=this._matricesTexture;m=this._matricesTexture.image.data;this._visibility.push(!0);c.push(!0);c=this._geometryCount;this._geometryCount++;rl.toArray(m,16*c);g.needsUpdate=!0;h.push(e);l.push({start:b?e.indexStart:e.vertexStart,count:-1});n.push({boxInitialized:!1,box:new od,sphereInitialized:!1,sphere:new qd});
h=this.geometry.getAttribute("batchId");for(l=0;l<e.vertexCount;l++)h.setX(e.vertexStart+l,c);h.needsUpdate=!0;this.setGeometryAt(c,a);return c}setGeometryAt(a,b){if(a>=this._geometryCount)throw Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(b);var c=this.geometry;const e=null!==c.getIndex();var g=c.getIndex();const h=b.getIndex(),l=this._reservedRanges[a];if(e&&h.count>l.indexCount||b.attributes.position.count>l.vertexCount)throw Error("BatchedMesh: Reserved space not large enough for provided geometry.");
const n=l.vertexStart;var m=l.vertexCount;for(const u in c.attributes){if("batchId"===u)continue;var q=b.getAttribute(u);const t=c.getAttribute(u);Vl(q,t,n);const w=q.itemSize;for(let B=q.count,z=m;B<z;B++){q=n+B;for(let D=0;D<w;D++)t.setComponent(q,D,0)}t.needsUpdate=!0}if(e){c=l.indexStart;for(m=0;m<h.count;m++)g.setX(c+m,n+h.getX(m));for(let u=h.count,t=l.indexCount;u<t;u++)g.setX(c+u,n);g.needsUpdate=!0}g=this._bounds[a];null!==b.boundingBox?(g.box.copy(b.boundingBox),g.boxInitialized=!0):g.boxInitialized=
!1;null!==b.boundingSphere?(g.sphere.copy(b.boundingSphere),g.sphereInitialized=!0):g.sphereInitialized=!1;g=this._drawRanges[a];b=b.getAttribute("position");g.count=e?h.count:b.count;this._visibilityChanged=!0;return a}deleteGeometry(a){const b=this._active;if(a>=b.length||!1===b[a])return this;b[a]=!1;this._visibilityChanged=!0;return this}getBoundingBoxAt(a,b){if(!1===this._active[a])return null;const c=this._bounds[a],e=c.box;var g=this.geometry;if(!1===c.boxInitialized){e.makeEmpty();const h=
g.index;g=g.attributes.position;a=this._drawRanges[a];for(let l=a.start,n=a.start+a.count;l<n;l++)a=l,h&&(a=h.getX(a)),e.expandByPoint(Fi.fromBufferAttribute(g,a));c.boxInitialized=!0}b.copy(e);return b}getBoundingSphereAt(a,b){if(!1===this._active[a])return null;const c=this._bounds[a],e=c.sphere;var g=this.geometry;if(!1===c.sphereInitialized){e.makeEmpty();this.getBoundingBoxAt(a,Qg);Qg.getCenter(e.center);const l=g.index;g=g.attributes.position;var h=this._drawRanges[a];a=0;for(let n=h.start,
m=h.start+h.count;n<m;n++)h=n,l&&(h=l.getX(h)),Fi.fromBufferAttribute(g,h),a=Math.max(a,e.center.distanceToSquared(Fi));e.radius=Math.sqrt(a);c.sphereInitialized=!0}b.copy(e);return b}setMatrixAt(a,b){const c=this._active,e=this._matricesTexture;if(a>=this._geometryCount||!1===c[a])return this;b.toArray(this._matricesTexture.image.data,16*a);e.needsUpdate=!0;return this}getMatrixAt(a,b){const c=this._active;return a>=this._geometryCount||!1===c[a]?null:b.fromArray(this._matricesTexture.image.data,
16*a)}setVisibleAt(a,b){const c=this._visibility,e=this._active;if(a>=this._geometryCount||!1===e[a]||c[a]===b)return this;c[a]=b;this._visibilityChanged=!0;return this}getVisibleAt(a){const b=this._active;return a>=this._geometryCount||!1===b[a]?!1:this._visibility[a]}raycast(a,b){const c=this._visibility,e=this._active,g=this._drawRanges,h=this._geometryCount,l=this.matrixWorld;var n=this.geometry;Ed.material=this.material;Ed.geometry.index=n.index;Ed.geometry.attributes=n.attributes;null===Ed.geometry.boundingBox&&
(Ed.geometry.boundingBox=new od);null===Ed.geometry.boundingSphere&&(Ed.geometry.boundingSphere=new qd);for(n=0;n<h;n++)if(c[n]&&e[n]){var m=g[n];Ed.geometry.setDrawRange(m.start,m.count);this.getMatrixAt(n,Ed.matrixWorld).premultiply(l);this.getBoundingBoxAt(n,Ed.geometry.boundingBox);this.getBoundingSphereAt(n,Ed.geometry.boundingSphere);Ed.raycast(a,zh);for(let q=0,u=zh.length;q<u;q++)m=zh[q],m.object=this,m.batchId=n,b.push(m);zh.length=0}Ed.material=null;Ed.geometry.index=null;Ed.geometry.attributes=
{};Ed.geometry.setDrawRange(0,Infinity)}copy(a){super.copy(a);this.geometry=a.geometry.clone();this.perObjectFrustumCulled=a.perObjectFrustumCulled;this.sortObjects=a.sortObjects;this.boundingBox=null!==a.boundingBox?a.boundingBox.clone():null;this.boundingSphere=null!==a.boundingSphere?a.boundingSphere.clone():null;this._drawRanges=a._drawRanges.map(b=>({...b}));this._reservedRanges=a._reservedRanges.map(b=>({...b}));this._visibility=a._visibility.slice();this._active=a._active.slice();this._bounds=
a._bounds.map(b=>({boxInitialized:b.boxInitialized,box:b.box.clone(),sphereInitialized:b.sphereInitialized,sphere:b.sphere.clone()}));this._maxGeometryCount=a._maxGeometryCount;this._maxVertexCount=a._maxVertexCount;this._maxIndexCount=a._maxIndexCount;this._geometryInitialized=a._geometryInitialized;this._geometryCount=a._geometryCount;this._multiDrawCounts=a._multiDrawCounts.slice();this._multiDrawStarts=a._multiDrawStarts.slice();this._matricesTexture=a._matricesTexture.clone();this._matricesTexture.image.data=
this._matricesTexture.image.slice();return this}dispose(){this.geometry.dispose();this._matricesTexture.dispose();this._matricesTexture=null;return this}onBeforeRender(a,b,c,e,g){if(this._visibilityChanged||this.perObjectFrustumCulled||this.sortObjects){b=e.getIndex();b=null===b?1:b.array.BYTES_PER_ELEMENT;var h=this._active,l=this._visibility;e=this._multiDrawStarts;var n=this._multiDrawCounts,m=this._drawRanges,q=this.perObjectFrustumCulled;q&&(Nj.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse).multiply(this.matrixWorld),
Pg.setFromProjectionMatrix(Nj,a.coordinateSystem));a=0;if(this.sortObjects){ym.copy(this.matrixWorld).invert();Fi.setFromMatrixPosition(c.matrixWorld).applyMatrix4(ym);for(let t=0,w=l.length;t<w;t++)if(l[t]&&h[t]){this.getMatrixAt(t,ue);this.getBoundingSphereAt(t,gg).applyMatrix4(ue);var u=!1;q&&(u=!Pg.intersectsSphere(gg));u||(u=Fi.distanceTo(gg.center),sl.push(m[t],u))}h=sl.list;l=this.customSort;null===l?h.sort(g.transparent?jh:nj):l.call(this,h,c);for(let t=0,w=h.length;t<w;t++)c=h[t],e[a]=c.start*
b,n[a]=c.count,a++;sl.reset()}else for(let t=0,w=l.length;t<w;t++)l[t]&&h[t]&&(c=!1,q&&(this.getMatrixAt(t,ue),this.getBoundingSphereAt(t,gg).applyMatrix4(ue),c=!Pg.intersectsSphere(gg)),c||(c=m[t],e[a]=c.start*b,n[a]=c.count,a++));this._multiDrawCount=a;this._visibilityChanged=!1}}onBeforeShadow(a,b,c,e,g,h){this.onBeforeRender(a,null,e,g,h)}}class Nd extends Dd{constructor(a){super();this.isLineBasicMaterial=!0;this.type="LineBasicMaterial";this.color=new nb(16777215);this.map=null;this.linewidth=
1;this.linejoin=this.linecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.fog=a.fog;return this}}const Am=new O,Bm=new O,Cm=new Mb,Oj=new zg,Gi=new qd;class hg extends ec{constructor(a=new Kb,b=new Nd){super();this.isLine=!0;this.type="Line";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=Array.isArray(a.material)?
a.material.slice():a.material;this.geometry=a.geometry;return this}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,c=[0];for(let e=1,g=b.count;e<g;e++)Am.fromBufferAttribute(b,e-1),Bm.fromBufferAttribute(b,e),c[e]=c[e-1],c[e]+=Am.distanceTo(Bm);a.setAttribute("lineDistance",new pb(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(a,b){var c=this.geometry,e=this.matrixWorld,
g=a.params.Line.threshold,h=c.drawRange;null===c.boundingSphere&&c.computeBoundingSphere();Gi.copy(c.boundingSphere);Gi.applyMatrix4(e);Gi.radius+=g;if(!1!==a.ray.intersectsSphere(Gi)){Cm.copy(e).invert();Oj.copy(a.ray).applyMatrix4(Cm);e=g/((this.scale.x+this.scale.y+this.scale.z)/3);e*=e;g=new O;var l=new O,n=new O,m=new O,q=this.isLineSegments?2:1,u=c.index;c=c.attributes.position;if(null!==u){var t=Math.max(0,h.start);h=Math.min(u.count,h.start+h.count);for(let w=t,B=h-1;w<B;w+=q)h=u.getX(w),
t=u.getX(w+1),g.fromBufferAttribute(c,h),l.fromBufferAttribute(c,t),Oj.distanceSqToSegment(g,l,m,n)>e||(m.applyMatrix4(this.matrixWorld),h=a.ray.origin.distanceTo(m),h<a.near||h>a.far||b.push({distance:h,point:n.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this}))}else{u=Math.max(0,h.start);h=Math.min(c.count,h.start+h.count);for(let w=u,B=h-1;w<B;w+=q)g.fromBufferAttribute(c,w),l.fromBufferAttribute(c,w+1),Oj.distanceSqToSegment(g,l,m,n)>e||(m.applyMatrix4(this.matrixWorld),
h=a.ray.origin.distanceTo(m),h<a.near||h>a.far||b.push({distance:h,point:n.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this}))}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let c=0,e=a.length;c<e;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=c}}}const Dm=new O,Em=new O;class We extends hg{constructor(a,
b){super(a,b);this.isLineSegments=!0;this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(null===a.index){const b=a.attributes.position,c=[];for(let e=0,g=b.count;e<g;e+=2)Dm.fromBufferAttribute(b,e),Em.fromBufferAttribute(b,e+1),c[e]=0===e?0:c[e-1],c[e+1]=c[e]+Dm.distanceTo(Em);a.setAttribute("lineDistance",new pb(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Fm extends hg{constructor(a,
b){super(a,b);this.isLineLoop=!0;this.type="LineLoop"}}class Pj extends Dd{constructor(a){super();this.isPointsMaterial=!0;this.type="PointsMaterial";this.color=new nb(16777215);this.alphaMap=this.map=null;this.size=1;this.fog=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.fog=a.fog;return this}}const Gm=new Mb,Pk=new zg,Hi=new qd,Qj=new O;class Hm extends ec{constructor(a=
new Kb,b=new Pj){super();this.isPoints=!0;this.type="Points";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a,b){super.copy(a,b);this.material=Array.isArray(a.material)?a.material.slice():a.material;this.geometry=a.geometry;return this}raycast(a,b){var c=this.geometry;const e=this.matrixWorld;var g=a.params.Points.threshold,h=c.drawRange;null===c.boundingSphere&&c.computeBoundingSphere();Hi.copy(c.boundingSphere);Hi.applyMatrix4(e);Hi.radius+=g;if(!1!==a.ray.intersectsSphere(Hi)){Gm.copy(e).invert();
Pk.copy(a.ray).applyMatrix4(Gm);g/=(this.scale.x+this.scale.y+this.scale.z)/3;g*=g;var l=c.index;c=c.attributes.position;if(null!==l){const n=Math.max(0,h.start);h=Math.min(l.count,h.start+h.count);for(let m=n,q=h;m<q;m++)h=l.getX(m),Qj.fromBufferAttribute(c,h),Ok(Qj,h,g,e,a,b,this)}else{l=Math.max(0,h.start);h=Math.min(c.count,h.start+h.count);for(let n=l,m=h;n<m;n++)Qj.fromBufferAttribute(c,n),Ok(Qj,n,g,e,a,b,this)}}}updateMorphTargets(){var a=this.geometry.morphAttributes,b=Object.keys(a);if(0<
b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let c=0,e=a.length;c<e;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=c}}}class tn extends Pc{constructor(a,b,c,e,g,h,l,n,m){function q(){u.needsUpdate=!0;a.requestVideoFrameCallback(q)}super(a,b,c,e,g,h,l,n,m);this.isVideoTexture=!0;this.minFilter=void 0!==h?h:1006;this.magFilter=void 0!==g?g:1006;this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in
a&&a.requestVideoFrameCallback(q)}clone(){return(new this.constructor(this.image)).copy(this)}update(){const a=this.image;!1==="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class un extends Pc{constructor(a,b){super({width:a,height:b});this.isFramebufferTexture=!0;this.minFilter=this.magFilter=1003;this.generateMipmaps=!1;this.needsUpdate=!0}}class Ah extends Pc{constructor(a,b,c,e,g,h,l,n,m,q,u,t){super(null,h,l,n,m,q,e,g,u,t);this.isCompressedTexture=
!0;this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}}class Ii extends Ah{constructor(a,b,c,e,g,h){super(a,b,c,g,h);this.isCompressedArrayTexture=!0;this.image.depth=e;this.wrapR=1001}}class vn extends Ah{constructor(a,b,c){super(void 0,a[0].width,a[0].height,b,c,301);this.isCubeTexture=this.isCompressedCubeTexture=!0;this.image=a}}class Im extends Pc{constructor(a,b,c,e,g,h,l,n,m){super(a,b,c,e,g,h,l,n,m);this.needsUpdate=this.isCanvasTexture=!0}}class ve{constructor(){this.type=
"Curve";this.arcLengthDivisions=200}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null}getPointAt(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)}getPoints(a=5){const b=[];for(let c=0;c<=a;c++)b.push(this.getPoint(c/a));return b}getSpacedPoints(a=5){const b=[];for(let c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===
a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const b=[];let c,e=this.getPoint(0),g=0;b.push(0);for(let h=1;h<=a;h++)c=this.getPoint(h/a),g+=c.distanceTo(e),b.push(g),e=c;return this.cacheArcLengths=b}updateArcLengths(){this.needsUpdate=!0;this.getLengths()}getUtoTmapping(a,b){const c=this.getLengths(),e=c.length;b=b?b:a*c[e-1];var g=0;let h=e-1,l;for(;g<=h;)if(a=Math.floor(g+(h-g)/2),l=c[a]-b,0>l)g=a+1;else if(0<l)h=a-1;else{h=a;break}a=h;if(c[a]===b)return a/(e-1);g=c[a];
return(a+(b-g)/(c[a+1]-g))/(e-1)}getTangent(a,b){var c=a-1E-4;a+=1E-4;0>c&&(c=0);1<a&&(a=1);c=this.getPoint(c);a=this.getPoint(a);b=b||(c.isVector2?new Fa:new O);b.copy(a).sub(c).normalize();return b}getTangentAt(a,b){a=this.getUtoTmapping(a);return this.getTangent(a,b)}computeFrenetFrames(a,b){var c=new O;const e=[],g=[],h=[];var l=new O;const n=new Mb;for(var m=0;m<=a;m++)e[m]=this.getTangentAt(m/a,new O);g[0]=new O;h[0]=new O;m=Number.MAX_VALUE;const q=Math.abs(e[0].x),u=Math.abs(e[0].y),t=Math.abs(e[0].z);
q<=m&&(m=q,c.set(1,0,0));u<=m&&(m=u,c.set(0,1,0));t<=m&&c.set(0,0,1);l.crossVectors(e[0],c).normalize();g[0].crossVectors(e[0],l);h[0].crossVectors(e[0],g[0]);for(c=1;c<=a;c++)g[c]=g[c-1].clone(),h[c]=h[c-1].clone(),l.crossVectors(e[c-1],e[c]),l.length()>Number.EPSILON&&(l.normalize(),m=Math.acos(Gb(e[c-1].dot(e[c]),-1,1)),g[c].applyMatrix4(n.makeRotationAxis(l,m))),h[c].crossVectors(e[c],g[c]);if(!0===b)for(b=Math.acos(Gb(g[0].dot(g[a]),-1,1)),b/=a,0<e[0].dot(l.crossVectors(g[0],g[a]))&&(b=-b),l=
1;l<=a;l++)g[l].applyMatrix4(n.makeRotationAxis(e[l],b*l)),h[l].crossVectors(e[l],g[l]);return{tangents:e,normals:g,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}toJSON(){const a={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a}fromJSON(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}}class Ji extends ve{constructor(a=0,b=
0,c=1,e=1,g=0,h=2*Math.PI,l=!1,n=0){super();this.isEllipseCurve=!0;this.type="EllipseCurve";this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=e;this.aStartAngle=g;this.aEndAngle=h;this.aClockwise=l;this.aRotation=n}getPoint(a,b=new Fa){for(var c=2*Math.PI,e=this.aEndAngle-this.aStartAngle,g=Math.abs(e)<Number.EPSILON;0>e;)e+=c;for(;e>c;)e-=c;e<Number.EPSILON&&(e=g?0:c);!0!==this.aClockwise||g||(e=e===c?-c:e-c);c=this.aStartAngle+a*e;a=this.aX+this.xRadius*Math.cos(c);var h=this.aY+this.yRadius*Math.sin(c);
0!==this.aRotation&&(c=Math.cos(this.aRotation),e=Math.sin(this.aRotation),g=a-this.aX,h-=this.aY,a=g*c-h*e+this.aX,h=g*e+h*c+this.aY);return b.set(a,h)}copy(a){super.copy(a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}toJSON(){const a=super.toJSON();a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;
a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a}fromJSON(a){super.fromJSON(a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}}class Rg extends Ji{constructor(a,b,c,e,g,h){super(a,b,c,c,e,g,h);this.isArcCurve=!0;this.type="ArcCurve"}}const Rj=new O,Sg=new kh,Tg=new kh,Sj=new kh;class Tj extends ve{constructor(a=
[],b=!1,c="centripetal",e=.5){super();this.isCatmullRomCurve3=!0;this.type="CatmullRomCurve3";this.points=a;this.closed=b;this.curveType=c;this.tension=e}getPoint(a,b=new O){var c=this.points,e=c.length;a*=e-(this.closed?0:1);var g=Math.floor(a);a-=g;this.closed?g+=0<g?0:(Math.floor(Math.abs(g)/e)+1)*e:0===a&&g===e-1&&(g=e-2,a=1);let h;this.closed||0<g?h=c[(g-1)%e]:(Rj.subVectors(c[0],c[1]).add(c[0]),h=Rj);const l=c[g%e],n=c[(g+1)%e];this.closed||g+2<e?c=c[(g+2)%e]:(Rj.subVectors(c[e-1],c[e-2]).add(c[e-
1]),c=Rj);if("centripetal"===this.curveType||"chordal"===this.curveType){var m="chordal"===this.curveType?.5:.25;e=Math.pow(h.distanceToSquared(l),m);g=Math.pow(l.distanceToSquared(n),m);m=Math.pow(n.distanceToSquared(c),m);1E-4>g&&(g=1);1E-4>e&&(e=g);1E-4>m&&(m=g);Sg.initNonuniformCatmullRom(h.x,l.x,n.x,c.x,e,g,m);Tg.initNonuniformCatmullRom(h.y,l.y,n.y,c.y,e,g,m);Sj.initNonuniformCatmullRom(h.z,l.z,n.z,c.z,e,g,m)}else"catmullrom"===this.curveType&&(Sg.initCatmullRom(h.x,l.x,n.x,c.x,this.tension),
Tg.initCatmullRom(h.y,l.y,n.y,c.y,this.tension),Sj.initCatmullRom(h.z,l.z,n.z,c.z,this.tension));b.set(Sg.calc(a),Tg.calc(a),Sj.calc(a));return b}copy(a){super.copy(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;
a.tension=this.tension;return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++){const e=a.points[b];this.points.push((new O).fromArray(e))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}}class Uj extends ve{constructor(a=new Fa,b=new Fa,c=new Fa,e=new Fa){super();this.isCubicBezierCurve=!0;this.type="CubicBezierCurve";this.v0=a;this.v1=b;this.v2=c;this.v3=e}getPoint(a,b=new Fa){const c=this.v0,e=this.v1,g=this.v2,h=this.v3;b.set($h(a,
c.x,e.x,g.x,h.x),$h(a,c.y,e.y,g.y,h.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class tl extends ve{constructor(a=new O,b=new O,c=new O,e=new O){super();
this.isCubicBezierCurve3=!0;this.type="CubicBezierCurve3";this.v0=a;this.v1=b;this.v2=c;this.v3=e}getPoint(a,b=new O){const c=this.v0,e=this.v1,g=this.v2,h=this.v3;b.set($h(a,c.x,e.x,g.x,h.x),$h(a,c.y,e.y,g.y,h.y),$h(a,c.z,e.z,g.z,h.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);
this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}class ke extends ve{constructor(a=new Fa,b=new Fa){super();this.isLineCurve=!0;this.type="LineCurve";this.v1=a;this.v2=b}getPoint(a,b=new Fa){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b=new Fa){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,
b)}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Jm extends ve{constructor(a=new O,b=new O){super();this.isLineCurve3=!0;this.type="LineCurve3";this.v1=a;this.v2=b}getPoint(a,b=new O){1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,
b){return this.getPoint(a,b)}getTangent(a,b=new O){return b.subVectors(this.v2,this.v1).normalize()}getTangentAt(a,b){return this.getTangent(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class ig extends ve{constructor(a=new Fa,b=new Fa,c=new Fa){super();this.isQuadraticBezierCurve=!0;this.type=
"QuadraticBezierCurve";this.v0=a;this.v1=b;this.v2=c}getPoint(a,b=new Fa){const c=this.v0,e=this.v1,g=this.v2;b.set(wg(a,c.x,e.x,g.x),wg(a,c.y,e.y,g.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Ki extends ve{constructor(a=
new O,b=new O,c=new O){super();this.isQuadraticBezierCurve3=!0;this.type="QuadraticBezierCurve3";this.v0=a;this.v1=b;this.v2=c}getPoint(a,b=new O){const c=this.v0,e=this.v1,g=this.v2;b.set(wg(a,c.x,e.x,g.x),wg(a,c.y,e.y,g.y),wg(a,c.z,e.z,g.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);
this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class Ug extends ve{constructor(a=[]){super();this.isSplineCurve=!0;this.type="SplineCurve";this.points=a}getPoint(a,b=new Fa){var c=this.points,e=(c.length-1)*a;a=Math.floor(e);e-=a;const g=c[0===a?a:a-1],h=c[a],l=c[a>c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(Zh(e,g.x,h.x,l.x,c.x),Zh(e,g.y,h.y,l.y,c.y));return b}copy(a){super.copy(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());
return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++){const e=a.points[b];this.points.push((new Fa).fromArray(e))}return this}}var Bh=Object.freeze({__proto__:null,ArcCurve:Rg,CatmullRomCurve3:Tj,CubicBezierCurve:Uj,CubicBezierCurve3:tl,EllipseCurve:Ji,LineCurve:ke,LineCurve3:Jm,QuadraticBezierCurve:ig,QuadraticBezierCurve3:Ki,
SplineCurve:Ug});class Vg extends ve{constructor(){super();this.type="CurvePath";this.curves=[];this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Bh[!0===a.isVector2?"LineCurve":"LineCurve3"](b,a));return this}getPoint(a,b){var c=a*this.getLength(),e=this.getCurveLengths();for(a=0;a<e.length;){if(e[a]>=c)return c=e[a]-c,a=this.curves[a],e=a.getLength(),a.getPointAt(0===e?0:1-
c/e,b);a++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let b=0;for(let c=0,e=this.curves.length;c<e;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a}getSpacedPoints(a=40){const b=[];for(let c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&
b.push(b[0]);return b}getPoints(a=12){const b=[];let c;for(let g=0,h=this.curves;g<h.length;g++){var e=h[g];e=e.getPoints(e.isEllipseCurve?2*a:e.isLineCurve||e.isLineCurve3?1:e.isSplineCurve?a*e.points.length:a);for(let l=0;l<e.length;l++){const n=e[l];c&&c.equals(n)||(b.push(n),c=n)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b}copy(a){super.copy(a);this.curves=[];for(let b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;
return this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose;a.curves=[];for(let b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.autoClose=a.autoClose;this.curves=[];for(let b=0,c=a.curves.length;b<c;b++){const e=a.curves[b];this.curves.push((new Bh[e.type]).fromJSON(e))}return this}}class Wg extends Vg{constructor(a){super();this.type="Path";this.currentPoint=new Fa;a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,
a[0].y);for(let b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y);return this}moveTo(a,b){this.currentPoint.set(a,b);return this}lineTo(a,b){const c=new ke(this.currentPoint.clone(),new Fa(a,b));this.curves.push(c);this.currentPoint.set(a,b);return this}quadraticCurveTo(a,b,c,e){a=new ig(this.currentPoint.clone(),new Fa(a,b),new Fa(c,e));this.curves.push(a);this.currentPoint.set(c,e);return this}bezierCurveTo(a,b,c,e,g,h){a=new Uj(this.currentPoint.clone(),new Fa(a,b),new Fa(c,e),new Fa(g,h));this.curves.push(a);
this.currentPoint.set(g,h);return this}splineThru(a){var b=[this.currentPoint.clone()].concat(a);b=new Ug(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1]);return this}arc(a,b,c,e,g,h){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,e,g,h);return this}absarc(a,b,c,e,g,h){this.absellipse(a,b,c,c,e,g,h);return this}ellipse(a,b,c,e,g,h,l,n){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,e,g,h,l,n);return this}absellipse(a,b,c,e,g,h,l,n){a=new Ji(a,b,c,e,g,h,l,n);0<
this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a);return this}copy(a){super.copy(a);this.currentPoint.copy(a.currentPoint);return this}toJSON(){const a=super.toJSON();a.currentPoint=this.currentPoint.toArray();return a}fromJSON(a){super.fromJSON(a);this.currentPoint.fromArray(a.currentPoint);return this}}class Li extends Kb{constructor(a=[new Fa(0,-.5),new Fa(.5,0),new Fa(0,.5)],b=12,c=0,e=2*Math.PI){super();
this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:e};b=Math.floor(b);e=Gb(e,0,2*Math.PI);const g=[],h=[],l=[];var n=[];const m=[];var q=1/b,u=new O,t=new Fa,w=new O,B=new O,z=new O;let D;for(let A=0;A<=a.length-1;A++)switch(A){case 0:var J=a[A+1].x-a[A].x;D=a[A+1].y-a[A].y;w.x=1*D;w.y=-J;w.z=0*D;z.copy(w);w.normalize();n.push(w.x,w.y,w.z);break;case a.length-1:n.push(z.x,z.y,z.z);break;default:J=a[A+1].x-a[A].x,D=a[A+1].y-a[A].y,w.x=1*D,w.y=-J,w.z=0*D,B.copy(w),w.x+=
z.x,w.y+=z.y,w.z+=z.z,w.normalize(),n.push(w.x,w.y,w.z),z.copy(B)}for(w=0;w<=b;w++)for(z=c+w*q*e,B=Math.sin(z),z=Math.cos(z),J=0;J<=a.length-1;J++)u.x=a[J].x*B,u.y=a[J].y,u.z=a[J].x*z,h.push(u.x,u.y,u.z),t.x=w/b,t.y=J/(a.length-1),l.push(t.x,t.y),m.push(n[3*J]*B,n[3*J+1],n[3*J]*z);for(c=0;c<b;c++)for(e=0;e<a.length-1;e++)n=e+c*a.length,q=n+a.length,u=n+a.length+1,t=n+1,g.push(n,q,t),g.push(u,t,q);this.setIndex(g);this.setAttribute("position",new pb(h,3));this.setAttribute("uv",new pb(l,2));this.setAttribute("normal",
new pb(m,3))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Li(a.points,a.segments,a.phiStart,a.phiLength)}}class Vj extends Li{constructor(a=1,b=1,c=4,e=8){const g=new Wg;g.absarc(0,-b/2,a,1.5*Math.PI,0);g.absarc(0,b/2,a,0,.5*Math.PI);super(g.getPoints(c),e);this.type="CapsuleGeometry";this.parameters={radius:a,length:b,capSegments:c,radialSegments:e}}static fromJSON(a){return new Vj(a.radius,a.length,a.capSegments,a.radialSegments)}}
class Wj extends Kb{constructor(a=1,b=32,c=0,e=2*Math.PI){super();this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:e};b=Math.max(3,b);const g=[],h=[],l=[],n=[],m=new O,q=new Fa;h.push(0,0,0);l.push(0,0,1);n.push(.5,.5);for(let u=0,t=3;u<=b;u++,t+=3){const w=c+u/b*e;m.x=a*Math.cos(w);m.y=a*Math.sin(w);h.push(m.x,m.y,m.z);l.push(0,0,1);q.x=(h[t]/a+1)/2;q.y=(h[t+1]/a+1)/2;n.push(q.x,q.y)}for(a=1;a<=b;a++)g.push(a,a+1,0);this.setIndex(g);this.setAttribute("position",
new pb(h,3));this.setAttribute("normal",new pb(l,3));this.setAttribute("uv",new pb(n,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Wj(a.radius,a.segments,a.thetaStart,a.thetaLength)}}class Ch extends Kb{constructor(a=1,b=1,c=1,e=32,g=1,h=!1,l=0,n=2*Math.PI){function m(K){const oa=z;var R=new Fa,U=new O;let ja=0;var ka=!0===K?a:b;const ea=!0===K?1:-1;for(var xa=1;xa<=e;xa++)t.push(0,J*ea,0),w.push(0,ea,0),B.push(.5,.5),z++;xa=z;for(let Da=
0;Da<=e;Da++){var ta=Da/e*n+l;const Va=Math.cos(ta);ta=Math.sin(ta);U.x=ka*ta;U.y=J*ea;U.z=ka*Va;t.push(U.x,U.y,U.z);w.push(0,ea,0);R.x=.5*Va+.5;R.y=.5*ta*ea+.5;B.push(R.x,R.y);z++}for(R=0;R<e;R++)U=oa+R,ka=xa+R,!0===K?u.push(ka,ka+1,U):u.push(ka+1,ka,U),ja+=3;q.addGroup(A,ja,!0===K?1:2);A+=ja}super();this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:e,heightSegments:g,openEnded:h,thetaStart:l,thetaLength:n};const q=this;e=Math.floor(e);g=Math.floor(g);
const u=[],t=[],w=[],B=[];let z=0;const D=[],J=c/2;let A=0;(function(){var K=new O,oa=new O;let R=0;var U=(b-a)/c;for(var ja=0;ja<=g;ja++){var ka=[];const xa=ja/g,ta=xa*(b-a)+a;for(let Da=0;Da<=e;Da++){const Va=Da/e;var ea=Va*n+l;const ra=Math.sin(ea);ea=Math.cos(ea);oa.x=ta*ra;oa.y=-xa*c+J;oa.z=ta*ea;t.push(oa.x,oa.y,oa.z);K.set(ra,U,ea).normalize();w.push(K.x,K.y,K.z);B.push(Va,1-xa);ka.push(z++)}D.push(ka)}for(K=0;K<e;K++)for(oa=0;oa<g;oa++)U=D[oa+1][K],ja=D[oa+1][K+1],ka=D[oa][K+1],u.push(D[oa][K],
U,ka),u.push(U,ja,ka),R+=6;q.addGroup(A,R,0);A+=R})();!1===h&&(0<a&&m(!0),0<b&&m(!1));this.setIndex(u);this.setAttribute("position",new pb(t,3));this.setAttribute("normal",new pb(w,3));this.setAttribute("uv",new pb(B,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Ch(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class Xj extends Ch{constructor(a=1,b=1,c=32,e=1,g=!1,h=
0,l=2*Math.PI){super(0,a,b,c,e,g,h,l);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:l}}static fromJSON(a){return new Xj(a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class jg extends Kb{constructor(a=[],b=[],c=1,e=0){function g(q){n.push(q.x,q.y,q.z)}function h(q,u){q*=3;u.x=a[q+0];u.y=a[q+1];u.z=a[q+2]}function l(q,u,t,w){0>w&&1===q.x&&(m[u]=q.x-1);0===t.x&&0===t.z&&
(m[u]=w/2/Math.PI+.5)}super();this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:e};const n=[],m=[];(function(q){const u=new O,t=new O,w=new O;for(let J=0;J<b.length;J+=3){h(b[J+0],u);h(b[J+1],t);h(b[J+2],w);const A=q+1,K=[];for(var B=0;B<=A;B++){K[B]=[];var z=u.clone().lerp(w,B/A),D=t.clone().lerp(w,B/A);const oa=A-B;for(let R=0;R<=oa;R++)K[B][R]=0===R&&B===A?z:z.clone().lerp(D,R/oa)}for(B=0;B<A;B++)for(z=0;z<2*(A-B)-1;z++)D=Math.floor(z/2),0===z%2?(g(K[B][D+1]),
g(K[B+1][D]),g(K[B][D])):(g(K[B][D+1]),g(K[B+1][D+1]),g(K[B+1][D]))}})(e);(function(q){const u=new O;for(let t=0;t<n.length;t+=3)u.x=n[t+0],u.y=n[t+1],u.z=n[t+2],u.normalize().multiplyScalar(q),n[t+0]=u.x,n[t+1]=u.y,n[t+2]=u.z})(c);(function(){var q=new O;for(var u=0;u<n.length;u+=3)q.x=n[u+0],q.y=n[u+1],q.z=n[u+2],m.push(Math.atan2(q.z,-q.x)/2/Math.PI+.5,1-(Math.atan2(-q.y,Math.sqrt(q.x*q.x+q.z*q.z))/Math.PI+.5));q=new O;u=new O;var t=new O,w=new O,B=new Fa;const z=new Fa,D=new Fa;for(let J=0,A=
0;J<n.length;J+=9,A+=6){q.set(n[J+0],n[J+1],n[J+2]);u.set(n[J+3],n[J+4],n[J+5]);t.set(n[J+6],n[J+7],n[J+8]);B.set(m[A+0],m[A+1]);z.set(m[A+2],m[A+3]);D.set(m[A+4],m[A+5]);w.copy(q).add(u).add(t).divideScalar(3);const K=Math.atan2(w.z,-w.x);l(B,A+0,q,K);l(z,A+2,u,K);l(D,A+4,t,K)}for(q=0;q<m.length;q+=6)u=m[q+0],t=m[q+2],w=m[q+4],B=Math.min(u,t,w),.9<Math.max(u,t,w)&&.1>B&&(.2>u&&(m[q+0]+=1),.2>t&&(m[q+2]+=1),.2>w&&(m[q+4]+=1))})();this.setAttribute("position",new pb(n,3));this.setAttribute("normal",
new pb(n.slice(),3));this.setAttribute("uv",new pb(m,2));0===e?this.computeVertexNormals():this.normalizeNormals()}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new jg(a.vertices,a.indices,a.radius,a.details)}}class Yj extends jg{constructor(a=1,b=0){const c=(1+Math.sqrt(5))/2,e=1/c;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-e,-c,0,-e,c,0,e,-c,0,e,c,-e,-c,0,-e,c,0,e,-c,0,e,c,0,-c,0,-e,c,0,-e,-c,0,e,c,0,e],[3,11,
7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new Yj(a.radius,a.detail)}}const Dh=new O,Eh=new O,ul=new O,Zj=new Zd;class Fh extends Kb{constructor(a=null,b=1){super();this.type="EdgesGeometry";
this.parameters={geometry:a,thresholdAngle:b};if(null!==a){const e=Math.pow(10,4);b=Math.cos(lf*b);const g=a.getIndex();a=a.getAttribute("position");const h=g?g.count:a.count,l=[0,0,0],n=["a","b","c"],m=Array(3),q={},u=[];for(let t=0;t<h;t+=3){g?(l[0]=g.getX(t),l[1]=g.getX(t+1),l[2]=g.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const {a:w,b:B,c:z}=Zj;w.fromBufferAttribute(a,l[0]);B.fromBufferAttribute(a,l[1]);z.fromBufferAttribute(a,l[2]);Zj.getNormal(ul);m[0]=`${Math.round(w.x*e)},${Math.round(w.y*e)},${Math.round(w.z*
e)}`;m[1]=`${Math.round(B.x*e)},${Math.round(B.y*e)},${Math.round(B.z*e)}`;m[2]=`${Math.round(z.x*e)},${Math.round(z.y*e)},${Math.round(z.z*e)}`;if(m[0]!==m[1]&&m[1]!==m[2]&&m[2]!==m[0])for(let D=0;3>D;D++){const J=(D+1)%3;var c=m[D];const A=m[J],K=Zj[n[D]],oa=Zj[n[J]],R=`${c}_${A}`;c=`${A}_${c}`;c in q&&q[c]?(ul.dot(q[c].normal)<=b&&(u.push(K.x,K.y,K.z),u.push(oa.x,oa.y,oa.z)),q[c]=null):R in q||(q[R]={index0:l[D],index1:l[J],normal:ul.clone()})}}for(const t in q)if(q[t]){const {index0:w,index1:B}=
q[t];Dh.fromBufferAttribute(a,w);Eh.fromBufferAttribute(a,B);u.push(Dh.x,Dh.y,Dh.z);u.push(Eh.x,Eh.y,Eh.z)}this.setAttribute("position",new pb(u,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}class Xg extends Wg{constructor(a){super(a);this.uuid=wa();this.type="Shape";this.holes=[]}getPointsHoles(a){const b=[];for(let c=0,e=this.holes.length;c<e;c++)b[c]=this.holes[c].getPoints(a);return b}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a);
this.holes=[];for(let b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid;a.holes=[];for(let b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.uuid=a.uuid;this.holes=[];for(let b=0,c=a.holes.length;b<c;b++){const e=a.holes[b];this.holes.push((new Wg).fromJSON(e))}return this}}const ak={triangulate:function(a,b,c=2){var e=b&&b.length;const g=e?b[0]*c:a.length;var h=
oj(a,0,g,c,!0);const l=[];if(!h||h.next===h.prev)return l;let n,m;var q;if(e){var u=h;h=[];var t;e=0;for(t=b.length;e<t;e++){var w=b[e]*c;var B=e<t-1?b[e+1]*c:a.length;var z=oj(a,w,B,c,!1);z===z.next&&(z.steiner=!0);w=h;B=w.push;var D=z,J=z;do{if(D.x<J.x||D.x===J.x&&D.y<J.y)J=D;D=D.next}while(D!==z);B.call(w,J)}h.sort(ai);for(e=0;e<h.length;e++){t=void 0;b=h[e];b:{w=u;B=-Infinity;z=b.x;D=b.y;do{if(D<=w.y&&D>=w.next.y&&w.next.y!==w.y&&(J=w.x+(D-w.y)*(w.next.x-w.x)/(w.next.y-w.y),J<=z&&J>B&&(B=J,t=
w.x<w.next.x?w:w.next,J===z)))break b;w=w.next}while(w!==u);if(t){var A=t,K=t.x,oa=t.y,R=Infinity;w=t;do{if(z>=w.x&&w.x>=K&&z!==w.x&&hf(D<oa?z:B,D,K,oa,D<oa?B:z,D,w.x,w.y)){J=Math.abs(D-w.y)/(z-w.x);var U;if((U=Sf(w,b))&&!(U=J<R)&&(U=J===R)&&!(U=w.x>t.x)&&(U=w.x===t.x)){U=t;var ja=w;U=0>qc(U.prev,U,ja.prev)&&0>qc(ja.next,U,U.next)}U&&(t=w,R=J)}w=w.next}while(w!==A)}else t=null}t&&(b=Rk(t,b),Td(b,b.next),u=Td(t,t.next))}h=u}if(a.length>80*c){n=q=a[0];m=e=a[1];for(t=c;t<g;t+=c)b=a[t],u=a[t+1],b<n&&
(n=b),u<m&&(m=u),b>q&&(q=b),u>e&&(e=u);q=Math.max(q-n,e-m);q=0!==q?32767/q:0}lh(h,l,c,n,m,q,0);return l}};class Cf{static area(a){const b=a.length;let c=0;for(let e=b-1,g=0;g<b;e=g++)c+=a[e].x*a[g].y-a[g].x*a[e].y;return.5*c}static isClockWise(a){return 0>Cf.area(a)}static triangulateShape(a,b){var c=[];const e=[],g=[];Sk(a);Wl(c,a);a=a.length;b.forEach(Sk);for(let h=0;h<b.length;h++)e.push(a),a+=b[h].length,Wl(c,b[h]);b=ak.triangulate(c,e);for(c=0;c<b.length;c+=3)g.push(b.slice(c,c+3));return g}}
class vl extends Kb{constructor(a=new Xg([new Fa(.5,.5),new Fa(-.5,.5),new Fa(-.5,-.5),new Fa(.5,-.5)]),b={}){function c(l){function n(M,Z,V){Z||console.error("THREE.ExtrudeGeometry: vec does not exist");return M.clone().addScaledVector(Z,V)}function m(M,Z,V){var Ga=M.x-Z.x;var fb=M.y-Z.y;var Wa=V.x-M.x;var Ea=V.y-M.y,P=Ga*Ga+fb*fb;if(Math.abs(Ga*Ea-fb*Wa)>Number.EPSILON){const Ha=Math.sqrt(P),za=Math.sqrt(Wa*Wa+Ea*Ea);P=Z.x-fb/Ha;Z=Z.y+Ga/Ha;Ea=((V.x-Ea/za-P)*Ea-(V.y+Wa/za-Z)*Wa)/(Ga*Ea-fb*Wa);Wa=
P+Ga*Ea-M.x;Ga=Z+fb*Ea-M.y;fb=Wa*Wa+Ga*Ga;if(2>=fb)return new Fa(Wa,Ga);fb=Math.sqrt(fb/2)}else M=!1,Ga>Number.EPSILON?Wa>Number.EPSILON&&(M=!0):Ga<-Number.EPSILON?Wa<-Number.EPSILON&&(M=!0):Math.sign(fb)===Math.sign(Ea)&&(M=!0),M?(Wa=-fb,fb=Math.sqrt(P)):(Wa=Ga,Ga=fb,fb=Math.sqrt(P/2));return new Fa(Wa/fb,Ga/fb)}function q(M,Z){let V=M.length;for(;0<=--V;){const Wa=V;let Ea=V-1;0>Ea&&(Ea=M.length-1);for(let P=0,Ha=J+2*ja;P<Ha;P++){var Ga=xb*P,fb=xb*(P+1);const za=Z+Ea+Ga,db=Z+Ea+fb;fb=Z+Wa+fb;w(Z+
Wa+Ga);w(za);w(fb);w(za);w(db);w(fb);Ga=g.length/3;Ga=ea.generateSideWallUV(e,g,Ga-6,Ga-3,Ga-2,Ga-1);B(Ga[0]);B(Ga[1]);B(Ga[3]);B(Ga[1]);B(Ga[2]);B(Ga[3])}}}function u(M,Z,V){z.push(M);z.push(Z);z.push(V)}function t(M,Z,V){w(M);w(Z);w(V);M=g.length/3;M=ea.generateTopUV(e,g,M-3,M-2,M-1);B(M[0]);B(M[1]);B(M[2])}function w(M){g.push(z[3*M]);g.push(z[3*M+1]);g.push(z[3*M+2])}function B(M){h.push(M.x);h.push(M.y)}const z=[];var D=void 0!==b.curveSegments?b.curveSegments:12;const J=void 0!==b.steps?b.steps:
1,A=void 0!==b.depth?b.depth:1;let K=void 0!==b.bevelEnabled?b.bevelEnabled:!0,oa=void 0!==b.bevelThickness?b.bevelThickness:.2,R=void 0!==b.bevelSize?b.bevelSize:oa-.1,U=void 0!==b.bevelOffset?b.bevelOffset:0,ja=void 0!==b.bevelSegments?b.bevelSegments:3;var ka=b.extrudePath;const ea=void 0!==b.UVGenerator?b.UVGenerator:wl;let xa,ta=!1;if(ka){xa=ka.getSpacedPoints(J);ta=!0;K=!1;var Da=ka.computeFrenetFrames(J,!1);var Va=new O;var ra=new O;var Xa=new O}K||(U=R=oa=ja=0);l=l.extractPoints(D);ka=l.shape;
const Ja=l.holes;if(!Cf.isClockWise(ka)){ka=ka.reverse();for(let M=0,Z=Ja.length;M<Z;M++)l=Ja[M],Cf.isClockWise(l)&&(Ja[M]=l.reverse())}const ib=Cf.triangulateShape(ka,Ja),Cb=ka;for(let M=0,Z=Ja.length;M<Z;M++)ka=ka.concat(Ja[M]);const xb=ka.length,Ya=ib.length;l=[];for(let M=0,Z=Cb.length,V=Z-1,Ga=M+1;M<Z;M++,V++,Ga++)V===Z&&(V=0),Ga===Z&&(Ga=0),l[M]=m(Cb[M],Cb[V],Cb[Ga]);D=[];let Ra=l.concat();for(let M=0,Z=Ja.length;M<Z;M++){var $a=Ja[M];var vb=[];for(let V=0,Ga=$a.length,fb=Ga-1,Wa=V+1;V<Ga;V++,
fb++,Wa++)fb===Ga&&(fb=0),Wa===Ga&&(Wa=0),vb[V]=m($a[V],$a[fb],$a[Wa]);D.push(vb);Ra=Ra.concat(vb)}for($a=0;$a<ja;$a++){vb=$a/ja;var G=oa*Math.cos(vb*Math.PI/2),H=R*Math.sin(vb*Math.PI/2)+U;for(let M=0,Z=Cb.length;M<Z;M++)vb=n(Cb[M],l[M],H),u(vb.x,vb.y,-G);for(let M=0,Z=Ja.length;M<Z;M++){const V=Ja[M];vb=D[M];for(let Ga=0,fb=V.length;Ga<fb;Ga++){const Wa=n(V[Ga],vb[Ga],H);u(Wa.x,Wa.y,-G)}}}vb=R+U;for($a=0;$a<xb;$a++)G=K?n(ka[$a],Ra[$a],vb):ka[$a],ta?(ra.copy(Da.normals[0]).multiplyScalar(G.x),Va.copy(Da.binormals[0]).multiplyScalar(G.y),
Xa.copy(xa[0]).add(ra).add(Va),u(Xa.x,Xa.y,Xa.z)):u(G.x,G.y,0);for($a=1;$a<=J;$a++)for(G=0;G<xb;G++)H=K?n(ka[G],Ra[G],vb):ka[G],ta?(ra.copy(Da.normals[$a]).multiplyScalar(H.x),Va.copy(Da.binormals[$a]).multiplyScalar(H.y),Xa.copy(xa[$a]).add(ra).add(Va),u(Xa.x,Xa.y,Xa.z)):u(H.x,H.y,A/J*$a);for(Da=ja-1;0<=Da;Da--){ra=Da/ja;Va=oa*Math.cos(ra*Math.PI/2);ra=R*Math.sin(ra*Math.PI/2)+U;for(let M=0,Z=Cb.length;M<Z;M++)Xa=n(Cb[M],l[M],ra),u(Xa.x,Xa.y,A+Va);for(let M=0,Z=Ja.length;M<Z;M++){Xa=Ja[M];vb=D[M];
for(let V=0,Ga=Xa.length;V<Ga;V++)ka=n(Xa[V],vb[V],ra),ta?u(ka.x,ka.y+xa[J-1].y,xa[J-1].x+Va):u(ka.x,ka.y,A+Va)}}(function(){const M=g.length/3;if(K){var Z=0*xb;for(var V=0;V<Ya;V++){var Ga=ib[V];t(Ga[2]+Z,Ga[1]+Z,Ga[0]+Z)}Z=xb*(J+2*ja);for(V=0;V<Ya;V++)Ga=ib[V],t(Ga[0]+Z,Ga[1]+Z,Ga[2]+Z)}else{for(Z=0;Z<Ya;Z++)V=ib[Z],t(V[2],V[1],V[0]);for(Z=0;Z<Ya;Z++)V=ib[Z],t(V[0]+xb*J,V[1]+xb*J,V[2]+xb*J)}e.addGroup(M,g.length/3-M,0)})();(function(){const M=g.length/3;let Z=0;q(Cb,Z);Z+=Cb.length;for(let V=0,
Ga=Ja.length;V<Ga;V++){const fb=Ja[V];q(fb,Z);Z+=fb.length}e.addGroup(M,g.length/3-M,1)})()}super();this.type="ExtrudeGeometry";this.parameters={shapes:a,options:b};a=Array.isArray(a)?a:[a];const e=this,g=[],h=[];for(let l=0,n=a.length;l<n;l++)c(a[l]);this.setAttribute("position",new pb(g,3));this.setAttribute("uv",new pb(h,2));this.computeVertexNormals()}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON(),b=this.parameters.shapes,c=this.parameters.options;
a.shapes=[];if(Array.isArray(b))for(let e=0,g=b.length;e<g;e++)a.shapes.push(b[e].uuid);else a.shapes.push(b.uuid);a.options=Object.assign({},c);void 0!==c.extrudePath&&(a.options.extrudePath=c.extrudePath.toJSON());return a}static fromJSON(a,b){const c=[];for(let e=0,g=a.shapes.length;e<g;e++)c.push(b[a.shapes[e]]);b=a.options.extrudePath;void 0!==b&&(a.options.extrudePath=(new Bh[b.type]).fromJSON(b));return new vl(c,a.options)}}const wl={generateTopUV:function(a,b,c,e,g){a=b[3*e];e=b[3*e+1];const h=
b[3*g];g=b[3*g+1];return[new Fa(b[3*c],b[3*c+1]),new Fa(a,e),new Fa(h,g)]},generateSideWallUV:function(a,b,c,e,g,h){a=b[3*c];const l=b[3*c+1];c=b[3*c+2];const n=b[3*e],m=b[3*e+1];e=b[3*e+2];const q=b[3*g],u=b[3*g+1];g=b[3*g+2];const t=b[3*h],w=b[3*h+1];b=b[3*h+2];return Math.abs(l-m)<Math.abs(a-n)?[new Fa(a,1-c),new Fa(n,1-e),new Fa(q,1-g),new Fa(t,1-b)]:[new Fa(l,1-c),new Fa(m,1-e),new Fa(u,1-g),new Fa(w,1-b)]}};class Mi extends jg{constructor(a=1,b=0){const c=(1+Math.sqrt(5))/2;super([-1,c,0,1,
c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new Mi(a.radius,a.detail)}}class Gh extends jg{constructor(a=1,b=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";
this.parameters={radius:a,detail:b}}static fromJSON(a){return new Gh(a.radius,a.detail)}}class xl extends Kb{constructor(a=.5,b=1,c=32,e=1,g=0,h=2*Math.PI){super();this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:e,thetaStart:g,thetaLength:h};c=Math.max(3,c);e=Math.max(1,e);const l=[],n=[],m=[],q=[];var u=a;a=(b-a)/e;var t=new O,w=new Fa;for(let B=0;B<=e;B++){for(let z=0;z<=c;z++){const D=g+z/c*h;t.x=u*Math.cos(D);t.y=u*Math.sin(D);n.push(t.x,t.y,t.z);
m.push(0,0,1);w.x=(t.x/b+1)/2;w.y=(t.y/b+1)/2;q.push(w.x,w.y)}u+=a}for(b=0;b<e;b++)for(g=b*(c+1),h=0;h<c;h++)u=h+g,a=u+c+1,t=u+c+2,w=u+1,l.push(u,a,w),l.push(a,t,w);this.setIndex(l);this.setAttribute("position",new pb(n,3));this.setAttribute("normal",new pb(m,3));this.setAttribute("uv",new pb(q,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new xl(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}
class bk extends Kb{constructor(a=new Xg([new Fa(0,.5),new Fa(-.5,-.5),new Fa(.5,-.5)]),b=12){function c(q){const u=g.length/3;var t=q.extractPoints(b);q=t.shape;var w=t.holes;!1===Cf.isClockWise(q)&&(q=q.reverse());for(let B=0,z=w.length;B<z;B++)t=w[B],!0===Cf.isClockWise(t)&&(w[B]=t.reverse());t=Cf.triangulateShape(q,w);for(let B=0,z=w.length;B<z;B++)q=q.concat(w[B]);for(let B=0,z=q.length;B<z;B++)w=q[B],g.push(w.x,w.y,0),h.push(0,0,1),l.push(w.x,w.y);for(let B=0,z=t.length;B<z;B++)q=t[B],e.push(q[0]+
u,q[1]+u,q[2]+u),m+=3}super();this.type="ShapeGeometry";this.parameters={shapes:a,curveSegments:b};const e=[],g=[],h=[],l=[];let n=0,m=0;if(!1===Array.isArray(a))c(a);else for(let q=0;q<a.length;q++)c(a[q]),this.addGroup(n,m,q),n+=m,m=0;this.setIndex(e);this.setAttribute("position",new pb(g,3));this.setAttribute("normal",new pb(h,3));this.setAttribute("uv",new pb(l,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON(),b=this.parameters.shapes;
a.shapes=[];if(Array.isArray(b))for(let c=0,e=b.length;c<e;c++)a.shapes.push(b[c].uuid);else a.shapes.push(b.uuid);return a}static fromJSON(a,b){const c=[];for(let e=0,g=a.shapes.length;e<g;e++)c.push(b[a.shapes[e]]);return new bk(c,a.curveSegments)}}class ck extends Kb{constructor(a=1,b=32,c=16,e=0,g=2*Math.PI,h=0,l=Math.PI){super();this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:e,phiLength:g,thetaStart:h,thetaLength:l};b=Math.max(3,Math.floor(b));
c=Math.max(2,Math.floor(c));const n=Math.min(h+l,Math.PI);var m=0;const q=[];var u=new O;const t=new O,w=[],B=[],z=[],D=[];for(let J=0;J<=c;J++){const A=[],K=J/c;let oa=0;0===J&&0===h?oa=.5/b:J===c&&n===Math.PI&&(oa=-.5/b);for(let R=0;R<=b;R++){const U=R/b;u.x=-a*Math.cos(e+U*g)*Math.sin(h+K*l);u.y=a*Math.cos(h+K*l);u.z=a*Math.sin(e+U*g)*Math.sin(h+K*l);B.push(u.x,u.y,u.z);t.copy(u).normalize();z.push(t.x,t.y,t.z);D.push(U+oa,1-K);A.push(m++)}q.push(A)}for(a=0;a<c;a++)for(e=0;e<b;e++)g=q[a][e+1],
l=q[a][e],m=q[a+1][e],u=q[a+1][e+1],(0!==a||0<h)&&w.push(g,l,u),(a!==c-1||n<Math.PI)&&w.push(l,m,u);this.setIndex(w);this.setAttribute("position",new pb(B,3));this.setAttribute("normal",new pb(z,3));this.setAttribute("uv",new pb(D,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new ck(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class kg extends jg{constructor(a=1,b=0){super([1,1,1,-1,-1,
1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new kg(a.radius,a.detail)}}class we extends Kb{constructor(a=1,b=.4,c=12,e=48,g=2*Math.PI){super();this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:e,arc:g};c=Math.floor(c);e=Math.floor(e);const h=[],l=[],n=[],m=[];var q=new O,u=new O;const t=new O;for(let w=0;w<=c;w++)for(let B=0;B<=e;B++){const z=B/e*g,D=w/c*Math.PI*
2;u.x=(a+b*Math.cos(D))*Math.cos(z);u.y=(a+b*Math.cos(D))*Math.sin(z);u.z=b*Math.sin(D);l.push(u.x,u.y,u.z);q.x=a*Math.cos(z);q.y=a*Math.sin(z);t.subVectors(u,q).normalize();n.push(t.x,t.y,t.z);m.push(B/e);m.push(w/c)}for(a=1;a<=c;a++)for(b=1;b<=e;b++)g=(e+1)*(a-1)+b-1,q=(e+1)*(a-1)+b,u=(e+1)*a+b,h.push((e+1)*a+b-1,g,u),h.push(g,q,u);this.setIndex(h);this.setAttribute("position",new pb(l,3));this.setAttribute("normal",new pb(n,3));this.setAttribute("uv",new pb(m,2))}copy(a){super.copy(a);this.parameters=
Object.assign({},a.parameters);return this}static fromJSON(a){return new we(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)}}class Yg extends Kb{constructor(a=1,b=.4,c=64,e=8,g=2,h=3){function l(R,U,ja,ka,ea){const xa=Math.sin(R);U=ja/U*R;ja=Math.cos(U);ea.x=ka*(2+ja)*.5*Math.cos(R);ea.y=ka*(2+ja)*xa*.5;ea.z=ka*Math.sin(U)*.5}super();this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:e,p:g,q:h};c=Math.floor(c);e=Math.floor(e);const n=[],m=[],
q=[],u=[];var t=new O;const w=new O,B=new O,z=new O,D=new O,J=new O,A=new O;for(let R=0;R<=c;++R){var K=R/c*g*Math.PI*2;l(K,g,h,a,B);l(K+.01,g,h,a,z);J.subVectors(z,B);A.addVectors(z,B);D.crossVectors(J,A);A.crossVectors(D,J);D.normalize();A.normalize();for(K=0;K<=e;++K){var oa=K/e*Math.PI*2;const U=-b*Math.cos(oa);oa=b*Math.sin(oa);t.x=B.x+(U*A.x+oa*D.x);t.y=B.y+(U*A.y+oa*D.y);t.z=B.z+(U*A.z+oa*D.z);m.push(t.x,t.y,t.z);w.subVectors(t,B).normalize();q.push(w.x,w.y,w.z);u.push(R/c);u.push(K/e)}}for(a=
1;a<=c;a++)for(b=1;b<=e;b++)g=(e+1)*a+(b-1),h=(e+1)*a+b,t=(e+1)*(a-1)+b,n.push((e+1)*(a-1)+(b-1),g,t),n.push(g,h,t);this.setIndex(n);this.setAttribute("position",new pb(m,3));this.setAttribute("normal",new pb(q,3));this.setAttribute("uv",new pb(u,2))}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}static fromJSON(a){return new Yg(a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q)}}class Me extends Kb{constructor(a=new Ki(new O(-1,-1,0),new O(-1,1,0),new O(1,
1,0)),b=64,c=1,e=8,g=!1){function h(D){u=a.getPointAt(D/b,u);const J=l.normals[D];D=l.binormals[D];for(let K=0;K<=e;K++){var A=K/e*Math.PI*2;const oa=Math.sin(A);A=-Math.cos(A);m.x=A*J.x+oa*D.x;m.y=A*J.y+oa*D.y;m.z=A*J.z+oa*D.z;m.normalize();w.push(m.x,m.y,m.z);n.x=u.x+c*m.x;n.y=u.y+c*m.y;n.z=u.z+c*m.z;t.push(n.x,n.y,n.z)}}super();this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:e,closed:g};const l=a.computeFrenetFrames(b,g);this.tangents=l.tangents;this.normals=
l.normals;this.binormals=l.binormals;const n=new O,m=new O,q=new Fa;let u=new O;const t=[],w=[],B=[],z=[];(function(){for(var D=0;D<b;D++)h(D);h(!1===g?b:0);for(D=0;D<=b;D++)for(var J=0;J<=e;J++)q.x=D/b,q.y=J/e,B.push(q.x,q.y);for(D=1;D<=b;D++)for(J=1;J<=e;J++){const A=(e+1)*D+(J-1),K=(e+1)*D+J,oa=(e+1)*(D-1)+J;z.push((e+1)*(D-1)+(J-1),A,oa);z.push(A,K,oa)}})();this.setIndex(z);this.setAttribute("position",new pb(t,3));this.setAttribute("normal",new pb(w,3));this.setAttribute("uv",new pb(B,2))}copy(a){super.copy(a);
this.parameters=Object.assign({},a.parameters);return this}toJSON(){const a=super.toJSON();a.path=this.parameters.path.toJSON();return a}static fromJSON(a){return new Me((new Bh[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed)}}class dk extends Kb{constructor(a=null){super();this.type="WireframeGeometry";this.parameters={geometry:a};if(null!==a){const h=[],l=new Set,n=new O,m=new O;if(null!==a.index){var b=a.attributes.position,c=a.index;a=a.groups;0===a.length&&
(a=[{start:0,count:c.count,materialIndex:0}]);for(let q=0,u=a.length;q<u;++q){var e=a[q],g=e.start;e=e.count;for(let t=g,w=g+e;t<w;t+=3)for(g=0;3>g;g++){e=c.getX(t+g);const B=c.getX(t+(g+1)%3);n.fromBufferAttribute(b,e);m.fromBufferAttribute(b,B);!0===kf(n,m,l)&&(h.push(n.x,n.y,n.z),h.push(m.x,m.y,m.z))}}}else{b=a.attributes.position;for(let q=0,u=b.count/3;q<u;q++)for(c=0;3>c;c++)a=3*q+(c+1)%3,n.fromBufferAttribute(b,3*q+c),m.fromBufferAttribute(b,a),!0===kf(n,m,l)&&(h.push(n.x,n.y,n.z),h.push(m.x,
m.y,m.z))}this.setAttribute("position",new pb(h,3))}}copy(a){super.copy(a);this.parameters=Object.assign({},a.parameters);return this}}var Km=Object.freeze({__proto__:null,BoxGeometry:ug,CapsuleGeometry:Vj,CircleGeometry:Wj,ConeGeometry:Xj,CylinderGeometry:Ch,DodecahedronGeometry:Yj,EdgesGeometry:Fh,ExtrudeGeometry:vl,IcosahedronGeometry:Mi,LatheGeometry:Li,OctahedronGeometry:Gh,PlaneGeometry:Lf,PolyhedronGeometry:jg,RingGeometry:xl,ShapeGeometry:bk,SphereGeometry:ck,TetrahedronGeometry:kg,TorusGeometry:we,
TorusKnotGeometry:Yg,TubeGeometry:Me,WireframeGeometry:dk});class Lm extends Dd{constructor(a){super();this.isShadowMaterial=!0;this.type="ShadowMaterial";this.color=new nb(0);this.fog=this.transparent=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.fog=a.fog;return this}}class ek extends Be{constructor(a){super(a);this.isRawShaderMaterial=!0;this.type="RawShaderMaterial"}}class lg extends Dd{constructor(a){super();this.isMeshStandardMaterial=!0;this.defines={STANDARD:""};
this.type="MeshStandardMaterial";this.color=new nb(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new nb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Fa(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapRotation=
new he;this.envMapIntensity=1;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;
this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapRotation.copy(a.envMapRotation);this.envMapIntensity=a.envMapIntensity;
this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class Df extends lg{constructor(a){super();this.isMeshPhysicalMaterial=!0;this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";this.anisotropyRotation=0;this.clearcoatMap=this.anisotropyMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=null;this.clearcoatNormalScale=
new Fa(1,1);this.clearcoatNormalMap=null;this.ior=1.5;Object.defineProperty(this,"reflectivity",{get:function(){return Gb(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(b){this.ior=(1+.4*b)/(1-.4*b)}});this.iridescenceMap=null;this.iridescenceIOR=1.3;this.iridescenceThicknessRange=[100,400];this.iridescenceThicknessMap=null;this.sheenColor=new nb(0);this.sheenColorMap=null;this.sheenRoughness=1;this.transmissionMap=this.sheenRoughnessMap=null;this.thickness=0;this.thicknessMap=null;this.attenuationDistance=
Infinity;this.attenuationColor=new nb(1,1,1);this.specularIntensity=1;this.specularIntensityMap=null;this.specularColor=new nb(1,1,1);this.specularColorMap=null;this._transmission=this._sheen=this._iridescence=this._clearcoat=this._anisotropy=0;this.setValues(a)}get anisotropy(){return this._anisotropy}set anisotropy(a){0<this._anisotropy!==0<a&&this.version++;this._anisotropy=a}get clearcoat(){return this._clearcoat}set clearcoat(a){0<this._clearcoat!==0<a&&this.version++;this._clearcoat=a}get iridescence(){return this._iridescence}set iridescence(a){0<
this._iridescence!==0<a&&this.version++;this._iridescence=a}get sheen(){return this._sheen}set sheen(a){0<this._sheen!==0<a&&this.version++;this._sheen=a}get transmission(){return this._transmission}set transmission(a){0<this._transmission!==0<a&&this.version++;this._transmission=a}copy(a){super.copy(a);this.defines={STANDARD:"",PHYSICAL:""};this.anisotropy=a.anisotropy;this.anisotropyRotation=a.anisotropyRotation;this.anisotropyMap=a.anisotropyMap;this.clearcoat=a.clearcoat;this.clearcoatMap=a.clearcoatMap;
this.clearcoatRoughness=a.clearcoatRoughness;this.clearcoatRoughnessMap=a.clearcoatRoughnessMap;this.clearcoatNormalMap=a.clearcoatNormalMap;this.clearcoatNormalScale.copy(a.clearcoatNormalScale);this.ior=a.ior;this.iridescence=a.iridescence;this.iridescenceMap=a.iridescenceMap;this.iridescenceIOR=a.iridescenceIOR;this.iridescenceThicknessRange=[...a.iridescenceThicknessRange];this.iridescenceThicknessMap=a.iridescenceThicknessMap;this.sheen=a.sheen;this.sheenColor.copy(a.sheenColor);this.sheenColorMap=
a.sheenColorMap;this.sheenRoughness=a.sheenRoughness;this.sheenRoughnessMap=a.sheenRoughnessMap;this.transmission=a.transmission;this.transmissionMap=a.transmissionMap;this.thickness=a.thickness;this.thicknessMap=a.thicknessMap;this.attenuationDistance=a.attenuationDistance;this.attenuationColor.copy(a.attenuationColor);this.specularIntensity=a.specularIntensity;this.specularIntensityMap=a.specularIntensityMap;this.specularColor.copy(a.specularColor);this.specularColorMap=a.specularColorMap;return this}}
class vd extends Dd{constructor(a){super();this.isMeshPhongMaterial=!0;this.type="MeshPhongMaterial";this.color=new nb(16777215);this.specular=new nb(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new nb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Fa(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.envMapRotation=new he;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=
a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapRotation.copy(a.envMapRotation);
this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class Od extends Dd{constructor(a){super();this.isMeshToonMaterial=!0;this.defines={TOON:""};this.type="MeshToonMaterial";this.color=new nb(16777215);this.lightMap=this.gradientMap=this.map=null;
this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new nb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Fa(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);
this.map=a.map;this.gradientMap=a.gradientMap;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;
this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.fog=a.fog;return this}}class mg extends Dd{constructor(a){super();this.isMeshNormalMaterial=!0;this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Fa(1,1);this.displacementMap=null;this.displacementScale=
1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.flatShading=a.flatShading;
return this}}class Xe extends Dd{constructor(a){super();this.isMeshLambertMaterial=!0;this.type="MeshLambertMaterial";this.color=new nb(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new nb(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new Fa(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=
this.specularMap=null;this.envMapRotation=new he;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;
this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapRotation.copy(a.envMapRotation);this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class Ni extends Dd{constructor(a){super();this.isMeshMatcapMaterial=!0;this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new nb(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=
new Fa(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.flatShading=!1;this.fog=!0;this.setValues(a)}copy(a){super.copy(a);this.defines={MATCAP:""};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=
a.displacementBias;this.alphaMap=a.alphaMap;this.flatShading=a.flatShading;this.fog=a.fog;return this}}class fk extends Nd{constructor(a){super();this.isLineDashedMaterial=!0;this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}copy(a){super.copy(a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this}}const Hh={convertArray:ce,isTypedArray:Tk,getKeyframeOrder:qj,sortedArray:bi,flattenJSON:rj,subclip:function(a,b,c,e,g=30){a=a.clone();
a.name=b;b=[];for(let l=0;l<a.tracks.length;++l){const n=a.tracks[l],m=n.getValueSize(),q=[],u=[];for(let t=0;t<n.times.length;++t){var h=n.times[t]*g;if(!(h<c||h>=e))for(q.push(n.times[t]),h=0;h<m;++h)u.push(n.values[t*m+h])}0!==q.length&&(n.times=ce(q,n.times.constructor),n.values=ce(u,n.values.constructor),b.push(n))}a.tracks=b;c=Infinity;for(e=0;e<a.tracks.length;++e)c>a.tracks[e].times[0]&&(c=a.tracks[e].times[0]);for(e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*c);a.resetDuration();return a},
makeClipAdditive:function(a,b=0,c=a,e=30){0>=e&&(e=30);const g=c.tracks.length;b/=e;for(e=0;e<g;++e){const q=c.tracks[e],u=q.ValueTypeName;if("bool"===u||"string"===u)continue;const t=a.tracks.find(function(z){return z.name===q.name&&z.ValueTypeName===u});if(void 0===t)continue;var h=0,l=q.getValueSize();q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=l/3);let w=0;const B=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=B/3);var n=q.times.length-
1;if(b<=q.times[0])h=q.values.slice(h,l-h);else if(b>=q.times[n])n=n*l+h,h=q.values.slice(n,n+l-h);else{n=q.createInterpolant();var m=h;h=l-h;n.evaluate(b);h=n.resultBuffer.slice(m,h)}"quaternion"===u&&(new dd).fromArray(h).normalize().conjugate().toArray(h);l=t.times.length;for(n=0;n<l;++n)if(m=n*B+w,"quaternion"===u)dd.multiplyQuaternionsFlat(t.values,m,h,0,t.values,m);else{const z=B-2*w;for(let D=0;D<z;++D)t.values[m+D]-=h[D]}}a.blendMode=2501;return a}};class Ye{constructor(a,b,c,e){this.parameterPositions=
a;this._cachedIndex=0;this.resultBuffer=void 0!==e?e:new b.constructor(c);this.sampleValues=b;this.valueSize=c;this.settings=null;this.DefaultSettings_={}}evaluate(a){const b=this.parameterPositions;let c=this._cachedIndex;var e=b[c],g=b[c-1];a:{b:{c:{d:if(!(a<e)){for(var h=c+2;;){if(void 0===e){if(a<g)break d;this._cachedIndex=c=b.length;return this.copySampleValue_(c-1)}if(c===h)break;g=e;e=b[++c];if(a<e)break b}g=b.length;break c}if(a>=g)break a;else{e=b[1];a<e&&(c=2,g=e);for(h=c-2;;){if(void 0===
g)return this._cachedIndex=0,this.copySampleValue_(0);if(c===h)break;e=g;g=b[--c-1];if(a>=g)break b}g=c;c=0}}for(;c<g;)e=c+g>>>1,a<b[e]?g=e:c=e+1;e=b[c];g=b[c-1];if(void 0===g)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===e)return this._cachedIndex=c=b.length,this.copySampleValue_(c-1)}this._cachedIndex=c;this.intervalChanged_(c,g,e)}return this.interpolate_(c,g,a,e)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const b=this.resultBuffer,c=this.sampleValues,
e=this.valueSize;a*=e;for(let g=0;g!==e;++g)b[g]=c[a+g];return b}interpolate_(){throw Error("call to abstract method");}intervalChanged_(){}}class Oi extends Ye{constructor(a,b,c,e){super(a,b,c,e);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0;this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,b,c){var e=this.parameterPositions;let g=a-2,h=a+1,l=e[g],n=e[h];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:g=a;l=2*b-c;break;case 2402:g=
e.length-2;l=b+e[g]-e[g+1];break;default:g=a,l=c}if(void 0===n)switch(this.getSettings_().endingEnd){case 2401:h=a;n=2*c-b;break;case 2402:h=1;n=c+e[1]-e[0];break;default:h=a-1,n=b}a=.5*(c-b);e=this.valueSize;this._weightPrev=a/(b-l);this._weightNext=a/(n-c);this._offsetPrev=g*e;this._offsetNext=h*e}interpolate_(a,b,c,e){const g=this.resultBuffer,h=this.sampleValues,l=this.valueSize;a*=l;const n=a-l,m=this._offsetPrev,q=this._offsetNext;var u=this._weightPrev,t=this._weightNext,w=(c-b)/(e-b);c=w*
w;e=c*w;b=-u*e+2*u*c-u*w;u=(1+u)*e+(-1.5-2*u)*c+(-.5+u)*w+1;w=(-1-t)*e+(1.5+t)*c+.5*w;t=t*e-t*c;for(c=0;c!==l;++c)g[c]=b*h[m+c]+u*h[n+c]+w*h[a+c]+t*h[q+c];return g}}class Ih extends Ye{constructor(a,b,c,e){super(a,b,c,e)}interpolate_(a,b,c,e){const g=this.resultBuffer,h=this.sampleValues,l=this.valueSize;a*=l;const n=a-l;b=(c-b)/(e-b);c=1-b;for(e=0;e!==l;++e)g[e]=h[n+e]*c+h[a+e]*b;return g}}class le extends Ye{constructor(a,b,c,e){super(a,b,c,e)}interpolate_(a){return this.copySampleValue_(a-1)}}
class Tc{constructor(a,b,c,e){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=ce(b,this.TimeBufferType);this.values=ce(c,this.ValueBufferType);this.setInterpolation(e||this.DefaultInterpolation)}static toJSON(a){var b=a.constructor;if(b.toJSON!==this.toJSON)b=b.toJSON(a);else{b={name:a.name,times:ce(a.times,Array),values:ce(a.values,Array)};const c=a.getInterpolation();
c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b}InterpolantFactoryMethodDiscrete(a){return new le(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new Ih(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new Oi(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;
break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b);return this}this.createInterpolant=b;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;
case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const b=this.times;for(let c=0,e=b.length;c!==e;++c)b[c]+=a}return this}scale(a){if(1!==a){const b=this.times;for(let c=0,e=b.length;c!==e;++c)b[c]*=a}return this}trim(a,b){const c=this.times,e=c.length;let g=0,h=e-1;for(;g!==e&&c[g]<a;)++g;for(;-1!==h&&c[h]>b;)--h;++h;if(0!==g||h!==e)g>=h&&(h=Math.max(h,1),g=h-1),a=this.getValueSize(),this.times=c.slice(g,h),this.values=
this.values.slice(g*a,h*a);return this}validate(){let a=!0;var b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;const e=c.length;0===e&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let g=null;for(let h=0;h!==e;h++){const l=c[h];if("number"===typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,l);a=!1;break}if(null!==g&&g>l){console.error("THREE.KeyframeTrack: Out of order keys.",
this,h,l,g);a=!1;break}g=l}if(void 0!==b&&Tk(b))for(let h=0,l=b.length;h!==l;++h)if(c=b[h],isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,c);a=!1;break}return a}optimize(){const a=this.times.slice(),b=this.values.slice(),c=this.getValueSize(),e=2302===this.getInterpolation(),g=a.length-1;let h=1;for(let q=1;q<g;++q){var l=!1,n=a[q];if(n!==a[q+1]&&(1!==q||n!==a[0]))if(e)l=!0;else{n=q*c;var m=n-c;const u=n+c;for(let t=0;t!==c;++t){const w=b[n+t];if(w!==b[m+t]||w!==
b[u+t]){l=!0;break}}}if(l){if(q!==h)for(a[h]=a[q],l=q*c,n=h*c,m=0;m!==c;++m)b[n+m]=b[l+m];++h}}if(0<g){a[h]=a[g];for(let q=g*c,u=h*c,t=0;t!==c;++t)b[u+t]=b[q+t];++h}h!==a.length?(this.times=a.slice(0,h),this.values=b.slice(0,h*c)):(this.times=a,this.values=b);return this}clone(){var a=this.times.slice();const b=this.values.slice();a=new this.constructor(this.name,a,b);a.createInterpolant=this.createInterpolant;return a}}Tc.prototype.TimeBufferType=Float32Array;Tc.prototype.ValueBufferType=Float32Array;
Tc.prototype.DefaultInterpolation=2301;class ee extends Tc{}ee.prototype.ValueTypeName="bool";ee.prototype.ValueBufferType=Array;ee.prototype.DefaultInterpolation=2300;ee.prototype.InterpolantFactoryMethodLinear=void 0;ee.prototype.InterpolantFactoryMethodSmooth=void 0;class Fe extends Tc{}Fe.prototype.ValueTypeName="color";class de extends Tc{}de.prototype.ValueTypeName="number";class Yd extends Ye{constructor(a,b,c,e){super(a,b,c,e)}interpolate_(a,b,c,e){const g=this.resultBuffer,h=this.sampleValues,
l=this.valueSize;b=(c-b)/(e-b);a*=l;for(c=a+l;a!==c;a+=4)dd.slerpFlat(g,0,h,a-l,h,a,b);return g}}class hd extends Tc{InterpolantFactoryMethodLinear(a){return new Yd(this.times,this.values,this.getValueSize(),a)}}hd.prototype.ValueTypeName="quaternion";hd.prototype.DefaultInterpolation=2301;hd.prototype.InterpolantFactoryMethodSmooth=void 0;class rc extends Tc{}rc.prototype.ValueTypeName="string";rc.prototype.ValueBufferType=Array;rc.prototype.DefaultInterpolation=2300;rc.prototype.InterpolantFactoryMethodLinear=
void 0;rc.prototype.InterpolantFactoryMethodSmooth=void 0;class Id extends Tc{}Id.prototype.ValueTypeName="vector";class Pi{constructor(a,b=-1,c,e=2500){this.name=a;this.tracks=c;this.duration=b;this.blendMode=e;this.uuid=wa();0>this.duration&&this.resetDuration()}static parse(a){var b=[];const c=a.tracks,e=1/(a.fps||1);for(let n=0,m=c.length;n!==m;++n){var g=b,h=g.push;{var l=c[n];if(void 0===l.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");const q=Xl(l.type);if(void 0===
l.times){const u=[],t=[];rj(l.keys,u,t,"value");l.times=u;l.values=t}l=void 0!==q.parse?q.parse(l):new q(l.name,l.times,l.values,l.interpolation)}h.call(g,l.scale(e))}b=new this(a.name,a.duration,b,a.blendMode);b.uuid=a.uuid;return b}static toJSON(a){const b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid,blendMode:a.blendMode};for(let e=0,g=c.length;e!==g;++e)b.push(Tc.toJSON(c[e]));return a}static CreateFromMorphTargetSequence(a,b,c,e){const g=b.length,h=[];for(let l=0;l<g;l++){let n=
[],m=[];n.push((l+g-1)%g,l,(l+1)%g);m.push(0,1,0);const q=qj(n);n=bi(n,1,q);m=bi(m,1,q);e||0!==n[0]||(n.push(g),m.push(m[0]));h.push((new de(".morphTargetInfluences["+b[l].name+"]",n,m)).scale(1/c))}return new this(a,-1,h)}static findByName(a,b){let c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null}static CreateClipsFromMorphTargetSequences(a,b,c){const e={},g=/^([\w-]*?)([\d]+)$/;for(let l=0,n=a.length;l<n;l++){const m=
a[l];var h=m.name.match(g);if(h&&1<h.length){h=h[1];let q=e[h];q||(e[h]=q=[]);q.push(m)}}a=[];for(const l in e)a.push(this.CreateFromMorphTargetSequence(l,e[l],b,c));return a}static parseAnimation(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=function(u,t,w,B,z){if(0!==w.length){const D=[],J=[];rj(w,D,J,B);0!==D.length&&z.push(new u(t,D,J))}},e=[],g=a.name||"default",h=a.fps||30,l=a.blendMode;var n=a.length||-1;a=a.hierarchy||[];for(let u=0;u<
a.length;u++){const t=a[u].keys;if(t&&0!==t.length)if(t[0].morphTargets){n={};var m=void 0;for(m=0;m<t.length;m++)if(t[m].morphTargets)for(var q=0;q<t[m].morphTargets.length;q++)n[t[m].morphTargets[q]]=-1;for(const w in n){q=[];const B=[];for(let z=0;z!==t[m].morphTargets.length;++z){const D=t[m];q.push(D.time);B.push(D.morphTarget===w?1:0)}e.push(new de(".morphTargetInfluence["+w+"]",q,B))}n=n.length*h}else m=".bones["+b[u].name+"]",c(Id,m+".position",t,"pos",e),c(hd,m+".quaternion",t,"rot",e),c(Id,
m+".scale",t,"scl",e)}return 0===e.length?null:new this(g,n,e,l)}resetDuration(){var a=this.tracks;let b=0;for(let c=0,e=a.length;c!==e;++c)a=this.tracks[c],b=Math.max(b,a.times[a.times.length-1]);this.duration=b;return this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=
[];for(let b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}const xe={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class ng{constructor(a,b,c){const e=this;let g=!1,h=0,l=0,n=void 0;const m=[];this.onStart=void 0;
this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(q){l++;if(!1===g&&void 0!==e.onStart)e.onStart(q,h,l);g=!0};this.itemEnd=function(q){h++;if(void 0!==e.onProgress)e.onProgress(q,h,l);if(h===l&&(g=!1,void 0!==e.onLoad))e.onLoad()};this.itemError=function(q){if(void 0!==e.onError)e.onError(q)};this.resolveURL=function(q){return n?n(q):q};this.setURLModifier=function(q){n=q;return this};this.addHandler=function(q,u){m.push(q,u);return this};this.removeHandler=function(q){q=m.indexOf(q);
-1!==q&&m.splice(q,2);return this};this.getHandler=function(q){for(let u=0,t=m.length;u<t;u+=2){const w=m[u],B=m[u+1];w.global&&(w.lastIndex=0);if(w.test(q))return B}return null}}}const Ef=new ng;class jd{constructor(a){this.manager=void 0!==a?a:Ef;this.crossOrigin="anonymous";this.withCredentials=!1;this.resourcePath=this.path="";this.requestHeader={}}load(){}loadAsync(a,b){const c=this;return new Promise(function(e,g){c.load(a,e,b,g)})}parse(){}setCrossOrigin(a){this.crossOrigin=a;return this}setWithCredentials(a){this.withCredentials=
a;return this}setPath(a){this.path=a;return this}setResourcePath(a){this.resourcePath=a;return this}setRequestHeader(a){this.requestHeader=a;return this}}jd.DEFAULT_MATERIAL_NAME="__DEFAULT";const Pd={};class og extends Error{constructor(a,b){super(a);this.response=b}}class Ze extends jd{constructor(a){super(a)}load(a,b,c,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const g=xe.get(a);if(void 0!==g)return this.manager.itemStart(a),setTimeout(()=>{b&&b(g);this.manager.itemEnd(a)},
0),g;if(void 0!==Pd[a])Pd[a].push({onLoad:b,onProgress:c,onError:e});else{Pd[a]=[];Pd[a].push({onLoad:b,onProgress:c,onError:e});c=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});var h=this.mimeType,l=this.responseType;fetch(c).then(n=>{if(200===n.status||0===n.status){0===n.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");if("undefined"===typeof ReadableStream||void 0===n.body||void 0===n.body.getReader)return n;const m=
Pd[a],q=n.body.getReader(),u=(n=n.headers.get("Content-Length")||n.headers.get("X-File-Size"))?parseInt(n):0,t=0!==u;let w=0;n=new ReadableStream({start(B){function z(){q.read().then(({done:D,value:J})=>{if(D)B.close();else{w+=J.byteLength;D=new ProgressEvent("progress",{lengthComputable:t,loaded:w,total:u});for(let A=0,K=m.length;A<K;A++){const oa=m[A];if(oa.onProgress)oa.onProgress(D)}B.enqueue(J);z()}})}z()}});return new Response(n)}throw new og(`fetch for "${n.url}" responded with ${n.status}: ${n.statusText}`,
n);}).then(n=>{switch(l){case "arraybuffer":return n.arrayBuffer();case "blob":return n.blob();case "document":return n.text().then(u=>(new DOMParser).parseFromString(u,h));case "json":return n.json();default:if(void 0===h)return n.text();var m=/charset="?([^;"\s]*)"?/i.exec(h);m=m&&m[1]?m[1].toLowerCase():void 0;const q=new TextDecoder(m);return n.arrayBuffer().then(u=>q.decode(u))}}).then(n=>{xe.add(a,n);const m=Pd[a];delete Pd[a];for(let q=0,u=m.length;q<u;q++){const t=m[q];if(t.onLoad)t.onLoad(n)}}).catch(n=>
{const m=Pd[a];if(void 0===m)throw this.manager.itemError(a),n;delete Pd[a];for(let q=0,u=m.length;q<u;q++){const t=m[q];if(t.onError)t.onError(n)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)});this.manager.itemStart(a)}}setResponseType(a){this.responseType=a;return this}setMimeType(a){this.mimeType=a;return this}}class gk extends jd{constructor(a){super(a)}load(a,b,c,e){const g=this,h=new Ze(this.manager);h.setPath(this.path);h.setRequestHeader(this.requestHeader);h.setWithCredentials(this.withCredentials);
h.load(a,function(l){try{b(g.parse(JSON.parse(l)))}catch(n){e?e(n):console.error(n),g.manager.itemError(a)}},c,e)}parse(a){const b=[];for(let c=0;c<a.length;c++){const e=Pi.parse(a[c]);b.push(e)}return b}}class Jh extends jd{constructor(a){super(a)}load(a,b,c,e){function g(u){m.load(a[u],function(t){t=h.parse(t,!0);l[u]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps};q+=1;6===q&&(1===t.mipmapCount&&(n.minFilter=1006),n.image=l,n.format=t.format,n.needsUpdate=!0,b&&b(n))},c,e)}const h=
this,l=[],n=new Ah,m=new Ze(this.manager);m.setPath(this.path);m.setResponseType("arraybuffer");m.setRequestHeader(this.requestHeader);m.setWithCredentials(h.withCredentials);let q=0;if(Array.isArray(a))for(let u=0,t=a.length;u<t;++u)g(u);else m.load(a,function(u){u=h.parse(u,!0);if(u.isCubemap){const t=u.mipmaps.length/u.mipmapCount;for(let w=0;w<t;w++){l[w]={mipmaps:[]};for(let B=0;B<u.mipmapCount;B++)l[w].mipmaps.push(u.mipmaps[w*u.mipmapCount+B]),l[w].format=u.format,l[w].width=u.width,l[w].height=
u.height}n.image=l}else n.image.width=u.width,n.image.height=u.height,n.mipmaps=u.mipmaps;1===u.mipmapCount&&(n.minFilter=1006);n.format=u.format;n.needsUpdate=!0;b&&b(n)},c,e);return n}}class Kh extends jd{constructor(a){super(a)}load(a,b,c,e){function g(){l();xe.add(a,this);b&&b(this);n.manager.itemEnd(a)}function h(u){l();e&&e(u);n.manager.itemError(a);n.manager.itemEnd(a)}function l(){q.removeEventListener("load",g,!1);q.removeEventListener("error",h,!1)}void 0!==this.path&&(a=this.path+a);a=
this.manager.resolveURL(a);const n=this,m=xe.get(a);if(void 0!==m)return n.manager.itemStart(a),setTimeout(function(){b&&b(m);n.manager.itemEnd(a)},0),m;const q=fc("img");q.addEventListener("load",g,!1);q.addEventListener("error",h,!1);"data:"!==a.slice(0,5)&&void 0!==this.crossOrigin&&(q.crossOrigin=this.crossOrigin);n.manager.itemStart(a);q.src=a;return q}}class Qi extends jd{constructor(a){super(a)}load(a,b,c,e){function g(m){l.load(a[m],function(q){h.images[m]=q;n++;6===n&&(h.needsUpdate=!0,b&&
b(h))},void 0,e)}const h=new mi;h.colorSpace="srgb";const l=new Kh(this.manager);l.setCrossOrigin(this.crossOrigin);l.setPath(this.path);let n=0;for(c=0;c<a.length;++c)g(c);return h}}class $e extends jd{constructor(a){super(a)}load(a,b,c,e){const g=this,h=new Md,l=new Ze(this.manager);l.setResponseType("arraybuffer");l.setRequestHeader(this.requestHeader);l.setPath(this.path);l.setWithCredentials(g.withCredentials);l.load(a,function(n){let m;try{m=g.parse(n)}catch(q){if(void 0!==e)e(q);else{console.error(q);
return}}void 0!==m.image?h.image=m.image:void 0!==m.data&&(h.image.width=m.width,h.image.height=m.height,h.image.data=m.data);h.wrapS=void 0!==m.wrapS?m.wrapS:1001;h.wrapT=void 0!==m.wrapT?m.wrapT:1001;h.magFilter=void 0!==m.magFilter?m.magFilter:1006;h.minFilter=void 0!==m.minFilter?m.minFilter:1006;h.anisotropy=void 0!==m.anisotropy?m.anisotropy:1;void 0!==m.colorSpace&&(h.colorSpace=m.colorSpace);void 0!==m.flipY&&(h.flipY=m.flipY);void 0!==m.format&&(h.format=m.format);void 0!==m.type&&(h.type=
m.type);void 0!==m.mipmaps&&(h.mipmaps=m.mipmaps,h.minFilter=1008);1===m.mipmapCount&&(h.minFilter=1006);void 0!==m.generateMipmaps&&(h.generateMipmaps=m.generateMipmaps);h.needsUpdate=!0;b&&b(h,m)},c,e);return h}}class Ri extends jd{constructor(a){super(a)}load(a,b,c,e){const g=new Pc,h=new Kh(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);h.load(a,function(l){g.image=l;g.needsUpdate=!0;void 0!==b&&b(g)},c,e);return g}}class ye extends ec{constructor(a,b=1){super();this.isLight=
!0;this.type="Light";this.color=new nb(a);this.intensity=b}dispose(){}copy(a,b){super.copy(a,b);this.color.copy(a.color);this.intensity=a.intensity;return this}toJSON(a){a=super.toJSON(a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&
(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}}class Hc extends ye{constructor(a,b,c){super(a,c);this.isHemisphereLight=!0;this.type="HemisphereLight";this.position.copy(ec.DEFAULT_UP);this.updateMatrix();this.groundColor=new nb(b)}copy(a,b){super.copy(a,b);this.groundColor.copy(a.groundColor);return this}}const Si=new Mb,Ti=new O,hk=new O;class Ff{constructor(a){this.camera=a;this.normalBias=this.bias=0;this.radius=1;this.blurSamples=8;this.mapSize=
new Fa(512,512);this.mapPass=this.map=null;this.matrix=new Mb;this.autoUpdate=!0;this.needsUpdate=!1;this._frustum=new Ee;this._frameExtents=new Fa(1,1);this._viewportCount=1;this._viewports=[new mc(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const b=this.camera,c=this.matrix;Ti.setFromMatrixPosition(a.matrixWorld);b.position.copy(Ti);hk.setFromMatrixPosition(a.target.matrixWorld);b.lookAt(hk);b.updateMatrixWorld();Si.multiplyMatrices(b.projectionMatrix,
b.matrixWorldInverse);this._frustum.setFromProjectionMatrix(Si);c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);c.multiply(Si)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose();this.mapPass&&this.mapPass.dispose()}copy(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};0!==this.bias&&(a.bias=this.bias);
0!==this.normalBias&&(a.normalBias=this.normalBias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}}class wc extends Ff{constructor(){super(new id(50,1,.5,500));this.isSpotLightShadow=!0;this.focus=1}updateMatrices(a){const b=this.camera,c=2*Tf*a.angle*this.focus,e=this.mapSize.width/this.mapSize.height,g=a.distance||b.far;if(c!==b.fov||e!==b.aspect||g!==b.far)b.fov=
c,b.aspect=e,b.far=g,b.updateProjectionMatrix();super.updateMatrices(a)}copy(a){super.copy(a);this.focus=a.focus;return this}}class $c extends ye{constructor(a,b,c=0,e=Math.PI/3,g=0,h=2){super(a,b);this.isSpotLight=!0;this.type="SpotLight";this.position.copy(ec.DEFAULT_UP);this.updateMatrix();this.target=new ec;this.distance=c;this.angle=e;this.penumbra=g;this.decay=h;this.map=null;this.shadow=new wc}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a,
b){super.copy(a,b);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}const fd=new Mb,pg=new O,Zg=new O;class Ui extends Ff{constructor(){super(new id(90,1,.5,500));this.isPointLightShadow=!0;this._frameExtents=new Fa(4,2);this._viewportCount=6;this._viewports=[new mc(2,1,1,1),new mc(0,1,1,1),new mc(3,1,1,1),new mc(1,1,1,1),new mc(3,0,1,1),new mc(1,0,1,1)];this._cubeDirections=[new O(1,0,0),
new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)];this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(a,b=0){const c=this.camera,e=this.matrix,g=a.distance||c.far;g!==c.far&&(c.far=g,c.updateProjectionMatrix());pg.setFromMatrixPosition(a.matrixWorld);c.position.copy(pg);Zg.copy(c.position);Zg.add(this._cubeDirections[b]);c.up.copy(this._cubeUps[b]);c.lookAt(Zg);c.updateMatrixWorld();e.makeTranslation(-pg.x,-pg.y,-pg.z);fd.multiplyMatrices(c.projectionMatrix,
c.matrixWorldInverse);this._frustum.setFromProjectionMatrix(fd)}}class Mm extends ye{constructor(a,b,c=0,e=2){super(a,b);this.isPointLight=!0;this.type="PointLight";this.distance=c;this.decay=e;this.shadow=new Ui}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a,b){super.copy(a,b);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}}class ik extends Ff{constructor(){super(new ni(-5,5,5,-5,.5,
500));this.isDirectionalLightShadow=!0}}class Nm extends ye{constructor(a,b){super(a,b);this.isDirectionalLight=!0;this.type="DirectionalLight";this.position.copy(ec.DEFAULT_UP);this.updateMatrix();this.target=new ec;this.shadow=new ik}dispose(){this.shadow.dispose()}copy(a){super.copy(a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}class Om extends ye{constructor(a,b){super(a,b);this.isAmbientLight=!0;this.type="AmbientLight"}}class Pm extends ye{constructor(a,b,c=10,e=
10){super(a,b);this.isRectAreaLight=!0;this.type="RectAreaLight";this.width=c;this.height=e}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){super.copy(a);this.width=a.width;this.height=a.height;return this}toJSON(a){a=super.toJSON(a);a.object.width=this.width;a.object.height=this.height;return a}}class Qm{constructor(){this.isSphericalHarmonics3=!0;this.coefficients=[];for(let a=0;9>a;a++)this.coefficients.push(new O)}set(a){for(let b=
0;9>b;b++)this.coefficients[b].copy(a[b]);return this}zero(){for(let a=0;9>a;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,b){const c=a.x,e=a.y;a=a.z;const g=this.coefficients;b.copy(g[0]).multiplyScalar(.282095);b.addScaledVector(g[1],.488603*e);b.addScaledVector(g[2],.488603*a);b.addScaledVector(g[3],.488603*c);b.addScaledVector(g[4],1.092548*c*e);b.addScaledVector(g[5],1.092548*e*a);b.addScaledVector(g[6],.315392*(3*a*a-1));b.addScaledVector(g[7],1.092548*c*a);b.addScaledVector(g[8],
.546274*(c*c-e*e));return b}getIrradianceAt(a,b){const c=a.x,e=a.y;a=a.z;const g=this.coefficients;b.copy(g[0]).multiplyScalar(.886227);b.addScaledVector(g[1],1.023328*e);b.addScaledVector(g[2],1.023328*a);b.addScaledVector(g[3],1.023328*c);b.addScaledVector(g[4],.858086*c*e);b.addScaledVector(g[5],.858086*e*a);b.addScaledVector(g[6],.743125*a*a-.247708);b.addScaledVector(g[7],.858086*c*a);b.addScaledVector(g[8],.429043*(c*c-e*e));return b}add(a){for(let b=0;9>b;b++)this.coefficients[b].add(a.coefficients[b]);
return this}addScaledSH(a,b){for(let c=0;9>c;c++)this.coefficients[c].addScaledVector(a.coefficients[c],b);return this}scale(a){for(let b=0;9>b;b++)this.coefficients[b].multiplyScalar(a);return this}lerp(a,b){for(let c=0;9>c;c++)this.coefficients[c].lerp(a.coefficients[c],b);return this}equals(a){for(let b=0;9>b;b++)if(!this.coefficients[b].equals(a.coefficients[b]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,b=0){const c=this.coefficients;
for(let e=0;9>e;e++)c[e].fromArray(a,b+3*e);return this}toArray(a=[],b=0){const c=this.coefficients;for(let e=0;9>e;e++)c[e].toArray(a,b+3*e);return a}static getBasisAt(a,b){const c=a.x,e=a.y;a=a.z;b[0]=.282095;b[1]=.488603*e;b[2]=.488603*a;b[3]=.488603*c;b[4]=1.092548*c*e;b[5]=1.092548*e*a;b[6]=.315392*(3*a*a-1);b[7]=1.092548*c*a;b[8]=.546274*(c*c-e*e)}}class Rm extends ye{constructor(a=new Qm,b=1){super(void 0,b);this.isLightProbe=!0;this.sh=a}copy(a){super.copy(a);this.sh.copy(a.sh);return this}fromJSON(a){this.intensity=
a.intensity;this.sh.fromArray(a.sh);return this}toJSON(a){a=super.toJSON(a);a.object.sh=this.sh.toArray();return a}}class Fd extends jd{constructor(a){super(a);this.textures={}}load(a,b,c,e){const g=this,h=new Ze(g.manager);h.setPath(g.path);h.setRequestHeader(g.requestHeader);h.setWithCredentials(g.withCredentials);h.load(a,function(l){try{b(g.parse(JSON.parse(l)))}catch(n){e?e(n):console.error(n),g.manager.itemError(a)}},c,e)}parse(a){function b(h){void 0===c[h]&&console.warn("THREE.MaterialLoader: Undefined texture",
h);return c[h]}const c=this.textures,e=Fd.createMaterialFromType(a.type);void 0!==a.uuid&&(e.uuid=a.uuid);void 0!==a.name&&(e.name=a.name);void 0!==a.color&&void 0!==e.color&&e.color.setHex(a.color);void 0!==a.roughness&&(e.roughness=a.roughness);void 0!==a.metalness&&(e.metalness=a.metalness);void 0!==a.sheen&&(e.sheen=a.sheen);void 0!==a.sheenColor&&(e.sheenColor=(new nb).setHex(a.sheenColor));void 0!==a.sheenRoughness&&(e.sheenRoughness=a.sheenRoughness);void 0!==a.emissive&&void 0!==e.emissive&&
e.emissive.setHex(a.emissive);void 0!==a.specular&&void 0!==e.specular&&e.specular.setHex(a.specular);void 0!==a.specularIntensity&&(e.specularIntensity=a.specularIntensity);void 0!==a.specularColor&&void 0!==e.specularColor&&e.specularColor.setHex(a.specularColor);void 0!==a.shininess&&(e.shininess=a.shininess);void 0!==a.clearcoat&&(e.clearcoat=a.clearcoat);void 0!==a.clearcoatRoughness&&(e.clearcoatRoughness=a.clearcoatRoughness);void 0!==a.iridescence&&(e.iridescence=a.iridescence);void 0!==a.iridescenceIOR&&
(e.iridescenceIOR=a.iridescenceIOR);void 0!==a.iridescenceThicknessRange&&(e.iridescenceThicknessRange=a.iridescenceThicknessRange);void 0!==a.transmission&&(e.transmission=a.transmission);void 0!==a.thickness&&(e.thickness=a.thickness);void 0!==a.attenuationDistance&&(e.attenuationDistance=a.attenuationDistance);void 0!==a.attenuationColor&&void 0!==e.attenuationColor&&e.attenuationColor.setHex(a.attenuationColor);void 0!==a.anisotropy&&(e.anisotropy=a.anisotropy);void 0!==a.anisotropyRotation&&
(e.anisotropyRotation=a.anisotropyRotation);void 0!==a.fog&&(e.fog=a.fog);void 0!==a.flatShading&&(e.flatShading=a.flatShading);void 0!==a.blending&&(e.blending=a.blending);void 0!==a.combine&&(e.combine=a.combine);void 0!==a.side&&(e.side=a.side);void 0!==a.shadowSide&&(e.shadowSide=a.shadowSide);void 0!==a.opacity&&(e.opacity=a.opacity);void 0!==a.transparent&&(e.transparent=a.transparent);void 0!==a.alphaTest&&(e.alphaTest=a.alphaTest);void 0!==a.alphaHash&&(e.alphaHash=a.alphaHash);void 0!==a.depthFunc&&
(e.depthFunc=a.depthFunc);void 0!==a.depthTest&&(e.depthTest=a.depthTest);void 0!==a.depthWrite&&(e.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(e.colorWrite=a.colorWrite);void 0!==a.blendSrc&&(e.blendSrc=a.blendSrc);void 0!==a.blendDst&&(e.blendDst=a.blendDst);void 0!==a.blendEquation&&(e.blendEquation=a.blendEquation);void 0!==a.blendSrcAlpha&&(e.blendSrcAlpha=a.blendSrcAlpha);void 0!==a.blendDstAlpha&&(e.blendDstAlpha=a.blendDstAlpha);void 0!==a.blendEquationAlpha&&(e.blendEquationAlpha=a.blendEquationAlpha);
void 0!==a.blendColor&&void 0!==e.blendColor&&e.blendColor.setHex(a.blendColor);void 0!==a.blendAlpha&&(e.blendAlpha=a.blendAlpha);void 0!==a.stencilWriteMask&&(e.stencilWriteMask=a.stencilWriteMask);void 0!==a.stencilFunc&&(e.stencilFunc=a.stencilFunc);void 0!==a.stencilRef&&(e.stencilRef=a.stencilRef);void 0!==a.stencilFuncMask&&(e.stencilFuncMask=a.stencilFuncMask);void 0!==a.stencilFail&&(e.stencilFail=a.stencilFail);void 0!==a.stencilZFail&&(e.stencilZFail=a.stencilZFail);void 0!==a.stencilZPass&&
(e.stencilZPass=a.stencilZPass);void 0!==a.stencilWrite&&(e.stencilWrite=a.stencilWrite);void 0!==a.wireframe&&(e.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(e.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(e.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(e.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(e.rotation=a.rotation);void 0!==a.linewidth&&(e.linewidth=a.linewidth);void 0!==a.dashSize&&(e.dashSize=a.dashSize);void 0!==a.gapSize&&
(e.gapSize=a.gapSize);void 0!==a.scale&&(e.scale=a.scale);void 0!==a.polygonOffset&&(e.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(e.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(e.polygonOffsetUnits=a.polygonOffsetUnits);void 0!==a.dithering&&(e.dithering=a.dithering);void 0!==a.alphaToCoverage&&(e.alphaToCoverage=a.alphaToCoverage);void 0!==a.premultipliedAlpha&&(e.premultipliedAlpha=a.premultipliedAlpha);void 0!==a.forceSinglePass&&(e.forceSinglePass=
a.forceSinglePass);void 0!==a.visible&&(e.visible=a.visible);void 0!==a.toneMapped&&(e.toneMapped=a.toneMapped);void 0!==a.userData&&(e.userData=a.userData);void 0!==a.vertexColors&&(e.vertexColors="number"===typeof a.vertexColors?0<a.vertexColors?!0:!1:a.vertexColors);if(void 0!==a.uniforms)for(var g in a.uniforms){const h=a.uniforms[g];e.uniforms[g]={};switch(h.type){case "t":e.uniforms[g].value=b(h.value);break;case "c":e.uniforms[g].value=(new nb).setHex(h.value);break;case "v2":e.uniforms[g].value=
(new Fa).fromArray(h.value);break;case "v3":e.uniforms[g].value=(new O).fromArray(h.value);break;case "v4":e.uniforms[g].value=(new mc).fromArray(h.value);break;case "m3":e.uniforms[g].value=(new Ub).fromArray(h.value);break;case "m4":e.uniforms[g].value=(new Mb).fromArray(h.value);break;default:e.uniforms[g].value=h.value}}void 0!==a.defines&&(e.defines=a.defines);void 0!==a.vertexShader&&(e.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(e.fragmentShader=a.fragmentShader);void 0!==a.glslVersion&&
(e.glslVersion=a.glslVersion);if(void 0!==a.extensions)for(const h in a.extensions)e.extensions[h]=a.extensions[h];void 0!==a.lights&&(e.lights=a.lights);void 0!==a.clipping&&(e.clipping=a.clipping);void 0!==a.size&&(e.size=a.size);void 0!==a.sizeAttenuation&&(e.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(e.map=b(a.map));void 0!==a.matcap&&(e.matcap=b(a.matcap));void 0!==a.alphaMap&&(e.alphaMap=b(a.alphaMap));void 0!==a.bumpMap&&(e.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(e.bumpScale=
a.bumpScale);void 0!==a.normalMap&&(e.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(e.normalMapType=a.normalMapType);void 0!==a.normalScale&&(g=a.normalScale,!1===Array.isArray(g)&&(g=[g,g]),e.normalScale=(new Fa).fromArray(g));void 0!==a.displacementMap&&(e.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(e.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(e.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(e.roughnessMap=b(a.roughnessMap));
void 0!==a.metalnessMap&&(e.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(e.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(e.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(e.specularMap=b(a.specularMap));void 0!==a.specularIntensityMap&&(e.specularIntensityMap=b(a.specularIntensityMap));void 0!==a.specularColorMap&&(e.specularColorMap=b(a.specularColorMap));void 0!==a.envMap&&(e.envMap=b(a.envMap));void 0!==a.envMapRotation&&e.envMapRotation.fromArray(a.envMapRotation);
void 0!==a.envMapIntensity&&(e.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(e.reflectivity=a.reflectivity);void 0!==a.refractionRatio&&(e.refractionRatio=a.refractionRatio);void 0!==a.lightMap&&(e.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(e.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(e.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(e.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(e.gradientMap=b(a.gradientMap));void 0!==a.clearcoatMap&&(e.clearcoatMap=
b(a.clearcoatMap));void 0!==a.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap=b(a.clearcoatRoughnessMap));void 0!==a.clearcoatNormalMap&&(e.clearcoatNormalMap=b(a.clearcoatNormalMap));void 0!==a.clearcoatNormalScale&&(e.clearcoatNormalScale=(new Fa).fromArray(a.clearcoatNormalScale));void 0!==a.iridescenceMap&&(e.iridescenceMap=b(a.iridescenceMap));void 0!==a.iridescenceThicknessMap&&(e.iridescenceThicknessMap=b(a.iridescenceThicknessMap));void 0!==a.transmissionMap&&(e.transmissionMap=b(a.transmissionMap));
void 0!==a.thicknessMap&&(e.thicknessMap=b(a.thicknessMap));void 0!==a.anisotropyMap&&(e.anisotropyMap=b(a.anisotropyMap));void 0!==a.sheenColorMap&&(e.sheenColorMap=b(a.sheenColorMap));void 0!==a.sheenRoughnessMap&&(e.sheenRoughnessMap=b(a.sheenRoughnessMap));return e}setTextures(a){this.textures=a;return this}static createMaterialFromType(a){return new {ShadowMaterial:Lm,SpriteMaterial:xi,RawShaderMaterial:ek,ShaderMaterial:Be,PointsMaterial:Pj,MeshPhysicalMaterial:Df,MeshStandardMaterial:lg,MeshPhongMaterial:vd,
MeshToonMaterial:Od,MeshNormalMaterial:mg,MeshLambertMaterial:Xe,MeshDepthMaterial:Xh,MeshDistanceMaterial:Pe,MeshBasicMaterial:ie,MeshMatcapMaterial:Ni,LineDashedMaterial:fk,LineBasicMaterial:Nd,Material:Dd}[a]}}class Vi{static decodeText(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let b="";for(let c=0,e=a.length;c<e;c++)b+=String.fromCharCode(a[c]);try{return decodeURIComponent(escape(b))}catch(c){return b}}static extractUrlBase(a){const b=a.lastIndexOf("/");return-1===
b?"./":a.slice(0,b+1)}static resolveURL(a,b){if("string"!==typeof a||""===a)return"";/^https?:\/\//i.test(b)&&/^\//.test(a)&&(b=b.replace(/(^https?:\/\/[^\/]+).*/i,"$1"));return/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:b+a}}class Sm extends Kb{constructor(){super();this.isInstancedBufferGeometry=!0;this.type="InstancedBufferGeometry";this.instanceCount=Infinity}copy(a){super.copy(a);this.instanceCount=a.instanceCount;return this}toJSON(){const a=super.toJSON();a.instanceCount=
this.instanceCount;a.isInstancedBufferGeometry=!0;return a}}class yl extends jd{constructor(a){super(a)}load(a,b,c,e){const g=this,h=new Ze(g.manager);h.setPath(g.path);h.setRequestHeader(g.requestHeader);h.setWithCredentials(g.withCredentials);h.load(a,function(l){try{b(g.parse(JSON.parse(l)))}catch(n){e?e(n):console.error(n),g.manager.itemError(a)}},c,e)}parse(a){function b(t,w){if(void 0!==c[w])return c[w];const B=t.interleavedBuffers[w];var z=B.buffer;void 0!==e[z]?z=e[z]:(t=(new Uint32Array(t.arrayBuffers[z])).buffer,
z=e[z]=t);z=new Ud[B.type](z);z=new xf(z,B.stride);z.uuid=B.uuid;return c[w]=z}const c={},e={},g=a.isInstancedBufferGeometry?new Sm:new Kb;var h=a.data.index;void 0!==h&&(h=new Ud[h.type](h.array),g.setIndex(new pc(h,1)));h=a.data.attributes;for(var l in h){var n=h[l],m=void 0;n.isInterleavedBufferAttribute?(m=b(a.data,n.data),m=new dg(m,n.itemSize,n.offset,n.normalized)):(m=new Ud[n.type](n.array),m=new (n.isInstancedBufferAttribute?je:pc)(m,n.itemSize,n.normalized));void 0!==n.name&&(m.name=n.name);
void 0!==n.usage&&m.setUsage(n.usage);g.setAttribute(l,m)}if(l=a.data.morphAttributes)for(var q in l){h=l[q];n=[];for(let t=0,w=h.length;t<w;t++){m=h[t];var u=void 0;m.isInterleavedBufferAttribute?(u=b(a.data,m.data),u=new dg(u,m.itemSize,m.offset,m.normalized)):(u=new Ud[m.type](m.array),u=new pc(u,m.itemSize,m.normalized));void 0!==m.name&&(u.name=m.name);n.push(u)}g.morphAttributes[q]=n}a.data.morphTargetsRelative&&(g.morphTargetsRelative=!0);q=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==
q)for(let t=0,w=q.length;t!==w;++t)l=q[t],g.addGroup(l.start,l.count,l.materialIndex);q=a.data.boundingSphere;void 0!==q&&(l=new O,void 0!==q.center&&l.fromArray(q.center),g.boundingSphere=new qd(l,q.radius));a.name&&(g.name=a.name);a.userData&&(g.userData=a.userData);return g}}class wn extends jd{constructor(a){super(a)}load(a,b,c,e){const g=this;var h=""===this.path?Vi.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||h;h=new Ze(this.manager);h.setPath(this.path);h.setRequestHeader(this.requestHeader);
h.setWithCredentials(this.withCredentials);h.load(a,function(l){let n=null;try{n=JSON.parse(l)}catch(m){void 0!==e&&e(m);console.error("THREE:ObjectLoader: Can't parse "+a+".",m.message);return}l=n.metadata;void 0===l||void 0===l.type||"geometry"===l.type.toLowerCase()?(void 0!==e&&e(Error("THREE.ObjectLoader: Can't load "+a)),console.error("THREE.ObjectLoader: Can't load "+a)):g.parse(n,b)},c,e)}async loadAsync(a,b){var c=""===this.path?Vi.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||
c;c=new Ze(this.manager);c.setPath(this.path);c.setRequestHeader(this.requestHeader);c.setWithCredentials(this.withCredentials);b=await c.loadAsync(a,b);b=JSON.parse(b);c=b.metadata;if(void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+a);return await this.parseAsync(b)}parse(a,b){const c=this.parseAnimations(a.animations);var e=this.parseShapes(a.shapes);const g=this.parseGeometries(a.geometries,e);e=this.parseImages(a.images,function(){void 0!==
b&&b(n)});const h=this.parseTextures(a.textures,e),l=this.parseMaterials(a.materials,h),n=this.parseObject(a.object,g,l,h,c);a=this.parseSkeletons(a.skeletons,n);this.bindSkeletons(n,a);if(void 0!==b){a=!1;for(const m in e)if(e[m].data instanceof HTMLImageElement){a=!0;break}!1===a&&b(n)}return n}async parseAsync(a){var b=this.parseAnimations(a.animations),c=this.parseShapes(a.shapes);c=this.parseGeometries(a.geometries,c);var e=await this.parseImagesAsync(a.images);e=this.parseTextures(a.textures,
e);const g=this.parseMaterials(a.materials,e);b=this.parseObject(a.object,c,g,e,b);a=this.parseSkeletons(a.skeletons,b);this.bindSkeletons(b,a);return b}parseShapes(a){const b={};if(void 0!==a)for(let c=0,e=a.length;c<e;c++){const g=(new Xg).fromJSON(a[c]);b[g.uuid]=g}return b}parseSkeletons(a,b){const c={},e={};b.traverse(function(g){g.isBone&&(e[g.uuid]=g)});if(void 0!==a)for(let g=0,h=a.length;g<h;g++)b=(new Kg).fromJSON(a[g],e),c[b.uuid]=b;return c}parseGeometries(a,b){const c={};if(void 0!==
a){const e=new yl;for(let g=0,h=a.length;g<h;g++){let l;const n=a[g];switch(n.type){case "BufferGeometry":case "InstancedBufferGeometry":l=e.parse(n);break;default:n.type in Km?l=Km[n.type].fromJSON(n,b):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${n.type}"`)}l.uuid=n.uuid;void 0!==n.name&&(l.name=n.name);void 0!==n.userData&&(l.userData=n.userData);c[n.uuid]=l}}return c}parseMaterials(a,b){const c={},e={};if(void 0!==a){const g=new Fd;g.setTextures(b);for(let h=0,l=a.length;h<l;h++)b=
a[h],void 0===c[b.uuid]&&(c[b.uuid]=g.parse(b)),e[b.uuid]=c[b.uuid]}return e}parseAnimations(a){const b={};if(void 0!==a)for(let c=0;c<a.length;c++){const e=Pi.parse(a[c]);b[e.uuid]=e}return b}parseImages(a,b){function c(m){g.manager.itemStart(m);return l.load(m,function(){g.manager.itemEnd(m)},void 0,function(){g.manager.itemError(m);g.manager.itemEnd(m)})}function e(m){return"string"===typeof m?(m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:g.resourcePath+m,c(m)):m.data?{data:new Ud[m.type](m.data),width:m.width,
height:m.height}:null}const g=this,h={};let l;if(void 0!==a&&0<a.length){b=new ng(b);l=new Kh(b);l.setCrossOrigin(this.crossOrigin);for(let m=0,q=a.length;m<q;m++){b=a[m];var n=b.url;if(Array.isArray(n)){const u=[];for(let t=0,w=n.length;t<w;t++){const B=e(n[t]);null!==B&&(B instanceof HTMLImageElement?u.push(B):u.push(new Md(B.data,B.width,B.height)))}h[b.uuid]=new Uf(u)}else n=e(b.url),h[b.uuid]=new Uf(n)}}return h}async parseImagesAsync(a){async function b(l){return"string"===typeof l?(l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?
l:c.resourcePath+l,await g.loadAsync(l)):l.data?{data:new Ud[l.type](l.data),width:l.width,height:l.height}:null}const c=this,e={};let g;if(void 0!==a&&0<a.length){g=new Kh(this.manager);g.setCrossOrigin(this.crossOrigin);for(let l=0,n=a.length;l<n;l++){const m=a[l];var h=m.url;if(Array.isArray(h)){const q=[];for(let u=0,t=h.length;u<t;u++){const w=await b(h[u]);null!==w&&(w instanceof HTMLImageElement?q.push(w):q.push(new Md(w.data,w.width,w.height)))}e[m.uuid]=new Uf(q)}else h=await b(m.url),e[m.uuid]=
new Uf(h)}}return e}parseTextures(a,b){function c(g,h){if("number"===typeof g)return g;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",g);return h[g]}const e={};if(void 0!==a)for(let g=0,h=a.length;g<h;g++){const l=a[g];void 0===l.image&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid);void 0===b[l.image]&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const n=b[l.image],m=n.data;let q;Array.isArray(m)?(q=new mi,6===m.length&&(q.needsUpdate=
!0)):(q=m&&m.data?new Md:new Pc,m&&(q.needsUpdate=!0));q.source=n;q.uuid=l.uuid;void 0!==l.name&&(q.name=l.name);void 0!==l.mapping&&(q.mapping=c(l.mapping,xn));void 0!==l.channel&&(q.channel=l.channel);void 0!==l.offset&&q.offset.fromArray(l.offset);void 0!==l.repeat&&q.repeat.fromArray(l.repeat);void 0!==l.center&&q.center.fromArray(l.center);void 0!==l.rotation&&(q.rotation=l.rotation);void 0!==l.wrap&&(q.wrapS=c(l.wrap[0],Wi),q.wrapT=c(l.wrap[1],Wi));void 0!==l.format&&(q.format=l.format);void 0!==
l.internalFormat&&(q.internalFormat=l.internalFormat);void 0!==l.type&&(q.type=l.type);void 0!==l.colorSpace&&(q.colorSpace=l.colorSpace);void 0!==l.minFilter&&(q.minFilter=c(l.minFilter,wd));void 0!==l.magFilter&&(q.magFilter=c(l.magFilter,wd));void 0!==l.anisotropy&&(q.anisotropy=l.anisotropy);void 0!==l.flipY&&(q.flipY=l.flipY);void 0!==l.generateMipmaps&&(q.generateMipmaps=l.generateMipmaps);void 0!==l.premultiplyAlpha&&(q.premultiplyAlpha=l.premultiplyAlpha);void 0!==l.unpackAlignment&&(q.unpackAlignment=
l.unpackAlignment);void 0!==l.compareFunction&&(q.compareFunction=l.compareFunction);void 0!==l.userData&&(q.userData=l.userData);e[l.uuid]=q}return e}parseObject(a,b,c,e,g){function h(t){void 0===b[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t);return b[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const w=[];for(let B=0,z=t.length;B<z;B++){const D=t[B];void 0===c[D]&&console.warn("THREE.ObjectLoader: Undefined material",D);w.push(c[D])}return w}void 0===c[t]&&console.warn("THREE.ObjectLoader: Undefined material",
t);return c[t]}}function n(t){void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t);return e[t]}switch(a.type){case "Scene":var m=new Kj;void 0!==a.background&&(Number.isInteger(a.background)?m.background=new nb(a.background):m.background=n(a.background));void 0!==a.environment&&(m.environment=n(a.environment));void 0!==a.fog&&("Fog"===a.fog.type?m.fog=new wi(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(m.fog=new ml(a.fog.color,a.fog.density)),""!==a.fog.name&&(m.fog.name=
a.fog.name));void 0!==a.backgroundBlurriness&&(m.backgroundBlurriness=a.backgroundBlurriness);void 0!==a.backgroundIntensity&&(m.backgroundIntensity=a.backgroundIntensity);void 0!==a.backgroundRotation&&m.backgroundRotation.fromArray(a.backgroundRotation);void 0!==a.environmentRotation&&m.environmentRotation.fromArray(a.environmentRotation);break;case "PerspectiveCamera":m=new id(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(m.focus=a.focus);void 0!==a.zoom&&(m.zoom=a.zoom);void 0!==a.filmGauge&&
(m.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(m.filmOffset=a.filmOffset);void 0!==a.view&&(m.view=Object.assign({},a.view));break;case "OrthographicCamera":m=new ni(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(m.zoom=a.zoom);void 0!==a.view&&(m.view=Object.assign({},a.view));break;case "AmbientLight":m=new Om(a.color,a.intensity);break;case "DirectionalLight":m=new Nm(a.color,a.intensity);break;case "PointLight":m=new Mm(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":m=
new Pm(a.color,a.intensity,a.width,a.height);break;case "SpotLight":m=new $c(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":m=new Hc(a.color,a.groundColor,a.intensity);break;case "LightProbe":m=(new Rm).fromJSON(a);break;case "SkinnedMesh":var q=h(a.geometry);m=l(a.material);m=new Ci(q,m);void 0!==a.bindMode&&(m.bindMode=a.bindMode);void 0!==a.bindMatrix&&m.bindMatrix.fromArray(a.bindMatrix);void 0!==a.skeleton&&(m.skeleton=a.skeleton);break;case "Mesh":q=
h(a.geometry);m=l(a.material);m=new Uc(q,m);break;case "InstancedMesh":q=h(a.geometry);m=l(a.material);var u=a.instanceMatrix;const t=a.instanceColor;m=new Og(q,m,a.count);m.instanceMatrix=new je(new Float32Array(u.array),16);void 0!==t&&(m.instanceColor=new je(new Float32Array(t.array),t.itemSize));break;case "BatchedMesh":q=h(a.geometry);m=l(a.material);m=new zm(a.maxGeometryCount,a.maxVertexCount,a.maxIndexCount,m);m.geometry=q;m.perObjectFrustumCulled=a.perObjectFrustumCulled;m.sortObjects=a.sortObjects;
m._drawRanges=a.drawRanges;m._reservedRanges=a.reservedRanges;m._visibility=a.visibility;m._active=a.active;m._bounds=a.bounds.map(w=>{const B=new od;B.min.fromArray(w.boxMin);B.max.fromArray(w.boxMax);const z=new qd;z.radius=w.sphereRadius;z.center.fromArray(w.sphereCenter);return{boxInitialized:w.boxInitialized,box:B,sphereInitialized:w.sphereInitialized,sphere:z}});m._maxGeometryCount=a.maxGeometryCount;m._maxVertexCount=a.maxVertexCount;m._maxIndexCount=a.maxIndexCount;m._geometryInitialized=
a.geometryInitialized;m._geometryCount=a.geometryCount;m._matricesTexture=n(a.matricesTexture.uuid);break;case "LOD":m=new pl;break;case "Line":m=new hg(h(a.geometry),l(a.material));break;case "LineLoop":m=new Fm(h(a.geometry),l(a.material));break;case "LineSegments":m=new We(h(a.geometry),l(a.material));break;case "PointCloud":case "Points":m=new Hm(h(a.geometry),l(a.material));break;case "Sprite":m=new ol(l(a.material));break;case "Group":m=new Gg;break;case "Bone":m=new Ve;break;default:m=new ec}m.uuid=
a.uuid;void 0!==a.name&&(m.name=a.name);void 0!==a.matrix?(m.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(m.matrixAutoUpdate=a.matrixAutoUpdate),m.matrixAutoUpdate&&m.matrix.decompose(m.position,m.quaternion,m.scale)):(void 0!==a.position&&m.position.fromArray(a.position),void 0!==a.rotation&&m.rotation.fromArray(a.rotation),void 0!==a.quaternion&&m.quaternion.fromArray(a.quaternion),void 0!==a.scale&&m.scale.fromArray(a.scale));void 0!==a.up&&m.up.fromArray(a.up);void 0!==a.castShadow&&
(m.castShadow=a.castShadow);void 0!==a.receiveShadow&&(m.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(m.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(m.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(m.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&m.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(m.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(m.visible=a.visible);void 0!==a.frustumCulled&&
(m.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(m.renderOrder=a.renderOrder);void 0!==a.userData&&(m.userData=a.userData);void 0!==a.layers&&(m.layers.mask=a.layers);if(void 0!==a.children)for(q=a.children,u=0;u<q.length;u++)m.add(this.parseObject(q[u],b,c,e,g));if(void 0!==a.animations)for(q=a.animations,u=0;u<q.length;u++)m.animations.push(g[q[u]]);if("LOD"===a.type)for(void 0!==a.autoUpdate&&(m.autoUpdate=a.autoUpdate),a=a.levels,g=0;g<a.length;g++)q=a[g],u=m.getObjectByProperty("uuid",
q.object),void 0!==u&&m.addLevel(u,q.distance,q.hysteresis);return m}bindSkeletons(a,b){0!==Object.keys(b).length&&a.traverse(function(c){if(!0===c.isSkinnedMesh&&void 0!==c.skeleton){const e=b[c.skeleton];void 0===e?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",c.skeleton):c.bind(e,c.bindMatrix)}})}}const xn={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},Wi=
{RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},wd={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};class yn extends jd{constructor(a){super(a);this.isImageBitmapLoader=!0;"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");
this.options={premultiplyAlpha:"none"}}setOptions(a){this.options=a;return this}load(a,b,c,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const g=this,h=xe.get(a);if(void 0!==h){g.manager.itemStart(a);if(h.then){h.then(l=>{b&&b(l);g.manager.itemEnd(a)}).catch(l=>{e&&e(l)});return}setTimeout(function(){b&&b(h);g.manager.itemEnd(a)},0);return h}c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include";c.headers=this.requestHeader;c=fetch(a,c).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,
Object.assign(g.options,{colorSpaceConversion:"none"}))}).then(function(l){xe.add(a,l);b&&b(l);g.manager.itemEnd(a);return l}).catch(function(l){e&&e(l);xe.remove(a);g.manager.itemError(a);g.manager.itemEnd(a)});xe.add(a,c);g.manager.itemStart(a)}}let ub;class jk{static getContext(){void 0===ub&&(ub=new (window.AudioContext||window.webkitAudioContext));return ub}static setContext(a){ub=a}}class xd extends jd{constructor(a){super(a)}load(a,b,c,e){function g(n){e?e(n):console.error(n);h.manager.itemError(a)}
const h=this,l=new Ze(this.manager);l.setResponseType("arraybuffer");l.setPath(this.path);l.setRequestHeader(this.requestHeader);l.setWithCredentials(this.withCredentials);l.load(a,function(n){try{const m=n.slice(0);jk.getContext().decodeAudioData(m,function(q){b(q)}).catch(g)}catch(m){g(m)}},c,e)}}const ze=new Mb,Tm=new Mb,af=new Mb;class zl{constructor(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new id;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=
new id;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(a){const b=this._cache;if(b.focus!==a.focus||b.fov!==a.fov||b.aspect!==a.aspect*this.aspect||b.near!==a.near||b.far!==a.far||b.zoom!==a.zoom||b.eyeSep!==this.eyeSep){b.focus=a.focus;b.fov=a.fov;b.aspect=a.aspect*this.aspect;b.near=a.near;b.far=a.far;b.zoom=a.zoom;b.eyeSep=this.eyeSep;af.copy(a.projectionMatrix);var c=b.eyeSep/2;const e=
c*b.near/b.focus,g=b.near*Math.tan(lf*b.fov*.5)/b.zoom;let h;Tm.elements[12]=-c;ze.elements[12]=c;c=-g*b.aspect+e;h=g*b.aspect+e;af.elements[0]=2*b.near/(h-c);af.elements[8]=(h+c)/(h-c);this.cameraL.projectionMatrix.copy(af);c=-g*b.aspect-e;h=g*b.aspect-e;af.elements[0]=2*b.near/(h-c);af.elements[8]=(h+c)/(h-c);this.cameraR.projectionMatrix.copy(af)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(Tm);this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(ze)}}class me{constructor(a=!0){this.autoStart=
a;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}start(){this.oldTime=this.startTime=sj();this.elapsedTime=0;this.running=!0}stop(){this.getElapsedTime();this.autoStart=this.running=!1}getElapsedTime(){this.getDelta();return this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const b=sj();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}}const Yb=new O,gd=new dd,ad=new O,Lc=new O;class ne extends ec{constructor(){super();
this.type="AudioListener";this.context=jk.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0;this._clock=new me}getInput(){return this.gain}removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this}getFilter(){return this.filter}setFilter(a){null!==this.filter?(this.gain.disconnect(this.filter),
this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}updateMatrixWorld(a){super.updateMatrixWorld(a);a=this.context.listener;const b=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(Yb,gd,ad);
Lc.set(0,0,-1).applyQuaternion(gd);if(a.positionX){const c=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(Yb.x,c);a.positionY.linearRampToValueAtTime(Yb.y,c);a.positionZ.linearRampToValueAtTime(Yb.z,c);a.forwardX.linearRampToValueAtTime(Lc.x,c);a.forwardY.linearRampToValueAtTime(Lc.y,c);a.forwardZ.linearRampToValueAtTime(Lc.z,c);a.upX.linearRampToValueAtTime(b.x,c);a.upY.linearRampToValueAtTime(b.y,c);a.upZ.linearRampToValueAtTime(b.z,c)}else a.setPosition(Yb.x,Yb.y,Yb.z),
a.setOrientation(Lc.x,Lc.y,Lc.z,b.x,b.y,b.z)}}class $g extends ec{constructor(a){super();this.type="Audio";this.listener=a;this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.source=null;this.sourceType="empty";this._progress=this._startedAt=0;this._connected=!1;this.filters=
[]}getOutput(){return this.gain}setNodeSource(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this}setMediaElementSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this}setMediaStreamSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(a);this.connect();return this}setBuffer(a){this.buffer=a;this.sourceType=
"buffer";this.autoplay&&this.play();return this}play(a=0){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+a,a=this.context.createBufferSource(),a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,
this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1===
this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());this._connected=!0;return this}disconnect(){if(!1!==
this._connected){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());this._connected=!1;return this}}getFilters(){return this.filters}setFilters(a){a||(a=[]);!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice();return this}setDetune(a){this.detune=
a;!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01);return this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,
.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(a){this.loopStart=a;return this}setLoopEnd(a){this.loopEnd=a;return this}getVolume(){return this.gain.gain.value}setVolume(a){this.gain.gain.setTargetAtTime(a,
this.context.currentTime,.01);return this}}const Dc=new O,Lh=new dd,ah=new O,bf=new O;class Al extends $g{constructor(a){super(a);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}connect(){super.connect();this.panner.connect(this.gain)}disconnect(){super.disconnect();this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){this.panner.refDistance=a;return this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){this.panner.rolloffFactor=
a;return this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){this.panner.distanceModel=a;return this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){this.panner.maxDistance=a;return this}setDirectionalCone(a,b,c){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=c;return this}updateMatrixWorld(a){super.updateMatrixWorld(a);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(Dc,Lh,ah),bf.set(0,
0,1).applyQuaternion(Lh),a=this.panner,a.positionX){const b=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(Dc.x,b);a.positionY.linearRampToValueAtTime(Dc.y,b);a.positionZ.linearRampToValueAtTime(Dc.z,b);a.orientationX.linearRampToValueAtTime(bf.x,b);a.orientationY.linearRampToValueAtTime(bf.y,b);a.orientationZ.linearRampToValueAtTime(bf.z,b)}else a.setPosition(Dc.x,Dc.y,Dc.z),a.setOrientation(bf.x,bf.y,bf.z)}}class Xi{constructor(a,b=2048){this.analyser=a.context.createAnalyser();
this.analyser.fftSize=b;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}getFrequencyData(){this.analyser.getByteFrequencyData(this.data);return this.data}getAverageFrequency(){let a=0;const b=this.getFrequencyData();for(let c=0;c<b.length;c++)a+=b[c];return a/b.length}}class Qd{constructor(a,b,c){this.binding=a;this.valueSize=c;let e;switch(b){case "quaternion":a=this._slerp;b=this._slerpAdditive;e=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*
c);this._workIndex=5;break;case "string":case "bool":b=a=this._select;e=this._setAdditiveIdentityOther;this.buffer=Array(5*c);break;default:a=this._lerp,b=this._lerpAdditive,e=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*c)}this._mixBufferRegion=a;this._mixBufferRegionAdditive=b;this._setIdentity=e;this._origIndex=3;this._addIndex=4;this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}accumulate(a,b){const c=this.buffer,e=this.valueSize;a=a*e+
e;var g=this.cumulativeWeight;if(0===g){for(g=0;g!==e;++g)c[a+g]=c[g];g=b}else g+=b,this._mixBufferRegion(c,a,0,b/g,e);this.cumulativeWeight=g}accumulateAdditive(a){const b=this.buffer,c=this.valueSize,e=c*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(b,e,0,a,c);this.cumulativeWeightAdditive+=a}apply(a){const b=this.valueSize,c=this.buffer;a=a*b+b;const e=this.cumulativeWeight,g=this.cumulativeWeightAdditive,h=this.binding;this.cumulativeWeightAdditive=
this.cumulativeWeight=0;1>e&&this._mixBufferRegion(c,a,b*this._origIndex,1-e,b);0<g&&this._mixBufferRegionAdditive(c,a,this._addIndex*b,1,b);for(let l=b,n=b+b;l!==n;++l)if(c[l]!==c[l+b]){h.setValue(c,a);break}}saveOriginalState(){const a=this.buffer,b=this.valueSize,c=b*this._origIndex;this.binding.getValue(a,c);for(let e=b,g=c;e!==g;++e)a[e]=a[c+e%b];this._setIdentity();this.cumulativeWeightAdditive=this.cumulativeWeight=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){var a=
this._addIndex*this.valueSize;const b=a+this.valueSize;for(;a<b;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric();this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,b=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[b+c]=this.buffer[a+c]}_select(a,b,c,e,g){if(.5<=e)for(e=0;e!==g;++e)a[b+e]=a[c+e]}_slerp(a,b,c,e){dd.slerpFlat(a,b,a,b,a,c,e)}_slerpAdditive(a,b,c,e,g){g*=this._workIndex;
dd.multiplyQuaternionsFlat(a,g,a,b,a,c);dd.slerpFlat(a,b,a,b,a,g,e)}_lerp(a,b,c,e,g){const h=1-e;for(let l=0;l!==g;++l){const n=b+l;a[n]=a[n]*h+a[c+l]*e}}_lerpAdditive(a,b,c,e,g){for(let h=0;h!==g;++h){const l=b+h;a[l]+=a[c+h]*e}}}const Bl=RegExp("[\\[\\]\\.:\\/]","g"),Mh=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Gf=/(WCOD+)?/.source.replace("WCOD","[^\\[\\]:\\/]"),kk=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Cl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",
"[^\\[\\]\\.:\\/]"),qg=new RegExp("^"+Mh+Gf+kk+Cl+"$"),lk=["material","materials","bones","map"];class rg{constructor(a,b,c){c=c||bc.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}getValue(a,b){this.bind();const c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)}setValue(a,b){const c=this._bindings;for(let e=this._targetGroup.nCachedObjects_,g=c.length;e!==g;++e)c[e].setValue(a,b)}bind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].bind()}unbind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}}class bc{constructor(a,b,c){this.path=b;this.parsedPath=c||bc.parseTrackName(b);this.node=bc.findNode(a,this.parsedPath.nodeName);this.rootNode=a;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}static create(a,b,c){return a&&a.isAnimationObjectGroup?new bc.Composite(a,b,c):new bc(a,b,c)}static sanitizeNodeName(a){return a.replace(/\s/g,
"_").replace(Bl,"")}static parseTrackName(a){var b=qg.exec(a);if(null===b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};const c=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const e=b.nodeName.substring(c+1);-1!==lk.indexOf(e)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=e)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+
a);return b}static findNode(a,b){if(void 0===b||""===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){const c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){const c=function(e){for(let h=0;h<e.length;h++){var g=e[h];if(g.name===b||g.uuid===b||(g=c(g.children)))return g}return null};if(a=c(a.children))return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,b){a[b]=this.targetObject[this.propertyName]}_getValue_array(a,b){const c=
this.resolvedProperty;for(let e=0,g=c.length;e!==g;++e)a[b++]=c[e]}_getValue_arrayElement(a,b){a[b]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,b){this.resolvedProperty.toArray(a,b)}_setValue_direct(a,b){this.targetObject[this.propertyName]=a[b]}_setValue_direct_setNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=
!0}_setValue_array(a,b){const c=this.resolvedProperty;for(let e=0,g=c.length;e!==g;++e)c[e]=a[b++]}_setValue_array_setNeedsUpdate(a,b){const c=this.resolvedProperty;for(let e=0,g=c.length;e!==g;++e)c[e]=a[b++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,b){const c=this.resolvedProperty;for(let e=0,g=c.length;e!==g;++e)c[e]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,b){this.resolvedProperty[this.propertyIndex]=a[b]}_setValue_arrayElement_setNeedsUpdate(a,
b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,b){this.resolvedProperty.fromArray(a,b)}_setValue_fromArray_setNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=
!0}_getValue_unbound(a,b){this.bind();this.getValue(a,b)}_setValue_unbound(a,b){this.bind();this.setValue(a,b)}bind(){let a=this.node;var b=this.parsedPath,c=b.objectName;const e=b.propertyName;let g=b.propertyIndex;a||(this.node=a=bc.findNode(this.rootNode,b.nodeName));this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var h=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",
this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===h){h=c;break}break;case "map":if("map"in a){a=a.map;break}if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",
this);return}if(!a.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}a=a.material.map;break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[c]}if(void 0!==h){if(void 0===a[h]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[h]}}h=a[e];if(void 0===h)console.error("THREE.PropertyBinding: Trying to update property for track: "+
b.nodeName+"."+e+" but it wasn't found.",a);else{b=this.Versioning.None;this.targetObject=a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);c=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===e){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
this);return}void 0!==a.morphTargetDictionary[g]&&(g=a.morphTargetDictionary[g])}c=this.BindingType.ArrayElement;this.resolvedProperty=h;this.propertyIndex=g}else void 0!==h.fromArray&&void 0!==h.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(c=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=e;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.warn("THREE.PropertyBinding: No target node found for track: "+
this.path+".")}unbind(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}}bc.Composite=rg;bc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bc.prototype.GetterByBindingType=[bc.prototype._getValue_direct,bc.prototype._getValue_array,bc.prototype._getValue_arrayElement,bc.prototype._getValue_toArray];bc.prototype.SetterByBindingTypeAndVersioning=[[bc.prototype._setValue_direct,
bc.prototype._setValue_direct_setNeedsUpdate,bc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bc.prototype._setValue_array,bc.prototype._setValue_array_setNeedsUpdate,bc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bc.prototype._setValue_arrayElement,bc.prototype._setValue_arrayElement_setNeedsUpdate,bc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bc.prototype._setValue_fromArray,bc.prototype._setValue_fromArray_setNeedsUpdate,bc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];
class Yi{constructor(){this.isAnimationObjectGroup=!0;this.uuid=wa();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let c=0,e=arguments.length;c!==e;++c)a[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};const b=this;this.stats={objects:{get total(){return b._objects.length},get inUse(){return this.total-b.nCachedObjects_}},get bindingsPerObject(){return b._bindings.length}}}add(){const a=
this._objects,b=this._indicesByUUID,c=this._paths,e=this._parsedPaths,g=this._bindings,h=g.length;let l=void 0,n=a.length,m=this.nCachedObjects_;for(let t=0,w=arguments.length;t!==w;++t){const B=arguments[t];var q=B.uuid;let z=b[q];if(void 0===z){z=n++;b[q]=z;a.push(B);for(let D=0,J=h;D!==J;++D)g[D].push(new bc(B,c[D],e[D]))}else if(z<m){l=a[z];const D=--m;var u=a[D];b[u.uuid]=z;a[z]=u;b[q]=D;a[D]=B;for(let J=0,A=h;J!==A;++J)q=g[J],u=q[z],q[z]=q[D],void 0===u&&(u=new bc(B,c[J],e[J])),q[D]=u}else a[z]!==
l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const a=this._objects,b=this._indicesByUUID,c=this._bindings,e=c.length;let g=this.nCachedObjects_;for(let n=0,m=arguments.length;n!==m;++n){var h=arguments[n],l=h.uuid;const q=b[l];if(void 0!==q&&q>=g){const u=g++,t=a[u];b[t.uuid]=q;a[q]=t;b[l]=u;a[u]=h;for(let w=0,B=e;w!==B;++w)h=c[w],l=h[q],h[q]=h[u],
h[u]=l}}this.nCachedObjects_=g}uncache(){const a=this._objects,b=this._indicesByUUID,c=this._bindings,e=c.length;let g=this.nCachedObjects_,h=a.length;for(let u=0,t=arguments.length;u!==t;++u){var l=arguments[u].uuid;const w=b[l];if(void 0!==w)if(delete b[l],w<g){l=--g;var n=a[l],m=--h,q=a[m];b[n.uuid]=w;a[w]=n;b[q.uuid]=l;a[l]=q;a.pop();for(let B=0,z=e;B!==z;++B)n=c[B],q=n[m],n[w]=n[l],n[l]=q,n.pop()}else{l=--h;m=a[l];0<l&&(b[m.uuid]=w);a[w]=m;a.pop();for(let B=0,z=e;B!==z;++B)m=c[B],m[w]=m[l],m.pop()}}this.nCachedObjects_=
g}subscribe_(a,b){const c=this._bindingsIndicesByPath;let e=c[a];const g=this._bindings;if(void 0!==e)return g[e];const h=this._paths,l=this._parsedPaths,n=this._objects,m=this.nCachedObjects_,q=Array(n.length);e=g.length;c[a]=e;h.push(a);l.push(b);g.push(q);for(let u=m,t=n.length;u!==t;++u)q[u]=new bc(n[u],a,b);return q}unsubscribe_(a){const b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){const e=this._paths,g=this._parsedPaths,h=this._bindings,l=h.length-1,n=h[l];b[a[l]]=c;h[c]=n;h.pop();g[c]=
g[l];g.pop();e[c]=e[l];e.pop()}}}class mk{constructor(a,b,c=null,e=b.blendMode){this._mixer=a;this._clip=b;this._localRoot=c;this.blendMode=e;a=b.tracks;b=a.length;c=Array(b);e={endingStart:2400,endingEnd:2400};for(let g=0;g!==b;++g){const h=a[g].createInterpolant(null);c[g]=h;h.settings=e}this._interpolantSettings=e;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;
this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}play(){this._mixer._activateAction(this);return this}stop(){this._mixer._deactivateAction(this);return this.reset()}reset(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()}isRunning(){return this.enabled&&
!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){this._startTime=a;return this}setLoop(a,b){this.loop=a;this.repetitions=b;return this}setEffectiveWeight(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,
b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;const e=a._clip.duration,g=c/e;a.warp(1,e/c,b);this.warp(g,1,b)}return this}crossFadeTo(a,b,c){return a.crossFadeFrom(this,b,c)}stopFading(){const a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this}setEffectiveTimeScale(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){this.timeScale=
this._clip.duration/a;return this.stopWarping()}syncWith(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,b,c){var e=this._mixer;const g=e.time,h=this.timeScale;var l=this._timeScaleInterpolant;null===l&&(this._timeScaleInterpolant=l=e._lendControlInterpolant());e=l.parameterPositions;l=l.sampleValues;e[0]=g;e[1]=g+c;l[0]=a/h;l[1]=b/h;return this}stopWarping(){const a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=
null,this._mixer._takeBackControlInterpolant(a));return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,b,c,e){if(this.enabled){var g=this._startTime;null!==g&&(b=(a-g)*c,0>b||0===c?b=0:(this._startTime=null,b*=c));b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a)switch(b=this._interpolants,g=this._propertyBindings,this.blendMode){case 2501:for(let h=0,l=b.length;h!==l;++h)b[h].evaluate(c),
g[h].accumulateAdditive(a);break;default:for(let h=0,l=b.length;h!==l;++h)b[h].evaluate(c),g[h].accumulate(e,a)}}else this._updateWeight(a)}_updateWeight(a){let b=0;if(this.enabled){b=this.weight;const c=this._weightInterpolant;if(null!==c){const e=c.evaluate(a)[0];b*=e;a>c.parameterPositions[1]&&(this.stopFading(),0===e&&(this.enabled=!1))}}return this._effectiveWeight=b}_updateTimeScale(a){let b=0;if(!this.paused){b=this.timeScale;const c=this._timeScaleInterpolant;if(null!==c){const e=c.evaluate(a)[0];
b*=e;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b}_updateTime(a){const b=this._clip.duration;var c=this.loop;let e=this.time+a,g=this._loopCount;const h=2202===c;if(0===a)return-1===g?e:h&&1===(g&1)?b-e:e;if(2200===c)a:{if(-1===g&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=b)e=b;else if(0>e)e=0;else{this.time=e;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=e;this._mixer.dispatchEvent({type:"finished",
action:this,direction:0>a?-1:1})}else{-1===g&&(0<=a?(g=0,this._setEndings(!0,0===this.repetitions,h)):this._setEndings(0===this.repetitions,!0,h));if(e>=b||0>e){c=Math.floor(e/b);e-=b*c;g+=Math.abs(c);const l=this.repetitions-g;0>=l?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=0<a?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===l?(a=0>a,this._setEndings(a,!a,h)):this._setEndings(!1,!1,h),this._loopCount=g,this.time=e,this._mixer.dispatchEvent({type:"loop",
action:this,loopDelta:c}))}else this.time=e;if(h&&1===(g&1))return b-e}return e}_setEndings(a,b,c){const e=this._interpolantSettings;c?(e.endingStart=2401,e.endingEnd=2401):(e.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,e.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(a,b,c){var e=this._mixer;const g=e.time;var h=this._weightInterpolant;null===h&&(this._weightInterpolant=h=e._lendControlInterpolant());e=h.parameterPositions;h=h.sampleValues;e[0]=g;h[0]=b;e[1]=g+a;h[1]=c;return this}}
const nk=new Float32Array(1);class ok extends Jd{constructor(a){super();this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}_bindAction(a,b){const c=a._localRoot||this._root,e=a._clip.tracks,g=e.length,h=a._propertyBindings;a=a._interpolants;const l=c.uuid;var n=this._bindingsByRootAndName;let m=n[l];void 0===m&&(m={},n[l]=m);for(n=0;n!==g;++n){const q=e[n],u=q.name;let t=m[u];if(void 0!==t)++t.referenceCount;else{t=h[n];if(void 0!==t){null===t._cacheIndex&&(++t.referenceCount,
this._addInactiveBinding(t,l,u));continue}t=new Qd(bc.create(c,u,b&&b._propertyBindings[n].binding.parsedPath),q.ValueTypeName,q.getValueSize());++t.referenceCount;this._addInactiveBinding(t,l,u)}h[n]=t;a[n].resultBuffer=t.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid;const e=this._actionsByClip[c];this._bindAction(a,e&&e.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;for(let e=0,g=b.length;e!==
g;++e)c=b[e],0===c.useCount++&&(this._lendBinding(c),c.saveOriginalState());this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const b=a._propertyBindings;for(let c=0,e=b.length;c!==e;++c){const g=b[c];0===--g.useCount&&(g.restoreOriginalState(),this._takeBackBinding(g))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];
this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions}_addInactiveAction(a,b,c){const e=this._actions,g=this._actionsByClip;
let h=g[b];void 0===h?(h={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,g[b]=h):(b=h.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=e.length;e.push(a);h.actionByRoot[c]=a}_removeInactiveAction(a){var b=this._actions,c=b[b.length-1],e=a._cacheIndex;c._cacheIndex=e;b[e]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;e=c[b];const g=e.knownActions,h=g[g.length-1],l=a._byClipCacheIndex;h._byClipCacheIndex=l;g[l]=h;g.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(a._localRoot||
this._root).uuid];0===g.length&&delete c[b];this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){a=a._propertyBindings;for(let b=0,c=a.length;b!==c;++b){const e=a[b];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(a){const b=this._actions,c=a._cacheIndex,e=this._nActiveActions++,g=b[e];a._cacheIndex=e;b[e]=a;g._cacheIndex=c;b[c]=g}_takeBackAction(a){const b=this._actions,c=a._cacheIndex,e=--this._nActiveActions,g=b[e];a._cacheIndex=e;b[e]=a;g._cacheIndex=
c;b[c]=g}_addInactiveBinding(a,b,c){const e=this._bindingsByRootAndName,g=this._bindings;let h=e[b];void 0===h&&(h={},e[b]=h);h[c]=a;a._cacheIndex=g.length;g.push(a)}_removeInactiveBinding(a){const b=this._bindings;var c=a.binding;const e=c.rootNode.uuid;c=c.path;const g=this._bindingsByRootAndName,h=g[e],l=b[b.length-1];a=a._cacheIndex;l._cacheIndex=a;b[a]=l;b.pop();delete h[c];0===Object.keys(h).length&&delete g[e]}_lendBinding(a){const b=this._bindings,c=a._cacheIndex,e=this._nActiveBindings++,
g=b[e];a._cacheIndex=e;b[e]=a;g._cacheIndex=c;b[c]=g}_takeBackBinding(a){const b=this._bindings,c=a._cacheIndex,e=--this._nActiveBindings,g=b[e];a._cacheIndex=e;b[e]=a;g._cacheIndex=c;b[c]=g}_lendControlInterpolant(){const a=this._controlInterpolants,b=this._nActiveControlInterpolants++;let c=a[b];void 0===c&&(c=new Ih(new Float32Array(2),new Float32Array(2),1,nk),c.__cacheIndex=b,a[b]=c);return c}_takeBackControlInterpolant(a){const b=this._controlInterpolants,c=a.__cacheIndex,e=--this._nActiveControlInterpolants,
g=b[e];a.__cacheIndex=e;b[e]=a;g.__cacheIndex=c;b[c]=g}clipAction(a,b,c){var e=b||this._root;const g=e.uuid;e="string"===typeof a?Pi.findByName(e,a):a;a=null!==e?e.uuid:a;const h=this._actionsByClip[a];var l=null;void 0===c&&(c=null!==e?e.blendMode:2500);if(void 0!==h){l=h.actionByRoot[g];if(void 0!==l&&l.blendMode===c)return l;l=h.knownActions[0];null===e&&(e=l._clip)}if(null===e)return null;b=new mk(this,e,b,c);this._bindAction(b,l);this._addInactiveAction(b,a,g);return b}existingAction(a,b){var c=
b||this._root;b=c.uuid;c="string"===typeof a?Pi.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null}stopAllAction(){const a=this._actions;var b=this._nActiveActions;for(--b;0<=b;--b)a[b].stop();return this}update(a){a*=this.timeScale;var b=this._actions,c=this._nActiveActions;const e=this.time+=a,g=Math.sign(a),h=this._accuIndex^=1;for(let l=0;l!==c;++l)b[l]._update(e,a,g,h);a=this._bindings;b=this._nActiveBindings;for(c=0;c!==b;++c)a[c].apply(h);return this}setTime(a){this.time=
0;for(let b=0;b<this._actions.length;b++)this._actions[b].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const b=this._actions;a=a.uuid;const c=this._actionsByClip;var e=c[a];if(void 0!==e){e=e.knownActions;for(let g=0,h=e.length;g!==h;++g){const l=e[g];this._deactivateAction(l);const n=l._cacheIndex,m=b[b.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;m._cacheIndex=n;b[n]=m;b.pop();this._removeInactiveBindingsForAction(l)}delete c[a]}}uncacheRoot(a){a=a.uuid;const b=
this._actionsByClip;for(var c in b){const e=b[c].actionByRoot[a];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}c=this._bindingsByRootAndName[a];if(void 0!==c)for(const e in c)a=c[e],a.restoreOriginalState(),this._removeInactiveBinding(a)}uncacheAction(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}class Um{constructor(a){this.value=a}clone(){return new Um(void 0===this.value.clone?this.value:this.value.clone())}}let Vm=
0;class zn extends Jd{constructor(){super();this.isUniformsGroup=!0;Object.defineProperty(this,"id",{value:Vm++});this.name="";this.usage=35044;this.uniforms=[]}add(a){this.uniforms.push(a);return this}remove(a){a=this.uniforms.indexOf(a);-1!==a&&this.uniforms.splice(a,1);return this}setName(a){this.name=a;return this}setUsage(a){this.usage=a;return this}dispose(){this.dispatchEvent({type:"dispose"});return this}copy(a){this.name=a.name;this.usage=a.usage;a=a.uniforms;this.uniforms.length=0;for(let b=
0,c=a.length;b<c;b++){const e=Array.isArray(a[b])?a[b]:[a[b]];for(let g=0;g<e.length;g++)this.uniforms.push(e[g].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Wm extends xf{constructor(a,b,c=1){super(a,b);this.isInstancedInterleavedBuffer=!0;this.meshPerAttribute=c}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}clone(a){a=super.clone(a);a.meshPerAttribute=this.meshPerAttribute;return a}toJSON(a){a=super.toJSON(a);a.isInstancedInterleavedBuffer=
!0;a.meshPerAttribute=this.meshPerAttribute;return a}}class An{constructor(a,b,c,e,g){this.isGLBufferAttribute=!0;this.name="";this.buffer=a;this.type=b;this.itemSize=c;this.elementSize=e;this.count=g;this.version=0}set needsUpdate(a){!0===a&&this.version++}setBuffer(a){this.buffer=a;return this}setType(a,b){this.type=a;this.elementSize=b;return this}setItemSize(a){this.itemSize=a;return this}setCount(a){this.count=a;return this}}const Xm=new Mb;class Bn{constructor(a,b,c=0,e=Infinity){this.ray=new zg(a,
b);this.near=c;this.far=e;this.camera=null;this.layers=new Wh;this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,b){this.ray.set(a,b)}setFromCamera(a,b){b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize(),this.camera=b):b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld),
this.camera=b):console.error("THREE.Raycaster: Unsupported camera type: "+b.type)}setFromXRController(a){Xm.identity().extractRotation(a.matrixWorld);this.ray.origin.setFromMatrixPosition(a.matrixWorld);this.ray.direction.set(0,0,-1).applyMatrix4(Xm);return this}intersectObject(a,b=!0,c=[]){uj(a,this,c,b);c.sort(tj);return c}intersectObjects(a,b=!0,c=[]){for(let e=0,g=a.length;e<g;e++)uj(a[e],this,c,b);c.sort(tj);return c}}class Cn{constructor(a=1,b=0,c=0){this.radius=a;this.phi=b;this.theta=c;return this}set(a,
b,c){this.radius=a;this.phi=b;this.theta=c;return this}copy(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this}makeSafe(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,b,c){this.radius=Math.sqrt(a*a+b*b+c*c);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,c),this.phi=Math.acos(Gb(b/this.radius,-1,1)));return this}clone(){return(new this.constructor).copy(this)}}
class Zi{constructor(a=1,b=0,c=0){this.radius=a;this.theta=b;this.y=c;return this}set(a,b,c){this.radius=a;this.theta=b;this.y=c;return this}copy(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,b,c){this.radius=Math.sqrt(a*a+c*c);this.theta=Math.atan2(a,c);this.y=b;return this}clone(){return(new this.constructor).copy(this)}}const Ym=new Fa;class pk{constructor(a=new Fa(Infinity,Infinity),
b=new Fa(-Infinity,-Infinity)){this.isBox2=!0;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromPoints(a){this.makeEmpty();for(let b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=Ym.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=Infinity;this.max.x=
this.max.y=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}containsPoint(a){return a.x<this.min.x||
a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return this.clampPoint(a,Ym).distanceTo(a)}intersect(a){this.min.max(a.min);
this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}const d=new O,f=new O;class k{constructor(a=new O,b=new O){this.start=a;this.end=b}set(a,b){this.start.copy(a);this.end.copy(b);return this}copy(a){this.start.copy(a.start);this.end.copy(a.end);return this}getCenter(a){return a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return a.subVectors(this.end,
this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,b){return this.delta(b).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,b){d.subVectors(a,this.start);f.subVectors(this.end,this.start);a=f.dot(f);a=f.dot(d)/a;b&&(a=Gb(a,0,1));return a}closestPointToPoint(a,b,c){a=this.closestPointToPointParameter(a,b);return this.delta(c).multiplyScalar(a).add(this.start)}applyMatrix4(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);
return this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const p=new O;class r extends ec{constructor(a,b){super();this.light=a;this.matrixAutoUpdate=!1;this.color=b;this.type="SpotLightHelper";a=new Kb;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,e=1,g=32;c<g;c++,e++){const h=c/g*Math.PI*2,l=e/g*Math.PI*2;b.push(Math.cos(h),Math.sin(h),1,Math.cos(l),Math.sin(l),1)}a.setAttribute("position",new pb(b,
3));b=new Nd({fog:!1,toneMapped:!1});this.cone=new We(a,b);this.add(this.cone);this.update()}dispose(){this.cone.geometry.dispose();this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);this.light.target.updateWorldMatrix(!0,!1);this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld);this.matrixWorld.copy(this.light.matrixWorld);const a=this.light.distance?this.light.distance:
1E3,b=a*Math.tan(this.light.angle);this.cone.scale.set(b,b,a);p.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(p);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const v=new O,F=new Mb,S=new Mb;class W extends We{constructor(a){const b=ci(a),c=new Kb;var e=[];const g=[],h=new nb(0,0,1),l=new nb(0,1,0);for(let n=0;n<b.length;n++){const m=b[n];m.parent&&m.parent.isBone&&(e.push(0,0,0),e.push(0,0,0),g.push(h.r,h.g,h.b),
g.push(l.r,l.g,l.b))}c.setAttribute("position",new pb(e,3));c.setAttribute("color",new pb(g,3));e=new Nd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(c,e);this.isSkeletonHelper=!0;this.type="SkeletonHelper";this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}updateMatrixWorld(a){const b=this.bones,c=this.geometry,e=c.getAttribute("position");S.copy(this.root.matrixWorld).invert();for(let g=0,h=0;g<b.length;g++){const l=b[g];l.parent&&l.parent.isBone&&
(F.multiplyMatrices(S,l.matrixWorld),v.setFromMatrixPosition(F),e.setXYZ(h,v.x,v.y,v.z),F.multiplyMatrices(S,l.parent.matrixWorld),v.setFromMatrixPosition(F),e.setXYZ(h+1,v.x,v.y,v.z),h+=2)}c.getAttribute("position").needsUpdate=!0;super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose()}}class ua extends Uc{constructor(a,b,c){b=new ck(b,4,2);const e=new ie({wireframe:!0,fog:!1,toneMapped:!1});super(b,e);this.light=a;this.color=c;this.type="PointLightHelper";this.matrix=
this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}dispose(){this.geometry.dispose();this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qa=new O,Ta=new nb,Pa=new nb;class qb extends ec{constructor(a,b,c){super();this.light=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;this.type="HemisphereLightHelper";a=new Gh(b);a.rotateY(.5*Math.PI);this.material=
new ie({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.setAttribute("color",new pc(b,3));this.add(new Uc(a,this.material));this.update()}dispose(){this.children[0].geometry.dispose();this.children[0].material.dispose()}update(){const a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const b=a.geometry.getAttribute("color");Ta.copy(this.light.color);Pa.copy(this.light.groundColor);
for(let c=0,e=b.count;c<e;c++){const g=c<e/2?Ta:Pa;b.setXYZ(c,g.r,g.g,g.b)}b.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1);a.lookAt(Qa.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ab extends We{constructor(a=10,b=10,c=4473924,e=8947848){c=new nb(c);e=new nb(e);const g=b/2,h=a/b,l=a/2;a=[];const n=[];for(let m=0,q=0,u=-l;m<=b;m++,u+=h){a.push(-l,0,u,l,0,u);a.push(u,0,-l,u,0,l);const t=m===g?c:e;t.toArray(n,q);q+=3;t.toArray(n,q);q+=3;t.toArray(n,q);q+=3;t.toArray(n,q);q+=3}b=
new Kb;b.setAttribute("position",new pb(a,3));b.setAttribute("color",new pb(n,3));c=new Nd({vertexColors:!0,toneMapped:!1});super(b,c);this.type="GridHelper"}dispose(){this.geometry.dispose();this.material.dispose()}}class Bb extends We{constructor(a=10,b=16,c=8,e=64,g=4473924,h=8947848){g=new nb(g);h=new nb(h);var l=[];const n=[];if(1<b)for(var m=0;m<b;m++){var q=m/b*2*Math.PI,u=Math.sin(q)*a;q=Math.cos(q)*a;l.push(0,0,0);l.push(u,0,q);u=m&1?g:h;n.push(u.r,u.g,u.b);n.push(u.r,u.g,u.b)}for(b=0;b<
c;b++)for(m=b&1?g:h,u=a-a/c*b,q=0;q<e;q++){var t=q/e*2*Math.PI;let w=Math.sin(t)*u;t=Math.cos(t)*u;l.push(w,0,t);n.push(m.r,m.g,m.b);t=(q+1)/e*2*Math.PI;w=Math.sin(t)*u;t=Math.cos(t)*u;l.push(w,0,t);n.push(m.r,m.g,m.b)}a=new Kb;a.setAttribute("position",new pb(l,3));a.setAttribute("color",new pb(n,3));l=new Nd({vertexColors:!0,toneMapped:!1});super(a,l);this.type="PolarGridHelper"}dispose(){this.geometry.dispose();this.material.dispose()}}const Mc=new O,ha=new O,ba=new O;class qa extends ec{constructor(a,
b,c){super();this.light=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;this.type="DirectionalLightHelper";void 0===b&&(b=1);a=new Kb;a.setAttribute("position",new pb([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new Nd({fog:!1,toneMapped:!1});this.lightPlane=new hg(a,b);this.add(this.lightPlane);a=new Kb;a.setAttribute("position",new pb([0,0,0,0,0,1],3));this.targetLine=new hg(a,b);this.add(this.targetLine);this.update()}dispose(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();
this.targetLine.geometry.dispose();this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1);this.light.target.updateWorldMatrix(!0,!1);Mc.setFromMatrixPosition(this.light.matrixWorld);ha.setFromMatrixPosition(this.light.target.matrixWorld);ba.subVectors(ha,Mc);this.lightPlane.lookAt(ha);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));
this.targetLine.lookAt(ha);this.targetLine.scale.z=ba.length()}}const Za=new O,gb=new rf;class Lb extends We{constructor(a){function b(u,t){c(u);c(t)}function c(u){h.push(0,0,0);l.push(0,0,0);void 0===n[u]&&(n[u]=[]);n[u].push(h.length/3-1)}var e=new Kb,g=new Nd({color:16777215,vertexColors:!0,toneMapped:!1});const h=[],l=[],n={};b("n1","n2");b("n2","n4");b("n4","n3");b("n3","n1");b("f1","f2");b("f2","f4");b("f4","f3");b("f3","f1");b("n1","f1");b("n2","f2");b("n3","f3");b("n4","f4");b("p","n1");b("p",
"n2");b("p","n3");b("p","n4");b("u1","u2");b("u2","u3");b("u3","u1");b("c","t");b("p","c");b("cn1","cn2");b("cn3","cn4");b("cf1","cf2");b("cf3","cf4");e.setAttribute("position",new pb(h,3));e.setAttribute("color",new pb(l,3));super(e,g);this.type="CameraHelper";this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=n;this.update();a=new nb(16755200);e=new nb(16711680);g=new nb(43775);const m=new nb(16777215),
q=new nb(3355443);this.setColors(a,e,g,m,q)}setColors(a,b,c,e,g){const h=this.geometry.getAttribute("color");h.setXYZ(0,a.r,a.g,a.b);h.setXYZ(1,a.r,a.g,a.b);h.setXYZ(2,a.r,a.g,a.b);h.setXYZ(3,a.r,a.g,a.b);h.setXYZ(4,a.r,a.g,a.b);h.setXYZ(5,a.r,a.g,a.b);h.setXYZ(6,a.r,a.g,a.b);h.setXYZ(7,a.r,a.g,a.b);h.setXYZ(8,a.r,a.g,a.b);h.setXYZ(9,a.r,a.g,a.b);h.setXYZ(10,a.r,a.g,a.b);h.setXYZ(11,a.r,a.g,a.b);h.setXYZ(12,a.r,a.g,a.b);h.setXYZ(13,a.r,a.g,a.b);h.setXYZ(14,a.r,a.g,a.b);h.setXYZ(15,a.r,a.g,a.b);h.setXYZ(16,
a.r,a.g,a.b);h.setXYZ(17,a.r,a.g,a.b);h.setXYZ(18,a.r,a.g,a.b);h.setXYZ(19,a.r,a.g,a.b);h.setXYZ(20,a.r,a.g,a.b);h.setXYZ(21,a.r,a.g,a.b);h.setXYZ(22,a.r,a.g,a.b);h.setXYZ(23,a.r,a.g,a.b);h.setXYZ(24,b.r,b.g,b.b);h.setXYZ(25,b.r,b.g,b.b);h.setXYZ(26,b.r,b.g,b.b);h.setXYZ(27,b.r,b.g,b.b);h.setXYZ(28,b.r,b.g,b.b);h.setXYZ(29,b.r,b.g,b.b);h.setXYZ(30,b.r,b.g,b.b);h.setXYZ(31,b.r,b.g,b.b);h.setXYZ(32,c.r,c.g,c.b);h.setXYZ(33,c.r,c.g,c.b);h.setXYZ(34,c.r,c.g,c.b);h.setXYZ(35,c.r,c.g,c.b);h.setXYZ(36,c.r,
c.g,c.b);h.setXYZ(37,c.r,c.g,c.b);h.setXYZ(38,e.r,e.g,e.b);h.setXYZ(39,e.r,e.g,e.b);h.setXYZ(40,g.r,g.g,g.b);h.setXYZ(41,g.r,g.g,g.b);h.setXYZ(42,g.r,g.g,g.b);h.setXYZ(43,g.r,g.g,g.b);h.setXYZ(44,g.r,g.g,g.b);h.setXYZ(45,g.r,g.g,g.b);h.setXYZ(46,g.r,g.g,g.b);h.setXYZ(47,g.r,g.g,g.b);h.setXYZ(48,g.r,g.g,g.b);h.setXYZ(49,g.r,g.g,g.b);h.needsUpdate=!0}update(){const a=this.geometry,b=this.pointMap;gb.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);Oc("c",b,a,gb,0,0,-1);Oc("t",b,a,gb,
0,0,1);Oc("n1",b,a,gb,-1,-1,-1);Oc("n2",b,a,gb,1,-1,-1);Oc("n3",b,a,gb,-1,1,-1);Oc("n4",b,a,gb,1,1,-1);Oc("f1",b,a,gb,-1,-1,1);Oc("f2",b,a,gb,1,-1,1);Oc("f3",b,a,gb,-1,1,1);Oc("f4",b,a,gb,1,1,1);Oc("u1",b,a,gb,.7,1.1,-1);Oc("u2",b,a,gb,-.7,1.1,-1);Oc("u3",b,a,gb,0,2,-1);Oc("cf1",b,a,gb,-1,0,1);Oc("cf2",b,a,gb,1,0,1);Oc("cf3",b,a,gb,0,-1,1);Oc("cf4",b,a,gb,0,1,1);Oc("cn1",b,a,gb,-1,0,-1);Oc("cn2",b,a,gb,1,0,-1);Oc("cn3",b,a,gb,0,-1,-1);Oc("cn4",b,a,gb,0,1,-1);a.getAttribute("position").needsUpdate=
!0}dispose(){this.geometry.dispose();this.material.dispose()}}const Jb=new od;class Pb extends We{constructor(a,b=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),e=new Float32Array(24),g=new Kb;g.setIndex(new pc(c,1));g.setAttribute("position",new pc(e,3));super(g,new Nd({color:b,toneMapped:!1}));this.object=a;this.type="BoxHelper";this.matrixAutoUpdate=!1;this.update()}update(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==
this.object&&Jb.setFromObject(this.object);if(!Jb.isEmpty()){a=Jb.min;var b=Jb.max,c=this.geometry.attributes.position,e=c.array;e[0]=b.x;e[1]=b.y;e[2]=b.z;e[3]=a.x;e[4]=b.y;e[5]=b.z;e[6]=a.x;e[7]=a.y;e[8]=b.z;e[9]=b.x;e[10]=a.y;e[11]=b.z;e[12]=b.x;e[13]=b.y;e[14]=a.z;e[15]=a.x;e[16]=b.y;e[17]=a.z;e[18]=a.x;e[19]=a.y;e[20]=a.z;e[21]=b.x;e[22]=a.y;e[23]=a.z;c.needsUpdate=!0;this.geometry.computeBoundingSphere()}}setFromObject(a){this.object=a;this.update();return this}copy(a,b){super.copy(a,b);this.object=
a.object;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class kd extends We{constructor(a,b=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),e=new Kb;e.setIndex(new pc(c,1));e.setAttribute("position",new pb([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));super(e,new Nd({color:b,toneMapped:!1}));this.box=a;this.type="Box3Helper";this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const b=this.box;b.isEmpty()||(b.getCenter(this.position),
b.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}dispose(){this.geometry.dispose();this.material.dispose()}}class hc extends hg{constructor(a,b=1,c=16776960){const e=new Kb;e.setAttribute("position",new pb([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3));e.computeBoundingSphere();super(e,new Nd({color:c,toneMapped:!1}));this.type="PlaneHelper";this.plane=a;this.size=b;a=new Kb;a.setAttribute("position",new pb([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],
3));a.computeBoundingSphere();this.add(new Uc(a,new ie({color:c,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){this.position.set(0,0,0);this.scale.set(.5*this.size,.5*this.size,1);this.lookAt(this.plane.normal);this.translateZ(-this.plane.constant);super.updateMatrixWorld(a)}dispose(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();this.children[0].material.dispose()}}const Hf=new O;let qk,Dn;class Kn extends ec{constructor(a=new O(0,
0,1),b=new O(0,0,0),c=1,e=16776960,g=.2*c,h=.2*g){super();this.type="ArrowHelper";void 0===qk&&(qk=new Kb,qk.setAttribute("position",new pb([0,0,0,0,1,0],3)),Dn=new Ch(0,.5,1,5,1),Dn.translate(0,-.5,0));this.position.copy(b);this.line=new hg(qk,new Nd({color:e,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new Uc(Dn,new ie({color:e,toneMapped:!1}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,g,h)}setDirection(a){.99999<a.y?
this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(Hf.set(a.z,0,-a.x).normalize(),this.quaternion.setFromAxisAngle(Hf,Math.acos(a.y)))}setLength(a,b=.2*a,c=.2*b){this.line.scale.set(1,Math.max(1E-4,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a);this.cone.material.color.set(a)}copy(a){super.copy(a,!1);this.line.copy(a.line);this.cone.copy(a.cone);return this}dispose(){this.line.geometry.dispose();
this.line.material.dispose();this.cone.geometry.dispose();this.cone.material.dispose()}}class Ln extends We{constructor(a=1){var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new Kb;a.setAttribute("position",new pb(b,3));a.setAttribute("color",new pb([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new Nd({vertexColors:!0,toneMapped:!1});super(a,b);this.type="AxesHelper"}setColors(a,b,c){const e=new nb,g=this.geometry.attributes.color.array;e.set(a);e.toArray(g,0);e.toArray(g,3);e.set(b);e.toArray(g,6);
e.toArray(g,9);e.set(c);e.toArray(g,12);e.toArray(g,15);this.geometry.attributes.color.needsUpdate=!0;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Mn{constructor(){this.type="ShapePath";this.color=new nb;this.subPaths=[];this.currentPath=null}moveTo(a,b){this.currentPath=new Wg;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b);return this}lineTo(a,b){this.currentPath.lineTo(a,b);return this}quadraticCurveTo(a,b,c,e){this.currentPath.quadraticCurveTo(a,
b,c,e);return this}bezierCurveTo(a,b,c,e,g,h){this.currentPath.bezierCurveTo(a,b,c,e,g,h);return this}splineThru(a){this.currentPath.splineThru(a);return this}toShapes(a){function b(z){const D=[];for(let J=0,A=z.length;J<A;J++){const K=z[J],oa=new Xg;oa.curves=K.curves;D.push(oa)}return D}function c(z,D){const J=D.length;let A=!1;for(let oa=J-1,R=0;R<J;oa=R++){var K=D[oa];let U=D[R],ja=U.x-K.x,ka=U.y-K.y;if(Math.abs(ka)>Number.EPSILON){if(0>ka&&(K=D[R],ja=-ja,U=D[oa],ka=-ka),!(z.y<K.y||z.y>U.y))if(z.y===
K.y){if(z.x===K.x)return!0}else{K=ka*(z.x-K.x)-ja*(z.y-K.y);if(0===K)return!0;0>K||(A=!A)}}else if(z.y===K.y&&(U.x<=z.x&&z.x<=K.x||K.x<=z.x&&z.x<=U.x))return!0}return A}var e=Cf.isClockWise,g=this.subPaths;if(0===g.length)return[];const h=[];if(1===g.length){var l=g[0];var n=new Xg;n.curves=l.curves;h.push(n);return h}var m=!e(g[0].getPoints());m=a?!m:m;n=[];const q=[];let u=[];var t=0;let w;q[t]=void 0;u[t]=[];for(let z=0,D=g.length;z<D;z++){l=g[z];w=l.getPoints();var B=e(w);(B=a?!B:B)?(!m&&q[t]&&
t++,q[t]={s:new Xg,p:w},q[t].s.curves=l.curves,m&&t++,u[t]=[]):u[t].push({h:l,p:w[0]})}if(!q[0])return b(g);if(1<q.length){l=!1;a=0;for(let z=0,D=q.length;z<D;z++)n[z]=[];for(let z=0,D=q.length;z<D;z++)for(e=u[z],g=0;g<e.length;g++){B=e[g];m=!0;for(t=0;t<q.length;t++)c(B.p,q[t].p)&&(z!==t&&a++,m?(m=!1,n[t].push(B)):l=!0);m&&n[z].push(B)}0<a&&!1===l&&(u=n)}for(let z=0,D=q.length;z<D;z++){n=q[z].s;h.push(n);l=u[z];for(let J=0,A=l.length;J<A;J++)n.holes.push(l[J].h)}return h}}class Nn extends Rd{constructor(a=
1,b=1,c=1,e={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.');super(a,b,{...e,count:c});this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"162"}}));"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):
window.__THREE__="162");x.ACESFilmicToneMapping=4;x.AddEquation=100;x.AddOperation=2;x.AdditiveAnimationBlendMode=2501;x.AdditiveBlending=2;x.AgXToneMapping=6;x.AlphaFormat=1021;x.AlwaysCompare=519;x.AlwaysDepth=1;x.AlwaysStencilFunc=519;x.AmbientLight=Om;x.AnimationAction=mk;x.AnimationClip=Pi;x.AnimationLoader=gk;x.AnimationMixer=ok;x.AnimationObjectGroup=Yi;x.AnimationUtils=Hh;x.ArcCurve=Rg;x.ArrayCamera=jl;x.ArrowHelper=Kn;x.AttachedBindMode="attached";x.Audio=$g;x.AudioAnalyser=Xi;x.AudioContext=
jk;x.AudioListener=ne;x.AudioLoader=xd;x.AxesHelper=Ln;x.BackSide=1;x.BasicDepthPacking=3200;x.BasicShadowMap=0;x.BatchedMesh=zm;x.Bone=Ve;x.BooleanKeyframeTrack=ee;x.Box2=pk;x.Box3=od;x.Box3Helper=kd;x.BoxGeometry=ug;x.BoxHelper=Pb;x.BufferAttribute=pc;x.BufferGeometry=Kb;x.BufferGeometryLoader=yl;x.ByteType=1010;x.Cache=xe;x.Camera=rf;x.CameraHelper=Lb;x.CanvasTexture=Im;x.CapsuleGeometry=Vj;x.CatmullRomCurve3=Tj;x.CineonToneMapping=3;x.CircleGeometry=Wj;x.ClampToEdgeWrapping=1001;x.Clock=me;x.Color=
nb;x.ColorKeyframeTrack=Fe;x.ColorManagement=lc;x.CompressedArrayTexture=Ii;x.CompressedCubeTexture=vn;x.CompressedTexture=Ah;x.CompressedTextureLoader=Jh;x.ConeGeometry=Xj;x.ConstantAlphaFactor=213;x.ConstantColorFactor=211;x.CubeCamera=pm;x.CubeReflectionMapping=301;x.CubeRefractionMapping=302;x.CubeTexture=mi;x.CubeTextureLoader=Qi;x.CubeUVReflectionMapping=306;x.CubicBezierCurve=Uj;x.CubicBezierCurve3=tl;x.CubicInterpolant=Oi;x.CullFaceBack=1;x.CullFaceFront=2;x.CullFaceFrontBack=3;x.CullFaceNone=
0;x.Curve=ve;x.CurvePath=Vg;x.CustomBlending=5;x.CustomToneMapping=5;x.CylinderGeometry=Ch;x.Cylindrical=Zi;x.Data3DTexture=nf;x.DataArrayTexture=Oh;x.DataTexture=Md;x.DataTextureLoader=$e;x.DataUtils=nn;x.DecrementStencilOp=7683;x.DecrementWrapStencilOp=34056;x.DefaultLoadingManager=Ef;x.DepthFormat=1026;x.DepthStencilFormat=1027;x.DepthTexture=gl;x.DetachedBindMode="detached";x.DirectionalLight=Nm;x.DirectionalLightHelper=qa;x.DiscreteInterpolant=le;x.DisplayP3ColorSpace="display-p3";x.DodecahedronGeometry=
Yj;x.DoubleSide=2;x.DstAlphaFactor=206;x.DstColorFactor=208;x.DynamicCopyUsage=35050;x.DynamicDrawUsage=35048;x.DynamicReadUsage=35049;x.EdgesGeometry=Fh;x.EllipseCurve=Ji;x.EqualCompare=514;x.EqualDepth=4;x.EqualStencilFunc=514;x.EquirectangularReflectionMapping=303;x.EquirectangularRefractionMapping=304;x.Euler=he;x.EventDispatcher=Jd;x.ExtrudeGeometry=vl;x.FileLoader=Ze;x.Float16BufferAttribute=mm;x.Float32BufferAttribute=pb;x.FloatType=1015;x.Fog=wi;x.FogExp2=ml;x.FramebufferTexture=un;x.FrontSide=
0;x.Frustum=Ee;x.GLBufferAttribute=An;x.GLSL1="100";x.GLSL3="300 es";x.GreaterCompare=516;x.GreaterDepth=6;x.GreaterEqualCompare=518;x.GreaterEqualDepth=5;x.GreaterEqualStencilFunc=518;x.GreaterStencilFunc=516;x.GridHelper=Ab;x.Group=Gg;x.HalfFloatType=1016;x.HemisphereLight=Hc;x.HemisphereLightHelper=qb;x.IcosahedronGeometry=Mi;x.ImageBitmapLoader=yn;x.ImageLoader=Kh;x.ImageUtils=aj;x.IncrementStencilOp=7682;x.IncrementWrapStencilOp=34055;x.InstancedBufferAttribute=je;x.InstancedBufferGeometry=Sm;
x.InstancedInterleavedBuffer=Wm;x.InstancedMesh=Og;x.Int16BufferAttribute=$k;x.Int32BufferAttribute=Yf;x.Int8BufferAttribute=jm;x.IntType=1013;x.InterleavedBuffer=xf;x.InterleavedBufferAttribute=dg;x.Interpolant=Ye;x.InterpolateDiscrete=2300;x.InterpolateLinear=2301;x.InterpolateSmooth=2302;x.InvertStencilOp=5386;x.KeepStencilOp=7680;x.KeyframeTrack=Tc;x.LOD=pl;x.LatheGeometry=Li;x.Layers=Wh;x.LessCompare=513;x.LessDepth=2;x.LessEqualCompare=515;x.LessEqualDepth=3;x.LessEqualStencilFunc=515;x.LessStencilFunc=
513;x.Light=ye;x.LightProbe=Rm;x.Line=hg;x.Line3=k;x.LineBasicMaterial=Nd;x.LineCurve=ke;x.LineCurve3=Jm;x.LineDashedMaterial=fk;x.LineLoop=Fm;x.LineSegments=We;x.LinearDisplayP3ColorSpace="display-p3-linear";x.LinearFilter=1006;x.LinearInterpolant=Ih;x.LinearMipMapLinearFilter=1008;x.LinearMipMapNearestFilter=1007;x.LinearMipmapLinearFilter=1008;x.LinearMipmapNearestFilter=1007;x.LinearSRGBColorSpace="srgb-linear";x.LinearToneMapping=1;x.LinearTransfer="linear";x.Loader=jd;x.LoaderUtils=Vi;x.LoadingManager=
ng;x.LoopOnce=2200;x.LoopPingPong=2202;x.LoopRepeat=2201;x.LuminanceAlphaFormat=1025;x.LuminanceFormat=1024;x.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};x.Material=Dd;x.MaterialLoader=Fd;x.MathUtils=mh;x.Matrix3=Ub;x.Matrix4=Mb;x.MaxEquation=104;x.Mesh=Uc;x.MeshBasicMaterial=ie;x.MeshDepthMaterial=Xh;x.MeshDistanceMaterial=Pe;x.MeshLambertMaterial=Xe;x.MeshMatcapMaterial=Ni;x.MeshNormalMaterial=mg;x.MeshPhongMaterial=vd;x.MeshPhysicalMaterial=Df;x.MeshStandardMaterial=lg;x.MeshToonMaterial=
Od;x.MinEquation=103;x.MirroredRepeatWrapping=1002;x.MixOperation=1;x.MultiplyBlending=4;x.MultiplyOperation=0;x.NearestFilter=1003;x.NearestMipMapLinearFilter=1005;x.NearestMipMapNearestFilter=1004;x.NearestMipmapLinearFilter=1005;x.NearestMipmapNearestFilter=1004;x.NeutralToneMapping=7;x.NeverCompare=512;x.NeverDepth=0;x.NeverStencilFunc=512;x.NoBlending=0;x.NoColorSpace="";x.NoToneMapping=0;x.NormalAnimationBlendMode=2500;x.NormalBlending=1;x.NotEqualCompare=517;x.NotEqualDepth=7;x.NotEqualStencilFunc=
517;x.NumberKeyframeTrack=de;x.Object3D=ec;x.ObjectLoader=wn;x.ObjectSpaceNormalMap=1;x.OctahedronGeometry=Gh;x.OneFactor=201;x.OneMinusConstantAlphaFactor=214;x.OneMinusConstantColorFactor=212;x.OneMinusDstAlphaFactor=207;x.OneMinusDstColorFactor=209;x.OneMinusSrcAlphaFactor=205;x.OneMinusSrcColorFactor=203;x.OrthographicCamera=ni;x.P3Primaries="p3";x.PCFShadowMap=1;x.PCFSoftShadowMap=2;x.PMREMGenerator=bj;x.Path=Wg;x.PerspectiveCamera=id;x.Plane=Mf;x.PlaneGeometry=Lf;x.PlaneHelper=hc;x.PointLight=
Mm;x.PointLightHelper=ua;x.Points=Hm;x.PointsMaterial=Pj;x.PolarGridHelper=Bb;x.PolyhedronGeometry=jg;x.PositionalAudio=Al;x.PropertyBinding=bc;x.PropertyMixer=Qd;x.QuadraticBezierCurve=ig;x.QuadraticBezierCurve3=Ki;x.Quaternion=dd;x.QuaternionKeyframeTrack=hd;x.QuaternionLinearInterpolant=Yd;x.RED_GREEN_RGTC2_Format=36285;x.RED_RGTC1_Format=36283;x.REVISION="162";x.RGBADepthPacking=3201;x.RGBAFormat=1023;x.RGBAIntegerFormat=1033;x.RGBA_ASTC_10x10_Format=37819;x.RGBA_ASTC_10x5_Format=37816;x.RGBA_ASTC_10x6_Format=
37817;x.RGBA_ASTC_10x8_Format=37818;x.RGBA_ASTC_12x10_Format=37820;x.RGBA_ASTC_12x12_Format=37821;x.RGBA_ASTC_4x4_Format=37808;x.RGBA_ASTC_5x4_Format=37809;x.RGBA_ASTC_5x5_Format=37810;x.RGBA_ASTC_6x5_Format=37811;x.RGBA_ASTC_6x6_Format=37812;x.RGBA_ASTC_8x5_Format=37813;x.RGBA_ASTC_8x6_Format=37814;x.RGBA_ASTC_8x8_Format=37815;x.RGBA_BPTC_Format=36492;x.RGBA_ETC2_EAC_Format=37496;x.RGBA_PVRTC_2BPPV1_Format=35843;x.RGBA_PVRTC_4BPPV1_Format=35842;x.RGBA_S3TC_DXT1_Format=33777;x.RGBA_S3TC_DXT3_Format=
33778;x.RGBA_S3TC_DXT5_Format=33779;x.RGB_BPTC_SIGNED_Format=36494;x.RGB_BPTC_UNSIGNED_Format=36495;x.RGB_ETC1_Format=36196;x.RGB_ETC2_Format=37492;x.RGB_PVRTC_2BPPV1_Format=35841;x.RGB_PVRTC_4BPPV1_Format=35840;x.RGB_S3TC_DXT1_Format=33776;x.RGFormat=1030;x.RGIntegerFormat=1031;x.RawShaderMaterial=ek;x.Ray=zg;x.Raycaster=Bn;x.Rec709Primaries="rec709";x.RectAreaLight=Pm;x.RedFormat=1028;x.RedIntegerFormat=1029;x.ReinhardToneMapping=2;x.RenderTarget=nh;x.RepeatWrapping=1E3;x.ReplaceStencilOp=7681;
x.ReverseSubtractEquation=102;x.RingGeometry=xl;x.SIGNED_RED_GREEN_RGTC2_Format=36286;x.SIGNED_RED_RGTC1_Format=36284;x.SRGBColorSpace="srgb";x.SRGBTransfer="srgb";x.Scene=Kj;x.ShaderChunk=Vb;x.ShaderLib=Ce;x.ShaderMaterial=Be;x.ShadowMaterial=Lm;x.Shape=Xg;x.ShapeGeometry=bk;x.ShapePath=Mn;x.ShapeUtils=Cf;x.ShortType=1011;x.Skeleton=Kg;x.SkeletonHelper=W;x.SkinnedMesh=Ci;x.Source=Uf;x.Sphere=qd;x.SphereGeometry=ck;x.Spherical=Cn;x.SphericalHarmonics3=Qm;x.SplineCurve=Ug;x.SpotLight=$c;x.SpotLightHelper=
r;x.Sprite=ol;x.SpriteMaterial=xi;x.SrcAlphaFactor=204;x.SrcAlphaSaturateFactor=210;x.SrcColorFactor=202;x.StaticCopyUsage=35046;x.StaticDrawUsage=35044;x.StaticReadUsage=35045;x.StereoCamera=zl;x.StreamCopyUsage=35042;x.StreamDrawUsage=35040;x.StreamReadUsage=35041;x.StringKeyframeTrack=rc;x.SubtractEquation=101;x.SubtractiveBlending=3;x.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};x.TangentSpaceNormalMap=0;x.TetrahedronGeometry=kg;x.Texture=Pc;x.TextureLoader=Ri;x.TorusGeometry=we;x.TorusKnotGeometry=
Yg;x.Triangle=Zd;x.TriangleFanDrawMode=2;x.TriangleStripDrawMode=1;x.TrianglesDrawMode=0;x.TubeGeometry=Me;x.UVMapping=300;x.Uint16BufferAttribute=Nh;x.Uint32BufferAttribute=cj;x.Uint8BufferAttribute=km;x.Uint8ClampedBufferAttribute=lm;x.Uniform=Um;x.UniformsGroup=zn;x.UniformsLib=eb;x.UniformsUtils=Nf;x.UnsignedByteType=1009;x.UnsignedInt248Type=1020;x.UnsignedIntType=1014;x.UnsignedShort4444Type=1017;x.UnsignedShort5551Type=1018;x.UnsignedShortType=1012;x.VSMShadowMap=3;x.Vector2=Fa;x.Vector3=O;
x.Vector4=mc;x.VectorKeyframeTrack=Id;x.VideoTexture=tn;x.WebGL1Renderer=vm;x.WebGL3DRenderTarget=Wk;x.WebGLArrayRenderTarget=Zl;x.WebGLCoordinateSystem=2E3;x.WebGLCubeRenderTarget=tk;x.WebGLMultipleRenderTargets=Nn;x.WebGLRenderTarget=Rd;x.WebGLRenderer=wh;x.WebGLUtils=ih;x.WebGPUCoordinateSystem=2001;x.WireframeGeometry=dk;x.WrapAroundEnding=2402;x.ZeroCurvatureEnding=2400;x.ZeroFactor=200;x.ZeroSlopeEnding=2401;x.ZeroStencilOp=0;x._SRGBAFormat=1035;x.createCanvasElement=ia};
shadow$provide[1]=function(Xc,Ec,ld,x){function wa(Y,ca,na=!0){function aa(va){if(va.normalized||va.isInterleavedBufferAttribute){const Ka=new Float32Array(va.count*va.itemSize);for(let Oa=0,Na=0;Oa<va.count;Oa++)Ka[Na++]=va.getX(Oa),Ka[Na++]=va.getY(Oa),2<va.itemSize&&(Ka[Na++]=va.getZ(Oa));return Ka}return va.array instanceof Float32Array?va.array:new Float32Array(va.array)}if(!ca||!ca.isReady)throw Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!Y.hasAttribute("position")||
!Y.hasAttribute("normal")||!Y.hasAttribute("uv"))throw Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');const da=Y.index?Y.toNonIndexed():Y;ca=ca.generateTangents(aa(da.attributes.position),aa(da.attributes.normal),aa(da.attributes.uv));if(na)for(na=3;na<ca.length;na+=4)ca[na]*=-1;da.setAttribute("tangent",new ya.BufferAttribute(ca,4));Y!==da&&Y.copy(da);return Y}function Gb(Y,ca=!1){var na=null!==Y[0].index,aa=new Set(Object.keys(Y[0].attributes)),da=new Set(Object.keys(Y[0].morphAttributes)),
va={};const Ka={};var Oa=Y[0].morphTargetsRelative;const Na=new ya.BufferGeometry;let bb=0;for(let Ia=0;Ia<Y.length;++Ia){var mb=Y[Ia];let Ma=0;if(na!==(null!==mb.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ia+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const kb in mb.attributes){if(!aa.has(kb))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+
Ia+'. All geometries must have compatible attributes; make sure "'+kb+'" attribute exists among all geometries, or in none of them.'),null;void 0===va[kb]&&(va[kb]=[]);va[kb].push(mb.attributes[kb]);Ma++}if(Ma!==aa.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ia+". Make sure all geometries have the same number of attributes."),null;if(Oa!==mb.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+
Ia+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const kb in mb.morphAttributes){if(!da.has(kb))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ia+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===Ka[kb]&&(Ka[kb]=[]);Ka[kb].push(mb.morphAttributes[kb])}if(ca){if(na)mb=mb.index.count;else if(void 0!==mb.attributes.position)mb=mb.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+
Ia+". The geometry must have either an index or a position attribute"),null;Na.addGroup(bb,mb,Ia);bb+=mb}}if(na){ca=0;na=[];for(aa=0;aa<Y.length;++aa){da=Y[aa].index;for(Oa=0;Oa<da.count;++Oa)na.push(da.getX(Oa)+ca);ca+=Y[aa].attributes.position.count}Na.setIndex(na)}for(var Ua in va){Y=Nb(va[Ua]);if(!Y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ua+" attribute."),null;Na.setAttribute(Ua,Y)}for(const Ia in Ka){va=Ka[Ia][0].length;if(0===va)break;
Na.morphAttributes=Na.morphAttributes||{};Na.morphAttributes[Ia]=[];for(Ua=0;Ua<va;++Ua){Y=[];for(ca=0;ca<Ka[Ia].length;++ca)Y.push(Ka[Ia][ca][Ua]);Y=Nb(Y);if(!Y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ia+" morphAttribute."),null;Na.morphAttributes[Ia].push(Y)}}return Na}function Nb(Y){let ca;let na=-1;var aa=0;for(var da=0;da<Y.length;++da){var va=Y[da];if(void 0===Ka)var Ka=va.array.constructor;if(Ka!==va.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),
null;void 0===ca&&(ca=va.itemSize);if(ca!==va.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===Oa)var Oa=va.normalized;if(Oa!==va.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;-1===na&&(na=va.gpuType);if(na!==va.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),
null;aa+=va.count*ca}Ka=new Ka(aa);Oa=new ya.BufferAttribute(Ka,ca,Oa);aa=0;for(da=0;da<Y.length;++da){va=Y[da];if(va.isInterleavedBufferAttribute){const Na=aa/ca;for(let bb=0,mb=va.count;bb<mb;bb++)for(let Ua=0;Ua<ca;Ua++){const Ia=va.getComponent(bb,Ua);Oa.setComponent(bb+Na,Ua,Ia)}}else Ka.set(va.array,aa);aa+=va.count*ca}void 0!==na&&(Oa.gpuType=na);return Oa}function Xb(Y){return Y.isInstancedInterleavedBufferAttribute||Y.isInterleavedBufferAttribute?xc(Y):Y.isInstancedBufferAttribute?(new ya.InstancedBufferAttribute).copy(Y):
(new ya.BufferAttribute).copy(Y)}function kc(Y){var ca=0,na=0;for(let Ka=0,Oa=Y.length;Ka<Oa;++Ka){var aa=Y[Ka];if(void 0===da)var da=aa.array.constructor;if(da!==aa.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;ca+=aa.array.length;na+=aa.itemSize}da=new ya.InterleavedBuffer(new da(ca),na);ca=0;na=[];aa=["getX","getY","getZ","getW"];const va=["setX","setY","setZ","setW"];for(let Ka=0,Oa=Y.length;Ka<Oa;Ka++){const Na=Y[Ka],bb=Na.itemSize,mb=
Na.count,Ua=new ya.InterleavedBufferAttribute(da,bb,ca,Na.normalized);na.push(Ua);ca+=bb;for(let Ia=0;Ia<mb;Ia++)for(let Ma=0;Ma<bb;Ma++)Ua[va[Ma]](Ia,Na[aa[Ma]](Ia))}return na}function xc(Y){const ca=Y.count,na=Y.itemSize;var aa=Y.normalized,da=new Y.data.array.constructor(ca*na);aa=Y.isInstancedInterleavedBufferAttribute?new ya.InstancedBufferAttribute(da,na,aa,Y.meshPerAttribute):new ya.BufferAttribute(da,na,aa);for(da=0;da<ca;da++)aa.setX(da,Y.getX(da)),2<=na&&aa.setY(da,Y.getY(da)),3<=na&&aa.setZ(da,
Y.getZ(da)),4<=na&&aa.setW(da,Y.getW(da));return aa}function hb(Y){var ca=Y.attributes;Y=Y.morphTargets;const na=new Map;for(const aa in ca){const da=ca[aa];da.isInterleavedBufferAttribute&&(na.has(da)||na.set(da,xc(da)),ca[aa]=na.get(da))}for(const aa in Y)ca=Y[aa],ca.isInterleavedBufferAttribute&&(na.has(ca)||na.set(ca,xc(ca)),Y[aa]=na.get(ca))}function rb(Y){let ca=0;for(const na in Y.attributes){const aa=Y.getAttribute(na);ca+=aa.count*aa.itemSize*aa.array.BYTES_PER_ELEMENT}Y=Y.getIndex();return ca+=
Y?Y.count*Y.itemSize*Y.array.BYTES_PER_ELEMENT:0}function Ic(Y,ca=1E-4){ca=Math.max(ca,Number.EPSILON);var na={},aa=Y.getIndex(),da=Y.getAttribute("position");const va=aa?aa.count:da.count;da=0;const Ka=Object.keys(Y.attributes),Oa={},Na={},bb=[],mb=["getX","getY","getZ","getW"],Ua=["setX","setY","setZ","setW"];for(let Q=0,pa=Ka.length;Q<pa;Q++){var Ia=Ka[Q],Ma=Y.attributes[Ia];Oa[Ia]=new ya.BufferAttribute(new Ma.array.constructor(Ma.count*Ma.itemSize),Ma.itemSize,Ma.normalized);(Ma=Y.morphAttributes[Ia])&&
(Na[Ia]=new ya.BufferAttribute(new Ma.array.constructor(Ma.count*Ma.itemSize),Ma.itemSize,Ma.normalized))}Ia=Math.pow(10,Math.log10(1/ca));ca=.5*ca*Ia;for(Ma=0;Ma<va;Ma++){const Q=aa?aa.getX(Ma):Ma;let pa="";for(let La=0,ob=Ka.length;La<ob;La++){var kb=Y.getAttribute(Ka[La]),Tb=kb.itemSize;for(var wb=0;wb<Tb;wb++)pa+=`${~~(kb[mb[wb]](Q)*Ia+ca)},`}if(pa in na)bb.push(na[pa]);else{for(let La=0,ob=Ka.length;La<ob;La++){var Zb=Ka[La];kb=Y.getAttribute(Zb);Tb=Y.morphAttributes[Zb];wb=kb.itemSize;const lb=
Oa[Zb];Zb=Na[Zb];for(let Fb=0;Fb<wb;Fb++){const Ib=mb[Fb],Ob=Ua[Fb];lb[Ob](da,kb[Ib](Q));if(Tb)for(let tb=0,Sb=Tb.length;tb<Sb;tb++)Zb[tb][Ob](da,Tb[tb][Ib](Q))}}na[pa]=da;bb.push(da);da++}}na=Y.clone();for(const Q in Y.attributes)if(Y=Oa[Q],na.setAttribute(Q,new ya.BufferAttribute(Y.array.slice(0,da*Y.itemSize),Y.itemSize,Y.normalized)),Q in Na)for(Y=0;Y<Na[Q].length;Y++)aa=Na[Q][Y],na.morphAttributes[Q][Y]=new ya.BufferAttribute(aa.array.slice(0,da*aa.itemSize),aa.itemSize,aa.normalized);na.setIndex(bb);
return na}function fc(Y,ca){if(ca===ya.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),Y;if(ca===ya.TriangleFanDrawMode||ca===ya.TriangleStripDrawMode){var na=Y.getIndex();if(null===na){var aa=[];na=Y.getAttribute("position");if(void 0!==na){for(var da=0;da<na.count;da++)aa.push(da);Y.setIndex(aa);na=Y.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),
Y}da=na.count-2;aa=[];if(ca===ya.TriangleFanDrawMode)for(ca=1;ca<=da;ca++)aa.push(na.getX(0)),aa.push(na.getX(ca)),aa.push(na.getX(ca+1));else for(ca=0;ca<da;ca++)0===ca%2?(aa.push(na.getX(ca)),aa.push(na.getX(ca+1)),aa.push(na.getX(ca+2))):(aa.push(na.getX(ca+2)),aa.push(na.getX(ca+1)),aa.push(na.getX(ca)));aa.length/3!==da&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");Y=Y.clone();Y.setIndex(aa);Y.clearGroups();return Y}console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",
ca);return Y}function ia(Y){function ca(yd,md,cd,Gd,ac,gc,y,E){na.fromBufferAttribute(md,ac);aa.fromBufferAttribute(md,gc);da.fromBufferAttribute(md,y);md=yd.morphTargetInfluences;if(cd&&md){Na.set(0,0,0);bb.set(0,0,0);mb.set(0,0,0);for(let L=0,C=cd.length;L<C;L++){const N=md[L],X=cd[L];0!==N&&(va.fromBufferAttribute(X,ac),Ka.fromBufferAttribute(X,gc),Oa.fromBufferAttribute(X,y),Gd?(Na.addScaledVector(va,N),bb.addScaledVector(Ka,N),mb.addScaledVector(Oa,N)):(Na.addScaledVector(va.sub(na),N),bb.addScaledVector(Ka.sub(aa),
N),mb.addScaledVector(Oa.sub(da),N)))}na.add(Na);aa.add(bb);da.add(mb)}yd.isSkinnedMesh&&(yd.applyBoneTransform(ac,na),yd.applyBoneTransform(gc,aa),yd.applyBoneTransform(y,da));E[3*ac]=na.x;E[3*ac+1]=na.y;E[3*ac+2]=na.z;E[3*gc]=aa.x;E[3*gc+1]=aa.y;E[3*gc+2]=aa.z;E[3*y]=da.x;E[3*y+1]=da.y;E[3*y+2]=da.z}const na=new ya.Vector3,aa=new ya.Vector3,da=new ya.Vector3,va=new ya.Vector3,Ka=new ya.Vector3,Oa=new ya.Vector3,Na=new ya.Vector3,bb=new ya.Vector3,mb=new ya.Vector3;var Ua=Y.geometry,Ia=Y.material;
let Ma,kb;var Tb=Ua.index;const wb=Ua.attributes.position,Zb=Ua.morphAttributes.position,Q=Ua.morphTargetsRelative,pa=Ua.attributes.normal,La=Ua.morphAttributes.position,ob=Ua.groups,lb=Ua.drawRange;let Fb,Ib;const Ob=new Float32Array(wb.count*wb.itemSize);Ua=new Float32Array(pa.count*pa.itemSize);if(null!==Tb)if(Array.isArray(Ia))for(Ia=0,Fb=ob.length;Ia<Fb;Ia++){var tb=ob[Ia];var Sb=Math.max(tb.start,lb.start);for(Ib=tb=Math.min(tb.start+tb.count,lb.start+lb.count);Sb<Ib;Sb+=3)tb=Tb.getX(Sb),Ma=
Tb.getX(Sb+1),kb=Tb.getX(Sb+2),ca(Y,wb,Zb,Q,tb,Ma,kb,Ob),ca(Y,pa,La,Q,tb,Ma,kb,Ua)}else for(Sb=Math.max(0,lb.start),tb=Math.min(Tb.count,lb.start+lb.count),Ia=Sb,Fb=tb;Ia<Fb;Ia+=3)tb=Tb.getX(Ia),Ma=Tb.getX(Ia+1),kb=Tb.getX(Ia+2),ca(Y,wb,Zb,Q,tb,Ma,kb,Ob),ca(Y,pa,La,Q,tb,Ma,kb,Ua);else if(Array.isArray(Ia))for(Ia=0,Fb=ob.length;Ia<Fb;Ia++)for(tb=ob[Ia],Sb=Math.max(tb.start,lb.start),Ib=tb=Math.min(tb.start+tb.count,lb.start+lb.count);Sb<Ib;Sb+=3)tb=Sb,Ma=Sb+1,kb=Sb+2,ca(Y,wb,Zb,Q,tb,Ma,kb,Ob),ca(Y,
pa,La,Q,tb,Ma,kb,Ua);else for(Sb=Math.max(0,lb.start),tb=Math.min(wb.count,lb.start+lb.count),Ia=Sb,Fb=tb;Ia<Fb;Ia+=3)tb=Ia,Ma=Ia+1,kb=Ia+2,ca(Y,wb,Zb,Q,tb,Ma,kb,Ob),ca(Y,pa,La,Q,tb,Ma,kb,Ua);Y=new ya.Float32BufferAttribute(Ob,3);Tb=new ya.Float32BufferAttribute(Ua,3);return{positionAttribute:wb,normalAttribute:pa,morphedPositionAttribute:Y,morphedNormalAttribute:Tb}}function sb(Y){if(0===Y.groups.length)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),
Y;let ca=Y.groups;ca=ca.sort((Oa,Na)=>Oa.materialIndex!==Na.materialIndex?Oa.materialIndex-Na.materialIndex:Oa.start-Na.start);if(null===Y.getIndex()){var na=Y.getAttribute("position"),aa=[];for(var da=0;da<na.count;da+=3)aa.push(da,da+1,da+2);Y.setIndex(aa)}na=Y.getIndex();aa=[];for(da=0;da<ca.length;da++){var va=ca[da],Ka=va.start;for(va=Ka+va.count;Ka<va;Ka++)aa.push(na.getX(Ka))}Y.dispose();Y.setIndex(aa);na=0;for(aa=0;aa<ca.length;aa++)da=ca[aa],da.start=na,na+=da.count;na=ca[0];Y.groups=[na];
for(aa=1;aa<ca.length;aa++)da=ca[aa],na.materialIndex===da.materialIndex?na.count+=da.count:(na=da,Y.groups.push(na));return Y}function ab(Y,ca=Math.PI/3){function na(wb){return`${~~(wb.x*aa)},${~~(wb.y*aa)},${~~(wb.z*aa)}`}ca=Math.cos(ca);const aa=100*(1+1E-10),da=[new ya.Vector3,new ya.Vector3,new ya.Vector3],va=new ya.Vector3,Ka=new ya.Vector3,Oa=new ya.Vector3,Na=new ya.Vector3;Y=Y.index?Y.toNonIndexed():Y;const bb=Y.attributes.position,mb={};for(let wb=0,Zb=bb.count/3;wb<Zb;wb++){var Ua=3*wb,
Ia=da[0].fromBufferAttribute(bb,Ua+0),Ma=da[1].fromBufferAttribute(bb,Ua+1);Ua=da[2].fromBufferAttribute(bb,Ua+2);va.subVectors(Ua,Ma);Ka.subVectors(Ia,Ma);Ia=(new ya.Vector3).crossVectors(va,Ka).normalize();for(Ma=0;3>Ma;Ma++)Ua=na(da[Ma]),Ua in mb||(mb[Ua]=[]),mb[Ua].push(Ia)}Ia=new Float32Array(3*bb.count);Ia=new ya.BufferAttribute(Ia,3,!1);for(let wb=0,Zb=bb.count/3;wb<Zb;wb++){Ma=3*wb;Ua=da[0].fromBufferAttribute(bb,Ma+0);var kb=da[1].fromBufferAttribute(bb,Ma+1),Tb=da[2].fromBufferAttribute(bb,
Ma+2);va.subVectors(Tb,kb);Ka.subVectors(Ua,kb);Oa.crossVectors(va,Ka).normalize();for(Ua=0;3>Ua;Ua++){kb=na(da[Ua]);kb=mb[kb];Na.set(0,0,0);for(let Q=0,pa=kb.length;Q<pa;Q++)Tb=kb[Q],Oa.dot(Tb)>ca&&Na.add(Tb);Na.normalize();Ia.setXYZ(Ma+Ua,Na.x,Na.y,Na.z)}}Y.setAttribute("normal",Ia);return Y}Object.defineProperties(x,{__esModule:{enumerable:!0,value:!0},computeMikkTSpaceTangents:{enumerable:!0,get:function(){return wa}},computeMorphedAttributes:{enumerable:!0,get:function(){return ia}},deepCloneAttribute:{enumerable:!0,
get:function(){return Xb}},deinterleaveAttribute:{enumerable:!0,get:function(){return xc}},deinterleaveGeometry:{enumerable:!0,get:function(){return hb}},estimateBytesUsed:{enumerable:!0,get:function(){return rb}},interleaveAttributes:{enumerable:!0,get:function(){return kc}},mergeAttributes:{enumerable:!0,get:function(){return Nb}},mergeGeometries:{enumerable:!0,get:function(){return Gb}},mergeGroups:{enumerable:!0,get:function(){return sb}},mergeVertices:{enumerable:!0,get:function(){return Ic}},
toCreasedNormals:{enumerable:!0,get:function(){return ab}},toTrianglesDrawMode:{enumerable:!0,get:function(){return fc}}});var ya=Ec(0)};
shadow$provide[2]=function(Xc,Ec,ld,x){function wa(){let y={};return{get:function(E){return y[E]},add:function(E,L){y[E]=L},remove:function(E){delete y[E]},removeAll:function(){y={}}}}function Gb(y){void 0===y.DefaultMaterial&&(y.DefaultMaterial=new ia.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ia.FrontSide}));return y.DefaultMaterial}function Nb(y,E,L){for(const C in L.extensions)void 0===y[C]&&(E.userData.gltfExtensions=E.userData.gltfExtensions||
{},E.userData.gltfExtensions[C]=L.extensions[C])}function Xb(y,E){void 0!==E.extras&&("object"===typeof E.extras?Object.assign(y.userData,E.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+E.extras))}function kc(y,E,L){let C=!1,N=!1,X=!1;for(let Db=0,cc=E.length;Db<cc;Db++){var T=E[Db];void 0!==T.POSITION&&(C=!0);void 0!==T.NORMAL&&(N=!0);void 0!==T.COLOR_0&&(X=!0);if(C&&N&&X)break}if(!C&&!N&&!X)return Promise.resolve(y);T=[];const la=[],sa=[];for(let Db=0,cc=E.length;Db<
cc;Db++){var Sa=E[Db];if(C){var cb=void 0!==Sa.POSITION?L.getDependency("accessor",Sa.POSITION):y.attributes.position;T.push(cb)}N&&(cb=void 0!==Sa.NORMAL?L.getDependency("accessor",Sa.NORMAL):y.attributes.normal,la.push(cb));X&&(Sa=void 0!==Sa.COLOR_0?L.getDependency("accessor",Sa.COLOR_0):y.attributes.color,sa.push(Sa))}return Promise.all([Promise.all(T),Promise.all(la),Promise.all(sa)]).then(function(Db){const cc=Db[0],$b=Db[1];Db=Db[2];C&&(y.morphAttributes.position=cc);N&&(y.morphAttributes.normal=
$b);X&&(y.morphAttributes.color=Db);y.morphTargetsRelative=!0;return y})}function xc(y){var E=(E=y.extensions&&y.extensions[ya.KHR_DRACO_MESH_COMPRESSION])?"draco:"+E.bufferView+":"+E.indices+":"+hb(E.attributes):y.indices+":"+hb(y.attributes)+":"+y.mode;if(void 0!==y.targets)for(let L=0,C=y.targets.length;L<C;L++)E+=":"+hb(y.targets[L]);return E}function hb(y){let E="";const L=Object.keys(y).sort();for(let C=0,N=L.length;C<N;C++)E+=L[C]+":"+y[L[C]]+";";return E}function rb(y){switch(y){case Int8Array:return 1/
127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");}}function Ic(y,E,L){var C=E.attributes;const N=new ia.Box3;if(void 0!==C.POSITION){C=L.json.accessors[C.POSITION];var X=C.min,T=C.max;if(void 0!==X&&void 0!==T){N.set(new ia.Vector3(X[0],X[1],X[2]),new ia.Vector3(T[0],T[1],T[2]));C.normalized&&(C=rb(Ob[C.componentType]),N.min.multiplyScalar(C),N.max.multiplyScalar(C));
E=E.targets;if(void 0!==E){C=new ia.Vector3;X=new ia.Vector3;for(let la=0,sa=E.length;la<sa;la++)if(T=E[la],void 0!==T.POSITION){T=L.json.accessors[T.POSITION];const Sa=T.min,cb=T.max;void 0!==Sa&&void 0!==cb?(X.setX(Math.max(Math.abs(Sa[0]),Math.abs(cb[0]))),X.setY(Math.max(Math.abs(Sa[1]),Math.abs(cb[1]))),X.setZ(Math.max(Math.abs(Sa[2]),Math.abs(cb[2]))),T.normalized&&(T=rb(Ob[T.componentType]),X.multiplyScalar(T)),C.max(X)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}N.expandByVector(C)}y.boundingBox=
N;L=new ia.Sphere;N.getCenter(L.center);L.radius=N.min.distanceTo(N.max)/2;y.boundingSphere=L}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function fc(y,E,L){function C(la,sa){return L.getDependency("accessor",la).then(function(Sa){y.setAttribute(sa,Sa)})}const N=E.attributes,X=[];for(var T in N){const la=md[T]||T.toLowerCase();la in y.attributes||X.push(C(N[T],la))}void 0===E.indices||y.index||(T=L.getDependency("accessor",E.indices).then(function(la){y.setIndex(la)}),
X.push(T));ia.ColorManagement.workingColorSpace!==ia.LinearSRGBColorSpace&&"COLOR_0"in N&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ia.ColorManagement.workingColorSpace}" not supported.`);Xb(y,E);Ic(y,E,L);return Promise.all(X).then(function(){return void 0!==E.targets?kc(y,E.targets,L):y})}Object.defineProperties(x,{__esModule:{enumerable:!0,value:!0},GLTFLoader:{enumerable:!0,get:function(){return ab}}});var ia=Ec(0),sb=Ec(1);class ab extends ia.Loader{constructor(y){super(y);
this.meshoptDecoder=this.ktx2Loader=this.dracoLoader=null;this.pluginCallbacks=[];this.register(function(E){return new aa(E)});this.register(function(E){return new Ia(E)});this.register(function(E){return new Ma(E)});this.register(function(E){return new kb(E)});this.register(function(E){return new va(E)});this.register(function(E){return new Ka(E)});this.register(function(E){return new Oa(E)});this.register(function(E){return new Na(E)});this.register(function(E){return new na(E)});this.register(function(E){return new bb(E)});
this.register(function(E){return new da(E)});this.register(function(E){return new Ua(E)});this.register(function(E){return new mb(E)});this.register(function(E){return new Y(E)});this.register(function(E){return new Tb(E)});this.register(function(E){return new wb(E)})}load(y,E,L,C){const N=this;let X;if(""!==this.resourcePath)X=this.resourcePath;else if(""!==this.path){var T=ia.LoaderUtils.extractUrlBase(y);X=ia.LoaderUtils.resolveURL(T,this.path)}else X=ia.LoaderUtils.extractUrlBase(y);this.manager.itemStart(y);
const la=function(sa){C?C(sa):console.error(sa);N.manager.itemError(y);N.manager.itemEnd(y)};T=new ia.FileLoader(this.manager);T.setPath(this.path);T.setResponseType("arraybuffer");T.setRequestHeader(this.requestHeader);T.setWithCredentials(this.withCredentials);T.load(y,function(sa){try{N.parse(sa,X,function(Sa){E(Sa);N.manager.itemEnd(y)},la)}catch(Sa){la(Sa)}},L,la)}setDRACOLoader(y){this.dracoLoader=y;return this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".');
}setKTX2Loader(y){this.ktx2Loader=y;return this}setMeshoptDecoder(y){this.meshoptDecoder=y;return this}register(y){-1===this.pluginCallbacks.indexOf(y)&&this.pluginCallbacks.push(y);return this}unregister(y){-1!==this.pluginCallbacks.indexOf(y)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(y),1);return this}parse(y,E,L,C){const N={},X={};var T=new TextDecoder;if("string"===typeof y)y=JSON.parse(y);else if(y instanceof ArrayBuffer)if("glTF"===T.decode(new Uint8Array(y,0,4))){try{N[ya.KHR_BINARY_GLTF]=
new Zb(y)}catch(sa){C&&C(sa);return}y=JSON.parse(N[ya.KHR_BINARY_GLTF].content)}else y=JSON.parse(T.decode(y));if(void 0===y.asset||2>y.asset.version[0])C&&C(Error("THREE.GLTFLoader: Unsupported asset. glTF versions \x3e\x3d2.0 are supported."));else{E=new gc(y,{path:E||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});E.fileLoader.setRequestHeader(this.requestHeader);for(T=0;T<this.pluginCallbacks.length;T++){var la=
this.pluginCallbacks[T](E);la.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name");X[la.name]=la;N[la.name]=!0}if(y.extensionsUsed)for(T=0;T<y.extensionsUsed.length;++T){la=y.extensionsUsed[T];const sa=y.extensionsRequired||[];switch(la){case ya.KHR_MATERIALS_UNLIT:N[la]=new ca;break;case ya.KHR_DRACO_MESH_COMPRESSION:N[la]=new Q(y,this.dracoLoader);break;case ya.KHR_TEXTURE_TRANSFORM:N[la]=new pa;break;case ya.KHR_MESH_QUANTIZATION:N[la]=new La;break;default:0<=sa.indexOf(la)&&
void 0===X[la]&&console.warn('THREE.GLTFLoader: Unknown extension "'+la+'".')}}E.setExtensions(N);E.setPlugins(X);E.parse(L,C)}}parseAsync(y,E){const L=this;return new Promise(function(C,N){L.parse(y,E,C,N)})}}const ya={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",
KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",
EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Y{constructor(y){this.parser=y;this.name=ya.KHR_LIGHTS_PUNCTUAL;this.cache={refs:{},uses:{}}}_markDefs(){const y=this.parser,E=this.parser.json.nodes||[];for(let L=0,C=E.length;L<C;L++){const N=E[L];N.extensions&&N.extensions[this.name]&&void 0!==N.extensions[this.name].light&&y._addNodeRef(this.cache,N.extensions[this.name].light)}}_loadLight(y){const E=this.parser,
L="light:"+y;var C=E.cache.get(L);if(C)return C;C=E.json;C=((C.extensions&&C.extensions[this.name]||{}).lights||[])[y];var N=new ia.Color(16777215);void 0!==C.color&&N.setRGB(C.color[0],C.color[1],C.color[2],ia.LinearSRGBColorSpace);const X=void 0!==C.range?C.range:0;switch(C.type){case "directional":N=new ia.DirectionalLight(N);N.target.position.set(0,0,-1);N.add(N.target);break;case "point":N=new ia.PointLight(N);N.distance=X;break;case "spot":N=new ia.SpotLight(N);N.distance=X;C.spot=C.spot||{};
C.spot.innerConeAngle=void 0!==C.spot.innerConeAngle?C.spot.innerConeAngle:0;C.spot.outerConeAngle=void 0!==C.spot.outerConeAngle?C.spot.outerConeAngle:Math.PI/4;N.angle=C.spot.outerConeAngle;N.penumbra=1-C.spot.innerConeAngle/C.spot.outerConeAngle;N.target.position.set(0,0,-1);N.add(N.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+C.type);}N.position.set(0,0,0);N.decay=2;Xb(N,C);void 0!==C.intensity&&(N.intensity=C.intensity);N.name=E.createUniqueName(C.name||"light_"+
y);C=Promise.resolve(N);E.cache.add(L,C);return C}getDependency(y,E){if("light"===y)return this._loadLight(E)}createNodeAttachment(y){const E=this,L=this.parser;y=L.json.nodes[y];const C=(y.extensions&&y.extensions[this.name]||{}).light;return void 0===C?null:this._loadLight(C).then(function(N){return L._getNodeRef(E.cache,C,N)})}}class ca{constructor(){this.name=ya.KHR_MATERIALS_UNLIT}getMaterialType(){return ia.MeshBasicMaterial}extendParams(y,E,L){const C=[];y.color=new ia.Color(1,1,1);y.opacity=
1;if(E=E.pbrMetallicRoughness){if(Array.isArray(E.baseColorFactor)){const N=E.baseColorFactor;y.color.setRGB(N[0],N[1],N[2],ia.LinearSRGBColorSpace);y.opacity=N[3]}void 0!==E.baseColorTexture&&C.push(L.assignTexture(y,"map",E.baseColorTexture,ia.SRGBColorSpace))}return Promise.all(C)}}class na{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(y,E){y=this.parser.json.materials[y];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();y=y.extensions[this.name].emissiveStrength;
void 0!==y&&(E.emissiveIntensity=y);return Promise.resolve()}}class aa{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_CLEARCOAT}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){var L=this.parser,C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];void 0!==C.clearcoatFactor&&(E.clearcoat=C.clearcoatFactor);void 0!==C.clearcoatTexture&&
y.push(L.assignTexture(E,"clearcoatMap",C.clearcoatTexture));void 0!==C.clearcoatRoughnessFactor&&(E.clearcoatRoughness=C.clearcoatRoughnessFactor);void 0!==C.clearcoatRoughnessTexture&&y.push(L.assignTexture(E,"clearcoatRoughnessMap",C.clearcoatRoughnessTexture));void 0!==C.clearcoatNormalTexture&&(y.push(L.assignTexture(E,"clearcoatNormalMap",C.clearcoatNormalTexture)),void 0!==C.clearcoatNormalTexture.scale&&(L=C.clearcoatNormalTexture.scale,E.clearcoatNormalScale=new ia.Vector2(L,L)));return Promise.all(y)}}
class da{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_IRIDESCENCE}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];void 0!==C.iridescenceFactor&&(E.iridescence=C.iridescenceFactor);void 0!==C.iridescenceTexture&&y.push(L.assignTexture(E,"iridescenceMap",
C.iridescenceTexture));void 0!==C.iridescenceIor&&(E.iridescenceIOR=C.iridescenceIor);void 0===E.iridescenceThicknessRange&&(E.iridescenceThicknessRange=[100,400]);void 0!==C.iridescenceThicknessMinimum&&(E.iridescenceThicknessRange[0]=C.iridescenceThicknessMinimum);void 0!==C.iridescenceThicknessMaximum&&(E.iridescenceThicknessRange[1]=C.iridescenceThicknessMaximum);void 0!==C.iridescenceThicknessTexture&&y.push(L.assignTexture(E,"iridescenceThicknessMap",C.iridescenceThicknessTexture));return Promise.all(y)}}
class va{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_SHEEN}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];E.sheenColor=new ia.Color(0,0,0);E.sheenRoughness=0;E.sheen=1;C=C.extensions[this.name];if(void 0!==C.sheenColorFactor){const N=C.sheenColorFactor;E.sheenColor.setRGB(N[0],
N[1],N[2],ia.LinearSRGBColorSpace)}void 0!==C.sheenRoughnessFactor&&(E.sheenRoughness=C.sheenRoughnessFactor);void 0!==C.sheenColorTexture&&y.push(L.assignTexture(E,"sheenColorMap",C.sheenColorTexture,ia.SRGBColorSpace));void 0!==C.sheenRoughnessTexture&&y.push(L.assignTexture(E,"sheenRoughnessMap",C.sheenRoughnessTexture));return Promise.all(y)}}class Ka{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_TRANSMISSION}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?
ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];void 0!==C.transmissionFactor&&(E.transmission=C.transmissionFactor);void 0!==C.transmissionTexture&&y.push(L.assignTexture(E,"transmissionMap",C.transmissionTexture));return Promise.all(y)}}class Oa{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_VOLUME}getMaterialType(y){y=this.parser.json.materials[y];
return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){var L=this.parser,C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];E.thickness=void 0!==C.thicknessFactor?C.thicknessFactor:0;void 0!==C.thicknessTexture&&y.push(L.assignTexture(E,"thicknessMap",C.thicknessTexture));E.attenuationDistance=C.attenuationDistance||Infinity;L=C.attenuationColor||[1,1,1];E.attenuationColor=(new ia.Color).setRGB(L[0],
L[1],L[2],ia.LinearSRGBColorSpace);return Promise.all(y)}}class Na{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_IOR}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){y=this.parser.json.materials[y];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();y=y.extensions[this.name];E.ior=void 0!==y.ior?y.ior:1.5;return Promise.resolve()}}class bb{constructor(y){this.parser=y;this.name=
ya.KHR_MATERIALS_SPECULAR}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];E.specularIntensity=void 0!==C.specularFactor?C.specularFactor:1;void 0!==C.specularTexture&&y.push(L.assignTexture(E,"specularIntensityMap",C.specularTexture));const N=C.specularColorFactor||
[1,1,1];E.specularColor=(new ia.Color).setRGB(N[0],N[1],N[2],ia.LinearSRGBColorSpace);void 0!==C.specularColorTexture&&y.push(L.assignTexture(E,"specularColorMap",C.specularColorTexture,ia.SRGBColorSpace));return Promise.all(y)}}class mb{constructor(y){this.parser=y;this.name=ya.EXT_MATERIALS_BUMP}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];if(!C.extensions||
!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];E.bumpScale=void 0!==C.bumpFactor?C.bumpFactor:1;void 0!==C.bumpTexture&&y.push(L.assignTexture(E,"bumpMap",C.bumpTexture));return Promise.all(y)}}class Ua{constructor(y){this.parser=y;this.name=ya.KHR_MATERIALS_ANISOTROPY}getMaterialType(y){y=this.parser.json.materials[y];return y.extensions&&y.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(y,E){const L=this.parser;var C=L.json.materials[y];
if(!C.extensions||!C.extensions[this.name])return Promise.resolve();y=[];C=C.extensions[this.name];void 0!==C.anisotropyStrength&&(E.anisotropy=C.anisotropyStrength);void 0!==C.anisotropyRotation&&(E.anisotropyRotation=C.anisotropyRotation);void 0!==C.anisotropyTexture&&y.push(L.assignTexture(E,"anisotropyMap",C.anisotropyTexture));return Promise.all(y)}}class Ia{constructor(y){this.parser=y;this.name=ya.KHR_TEXTURE_BASISU}loadTexture(y){const E=this.parser,L=E.json;var C=L.textures[y];if(!C.extensions||
!C.extensions[this.name])return null;C=C.extensions[this.name];const N=E.options.ktx2Loader;if(!N){if(L.extensionsRequired&&0<=L.extensionsRequired.indexOf(this.name))throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return E.loadTextureImage(y,C.source,N)}}class Ma{constructor(y){this.parser=y;this.name=ya.EXT_TEXTURE_WEBP;this.isSupported=null}loadTexture(y){const E=this.name,L=this.parser,C=L.json;var N=C.textures[y];if(!N.extensions||!N.extensions[E])return null;
const X=N.extensions[E];N=C.images[X.source];let T=L.textureLoader;N.uri&&(N=L.options.manager.getHandler(N.uri),null!==N&&(T=N));return this.detectSupport().then(function(la){if(la)return L.loadTextureImage(y,X.source,T);if(C.extensionsRequired&&0<=C.extensionsRequired.indexOf(E))throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return L.loadTexture(y)})}detectSupport(){this.isSupported||(this.isSupported=new Promise(function(y){const E=new Image;E.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA";
E.onload=E.onerror=function(){y(1===E.height)}}));return this.isSupported}}class kb{constructor(y){this.parser=y;this.name=ya.EXT_TEXTURE_AVIF;this.isSupported=null}loadTexture(y){const E=this.name,L=this.parser,C=L.json;var N=C.textures[y];if(!N.extensions||!N.extensions[E])return null;const X=N.extensions[E];N=C.images[X.source];let T=L.textureLoader;N.uri&&(N=L.options.manager.getHandler(N.uri),null!==N&&(T=N));return this.detectSupport().then(function(la){if(la)return L.loadTextureImage(y,X.source,
T);if(C.extensionsRequired&&0<=C.extensionsRequired.indexOf(E))throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return L.loadTexture(y)})}detectSupport(){this.isSupported||(this.isSupported=new Promise(function(y){const E=new Image;E.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI\x3d";
E.onload=E.onerror=function(){y(1===E.height)}}));return this.isSupported}}class Tb{constructor(y){this.name=ya.EXT_MESHOPT_COMPRESSION;this.parser=y}loadBufferView(y){const E=this.parser.json;y=E.bufferViews[y];if(y.extensions&&y.extensions[this.name]){const L=y.extensions[this.name];y=this.parser.getDependency("buffer",L.buffer);const C=this.parser.options.meshoptDecoder;if(!C||!C.supported){if(E.extensionsRequired&&0<=E.extensionsRequired.indexOf(this.name))throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
return null}return y.then(function(N){const X=L.count,T=L.byteStride,la=new Uint8Array(N,L.byteOffset||0,L.byteLength||0);return C.decodeGltfBufferAsync?C.decodeGltfBufferAsync(X,T,la,L.mode,L.filter).then(function(sa){return sa.buffer}):C.ready.then(function(){const sa=new ArrayBuffer(X*T);C.decodeGltfBuffer(new Uint8Array(sa),X,T,la,L.mode,L.filter);return sa})})}return null}}class wb{constructor(y){this.name=ya.EXT_MESH_GPU_INSTANCING;this.parser=y}createNodeMesh(y){var E=this.parser.json,L=E.nodes[y];
if(!L.extensions||!L.extensions[this.name]||void 0===L.mesh)return null;E=E.meshes[L.mesh];for(var C of E.primitives)if(C.mode!==Ib.TRIANGLES&&C.mode!==Ib.TRIANGLE_STRIP&&C.mode!==Ib.TRIANGLE_FAN&&void 0!==C.mode)return null;L=L.extensions[this.name].attributes;C=[];const N={};for(const X in L)C.push(this.parser.getDependency("accessor",L[X]).then(T=>{N[X]=T;return N[X]}));if(1>C.length)return null;C.push(this.parser.createNodeMesh(y));return Promise.all(C).then(X=>{const T=X.pop();var la=T.isGroup?
T.children:[T];X=X[0].count;const sa=[];for(const cb of la){var Sa=new ia.Matrix4;const Db=new ia.Vector3,cc=new ia.Quaternion,$b=new ia.Vector3(1,1,1);la=new ia.InstancedMesh(cb.geometry,cb.material,X);for(let Wb=0;Wb<X;Wb++)N.TRANSLATION&&Db.fromBufferAttribute(N.TRANSLATION,Wb),N.ROTATION&&cc.fromBufferAttribute(N.ROTATION,Wb),N.SCALE&&$b.fromBufferAttribute(N.SCALE,Wb),la.setMatrixAt(Wb,Sa.compose(Db,cc,$b));for(const Wb in N)"_COLOR_0"===Wb?(Sa=N[Wb],la.instanceColor=new ia.InstancedBufferAttribute(Sa.array,
Sa.itemSize,Sa.normalized)):"TRANSLATION"!==Wb&&"ROTATION"!==Wb&&"SCALE"!==Wb&&cb.geometry.setAttribute(Wb,N[Wb]);ia.Object3D.prototype.copy.call(la,cb);this.parser.assignFinalMaterial(la);sa.push(la)}return T.isGroup?(T.clear(),T.add(...sa),T):sa[0]})}}class Zb{constructor(y){this.name=ya.KHR_BINARY_GLTF;this.body=this.content=null;var E=new DataView(y,0,12);const L=new TextDecoder;this.header={magic:L.decode(new Uint8Array(y.slice(0,4))),version:E.getUint32(4,!0),length:E.getUint32(8,!0)};if("glTF"!==
this.header.magic)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw Error("THREE.GLTFLoader: Legacy binary file detected.");E=this.header.length-12;const C=new DataView(y,12);let N=0;for(;N<E;){const T=C.getUint32(N,!0);N+=4;var X=C.getUint32(N,!0);N+=4;1313821514===X?(X=new Uint8Array(y,12+N,T),this.content=L.decode(X)):5130562===X&&(X=12+N,this.body=y.slice(X,X+T));N+=T}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.");
}}class Q{constructor(y,E){if(!E)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ya.KHR_DRACO_MESH_COMPRESSION;this.json=y;this.dracoLoader=E;this.dracoLoader.preload()}decodePrimitive(y,E){const L=this.json,C=this.dracoLoader,N=y.extensions[this.name].bufferView,X=y.extensions[this.name].attributes,T={},la={},sa={};for(var Sa in X){var cb=md[Sa]||Sa.toLowerCase();T[cb]=X[Sa]}for(const Db in y.attributes)Sa=md[Db]||Db.toLowerCase(),void 0!==X[Db]&&(cb=L.accessors[y.attributes[Db]],
sa[Sa]=Ob[cb.componentType].name,la[Sa]=!0===cb.normalized);return E.getDependency("bufferView",N).then(function(Db){return new Promise(function(cc,$b){C.decodeDracoFile(Db,function(Wb){for(const Yc in Wb.attributes){const $d=Wb.attributes[Yc],zd=la[Yc];void 0!==zd&&($d.normalized=zd)}cc(Wb)},T,sa,ia.LinearSRGBColorSpace,$b)})})}}class pa{constructor(){this.name=ya.KHR_TEXTURE_TRANSFORM}extendTexture(y,E){if((void 0===E.texCoord||E.texCoord===y.channel)&&void 0===E.offset&&void 0===E.rotation&&void 0===
E.scale)return y;y=y.clone();void 0!==E.texCoord&&(y.channel=E.texCoord);void 0!==E.offset&&y.offset.fromArray(E.offset);void 0!==E.rotation&&(y.rotation=E.rotation);void 0!==E.scale&&y.repeat.fromArray(E.scale);y.needsUpdate=!0;return y}}class La{constructor(){this.name=ya.KHR_MESH_QUANTIZATION}}class ob extends ia.Interpolant{constructor(y,E,L,C){super(y,E,L,C)}copySampleValue_(y){const E=this.resultBuffer,L=this.sampleValues,C=this.valueSize;y=y*C*3+C;for(let N=0;N!==C;N++)E[N]=L[y+N];return E}interpolate_(y,
E,L,C){const N=this.resultBuffer,X=this.sampleValues,T=this.valueSize,la=2*T;var sa=3*T;C-=E;E=(L-E)/C;L=E*E;var Sa=L*E;y*=sa;sa=y-sa;const cb=-2*Sa+3*L;Sa-=L;const Db=1-cb;E=Sa-L+E;for(L=0;L!==T;L++)N[L]=Db*X[sa+L+T]+E*X[sa+L+la]*C+cb*X[y+L+T]+Sa*X[y+L]*C;return N}}const lb=new ia.Quaternion;class Fb extends ob{interpolate_(y,E,L,C){y=super.interpolate_(y,E,L,C);lb.fromArray(y).normalize().toArray(y);return y}}const Ib={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,
FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ob={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tb={9728:ia.NearestFilter,9729:ia.LinearFilter,9984:ia.NearestMipmapNearestFilter,9985:ia.LinearMipmapNearestFilter,9986:ia.NearestMipmapLinearFilter,9987:ia.LinearMipmapLinearFilter},Sb={33071:ia.ClampToEdgeWrapping,
33648:ia.MirroredRepeatWrapping,10497:ia.RepeatWrapping},yd={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},md={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gd={CUBICSPLINE:void 0,LINEAR:ia.InterpolateLinear,STEP:ia.InterpolateDiscrete},ac=new ia.Matrix4;class gc{constructor(y=
{},E={}){this.json=y;this.extensions={};this.plugins={};this.options=E;this.cache=new wa;this.associations=new Map;this.primitiveCache={};this.nodeCache={};this.meshCache={refs:{},uses:{}};this.cameraCache={refs:{},uses:{}};this.lightCache={refs:{},uses:{}};this.sourceCache={};this.textureCache={};this.nodeNamesUsed={};E=y=!1;let L=-1;"undefined"!==typeof navigator&&(y=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),L=(E=-1<navigator.userAgent.indexOf("Firefox"))?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:
-1);this.textureLoader="undefined"===typeof createImageBitmap||y||E&&98>L?new ia.TextureLoader(this.options.manager):new ia.ImageBitmapLoader(this.options.manager);this.textureLoader.setCrossOrigin(this.options.crossOrigin);this.textureLoader.setRequestHeader(this.options.requestHeader);this.fileLoader=new ia.FileLoader(this.options.manager);this.fileLoader.setResponseType("arraybuffer");"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(y){this.extensions=
y}setPlugins(y){this.plugins=y}parse(y,E){const L=this,C=this.json,N=this.extensions;this.cache.removeAll();this.nodeCache={};this._invokeAll(function(X){return X._markDefs&&X._markDefs()});Promise.all(this._invokeAll(function(X){return X.beforeRoot&&X.beforeRoot()})).then(function(){return Promise.all([L.getDependencies("scene"),L.getDependencies("animation"),L.getDependencies("camera")])}).then(function(X){const T={scene:X[0][C.scene||0],scenes:X[0],animations:X[1],cameras:X[2],asset:C.asset,parser:L,
userData:{}};Nb(N,T,C);Xb(T,C);return Promise.all(L._invokeAll(function(la){return la.afterRoot&&la.afterRoot(T)})).then(function(){y(T)})}).catch(E)}_markDefs(){const y=this.json.nodes||[];var E=this.json.skins||[];const L=this.json.meshes||[];for(let C=0,N=E.length;C<N;C++){const X=E[C].joints;for(let T=0,la=X.length;T<la;T++)y[X[T]].isBone=!0}for(let C=0,N=y.length;C<N;C++)E=y[C],void 0!==E.mesh&&(this._addNodeRef(this.meshCache,E.mesh),void 0!==E.skin&&(L[E.mesh].isSkinnedMesh=!0)),void 0!==E.camera&&
this._addNodeRef(this.cameraCache,E.camera)}_addNodeRef(y,E){void 0!==E&&(void 0===y.refs[E]&&(y.refs[E]=y.uses[E]=0),y.refs[E]++)}_getNodeRef(y,E,L){if(1>=y.refs[E])return L;const C=L.clone(),N=(X,T)=>{const la=this.associations.get(X);null!=la&&this.associations.set(T,la);for(const [sa,Sa]of X.children.entries())N(Sa,T.children[sa])};N(L,C);C.name+="_instance_"+y.uses[E]++;return C}_invokeOne(y){const E=Object.values(this.plugins);E.push(this);for(let L=0;L<E.length;L++){const C=y(E[L]);if(C)return C}return null}_invokeAll(y){const E=
Object.values(this.plugins);E.unshift(this);const L=[];for(let C=0;C<E.length;C++){const N=y(E[C]);N&&L.push(N)}return L}getDependency(y,E){const L=y+":"+E;let C=this.cache.get(L);if(!C){switch(y){case "scene":C=this.loadScene(E);break;case "node":C=this._invokeOne(function(N){return N.loadNode&&N.loadNode(E)});break;case "mesh":C=this._invokeOne(function(N){return N.loadMesh&&N.loadMesh(E)});break;case "accessor":C=this.loadAccessor(E);break;case "bufferView":C=this._invokeOne(function(N){return N.loadBufferView&&
N.loadBufferView(E)});break;case "buffer":C=this.loadBuffer(E);break;case "material":C=this._invokeOne(function(N){return N.loadMaterial&&N.loadMaterial(E)});break;case "texture":C=this._invokeOne(function(N){return N.loadTexture&&N.loadTexture(E)});break;case "skin":C=this.loadSkin(E);break;case "animation":C=this._invokeOne(function(N){return N.loadAnimation&&N.loadAnimation(E)});break;case "camera":C=this.loadCamera(E);break;default:if(C=this._invokeOne(function(N){return N!=this&&N.getDependency&&
N.getDependency(y,E)}),!C)throw Error("Unknown type: "+y);}this.cache.add(L,C)}return C}getDependencies(y){let E=this.cache.get(y);if(!E){const L=this;E=Promise.all((this.json[y+("mesh"===y?"es":"s")]||[]).map(function(C,N){return L.getDependency(y,N)}));this.cache.add(y,E)}return E}loadBuffer(y){const E=this.json.buffers[y],L=this.fileLoader;if(E.type&&"arraybuffer"!==E.type)throw Error("THREE.GLTFLoader: "+E.type+" buffer type is not supported.");if(void 0===E.uri&&0===y)return Promise.resolve(this.extensions[ya.KHR_BINARY_GLTF].body);
const C=this.options;return new Promise(function(N,X){L.load(ia.LoaderUtils.resolveURL(E.uri,C.path),N,void 0,function(){X(Error('THREE.GLTFLoader: Failed to load buffer "'+E.uri+'".'))})})}loadBufferView(y){const E=this.json.bufferViews[y];return this.getDependency("buffer",E.buffer).then(function(L){const C=E.byteOffset||0;return L.slice(C,C+(E.byteLength||0))})}loadAccessor(y){const E=this,L=this.json,C=this.json.accessors[y];if(void 0===C.bufferView&&void 0===C.sparse){y=yd[C.type];const N=!0===
C.normalized,X=new Ob[C.componentType](C.count*y);return Promise.resolve(new ia.BufferAttribute(X,y,N))}y=[];void 0!==C.bufferView?y.push(this.getDependency("bufferView",C.bufferView)):y.push(null);void 0!==C.sparse&&(y.push(this.getDependency("bufferView",C.sparse.indices.bufferView)),y.push(this.getDependency("bufferView",C.sparse.values.bufferView)));return Promise.all(y).then(function(N){var X=N[0];const T=yd[C.type],la=Ob[C.componentType];var sa=la.BYTES_PER_ELEMENT,Sa=C.byteOffset||0,cb=void 0!==
C.bufferView?L.bufferViews[C.bufferView].byteStride:void 0;const Db=!0===C.normalized;if(cb&&cb!==sa*T){var cc=Math.floor(Sa/cb);const $b="InterleavedBuffer:"+C.bufferView+":"+C.componentType+":"+cc+":"+C.count;let Wb=E.cache.get($b);Wb||(cc=new la(X,cc*cb,C.count*cb/sa),Wb=new ia.InterleavedBuffer(cc,cb/sa),E.cache.add($b,Wb));sa=new ia.InterleavedBufferAttribute(Wb,T,Sa%cb/sa,Db)}else cc=null===X?new la(C.count*T):new la(X,Sa,C.count*T),sa=new ia.BufferAttribute(cc,T,Db);if(void 0!==C.sparse){cb=
C.sparse.values.byteOffset||0;Sa=new Ob[C.sparse.indices.componentType](N[1],C.sparse.indices.byteOffset||0,C.sparse.count*yd.SCALAR);N=new la(N[2],cb,C.sparse.count*T);null!==X&&(sa=new ia.BufferAttribute(sa.array.slice(),sa.itemSize,sa.normalized));for(let $b=0,Wb=Sa.length;$b<Wb;$b++)if(X=Sa[$b],sa.setX(X,N[$b*T]),2<=T&&sa.setY(X,N[$b*T+1]),3<=T&&sa.setZ(X,N[$b*T+2]),4<=T&&sa.setW(X,N[$b*T+3]),5<=T)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");}return sa})}loadTexture(y){var E=
this.json,L=this.options;const C=E.textures[y].source,N=E.images[C];E=this.textureLoader;N.uri&&(L=L.manager.getHandler(N.uri),null!==L&&(E=L));return this.loadTextureImage(y,C,E)}loadTextureImage(y,E,L){const C=this,N=this.json,X=N.textures[y],T=N.images[E],la=(T.uri||T.bufferView)+":"+X.sampler;if(this.textureCache[la])return this.textureCache[la];E=this.loadImageSource(E,L).then(function(sa){sa.flipY=!1;sa.name=X.name||T.name||"";""===sa.name&&"string"===typeof T.uri&&!1===T.uri.startsWith("data:image/")&&
(sa.name=T.uri);const Sa=(N.samplers||{})[X.sampler]||{};sa.magFilter=tb[Sa.magFilter]||ia.LinearFilter;sa.minFilter=tb[Sa.minFilter]||ia.LinearMipmapLinearFilter;sa.wrapS=Sb[Sa.wrapS]||ia.RepeatWrapping;sa.wrapT=Sb[Sa.wrapT]||ia.RepeatWrapping;C.associations.set(sa,{textures:y});return sa}).catch(function(){return null});return this.textureCache[la]=E}loadImageSource(y,E){var L=this.json;const C=this.options;if(void 0!==this.sourceCache[y])return this.sourceCache[y].then(sa=>sa.clone());const N=
L.images[y],X=self.URL||self.webkitURL;let T=N.uri||"",la=!1;if(void 0!==N.bufferView)T=this.getDependency("bufferView",N.bufferView).then(function(sa){la=!0;sa=new Blob([sa],{type:N.mimeType});return T=X.createObjectURL(sa)});else if(void 0===N.uri)throw Error("THREE.GLTFLoader: Image "+y+" is missing URI and bufferView");L=Promise.resolve(T).then(function(sa){return new Promise(function(Sa,cb){let Db=Sa;!0===E.isImageBitmapLoader&&(Db=function(cc){cc=new ia.Texture(cc);cc.needsUpdate=!0;Sa(cc)});
E.load(ia.LoaderUtils.resolveURL(sa,C.path),Db,void 0,cb)})}).then(function(sa){!0===la&&X.revokeObjectURL(T);var Sa=sa.userData,cb;(cb=N.mimeType)||(cb=N.uri,cb=0<cb.search(/\.jpe?g($|\?)/i)||0===cb.search(/^data:image\/jpeg/)?"image/jpeg":0<cb.search(/\.webp($|\?)/i)||0===cb.search(/^data:image\/webp/)?"image/webp":"image/png");Sa.mimeType=cb;return sa}).catch(function(sa){console.error("THREE.GLTFLoader: Couldn't load texture",T);throw sa;});return this.sourceCache[y]=L}assignTexture(y,E,L,C){const N=
this;return this.getDependency("texture",L.index).then(function(X){if(!X)return null;void 0!==L.texCoord&&0<L.texCoord&&(X=X.clone(),X.channel=L.texCoord);if(N.extensions[ya.KHR_TEXTURE_TRANSFORM]){const T=void 0!==L.extensions?L.extensions[ya.KHR_TEXTURE_TRANSFORM]:void 0;if(T){const la=N.associations.get(X);X=N.extensions[ya.KHR_TEXTURE_TRANSFORM].extendTexture(X,T);N.associations.set(X,la)}}void 0!==C&&(X.colorSpace=C);return y[E]=X})}assignFinalMaterial(y){var E=y.geometry;let L=y.material;const C=
void 0===E.attributes.tangent,N=void 0!==E.attributes.color;E=void 0===E.attributes.normal;if(y.isPoints){var X="PointsMaterial:"+L.uuid,T=this.cache.get(X);T||(T=new ia.PointsMaterial,ia.Material.prototype.copy.call(T,L),T.color.copy(L.color),T.map=L.map,T.sizeAttenuation=!1,this.cache.add(X,T));L=T}else y.isLine&&(X="LineBasicMaterial:"+L.uuid,T=this.cache.get(X),T||(T=new ia.LineBasicMaterial,ia.Material.prototype.copy.call(T,L),T.color.copy(L.color),T.map=L.map,this.cache.add(X,T)),L=T);if(C||
N||E)X="ClonedMaterial:"+L.uuid+":",C&&(X+="derivative-tangents:"),N&&(X+="vertex-colors:"),E&&(X+="flat-shading:"),T=this.cache.get(X),T||(T=L.clone(),N&&(T.vertexColors=!0),E&&(T.flatShading=!0),C&&(T.normalScale&&(T.normalScale.y*=-1),T.clearcoatNormalScale&&(T.clearcoatNormalScale.y*=-1)),this.cache.add(X,T),this.associations.set(T,this.associations.get(L))),L=T;y.material=L}getMaterialType(){return ia.MeshStandardMaterial}loadMaterial(y){const E=this,L=this.extensions,C=this.json.materials[y];
let N;const X={},T=[];if((C.extensions||{})[ya.KHR_MATERIALS_UNLIT]){var la=L[ya.KHR_MATERIALS_UNLIT];N=la.getMaterialType();T.push(la.extendParams(X,C,E))}else{la=C.pbrMetallicRoughness||{};X.color=new ia.Color(1,1,1);X.opacity=1;if(Array.isArray(la.baseColorFactor)){const sa=la.baseColorFactor;X.color.setRGB(sa[0],sa[1],sa[2],ia.LinearSRGBColorSpace);X.opacity=sa[3]}void 0!==la.baseColorTexture&&T.push(E.assignTexture(X,"map",la.baseColorTexture,ia.SRGBColorSpace));X.metalness=void 0!==la.metallicFactor?
la.metallicFactor:1;X.roughness=void 0!==la.roughnessFactor?la.roughnessFactor:1;void 0!==la.metallicRoughnessTexture&&(T.push(E.assignTexture(X,"metalnessMap",la.metallicRoughnessTexture)),T.push(E.assignTexture(X,"roughnessMap",la.metallicRoughnessTexture)));N=this._invokeOne(function(sa){return sa.getMaterialType&&sa.getMaterialType(y)});T.push(Promise.all(this._invokeAll(function(sa){return sa.extendMaterialParams&&sa.extendMaterialParams(y,X)})))}!0===C.doubleSided&&(X.side=ia.DoubleSide);la=
C.alphaMode||"OPAQUE";"BLEND"===la?(X.transparent=!0,X.depthWrite=!1):(X.transparent=!1,"MASK"===la&&(X.alphaTest=void 0!==C.alphaCutoff?C.alphaCutoff:.5));void 0!==C.normalTexture&&N!==ia.MeshBasicMaterial&&(T.push(E.assignTexture(X,"normalMap",C.normalTexture)),X.normalScale=new ia.Vector2(1,1),void 0!==C.normalTexture.scale&&(la=C.normalTexture.scale,X.normalScale.set(la,la)));void 0!==C.occlusionTexture&&N!==ia.MeshBasicMaterial&&(T.push(E.assignTexture(X,"aoMap",C.occlusionTexture)),void 0!==
C.occlusionTexture.strength&&(X.aoMapIntensity=C.occlusionTexture.strength));void 0!==C.emissiveFactor&&N!==ia.MeshBasicMaterial&&(la=C.emissiveFactor,X.emissive=(new ia.Color).setRGB(la[0],la[1],la[2],ia.LinearSRGBColorSpace));void 0!==C.emissiveTexture&&N!==ia.MeshBasicMaterial&&T.push(E.assignTexture(X,"emissiveMap",C.emissiveTexture,ia.SRGBColorSpace));return Promise.all(T).then(function(){const sa=new N(X);C.name&&(sa.name=C.name);Xb(sa,C);E.associations.set(sa,{materials:y});C.extensions&&Nb(L,
sa,C);return sa})}createUniqueName(y){y=ia.PropertyBinding.sanitizeNodeName(y||"");if(y in this.nodeNamesUsed)return y+"_"+ ++this.nodeNamesUsed[y];this.nodeNamesUsed[y]=0;return y}loadGeometries(y){function E(la){return C[ya.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(la,L).then(function(sa){return fc(sa,la,L)})}const L=this,C=this.extensions,N=this.primitiveCache,X=[];for(let la=0,sa=y.length;la<sa;la++){const Sa=y[la],cb=xc(Sa);var T=N[cb];T?X.push(T.promise):(T=Sa.extensions&&Sa.extensions[ya.KHR_DRACO_MESH_COMPRESSION]?
E(Sa):fc(new ia.BufferGeometry,Sa,L),N[cb]={primitive:Sa,promise:T},X.push(T))}return Promise.all(X)}loadMesh(y){const E=this,L=this.extensions,C=this.json.meshes[y],N=C.primitives,X=[];for(let T=0,la=N.length;T<la;T++){const sa=void 0===N[T].material?Gb(this.cache):this.getDependency("material",N[T].material);X.push(sa)}X.push(E.loadGeometries(N));return Promise.all(X).then(function(T){var la=T.slice(0,T.length-1);const sa=T[T.length-1];T=[];for(let Db=0,cc=sa.length;Db<cc;Db++){var Sa=sa[Db];const $b=
N[Db];var cb=void 0;cb=la[Db];if($b.mode===Ib.TRIANGLES||$b.mode===Ib.TRIANGLE_STRIP||$b.mode===Ib.TRIANGLE_FAN||void 0===$b.mode)cb=!0===C.isSkinnedMesh?new ia.SkinnedMesh(Sa,cb):new ia.Mesh(Sa,cb),!0===cb.isSkinnedMesh&&cb.normalizeSkinWeights(),$b.mode===Ib.TRIANGLE_STRIP?cb.geometry=(0,sb.toTrianglesDrawMode)(cb.geometry,ia.TriangleStripDrawMode):$b.mode===Ib.TRIANGLE_FAN&&(cb.geometry=(0,sb.toTrianglesDrawMode)(cb.geometry,ia.TriangleFanDrawMode));else if($b.mode===Ib.LINES)cb=new ia.LineSegments(Sa,
cb);else if($b.mode===Ib.LINE_STRIP)cb=new ia.Line(Sa,cb);else if($b.mode===Ib.LINE_LOOP)cb=new ia.LineLoop(Sa,cb);else if($b.mode===Ib.POINTS)cb=new ia.Points(Sa,cb);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+$b.mode);if(0<Object.keys(cb.geometry.morphAttributes).length){Sa=cb;Sa.updateMorphTargets();if(void 0!==C.weights)for(let Wb=0,Yc=C.weights.length;Wb<Yc;Wb++)Sa.morphTargetInfluences[Wb]=C.weights[Wb];if(C.extras&&Array.isArray(C.extras.targetNames)){const Wb=C.extras.targetNames;
if(Sa.morphTargetInfluences.length===Wb.length){Sa.morphTargetDictionary={};for(let Yc=0,$d=Wb.length;Yc<$d;Yc++)Sa.morphTargetDictionary[Wb[Yc]]=Yc}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}cb.name=E.createUniqueName(C.name||"mesh_"+y);Xb(cb,C);$b.extensions&&Nb(L,cb,$b);E.assignFinalMaterial(cb);T.push(cb)}for(let Db=0,cc=T.length;Db<cc;Db++)E.associations.set(T[Db],{meshes:y,primitives:Db});if(1===T.length)return C.extensions&&Nb(L,T[0],C),T[0];
la=new ia.Group;C.extensions&&Nb(L,la,C);E.associations.set(la,{meshes:y});for(let Db=0,cc=T.length;Db<cc;Db++)la.add(T[Db]);return la})}loadCamera(y){let E;y=this.json.cameras[y];const L=y[y.type];if(L)return"perspective"===y.type?E=new ia.PerspectiveCamera(ia.MathUtils.radToDeg(L.yfov),L.aspectRatio||1,L.znear||1,L.zfar||2E6):"orthographic"===y.type&&(E=new ia.OrthographicCamera(-L.xmag,L.xmag,L.ymag,-L.ymag,L.znear,L.zfar)),y.name&&(E.name=this.createUniqueName(y.name)),Xb(E,y),Promise.resolve(E);
console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(y){const E=this.json.skins[y];y=[];for(let L=0,C=E.joints.length;L<C;L++)y.push(this._loadNodeShallow(E.joints[L]));void 0!==E.inverseBindMatrices?y.push(this.getDependency("accessor",E.inverseBindMatrices)):y.push(null);return Promise.all(y).then(function(L){const C=L.pop(),N=[],X=[];for(let la=0,sa=L.length;la<sa;la++){var T=L[la];T?(N.push(T),T=new ia.Matrix4,null!==C&&T.fromArray(C.array,16*la),X.push(T)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',
E.joints[la])}return new ia.Skeleton(N,X)})}loadAnimation(y){const E=this,L=this.json.animations[y],C=L.name?L.name:"animation_"+y;y=[];const N=[],X=[],T=[],la=[];for(let Sa=0,cb=L.channels.length;Sa<cb;Sa++){var sa=L.channels[Sa];const Db=L.samplers[sa.sampler];sa=sa.target;const cc=void 0!==L.parameters?L.parameters[Db.input]:Db.input,$b=void 0!==L.parameters?L.parameters[Db.output]:Db.output;void 0!==sa.node&&(y.push(this.getDependency("node",sa.node)),N.push(this.getDependency("accessor",cc)),
X.push(this.getDependency("accessor",$b)),T.push(Db),la.push(sa))}return Promise.all([Promise.all(y),Promise.all(N),Promise.all(X),Promise.all(T),Promise.all(la)]).then(function(Sa){const cb=Sa[0],Db=Sa[1],cc=Sa[2],$b=Sa[3];Sa=Sa[4];const Wb=[];for(let zd=0,yk=cb.length;zd<yk;zd++){var Yc=cb[zd],$d=Db[zd];const Qh=cc[zd],ej=$b[zd],fj=Sa[zd];if(void 0!==Yc&&(Yc.updateMatrix&&Yc.updateMatrix(),Yc=E._createAnimationTracks(Yc,$d,Qh,ej,fj)))for($d=0;$d<Yc.length;$d++)Wb.push(Yc[$d])}return new ia.AnimationClip(C,
void 0,Wb)})}createNodeMesh(y){const E=this,L=this.json.nodes[y];return void 0===L.mesh?null:E.getDependency("mesh",L.mesh).then(function(C){C=E._getNodeRef(E.meshCache,L.mesh,C);void 0!==L.weights&&C.traverse(function(N){if(N.isMesh)for(let X=0,T=L.weights.length;X<T;X++)N.morphTargetInfluences[X]=L.weights[X]});return C})}loadNode(y){var E=this.json.nodes[y];y=this._loadNodeShallow(y);const L=[],C=E.children||[];for(let N=0,X=C.length;N<X;N++)L.push(this.getDependency("node",C[N]));E=void 0===E.skin?
Promise.resolve(null):this.getDependency("skin",E.skin);return Promise.all([y,Promise.all(L),E]).then(function(N){const X=N[0],T=N[1],la=N[2];null!==la&&X.traverse(function(sa){sa.isSkinnedMesh&&sa.bind(la,ac)});for(let sa=0,Sa=T.length;sa<Sa;sa++)X.add(T[sa]);return X})}_loadNodeShallow(y){const E=this.extensions,L=this;if(void 0!==this.nodeCache[y])return this.nodeCache[y];const C=this.json.nodes[y],N=C.name?L.createUniqueName(C.name):"",X=[],T=L._invokeOne(function(la){return la.createNodeMesh&&
la.createNodeMesh(y)});T&&X.push(T);void 0!==C.camera&&X.push(L.getDependency("camera",C.camera).then(function(la){return L._getNodeRef(L.cameraCache,C.camera,la)}));L._invokeAll(function(la){return la.createNodeAttachment&&la.createNodeAttachment(y)}).forEach(function(la){X.push(la)});this.nodeCache[y]=Promise.all(X).then(function(la){let sa;sa=!0===C.isBone?new ia.Bone:1<la.length?new ia.Group:1===la.length?la[0]:new ia.Object3D;if(sa!==la[0])for(let Sa=0,cb=la.length;Sa<cb;Sa++)sa.add(la[Sa]);
C.name&&(sa.userData.name=C.name,sa.name=N);Xb(sa,C);C.extensions&&Nb(E,sa,C);void 0!==C.matrix?(la=new ia.Matrix4,la.fromArray(C.matrix),sa.applyMatrix4(la)):(void 0!==C.translation&&sa.position.fromArray(C.translation),void 0!==C.rotation&&sa.quaternion.fromArray(C.rotation),void 0!==C.scale&&sa.scale.fromArray(C.scale));L.associations.has(sa)||L.associations.set(sa,{});L.associations.get(sa).nodes=y;return sa});return this.nodeCache[y]}loadScene(y){var E=this.extensions;y=this.json.scenes[y];const L=
this,C=new ia.Group;y.name&&(C.name=L.createUniqueName(y.name));Xb(C,y);y.extensions&&Nb(E,C,y);E=y.nodes||[];y=[];for(let N=0,X=E.length;N<X;N++)y.push(L.getDependency("node",E[N]));return Promise.all(y).then(function(N){for(let X=0,T=N.length;X<T;X++)C.add(N[X]);L.associations=(X=>{const T=new Map;for(const [la,sa]of L.associations)(la instanceof ia.Material||la instanceof ia.Texture)&&T.set(la,sa);X.traverse(la=>{const sa=L.associations.get(la);null!=sa&&T.set(la,sa)});return T})(C);return C})}_createAnimationTracks(y,
E,L,C,N){const X=[];var T=y.name?y.name:y.uuid;const la=[];cd[N.path]===cd.weights?y.traverse(function(sa){sa.morphTargetInfluences&&la.push(sa.name?sa.name:sa.uuid)}):la.push(T);switch(cd[N.path]){case cd.weights:y=ia.NumberKeyframeTrack;break;case cd.rotation:y=ia.QuaternionKeyframeTrack;break;case cd.position:case cd.scale:y=ia.VectorKeyframeTrack;break;default:switch(L.itemSize){case 1:y=ia.NumberKeyframeTrack;break;default:y=ia.VectorKeyframeTrack}}T=void 0!==C.interpolation?Gd[C.interpolation]:
ia.InterpolateLinear;L=this._getArrayFromAccessor(L);for(let sa=0,Sa=la.length;sa<Sa;sa++){const cb=new y(la[sa]+"."+cd[N.path],E.array,L,T);"CUBICSPLINE"===C.interpolation&&this._createCubicSplineTrackInterpolant(cb);X.push(cb)}return X}_getArrayFromAccessor(y){let E=y.array;if(y.normalized){y=rb(E.constructor);const L=new Float32Array(E.length);for(let C=0,N=E.length;C<N;C++)L[C]=E[C]*y;E=L}return E}_createCubicSplineTrackInterpolant(y){y.createInterpolant=function(E){return new (this instanceof
ia.QuaternionKeyframeTrack?Fb:ob)(this.times,this.values,this.getValueSize()/3,E)};y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}};
shadow$provide[3]=function(Xc,Ec,ld,x){Object.defineProperties(x,{__esModule:{enumerable:!0,value:!0},RGBELoader:{enumerable:!0,get:function(){return Gb}}});var wa=Ec(0);class Gb extends wa.DataTextureLoader{constructor(Nb){super(Nb);this.type=wa.HalfFloatType}parse(Nb){const Xb=function(ab,ya){switch(ab){case 1:throw Error("THREE.RGBELoader: Read Error: "+(ya||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(ya||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(ya||""));default:case 4:throw Error("THREE.RGBELoader: Memory Error: "+
(ya||""));}},kc=function(ab,ya,Y){ya=ya?ya:1024;let ca=ab.pos,na,aa=0,da="",va=String.fromCharCode.apply(null,new Uint16Array(ab.subarray(ca,ca+128)));for(;0>(na=va.indexOf("\n"))&&aa<ya&&ca<ab.byteLength;)da+=va,aa+=va.length,ca+=128,va+=String.fromCharCode.apply(null,new Uint16Array(ab.subarray(ca,ca+128)));return-1<na?(!1!==Y&&(ab.pos+=aa+na+1),da+va.slice(0,na)):!1};var xc=function(ab,ya,Y,ca){const na=Math.pow(2,ab[ya+3]-128)/255;Y[ca+0]=ab[ya+0]*na;Y[ca+1]=ab[ya+1]*na;Y[ca+2]=ab[ya+2]*na;Y[ca+
3]=1},hb=function(ab,ya,Y,ca){const na=Math.pow(2,ab[ya+3]-128)/255;Y[ca+0]=wa.DataUtils.toHalfFloat(Math.min(ab[ya+0]*na,65504));Y[ca+1]=wa.DataUtils.toHalfFloat(Math.min(ab[ya+1]*na,65504));Y[ca+2]=wa.DataUtils.toHalfFloat(Math.min(ab[ya+2]*na,65504));Y[ca+3]=wa.DataUtils.toHalfFloat(1)},rb=new Uint8Array(Nb);rb.pos=0;Nb=function(ab){const ya=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ca=/^\s*FORMAT=(\S+)\s*$/,na=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,aa={valid:0,
string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let da,va;(ab.pos>=ab.byteLength||!(da=kc(ab)))&&Xb(1,"no header found");(va=da.match(/^#\?(\S+)/))||Xb(3,"bad initial token");aa.valid|=1;aa.programtype=va[1];for(aa.string+=da+"\n";;){da=kc(ab);if(!1===da)break;aa.string+=da+"\n";if("#"===da.charAt(0))aa.comments+=da+"\n";else{if(va=da.match(ya))aa.gamma=parseFloat(va[1]);if(va=da.match(Y))aa.exposure=parseFloat(va[1]);if(va=da.match(ca))aa.valid|=2,aa.format=
va[1];if(va=da.match(na))aa.valid|=4,aa.height=parseInt(va[1],10),aa.width=parseInt(va[2],10);if(aa.valid&2&&aa.valid&4)break}}aa.valid&2||Xb(3,"missing format specifier");aa.valid&4||Xb(3,"missing image size specifier");return aa}(rb);const Ic=Nb.width,fc=Nb.height;rb=function(ab,ya,Y){if(8>ya||32767<ya||2!==ab[0]||2!==ab[1]||ab[2]&128)return new Uint8Array(ab);ya!==(ab[2]<<8|ab[3])&&Xb(3,"wrong scanline width");const ca=new Uint8Array(4*ya*Y);ca.length||Xb(4,"unable to allocate buffer space");let na=
0,aa=0;const da=4*ya,va=new Uint8Array(4),Ka=new Uint8Array(da);for(;0<Y&&aa<ab.byteLength;){aa+4>ab.byteLength&&Xb(1);va[0]=ab[aa++];va[1]=ab[aa++];va[2]=ab[aa++];va[3]=ab[aa++];2==va[0]&&2==va[1]&&(va[2]<<8|va[3])==ya||Xb(3,"bad rgbe scanline format");for(var Oa=0,Na=void 0;Oa<da&&aa<ab.byteLength;){Na=ab[aa++];var bb=128<Na;bb&&(Na-=128);(0===Na||Oa+Na>da)&&Xb(3,"bad scanline data");if(bb){bb=ab[aa++];for(let mb=0;mb<Na;mb++)Ka[Oa++]=bb}else Ka.set(ab.subarray(aa,aa+Na),Oa),Oa+=Na,aa+=Na}Oa=ya;
for(Na=0;Na<Oa;Na++)bb=0,ca[na]=Ka[Na+bb],bb+=ya,ca[na+1]=Ka[Na+bb],bb+=ya,ca[na+2]=Ka[Na+bb],bb+=ya,ca[na+3]=Ka[Na+bb],na+=4;Y--}return ca}(rb.subarray(rb.pos),Ic,fc);let ia;switch(this.type){case wa.FloatType:ia=rb.length/4;hb=new Float32Array(4*ia);for(var sb=0;sb<ia;sb++)xc(rb,4*sb,hb,4*sb);xc=hb;hb=wa.FloatType;break;case wa.HalfFloatType:ia=rb.length/4;xc=new Uint16Array(4*ia);for(sb=0;sb<ia;sb++)hb(rb,4*sb,xc,4*sb);hb=wa.HalfFloatType;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+
this.type);}return{width:Ic,height:fc,data:xc,header:Nb.string,gamma:Nb.gamma,exposure:Nb.exposure,type:hb}}setDataType(Nb){this.type=Nb;return this}load(Nb,Xb,kc,xc){return super.load(Nb,function(hb,rb){switch(hb.type){case wa.FloatType:case wa.HalfFloatType:hb.colorSpace=wa.LinearSRGBColorSpace,hb.minFilter=wa.LinearFilter,hb.magFilter=wa.LinearFilter,hb.generateMipmaps=!1,hb.flipY=!0}Xb&&Xb(hb,rb)},kc,xc)}}};
shadow$provide[4]=function(Xc,Ec,ld,x){function wa(ia){const sb=new Uint8Array(512);for(var ab=0;256>ab;ab++)sb[ab]=ab;for(ab=0;255>ab;ab++){const ya=ab+~~(ia()*(256-ab)),Y=sb[ab];sb[ab]=sb[ya];sb[ya]=Y}for(ia=256;512>ia;ia++)sb[ia]=sb[ia-256];return sb}Object.defineProperty(x,"__esModule",{value:!0});x.buildPermutationTable=x.createNoise4D=x.createNoise3D=x.createNoise2D=void 0;const Gb=.5*(Math.sqrt(3)-1),Nb=(3-Math.sqrt(3))/6,Xb=1/3,kc=1/6,xc=(Math.sqrt(5)-1)/4,hb=(5-Math.sqrt(5))/20,rb=new Float64Array([1,
1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),Ic=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),fc=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);x.createNoise2D=
function(ia=Math.random){const sb=wa(ia),ab=(new Float64Array(sb)).map(Y=>rb[Y%12*2]),ya=(new Float64Array(sb)).map(Y=>rb[Y%12*2+1]);return function(Y,ca){var na=0,aa=0,da=0,va=(Y+ca)*Gb,Ka=Math.floor(Y+va)|0,Oa=Math.floor(ca+va)|0;va=(Ka+Oa)*Nb;var Na=Y-(Ka-va);const bb=ca-(Oa-va);let mb;if(Na>bb){var Ua=1;mb=0}else Ua=0,mb=1;va=Na-Ua+Nb;var Ia=bb-mb+Nb;ca=Na-1+2*Nb;Y=bb-1+2*Nb;Ka&=255;Oa&=255;let Ma=.5-Na*Na-bb*bb;if(0<=Ma){var kb=Ka+sb[Oa];na=ab[kb];kb=ya[kb];Ma*=Ma;na=Ma*Ma*(na*Na+kb*bb)}Na=.5-
va*va-Ia*Ia;0<=Na&&(Ua=Ka+Ua+sb[Oa+mb],aa=ab[Ua],Ua=ya[Ua],Na*=Na,aa=Na*Na*(aa*va+Ua*Ia));va=.5-ca*ca-Y*Y;0<=va&&(Ia=Ka+1+sb[Oa+1],da=ab[Ia],Ia=ya[Ia],va*=va,da=va*va*(da*ca+Ia*Y));return 70*(na+aa+da)}};x.createNoise3D=function(ia=Math.random){const sb=wa(ia),ab=(new Float64Array(sb)).map(ca=>Ic[ca%12*3]),ya=(new Float64Array(sb)).map(ca=>Ic[ca%12*3+1]),Y=(new Float64Array(sb)).map(ca=>Ic[ca%12*3+2]);return function(ca,na,aa){var da=(ca+na+aa)*Xb,va=Math.floor(ca+da)|0,Ka=Math.floor(na+da)|0,Oa=
Math.floor(aa+da)|0;da=(va+Ka+Oa)*kc;var Na=ca-(va-da);var bb=na-(Ka-da);const mb=aa-(Oa-da);let Ua,Ia;var Ma;let kb,Tb;if(Na>=bb)if(bb>=mb){var wb=1;Ia=Ua=0;kb=Ma=1;Tb=0}else Na>=mb?(wb=1,Ia=Ua=0):(Ua=wb=0,Ia=1),Ma=1,kb=0,Tb=1;else bb<mb?(Ua=wb=0,Ia=1,Ma=0,Tb=kb=1):Na<mb?(wb=0,Ua=1,Ma=Ia=0,Tb=kb=1):(wb=0,Ua=1,Ia=0,kb=Ma=1,Tb=0);var Zb=Na-wb+kc;var Q=bb-Ua+kc;const pa=mb-Ia+kc;ca=Na-Ma+2*kc;var La=bb-kb+2*kc;const ob=mb-Tb+2*kc;aa=Na-1+3*kc;na=bb-1+3*kc;da=mb-1+3*kc;va&=255;Ka&=255;Oa&=255;let lb=
.6-Na*Na-bb*bb-mb*mb;if(0>lb)Na=0;else{const Fb=va+sb[Ka+sb[Oa]];lb*=lb;Na=lb*lb*(ab[Fb]*Na+ya[Fb]*bb+Y[Fb]*mb)}bb=.6-Zb*Zb-Q*Q-pa*pa;0>bb?Zb=0:(wb=va+wb+sb[Ka+Ua+sb[Oa+Ia]],bb*=bb,Zb=bb*bb*(ab[wb]*Zb+ya[wb]*Q+Y[wb]*pa));Q=.6-ca*ca-La*La-ob*ob;0>Q?ca=0:(Ma=va+Ma+sb[Ka+kb+sb[Oa+Tb]],Q*=Q,ca=Q*Q*(ab[Ma]*ca+ya[Ma]*La+Y[Ma]*ob));La=.6-aa*aa-na*na-da*da;0>La?aa=0:(va=va+1+sb[Ka+1+sb[Oa+1]],La*=La,aa=La*La*(ab[va]*aa+ya[va]*na+Y[va]*da));return 32*(Na+Zb+ca+aa)}};x.createNoise4D=function(ia=Math.random){const sb=
wa(ia),ab=(new Float64Array(sb)).map(na=>fc[na%32*4]),ya=(new Float64Array(sb)).map(na=>fc[na%32*4+1]),Y=(new Float64Array(sb)).map(na=>fc[na%32*4+2]),ca=(new Float64Array(sb)).map(na=>fc[na%32*4+3]);return function(na,aa,da,va){var Ka=(na+aa+da+va)*xc,Oa=Math.floor(na+Ka)|0,Na=Math.floor(aa+Ka)|0,bb=Math.floor(da+Ka)|0,mb=Math.floor(va+Ka)|0;Ka=(Oa+Na+bb+mb)*hb;var Ua=na-(Oa-Ka);var Ia=aa-(Na-Ka);var Ma=da-(bb-Ka);const kb=va-(mb-Ka);va=da=Ka=aa=0;Ua>Ia?aa++:Ka++;Ua>Ma?aa++:da++;Ua>kb?aa++:va++;
Ia>Ma?Ka++:da++;Ia>kb?Ka++:va++;Ma>kb?da++:va++;const Tb=3<=aa?1:0,wb=3<=Ka?1:0,Zb=3<=da?1:0,Q=3<=va?1:0;var pa=2<=aa?1:0;var La=2<=Ka?1:0;const ob=2<=da?1:0,lb=2<=va?1:0;na=1<=aa?1:0;var Fb=1<=Ka?1:0;const Ib=1<=da?1:0,Ob=1<=va?1:0,tb=Ua-Tb+hb,Sb=Ia-wb+hb,yd=Ma-Zb+hb,md=kb-Q+hb,cd=Ua-pa+2*hb,Gd=Ia-La+2*hb,ac=Ma-ob+2*hb,gc=kb-lb+2*hb,y=Ua-na+3*hb,E=Ia-Fb+3*hb,L=Ma-Ib+3*hb,C=kb-Ob+3*hb;va=Ua-1+4*hb;da=Ia-1+4*hb;Ka=Ma-1+4*hb;aa=kb-1+4*hb;Oa&=255;Na&=255;bb&=255;mb&=255;let N=.6-Ua*Ua-Ia*Ia-Ma*Ma-kb*
kb;if(0>N)Ua=0;else{const X=Oa+sb[Na+sb[bb+sb[mb]]];N*=N;Ua=N*N*(ab[X]*Ua+ya[X]*Ia+Y[X]*Ma+ca[X]*kb)}Ia=.6-tb*tb-Sb*Sb-yd*yd-md*md;0>Ia?Ia=0:(Ma=Oa+Tb+sb[Na+wb+sb[bb+Zb+sb[mb+Q]]],Ia*=Ia,Ia=Ia*Ia*(ab[Ma]*tb+ya[Ma]*Sb+Y[Ma]*yd+ca[Ma]*md));Ma=.6-cd*cd-Gd*Gd-ac*ac-gc*gc;0>Ma?pa=0:(pa=Oa+pa+sb[Na+La+sb[bb+ob+sb[mb+lb]]],Ma*=Ma,pa=Ma*Ma*(ab[pa]*cd+ya[pa]*Gd+Y[pa]*ac+ca[pa]*gc));La=.6-y*y-E*E-L*L-C*C;0>La?na=0:(na=Oa+na+sb[Na+Fb+sb[bb+Ib+sb[mb+Ob]]],La*=La,na=La*La*(ab[na]*y+ya[na]*E+Y[na]*L+ca[na]*C));
Fb=.6-va*va-da*da-Ka*Ka-aa*aa;0>Fb?va=0:(Oa=Oa+1+sb[Na+1+sb[bb+1+sb[mb+1]]],Fb*=Fb,va=Fb*Fb*(ab[Oa]*va+ya[Oa]*da+Y[Oa]*Ka+ca[Oa]*aa));return 27*(Ua+Ia+pa+na+va)}};x.buildPermutationTable=wa};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var h,aa=this||self;function ba(a,b){a=a.split(".");var c=aa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b}function q(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ca(a){return Object.prototype.hasOwnProperty.call(a,da)&&a[da]||(a[da]=++ea)}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function fa(a){return/^[\s\xa0]*$/.test(a)};function ha(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function ia(a,b,c){return null!==a&&b in a?a[b]:c};function la(){var a=aa.navigator;return a&&(a=a.userAgent)?a:""}function na(a){return-1!=la().indexOf(a)};function oa(a,b){a.sort(b||pa)}function qa(a,b){const c=Array(a.length);for(let e=0;e<a.length;e++)c[e]={index:e,value:a[e]};const d=b||pa;oa(c,function(e,f){return d(e.value,f.value)||e.index-f.index});for(b=0;b<a.length;b++)a[b]=c[b].value}function pa(a,b){return a>b?1:a<b?-1:0};var ra=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function sa(a,b){if(!Number.isFinite(a))return String(a);a=String(a);let c=a.indexOf(".");-1===c&&(c=a.length);const d="-"===a[0]?"-":"";d&&(a=a.substring(1));return d+ra("0",Math.max(0,b-c))+a};function ta(a,b){null!=a&&this.append.apply(this,arguments)}h=ta.prototype;h.tb="";h.set=function(a){this.tb=""+a};h.append=function(a,b,c){this.tb+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.tb+=arguments[d];return this};h.clear=function(){this.tb=""};h.getLength=function(){return this.tb.length};h.toString=function(){return this.tb};var t={},ua=null,va=!0,wa=null;function xa(){return new v(null,5,[ya,!0,za,!0,Aa,!1,Ba,!1,Ca,null],null)}function Da(){va=!1;ua=function(){var a=arguments,b=console.log,c=b.apply,d=console;{const e=a.length;if(0<e){const f=Array(e);for(let g=0;g<e;g++)f[g]=a[g];a=f}else a=[]}return c.call(b,d,a)}}function w(a){return null!=a&&!1!==a}function Ea(a){return a instanceof Array}function Fa(a){return null==a?!0:!1===a?!0:!1}function Ga(a){return"string"===q(a)}
function x(a,b){return a[q(null==b?null:b)]?!0:a._?!0:!1}function Ha(a){return null==a?null:a.constructor}function z(a,b){var c=Ha(b);return Error(["No protocol method ",a," defined for type ",w(w(c)?c.xd:c)?c.wc:q(b),": ",b].join(""))}function Ia(a){var b=a.wc;return w(b)?b:B.j(a)}
var Ja="undefined"!==typeof Symbol&&"function"===q(Symbol)?Symbol.iterator:"@@iterator",Ka={_RBRACE_:"}",_COLON_:":",_BANG_:"!",_QMARK_:"?",_BSLASH_:"\\\\",_SLASH_:"/",_PERCENT_:"%",_PLUS_:"+",_SHARP_:"#",_LBRACE_:"{",_BAR_:"|",_LBRACK_:"[",_EQ_:"\x3d",_:"-",_TILDE_:"~",_RBRACK_:"]",_GT_:"\x3e",_SINGLEQUOTE_:"'",_CIRCA_:"@",_AMPERSAND_:"\x26",_DOUBLEQUOTE_:'\\"',_CARET_:"^",_LT_:"\x3c",_STAR_:"*"},La=null;
function Ma(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Na(a){function b(d,e){d.push(e);return d}var c=[];return Oa.o?Oa.o(b,c,a):Oa.call(null,b,c,a)}function Pa(){}function Qa(){}function Ra(){}function Ua(a){if(null!=a&&null!=a.$)a=a.$(a);else{var b=Ua[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ua._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ICounted.-count",a);}return a}function Va(){}
function Wa(a){if(null!=a&&null!=a.ba)a=a.ba(a);else{var b=Wa[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Wa._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEmptyableCollection.-empty",a);}return a}function Xa(){}function Ya(a,b){if(null!=a&&null!=a.da)a=a.da(a,b);else{var c=Ya[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Ya._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ICollection.-conj",a);}return a}function Za(){}
var ab=function(){function a(d,e,f){var g=$a[q(null==d?null:d)];if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);g=$a._;if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);throw z("IIndexed.-nth",d);}function b(d,e){var f=$a[q(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=$a._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.o=a;return c}(),$a=function $a(a){switch(arguments.length){case 2:return $a.m(arguments[0],arguments[1]);case 3:return $a.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};$a.m=function(a,b){return null!=a&&null!=a.V?a.V(a,b):ab(a,b)};$a.o=function(a,b,c){return null!=a&&null!=a.ga?a.ga(a,b,c):ab(a,b,c)};$a.H=3;
function cb(a){if(null!=a&&null!=a.ja)a=a.ja(a);else{var b=cb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=cb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeq.-first",a);}return a}function db(a){if(null!=a&&null!=a.ka)a=a.ka(a);else{var b=db[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=db._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeq.-rest",a);}return a}function eb(){}
function fb(a){if(null!=a&&null!=a.ea)a=a.ea(a);else{var b=fb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=fb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("INext.-next",a);}return a}function gb(){}
var ib=function(){function a(d,e,f){var g=hb[q(null==d?null:d)];if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);g=hb._;if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);throw z("ILookup.-lookup",d);}function b(d,e){var f=hb[q(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=hb._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.o=a;return c}(),hb=function hb(a){switch(arguments.length){case 2:return hb.m(arguments[0],arguments[1]);case 3:return hb.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};hb.m=function(a,b){return null!=a&&null!=a.oa?a.oa(a,b):ib(a,b)};hb.o=function(a,b,c){return null!=a&&null!=a.X?a.X(a,b,c):ib(a,b,c)};hb.H=3;function jb(){}
function kb(a,b){if(null!=a&&null!=a.$a)a=a.$a(a,b);else{var c=kb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=kb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IAssociative.-contains-key?",a);}return a}function lb(a,b,c){if(null!=a&&null!=a.Ca)a=a.Ca(a,b,c);else{var d=lb[q(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=lb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw z("IAssociative.-assoc",a);}return a}
function mb(a,b){if(null!=a&&null!=a.hb)a=a.hb(a,b);else{var c=mb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=mb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IFind.-find",a);}return a}function nb(){}function ob(a,b){if(null!=a&&null!=a.pc)a=a.pc(a,b);else{var c=ob[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=ob._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IMap.-dissoc",a);}return a}
function pb(a){if(null!=a&&null!=a.Pc)a=a.key;else{var b=pb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=pb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMapEntry.-key",a);}return a}function qb(a){if(null!=a&&null!=a.Qc)a=a.D;else{var b=qb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=qb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMapEntry.-val",a);}return a}function rb(){}
function sb(a,b){if(null!=a&&null!=a.ud)a=a.ud(a,b);else{var c=sb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=sb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ISet.-disjoin",a);}return a}function ub(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=ub[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=ub._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IStack.-peek",a);}return a}
function vb(a){if(null!=a&&null!=a.jb)a=a.jb(a);else{var b=vb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=vb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IStack.-pop",a);}return a}function wb(){}function xb(a,b,c){if(null!=a&&null!=a.Sa)a=a.Sa(a,b,c);else{var d=xb[q(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=xb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw z("IVector.-assoc-n",a);}return a}
function C(a){if(null!=a&&null!=a.ya)a=a.ya(a);else{var b=C[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=C._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IDeref.-deref",a);}return a}function yb(){}function zb(a){if(null!=a&&null!=a.P)a=a.P(a);else{var b=zb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=zb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMeta.-meta",a);}return a}
function Ab(a,b){if(null!=a&&null!=a.S)a=a.S(a,b);else{var c=Ab[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Ab._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IWithMeta.-with-meta",a);}return a}function Bb(){}
var Db=function(){function a(d,e,f){var g=Cb[q(null==d?null:d)];if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);g=Cb._;if(null!=g)return g.o?g.o(d,e,f):g.call(null,d,e,f);throw z("IReduce.-reduce",d);}function b(d,e){var f=Cb[q(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=Cb._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.o=a;return c}(),Cb=function Cb(a){switch(arguments.length){case 2:return Cb.m(arguments[0],arguments[1]);case 3:return Cb.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Cb.m=function(a,b){return null!=a&&null!=a.ha?a.ha(a,b):Db(a,b)};Cb.o=function(a,b,c){return null!=a&&null!=a.ia?a.ia(a,b,c):Db(a,b,c)};Cb.H=3;function Eb(){}
function Fb(a,b,c){if(null!=a&&null!=a.Jb)a=a.Jb(a,b,c);else{var d=Fb[q(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=Fb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw z("IKVReduce.-kv-reduce",a);}return a}function Gb(a,b){if(null!=a&&null!=a.T)a=a.T(a,b);else{var c=Gb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Gb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IEquiv.-equiv",a);}return a}
function Hb(a){if(null!=a&&null!=a.U)a=a.U(a);else{var b=Hb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IHash.-hash",a);}return a}function Ib(){}function Jb(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=Jb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeqable.-seq",a);}return a}function Kb(){}function Lb(){}function Mb(){}function Nb(){}
function Ob(a){if(null!=a&&null!=a.wb)a=a.wb(a);else{var b=Ob[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ob._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IReversible.-rseq",a);}return a}function Pb(a,b){if(null!=a&&null!=a.vd)a=a.vd(a,b);else{var c=Pb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Pb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IWriter.-write",a);}return a}function Qb(){}
function Rb(a,b,c){if(null!=a&&null!=a.R)a=a.R(a,b,c);else{var d=Rb[q(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=Rb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw z("IPrintWithWriter.-pr-writer",a);}return a}function Vb(a){if(null!=a&&null!=a.Ib)a=a.Ib(a);else{var b=Vb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Vb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEditableCollection.-as-transient",a);}return a}
function Wb(a,b){if(null!=a&&null!=a.Mb)a=a.Mb(a,b);else{var c=Wb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Wb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ITransientCollection.-conj!",a);}return a}function Xb(a){if(null!=a&&null!=a.Yb)a=a.Yb(a);else{var b=Xb[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Xb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ITransientCollection.-persistent!",a);}return a}
function Yb(a,b,c){if(null!=a&&null!=a.Lb)a=a.Lb(a,b,c);else{var d=Yb[q(null==a?null:a)];if(null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else if(d=Yb._,null!=d)a=d.o?d.o(a,b,c):d.call(null,a,b,c);else throw z("ITransientAssociative.-assoc!",a);}return a}function Zb(a,b){if(null!=a&&null!=a.Wc)a=a.Wc(a,b);else{var c=Zb[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Zb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ITransientMap.-dissoc!",a);}return a}
function $b(){}function ac(a,b){if(null!=a&&null!=a.ab)a=a.ab(a,b);else{var c=ac[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=ac._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IComparable.-compare",a);}return a}function bc(a){if(null!=a&&null!=a.Oc)a=a.Oc(a);else{var b=bc[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=bc._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunk.-drop-first",a);}return a}
function cc(a){if(null!=a&&null!=a.Tb)a=a.Tb(a);else{var b=cc[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=cc._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-first",a);}return a}function dc(a){if(null!=a&&null!=a.ub)a=a.ub(a);else{var b=dc[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=dc._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-rest",a);}return a}
function ec(a){if(null!=a&&null!=a.Vb)a=a.Vb(a);else{var b=ec[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=ec._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("INamed.-name",a);}return a}function fc(a){if(null!=a&&null!=a.Wb)a=a.Wb(a);else{var b=fc[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=fc._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("INamed.-namespace",a);}return a}
function gc(a,b){if(null!=a&&null!=a.Qa)a=a.Qa(a,b);else{var c=gc[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=gc._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IReset.-reset!",a);}return a}
var ic=function(){function a(f,g,k,l,m){var n=hc[q(null==f?null:f)];if(null!=n)return n.O?n.O(f,g,k,l,m):n.call(null,f,g,k,l,m);n=hc._;if(null!=n)return n.O?n.O(f,g,k,l,m):n.call(null,f,g,k,l,m);throw z("ISwap.-swap!",f);}function b(f,g,k,l){var m=hc[q(null==f?null:f)];if(null!=m)return m.K?m.K(f,g,k,l):m.call(null,f,g,k,l);m=hc._;if(null!=m)return m.K?m.K(f,g,k,l):m.call(null,f,g,k,l);throw z("ISwap.-swap!",f);}function c(f,g,k){var l=hc[q(null==f?null:f)];if(null!=l)return l.o?l.o(f,g,k):l.call(null,
f,g,k);l=hc._;if(null!=l)return l.o?l.o(f,g,k):l.call(null,f,g,k);throw z("ISwap.-swap!",f);}function d(f,g){var k=hc[q(null==f?null:f)];if(null!=k)return k.m?k.m(f,g):k.call(null,f,g);k=hc._;if(null!=k)return k.m?k.m(f,g):k.call(null,f,g);throw z("ISwap.-swap!",f);}var e=null;e=function(f,g,k,l,m){switch(arguments.length){case 2:return d.call(this,f,g);case 3:return c.call(this,f,g,k);case 4:return b.call(this,f,g,k,l);case 5:return a.call(this,f,g,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.m=d;e.o=c;e.K=b;e.O=a;return e}(),hc=function hc(a){switch(arguments.length){case 2:return hc.m(arguments[0],arguments[1]);case 3:return hc.o(arguments[0],arguments[1],arguments[2]);case 4:return hc.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return hc.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};hc.m=function(a,b){return null!=a&&null!=a.rc?a.rc(a,b):ic(a,b)};
hc.o=function(a,b,c){return null!=a&&null!=a.Tc?a.Tc(a,b,c):ic(a,b,c)};hc.K=function(a,b,c,d){return null!=a&&null!=a.Uc?a.Uc(a,b,c,d):ic(a,b,c,d)};hc.O=function(a,b,c,d,e){return null!=a&&null!=a.Vc?a.Vc(a,b,c,d,e):ic(a,b,c,d,e)};hc.H=5;function jc(a,b){if(null!=a&&null!=a.sc)a=a.sc(a,b);else{var c=jc[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=jc._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IVolatile.-vreset!",a);}return a}function kc(){}
function lc(a){if(null!=a&&null!=a.Aa)a=a.Aa(a);else{var b=lc[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=lc._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IIterable.-iterator",a);}return a}function mc(a,b){if(null!=a&&null!=a.gb)a=a.gb(a,b);else{var c=mc[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=mc._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IDrop.-drop",a);}return a}function nc(a){this.Ke=a;this.B=1073741824;this.I=0}
nc.prototype.vd=function(a,b){return this.Ke.append(b)};function oc(a){var b=new ta;a.R(null,new nc(b),xa());return B.j(b)}var pc="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function qc(a){a=pc(a|0,-862048943);return pc(a<<15|a>>>-15,461845907)}function rc(a,b){a=(a|0)^(b|0);return pc(a<<13|a>>>-13,5)+-430675100|0}
function sc(a,b){a=(a|0)^b;a=pc(a^a>>>16,-2048144789);a=pc(a^a>>>13,-1028477387);return a^a>>>16}function tc(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=rc(c,qc(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return sc(1===(a.length&1)?b^qc(a.charCodeAt(a.length-1)):b,pc(2,a.length))}var uc={},vc=0;
function wc(a){255<vc&&(uc={},vc=0);if(null==a)return 0;var b=uc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=pc(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;uc[a]=b;vc+=1;a=b}return a}
function xc(a){if(null!=a&&(a.B&4194304||t===a.Se))return a.U(null)^0;if("number"===typeof a){if(isFinite(a)){if(Number.isSafeInteger(a))a=Math.floor(a)%2147483647;else{var b=new Float64Array(1);b[0]=a;b=b.buffer;a=(new DataView(b,0,4)).getInt32();b=(new DataView(b,4,4)).getInt32();a^=b}return a}switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=wc(a),a=0===a?a:sc(rc(0,qc(a)),4)):a=a instanceof
Date?a.valueOf()^0:null==a?0:Hb(a)^0,a}function yc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}function zc(a,b){if(a.cb===b.cb)return 0;var c=Fa(a.wa);if(w(c?b.wa:c))return-1;if(w(a.wa)){if(Fa(b.wa))return 1;c=pa(a.wa,b.wa);return 0===c?pa(a.name,b.name):c}return pa(a.name,b.name)}function E(a,b,c,d,e){this.wa=a;this.name=b;this.cb=c;this.Hb=d;this.Ya=e;this.B=2154168321;this.I=4096}h=E.prototype;h.toString=function(){return this.cb};h.T=function(a,b){return b instanceof E?this.cb===b.cb:!1};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return F?F(a,this):Ac.call(null,a,this)};h.m=function(a,b){return Bc?Bc(a,this,b):Ac.call(null,a,this,b)};h.P=function(){return this.Ya};h.S=function(a,b){return new E(this.wa,this.name,this.cb,this.Hb,b)};
h.U=function(){var a=this.Hb;return null!=a?a:this.Hb=a=yc(tc(this.name),wc(this.wa))};h.Vb=function(){return this.name};h.Wb=function(){return this.wa};h.R=function(a,b){return Pb(b,this.cb)};var Cc=function Cc(a){switch(arguments.length){case 1:return Cc.j(arguments[0]);case 2:return Cc.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};
Cc.j=function(a){for(;;){if(a instanceof E)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Cc.m(null,a):Cc.m(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof G)a=a.pa;else throw Error("no conversion to symbol");}};Cc.m=function(a,b){var c=null!=a?[B.j(a),"/",B.j(b)].join(""):b;return new E(a,b,c,null,null)};Cc.H=2;function Dc(a){return null!=a?a.I&131072||t===a.Te?!0:a.I?!1:x(kc,a):x(kc,a)}
function H(a){if(null==a)return null;if(null!=a&&(a.B&8388608||t===a.me))return a.Y(null);if(Ea(a)||"string"===typeof a)return 0===a.length?null:new J(a,0,null);if(null!=a&&null!=a[Ja])return a=ia(a,Ja).call(a),Ec.j?Ec.j(a):Ec.call(null,a);if(x(Ib,a))return Jb(a);throw Error([B.j(a)," is not ISeqable"].join(""));}function K(a){if(null==a)return null;if(null!=a&&(a.B&64||t===a.Kb))return a.ja(null);a=H(a);return null==a?null:cb(a)}
function Fc(a){return null!=a?null!=a&&(a.B&64||t===a.Kb)?a.ka(null):(a=H(a))?a.ka(null):Gc:Gc}function M(a){return null==a?null:null!=a&&(a.B&128||t===a.Xb)?a.ea(null):H(Fc(a))}var O=function O(a){switch(arguments.length){case 1:return O.j(arguments[0]);case 2:return O.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return O.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};O.j=function(){return!0};
O.m=function(a,b){return null==a?null==b:a===b||Gb(a,b)};O.C=function(a,b,c){for(;;)if(O.m(a,b))if(M(c))a=b,b=K(c),c=M(c);else return O.m(b,K(c));else return!1};O.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};O.H=2;function Hc(a){this.s=a}Hc.prototype.next=function(){if(null!=this.s){var a=K(this.s);this.s=M(this.s);return{value:a,done:!1}}return{value:null,done:!0}};function Ic(a){return new Hc(H(a))}
function Jc(a,b){this.value=a;this.Qb=b;this.Jc=null;this.B=8388672;this.I=0}Jc.prototype.Y=function(){return this};Jc.prototype.ja=function(){return this.value};Jc.prototype.ka=function(){null==this.Jc&&(this.Jc=Ec.j?Ec.j(this.Qb):Ec.call(null,this.Qb));return this.Jc};function Ec(a){var b=a.next();return w(b.done)?null:new Jc(b.value,a)}function Kc(a){var b=0,c=1;for(a=H(a);;)if(null!=a)b+=1,c=pc(31,c)+xc(K(a))|0,a=M(a);else return sc(rc(0,qc(c)),b)}var Lc=sc(rc(0,qc(1)),0);
function Mc(a){var b=0,c=0;for(a=H(a);;)if(null!=a)b+=1,c=c+xc(K(a))|0,a=M(a);else return sc(rc(0,qc(c)),b)}var Nc=sc(rc(0,qc(0)),0);Ra["null"]=!0;Ua["null"]=function(){return 0};Date.prototype.T=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.vb=t;Date.prototype.ab=function(a,b){if(b instanceof Date)return pa(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};Gb.number=function(a,b){return a===b};Pa["function"]=!0;
yb["function"]=!0;zb["function"]=function(){return null};Hb._=function(a){return ca(a)};function Oc(a){return a+1}function Pc(a){this.D=a;this.B=32768;this.I=0}Pc.prototype.ya=function(){return this.D};function Qc(a){return a instanceof Pc}function Rc(a){return Qc(a)?Sc.j?Sc.j(a):Sc.call(null,a):a}function Sc(a){return C(a)}
function Tc(a,b){var c=a.$(null);if(0===c)return b.F?b.F():b.call(null);for(var d=a.V(null,0),e=1;;)if(e<c){var f=a.V(null,e);d=b.m?b.m(d,f):b.call(null,d,f);if(Qc(d))return C(d);e+=1}else return d}function Uc(a,b,c){var d=a.$(null),e=c;for(c=0;;)if(c<d){var f=a.V(null,c);e=b.m?b.m(e,f):b.call(null,e,f);if(Qc(e))return C(e);c+=1}else return e}
function Vc(a,b){var c=a.length;if(0===a.length)return b.F?b.F():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.m?b.m(d,f):b.call(null,d,f);if(Qc(d))return C(d);e+=1}else return d}function Wc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.m?b.m(e,f):b.call(null,e,f);if(Qc(e))return C(e);c+=1}else return e}function Xc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.m?b.m(c,f):b.call(null,c,f);if(Qc(c))return C(c);d+=1}else return c}
function Yc(a){return null!=a?a.B&2||t===a.sd?!0:a.B?!1:x(Ra,a):x(Ra,a)}function Zc(a){return null!=a?a.B&16||t===a.td?!0:a.B?!1:x(Za,a):x(Za,a)}function P(a,b,c){var d=Q.j?Q.j(a):Q.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(O.m($c?$c(a,c):ad.call(null,a,c),b))return c;c+=1}else return-1}
function S(a,b,c){var d=Q.j?Q.j(a):Q.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(O.m($c?$c(a,c):ad.call(null,a,c),b))return c;--c}else return-1}function bd(a,b){this.v=a;this.i=b}bd.prototype.la=function(){return this.i<this.v.length};bd.prototype.next=function(){var a=this.v[this.i];this.i+=1;return a};function J(a,b,c){this.v=a;this.i=b;this.Za=c;this.B=166592766;this.I=401408}h=J.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q.j?Q.j(this):Q.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.V=function(a,b){a=b+this.i;if(0<=a&&a<this.v.length)return this.v[a];throw Error("Index out of bounds");};h.ga=function(a,b,c){a=b+this.i;return 0<=a&&a<this.v.length?this.v[a]:c};
h.Aa=function(){return new bd(this.v,this.i)};h.P=function(){return this.Za};h.ea=function(){return this.i+1<this.v.length?new J(this.v,this.i+1,null):null};h.$=function(){var a=this.v.length-this.i;return 0>a?0:a};h.wb=function(){var a=this.$(null);return 0<a?new cd(this,a-1,null):null};h.U=function(){return Kc(this)};h.T=function(a,b){return dd.m?dd.m(this,b):dd.call(null,this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return Xc(this.v,b,this.v[this.i],this.i+1)};
h.ia=function(a,b,c){return Xc(this.v,b,c,this.i)};h.ja=function(){return this.v[this.i]};h.ka=function(){return this.i+1<this.v.length?new J(this.v,this.i+1,null):Gc};h.Y=function(){return this.i<this.v.length?this:null};h.S=function(a,b){return b===this.Za?this:new J(this.v,this.i,b)};h.da=function(a,b){return T.m?T.m(b,this):T.call(null,b,this)};h.gb=function(a,b){return 0<b?this.i+b<this.v.length?new J(this.v,this.i+b,null):null:this};J.prototype[Ja]=function(){return Ic(this)};
function ed(a){return 0<a.length?new J(a,0,null):null}function cd(a,b,c){this.nc=a;this.i=b;this.Za=c;this.B=32374990;this.I=8192}h=cd.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q.j?Q.j(this):Q.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return 0<this.i?new cd(this.nc,this.i-1,null):null};h.$=function(){return this.i+1};h.U=function(){return Kc(this)};
h.T=function(a,b){return dd.m?dd.m(this,b):dd.call(null,this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd?fd(b,this):gd.call(null,b,this)};h.ia=function(a,b,c){return hd?hd(b,c,this):gd.call(null,b,c,this)};h.ja=function(){return $a(this.nc,this.i)};h.ka=function(){return 0<this.i?new cd(this.nc,this.i-1,null):Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new cd(this.nc,this.i,b)};h.da=function(a,b){return T.m?T.m(b,this):T.call(null,b,this)};
cd.prototype[Ja]=function(){return Ic(this)};function id(a){return K(M(a))}function jd(a){for(;;){var b=M(a);if(null!=b)a=b;else return K(a)}}Gb._=function(a,b){return a===b};var kd=function kd(a){switch(arguments.length){case 0:return kd.F();case 1:return kd.j(arguments[0]);case 2:return kd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return kd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};kd.F=function(){return ld};
kd.j=function(a){return a};kd.m=function(a,b){return null!=a?Ya(a,b):new md(null,b,null,1,null)};kd.C=function(a,b,c){for(;;)if(w(c))a=kd.m(a,b),b=K(c),c=M(c);else return kd.m(a,b)};kd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};kd.H=2;function nd(a){return null==a?null:null!=a&&(a.B&4||t===a.fe)?a.ba(null):(null!=a?a.B&4||t===a.fe||(a.B?0:x(Va,a)):x(Va,a))?Wa(a):null}
function Q(a){if(null!=a)if(null!=a&&(a.B&2||t===a.sd))a=a.$(null);else if(Ea(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.B&8388608||t===a.me))a:{a=H(a);for(var b=0;;){if(Yc(a)){a=b+Ua(a);break a}a=M(a);b+=1}}else a=Ua(a);else a=0;return a}function od(a,b,c){for(;;){if(null==a)return c;if(0===b)return H(a)?K(a):c;if(Zc(a))return $a(a,b,c);if(H(a))a=M(a),--b;else return c}}
function ad(a){switch(arguments.length){case 2:return $c(arguments[0],arguments[1]);case 3:return U(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function $c(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.B&16||t===a.td))return a.V(null,b);if(Ea(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.B&64||t===a.Kb)||null!=a&&(a.B&16777216||t===a.Sc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(H(a)){a=K(a);break a}throw Error("Index out of bounds");}if(Zc(a)){a=$a(a,b);break a}if(H(a))a=M(a),--b;else throw Error("Index out of bounds");}return a}if(x(Za,a))return $a(a,b);throw Error(["nth not supported on this type ",B.j(Ia(Ha(a)))].join(""));}
function U(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.B&16||t===a.td))return a.ga(null,b,c);if(Ea(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.B&64||t===a.Kb)||null!=a&&(a.B&16777216||t===a.Sc))return 0>b?c:od(a,b,c);if(x(Za,a))return $a(a,b,c);throw Error(["nth not supported on this type ",B.j(Ia(Ha(a)))].join(""));}
function Ac(a){switch(arguments.length){case 2:return F(arguments[0],arguments[1]);case 3:return Bc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function F(a,b){return null==a?null:null!=a&&(a.B&256||t===a.je)?a.oa(null,b):Ea(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:x(gb,a)?hb(a,b):null}
function Bc(a,b,c){return null!=a?null!=a&&(a.B&256||t===a.je)?a.X(null,b,c):Ea(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(gb,a)?hb(a,b,c):c:c}var V=function V(a){switch(arguments.length){case 3:return V.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return V.C(arguments[0],arguments[1],arguments[2],3<c.length?new J(c.slice(3),0,null):null)}};
V.o=function(a,b,c){return null!=a&&(a.B&512||t===a.de)?a.Ca(null,b,c):null!=a?lb(a,b,c):pd([b,c])};V.C=function(a,b,c,d){for(;;)if(a=V.o(a,b,c),w(d))b=K(d),c=id(d),d=M(M(d));else return a};V.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);d=M(d);return this.C(b,a,c,d)};V.H=3;
var qd=function qd(a){switch(arguments.length){case 1:return qd.j(arguments[0]);case 2:return qd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return qd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};qd.j=function(a){return a};qd.m=function(a,b){return null==a?null:ob(a,b)};qd.C=function(a,b,c){for(;;){if(null==a)return null;a=qd.m(a,b);if(w(c))b=K(c),c=M(c);else return a}};
qd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};qd.H=2;function rd(a){var b="function"===typeof a;return b?b:null!=a?t===a.ce?!0:a.wd?!1:x(Pa,a):x(Pa,a)}function sd(a,b){this.M=a;this.Za=b;this.B=393217;this.I=0}h=sd.prototype;h.P=function(){return this.Za};h.S=function(a,b){return new sd(this.M,b)};h.ce=t;
h.call=function(a){switch(arguments.length-1){case 0:return this.F();case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);case 3:return this.o(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ja(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.La(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Na(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Ub(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.F=function(){return this.M.F?this.M.F():this.M.call(null)};h.j=function(a){return this.M.j?this.M.j(a):this.M.call(null,a)};h.m=function(a,b){return this.M.m?this.M.m(a,b):this.M.call(null,a,b)};h.o=function(a,b,c){return this.M.o?this.M.o(a,b,c):this.M.call(null,a,b,c)};
h.K=function(a,b,c,d){return this.M.K?this.M.K(a,b,c,d):this.M.call(null,a,b,c,d)};h.O=function(a,b,c,d,e){return this.M.O?this.M.O(a,b,c,d,e):this.M.call(null,a,b,c,d,e)};h.va=function(a,b,c,d,e,f){return this.M.va?this.M.va(a,b,c,d,e,f):this.M.call(null,a,b,c,d,e,f)};h.Oa=function(a,b,c,d,e,f,g){return this.M.Oa?this.M.Oa(a,b,c,d,e,f,g):this.M.call(null,a,b,c,d,e,f,g)};h.za=function(a,b,c,d,e,f,g,k){return this.M.za?this.M.za(a,b,c,d,e,f,g,k):this.M.call(null,a,b,c,d,e,f,g,k)};
h.Pa=function(a,b,c,d,e,f,g,k,l){return this.M.Pa?this.M.Pa(a,b,c,d,e,f,g,k,l):this.M.call(null,a,b,c,d,e,f,g,k,l)};h.Da=function(a,b,c,d,e,f,g,k,l,m){return this.M.Da?this.M.Da(a,b,c,d,e,f,g,k,l,m):this.M.call(null,a,b,c,d,e,f,g,k,l,m)};h.Ea=function(a,b,c,d,e,f,g,k,l,m,n){return this.M.Ea?this.M.Ea(a,b,c,d,e,f,g,k,l,m,n):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n)};h.Fa=function(a,b,c,d,e,f,g,k,l,m,n,p){return this.M.Fa?this.M.Fa(a,b,c,d,e,f,g,k,l,m,n,p):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p)};
h.Ga=function(a,b,c,d,e,f,g,k,l,m,n,p,r){return this.M.Ga?this.M.Ga(a,b,c,d,e,f,g,k,l,m,n,p,r):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r)};h.Ha=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u){return this.M.Ha?this.M.Ha(a,b,c,d,e,f,g,k,l,m,n,p,r,u):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u)};h.Ia=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y){return this.M.Ia?this.M.Ia(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y)};
h.Ja=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A){return this.M.Ja?this.M.Ja(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A)};h.Ka=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D){return this.M.Ka?this.M.Ka(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D)};h.La=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N){return this.M.La?this.M.La(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N)};
h.Ma=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I){return this.M.Ma?this.M.Ma(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I)};h.Na=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R){return this.M.Na?this.M.Na(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R):this.M.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R)};
h.Ub=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W){return td.Ub?td.Ub(this.M,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,new J([R,W],0,null)):td.call(null,this.M,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W)};function ud(a,b){return"function"===typeof a?new sd(a,b):null==a?null:Ab(a,b)}function vd(a){var b=null!=a;return(b?null!=a?a.B&131072||t===a.Rc||(a.B?0:x(yb,a)):x(yb,a):b)?zb(a):null}
var wd=function wd(a){switch(arguments.length){case 1:return wd.j(arguments[0]);case 2:return wd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return wd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};wd.j=function(a){return a};wd.m=function(a,b){return null==a?null:sb(a,b)};wd.C=function(a,b,c){for(;;){if(null==a)return null;a=wd.m(a,b);if(w(c))b=K(c),c=M(c);else return a}};
wd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};wd.H=2;function xd(a){return null==a?!0:(null!=a?a.B&2||t===a.sd||(a.B?0:x(Ra,a)):x(Ra,a))?0===Ua(a):Fa(H(a))}function zd(a){return null==a?!1:null!=a?a.B&4096||t===a.ne?!0:a.B?!1:x(rb,a):x(rb,a)}function Ad(a){return null!=a?a.B&16777216||t===a.Sc?!0:a.B?!1:x(Kb,a):x(Kb,a)}function Bd(a){return null==a?!1:null!=a?a.B&1024||t===a.ke?!0:a.B?!1:x(nb,a):x(nb,a)}
function Cd(a){return null!=a?a.B&67108864||t===a.We?!0:a.B?!1:x(Mb,a):x(Mb,a)}function Dd(a){return null!=a?a.B&16384||t===a.Ye?!0:a.B?!1:x(wb,a):x(wb,a)}function Ed(a){return null!=a?a.I&512||t===a.Oe?!0:!1:!1}function Fd(a,b,c,d,e){for(;;){if(0===e)return c;c[d]=a[b];d+=1;--e;b+=1}}var Gd={};function Hd(a){return null==a?!1:!1===a?!1:!0}function Jd(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)}
function Kd(a,b){return null!=a&&(a.B&512||t===a.de)?a.$a(null,b):x(jb,a)?kb(a,b):Bc(a,b,Gd)===Gd?!1:!0}
function Ld(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return pa(a,b);throw Error(["Cannot compare ",B.j(a)," to ",B.j(b)].join(""));}if(null!=a?a.I&2048||t===a.vb||(a.I?0:x($b,a)):x($b,a))return ac(a,b);if("string"!==typeof a&&!Ea(a)&&!0!==a&&!1!==a||Ha(a)!==Ha(b))throw Error(["Cannot compare ",B.j(a)," to ",B.j(b)].join(""));return pa(a,b)}
function Md(a,b){var c=Q(a),d=Q(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=Ld($c(a,d),$c(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a}function Nd(a){return O.m(a,Ld)?Ld:function(b,c){var d=a.m?a.m(b,c):a.call(null,b,c);return"number"===typeof d?d:w(d)?-1:w(a.m?a.m(c,b):a.call(null,c,b))?1:0}}function Od(a,b){if(H(b)){var c=Pd.j?Pd.j(b):Pd.call(null,b);qa(c,Nd(a));return ud(H(c),vd(b))}return Gc}
function gd(a){switch(arguments.length){case 2:return fd(arguments[0],arguments[1]);case 3:return hd(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function fd(a,b){var c=H(b);return c?(b=K(c),c=M(c),Oa.o?Oa.o(a,b,c):Oa.call(null,a,b,c)):a.F?a.F():a.call(null)}function hd(a,b,c){for(c=H(c);;)if(c){var d=K(c);b=a.m?a.m(b,d):a.call(null,b,d);if(Qc(b))return C(b);c=M(c)}else return b}
function Qd(a,b){a=lc(a);if(w(a.la()))for(var c=a.next();;)if(a.la()){var d=a.next();c=b.m?b.m(c,d):b.call(null,c,d);if(Qc(c))return C(c)}else return c;else return b.F?b.F():b.call(null)}function Rd(a,b,c){for(a=lc(a);;)if(a.la()){var d=a.next();c=b.m?b.m(c,d):b.call(null,c,d);if(Qc(c))return C(c)}else return c}
var Oa=function Oa(a){switch(arguments.length){case 2:return Oa.m(arguments[0],arguments[1]);case 3:return Oa.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Oa.m=function(a,b){return null!=b&&(b.B&524288||t===b.le)?b.ha(null,a):Ea(b)?Vc(b,a):"string"===typeof b?Vc(b,a):x(Bb,b)?Cb(b,a):Dc(b)?Qd(b,a):fd(a,b)};
Oa.o=function(a,b,c){return null!=c&&(c.B&524288||t===c.le)?c.ia(null,a,b):Ea(c)?Wc(c,a,b):"string"===typeof c?Wc(c,a,b):x(Bb,c)?Cb(c,a,b):Dc(c)?Rd(c,a,b):hd(a,b,c)};Oa.H=3;function Sd(a,b,c){return(null!=c?c.B&1048576||t===c.ie||(c.B?0:x(Eb,c)):x(Eb,c))?Fb(c,a,b):Oa.o(function(d,e){var f=pb(e);e=qb(e);return a.o?a.o(d,f,e):a.call(null,d,f,e)},b,c)}function Td(a){return a}
function Ud(a,b){return function(){function c(g,k){return a.m?a.m(g,k):a.call(null,g,k)}function d(g){return b.j?b.j(g):b.call(null,g)}function e(){return a.F?a.F():a.call(null)}var f=null;f=function(g,k){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,g);case 2:return c.call(this,g,k)}throw Error("Invalid arity: "+arguments.length);};f.F=e;f.j=d;f.m=c;return f}()}function Vd(a,b,c){return Wd(a,b,b.F?b.F():b.call(null),c)}
function Wd(a,b,c,d){a=a.j?a.j(b):a.call(null,b);c=Oa.o(a,c,d);return a.j?a.j(c):a.call(null,c)}var Xd=function Xd(a){switch(arguments.length){case 0:return Xd.F();case 1:return Xd.j(arguments[0]);case 2:return Xd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Xd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};Xd.F=function(){return 0};Xd.j=function(a){return a};Xd.m=function(a,b){return a+b};
Xd.C=function(a,b,c){return Oa.o(Xd,a+b,c)};Xd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};Xd.H=2;var Yd=function Yd(a){switch(arguments.length){case 0:return Yd.F();case 1:return Yd.j(arguments[0]);case 2:return Yd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Yd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};Yd.F=function(){return 1};Yd.j=function(a){return a};
Yd.m=function(a,b){return a*b};Yd.C=function(a,b,c){return Oa.o(Yd,a*b,c)};Yd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};Yd.H=2;var Zd=function Zd(a){switch(arguments.length){case 1:return Zd.j(arguments[0]);case 2:return Zd.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Zd.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};Zd.j=function(a){return a};
Zd.m=function(a,b){return a>b?a:b};Zd.C=function(a,b,c){return Oa.o(Zd,a>b?a:b,c)};Zd.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};Zd.H=2;function $d(a){return 0<=a?Math.floor(a):Math.ceil(a)}function ae(a){return $d((a-a%2)/2)}function be(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}
function ce(a){switch(arguments.length){case 1:return!0;case 2:return Gb(arguments[0],arguments[1]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;a:for(c=arguments[0],d=arguments[1],b=2<b.length?new J(b.slice(2),0,null):null;;)if(c===d)if(M(b))c=d,d=K(b),b=M(b);else{c=d===K(b);break a}else{c=!1;break a}return c}}function de(a,b){return Gb(a,b)}
var B=function B(a){switch(arguments.length){case 0:return B.F();case 1:return B.j(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return B.C(arguments[0],1<c.length?new J(c.slice(1),0,null):null)}};B.F=function(){return""};B.j=function(a){return null==a?"":[a].join("")};B.C=function(a,b){for(a=new ta(B.j(a));;)if(w(b))a=a.append(B.j(K(b))),b=M(b);else return a.toString()};B.J=function(a){var b=K(a);a=M(a);return this.C(b,a)};B.H=1;
function dd(a,b){if(Ad(b))if(Yc(a)&&Yc(b)&&Q(a)!==Q(b))a=!1;else a:for(a=H(a),b=H(b);;){if(null==a){a=null==b;break a}if(null!=b&&O.m(K(a),K(b)))a=M(a),b=M(b);else{a=!1;break a}}else a=null;return Hd(a)}function md(a,b,c,d,e){this.Za=a;this.first=b;this.rb=c;this.count=d;this.G=e;this.B=65937646;this.I=8192}h=md.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return 1===this.count?null:this.rb};h.$=function(){return this.count};h.ib=function(){return this.first};h.jb=function(){return this.ka(null)};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Ab(Gc,this.Za)};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return this.first};h.ka=function(){return 1===this.count?Gc:this.rb};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new md(b,this.first,this.rb,this.count,this.G)};h.da=function(a,b){return new md(this.Za,b,this,this.count+1,null)};
function ee(a){return null!=a?a.B&33554432||t===a.Ue?!0:a.B?!1:x(Lb,a):x(Lb,a)}md.prototype[Ja]=function(){return Ic(this)};function fe(a){this.Za=a;this.B=65937614;this.I=8192}h=fe.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return null};h.$=function(){return 0};h.ib=function(){return null};h.jb=function(){throw Error("Can't pop empty list");};h.U=function(){return Lc};
h.T=function(a,b){return ee(b)||Ad(b)?null==H(b):!1};h.ba=function(){return this};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return null};h.ka=function(){return Gc};h.Y=function(){return null};h.S=function(a,b){return b===this.Za?this:new fe(b)};h.da=function(a,b){return new md(this.Za,b,null,1,null)};var Gc=new fe(null);fe.prototype[Ja]=function(){return Ic(this)};
function ge(a){return(null!=a?a.B&134217728||t===a.Xe||(a.B?0:x(Nb,a)):x(Nb,a))?(a=Ob(a))?a:Gc:Oa.o(kd,Gc,a)}var he=function he(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return he.C(0<c.length?new J(c.slice(0),0,null):null)};he.C=function(a){if(a instanceof J&&0===a.i)var b=a.v;else a:for(b=[];;)if(null!=a)b.push(cb(a)),a=fb(a);else break a;a=b.length;for(var c=Gc;;)if(0<a){var d=a-1;c=Ya(c,b[a-1]);a=d}else return c};he.H=0;he.J=function(a){return this.C(H(a))};
function ie(a,b,c,d){this.Za=a;this.first=b;this.rb=c;this.G=d;this.B=65929452;this.I=8192}h=ie.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return null==this.rb?null:H(this.rb)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};
h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return this.first};h.ka=function(){return null==this.rb?Gc:this.rb};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new ie(b,this.first,this.rb,this.G)};h.da=function(a,b){return new ie(null,b,this,null)};ie.prototype[Ja]=function(){return Ic(this)};
function T(a,b){return null==b?new md(null,a,null,1,null):null!=b&&(b.B&64||t===b.Kb)?new ie(null,a,b,null):new ie(null,a,H(b),null)}function je(a,b){if(a.pa===b.pa)return 0;var c=Fa(a.wa);if(w(c?b.wa:c))return-1;if(w(a.wa)){if(Fa(b.wa))return 1;c=pa(a.wa,b.wa);return 0===c?pa(a.name,b.name):c}return pa(a.name,b.name)}function G(a,b,c,d){this.wa=a;this.name=b;this.pa=c;this.Hb=d;this.B=2153775105;this.I=4096}h=G.prototype;h.toString=function(){return[":",B.j(this.pa)].join("")};
h.T=function(a,b){return b instanceof G?this.pa===b.pa:!1};h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return F(a,this)};h.m=function(a,b){return Bc(a,this,b)};
h.U=function(){var a=this.Hb;return null!=a?a:this.Hb=a=yc(tc(this.name),wc(this.wa))+2654435769|0};h.Vb=function(){return this.name};h.Wb=function(){return this.wa};h.R=function(a,b){return Pb(b,[":",B.j(this.pa)].join(""))};function ke(a,b){return a===b?!0:a instanceof G&&b instanceof G?a.pa===b.pa:!1}function le(a){if(null!=a&&(a.I&4096||t===a.qc))return a.Wb(null);throw Error(["Doesn't support namespace: ",B.j(a)].join(""));}function me(a){return a instanceof G||a instanceof E}
var ne=function ne(a){switch(arguments.length){case 1:return ne.j(arguments[0]);case 2:return ne.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};ne.j=function(a){if(a instanceof G)return a;if(a instanceof E)return new G(le(a),oe.j?oe.j(a):oe.call(null,a),a.cb,null);if(O.m("/",a))return new G(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new G(b[0],b[1],a,null):new G(null,b[0],a,null)}return null};
ne.m=function(a,b){a=a instanceof G?oe.j?oe.j(a):oe.call(null,a):a instanceof E?oe.j?oe.j(a):oe.call(null,a):a;b=b instanceof G?oe.j?oe.j(b):oe.call(null,b):b instanceof E?oe.j?oe.j(b):oe.call(null,b):b;return new G(a,b,[w(a)?[B.j(a),"/"].join(""):null,B.j(b)].join(""),null)};ne.H=2;function pe(a,b,c,d){this.Za=a;this.$b=b;this.s=c;this.G=d;this.B=32374988;this.I=1}h=pe.prototype;h.toString=function(){return oc(this)};
function qe(a){null!=a.$b&&(a.s=a.$b.F?a.$b.F():a.$b.call(null),a.$b=null);return a.s}h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){this.Y(null);return null==this.s?null:M(this.s)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};
h.ba=function(){return Ab(Gc,this.Za)};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){this.Y(null);return null==this.s?null:K(this.s)};h.ka=function(){this.Y(null);return null!=this.s?Fc(this.s):Gc};h.Y=function(){qe(this);if(null==this.s)return null;for(var a=this.s;;)if(a instanceof pe)a=qe(a);else return this.s=a,H(this.s)};h.S=function(a,b){var c=this;return b===this.Za?c:new pe(b,function(){return c.Y(null)},null,this.G)};
h.da=function(a,b){return T(b,this)};pe.prototype[Ja]=function(){return Ic(this)};function re(a){this.Kc=a;this.end=0;this.B=2;this.I=0}re.prototype.add=function(a){this.Kc[this.end]=a;return this.end+=1};re.prototype.na=function(){var a=new se(this.Kc,0,this.end);this.Kc=null;return a};re.prototype.$=function(){return this.end};function te(a){return new re(Array(a))}function se(a,b,c){this.v=a;this.ra=b;this.end=c;this.B=524306;this.I=0}h=se.prototype;h.$=function(){return this.end-this.ra};
h.V=function(a,b){return this.v[this.ra+b]};h.ga=function(a,b,c){return 0<=b&&b<this.end-this.ra?this.v[this.ra+b]:c};h.Oc=function(){if(this.ra===this.end)throw Error("-drop-first of empty chunk");return new se(this.v,this.ra+1,this.end)};h.ha=function(a,b){return Xc(this.v,b,this.v[this.ra],this.ra+1)};h.ia=function(a,b,c){return Xc(this.v,b,c,this.ra)};function ue(a,b,c,d){this.na=a;this.Wa=b;this.Za=c;this.G=d;this.B=31850732;this.I=1536}h=ue.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return 1<Ua(this.na)?new ue(bc(this.na),this.Wa,null,null):null==this.Wa?null:Jb(this.Wa)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ja=function(){return $a(this.na,0)};h.ka=function(){return 1<Ua(this.na)?new ue(bc(this.na),this.Wa,null,null):null==this.Wa?Gc:this.Wa};h.Y=function(){return this};h.Tb=function(){return this.na};h.ub=function(){return null==this.Wa?Gc:this.Wa};h.S=function(a,b){return b===this.Za?this:new ue(this.na,this.Wa,b,this.G)};h.da=function(a,b){return T(b,this)};h.oc=function(){return null==this.Wa?null:this.Wa};ue.prototype[Ja]=function(){return Ic(this)};
function ve(a,b){return 0===Ua(a)?b:new ue(a,b,null,null)}function we(a,b){a.add(b)}function Pd(a){var b=[];for(a=H(a);;)if(null!=a)b.push(K(a)),a=M(a);else return b}function xe(a,b){if(Yc(b))return Q(b);var c=0;for(b=H(b);;)if(null!=b&&c<a)c+=1,b=M(b);else return c}
var ye=function ye(a){if(null==a)return null;var c=M(a);return null==c?H(K(a)):T(K(a),ye.j?ye.j(c):ye.call(null,c))},ze=function ze(a){switch(arguments.length){case 0:return ze.F();case 1:return ze.j(arguments[0]);case 2:return ze.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ze.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};ze.F=function(){return new pe(null,function(){return null},null,null)};
ze.j=function(a){return new pe(null,function(){return a},null,null)};ze.m=function(a,b){return new pe(null,function(){var c=H(a);return c?Ed(c)?ve(cc(c),ze.m(dc(c),b)):T(K(c),ze.m(Fc(c),b)):b},null,null)};ze.C=function(a,b,c){return function g(e,f){return new pe(null,function(){var k=H(e);return k?Ed(k)?ve(cc(k),g(dc(k),f)):T(K(k),g(Fc(k),f)):w(f)?g(K(f),M(f)):null},null,null)}(ze.m(a,b),c)};ze.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};ze.H=2;
var Ae=function Ae(a){switch(arguments.length){case 0:return Ae.F();case 1:return Ae.j(arguments[0]);case 2:return Ae.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ae.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};Ae.F=function(){return Vb(ld)};Ae.j=function(a){return a};Ae.m=function(a,b){return Wb(a,b)};Ae.C=function(a,b,c){for(;;)if(a=Wb(a,b),w(c))b=K(c),c=M(c);else return a};
Ae.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};Ae.H=2;
function Be(a,b,c){var d=H(c);if(0===b)return a.F?a.F():a.call(null);c=cb(d);var e=db(d);if(1===b)return a.j?a.j(c):a.call(null,c);d=cb(e);var f=db(e);if(2===b)return a.m?a.m(c,d):a.call(null,c,d);e=cb(f);var g=db(f);if(3===b)return a.o?a.o(c,d,e):a.call(null,c,d,e);f=cb(g);var k=db(g);if(4===b)return a.K?a.K(c,d,e,f):a.call(null,c,d,e,f);g=cb(k);var l=db(k);if(5===b)return a.O?a.O(c,d,e,f,g):a.call(null,c,d,e,f,g);k=cb(l);var m=db(l);if(6===b)return a.va?a.va(c,d,e,f,g,k):a.call(null,c,d,e,f,g,k);
l=cb(m);var n=db(m);if(7===b)return a.Oa?a.Oa(c,d,e,f,g,k,l):a.call(null,c,d,e,f,g,k,l);m=cb(n);var p=db(n);if(8===b)return a.za?a.za(c,d,e,f,g,k,l,m):a.call(null,c,d,e,f,g,k,l,m);n=cb(p);var r=db(p);if(9===b)return a.Pa?a.Pa(c,d,e,f,g,k,l,m,n):a.call(null,c,d,e,f,g,k,l,m,n);p=cb(r);var u=db(r);if(10===b)return a.Da?a.Da(c,d,e,f,g,k,l,m,n,p):a.call(null,c,d,e,f,g,k,l,m,n,p);r=cb(u);var y=db(u);if(11===b)return a.Ea?a.Ea(c,d,e,f,g,k,l,m,n,p,r):a.call(null,c,d,e,f,g,k,l,m,n,p,r);u=cb(y);var A=db(y);
if(12===b)return a.Fa?a.Fa(c,d,e,f,g,k,l,m,n,p,r,u):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u);y=cb(A);var D=db(A);if(13===b)return a.Ga?a.Ga(c,d,e,f,g,k,l,m,n,p,r,u,y):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y);A=cb(D);var N=db(D);if(14===b)return a.Ha?a.Ha(c,d,e,f,g,k,l,m,n,p,r,u,y,A):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A);D=cb(N);var I=db(N);if(15===b)return a.Ia?a.Ia(c,d,e,f,g,k,l,m,n,p,r,u,y,A,D):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D);N=cb(I);var R=db(I);if(16===b)return a.Ja?a.Ja(c,d,e,f,g,k,l,
m,n,p,r,u,y,A,D,N):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N);I=cb(R);var W=db(R);if(17===b)return a.Ka?a.Ka(c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I);R=cb(W);var Y=db(W);if(18===b)return a.La?a.La(c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R);W=cb(Y);Y=db(Y);if(19===b)return a.Ma?a.Ma(c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W);var ma=cb(Y);db(Y);if(20===b)return a.Na?a.Na(c,
d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W,ma):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W,ma);throw Error("Only up to 20 arguments supported on functions");}function Ce(a){return null!=a&&(a.B&128||t===a.Xb)?a.ea(null):H(Fc(a))}function De(a,b,c){return null==c?a.j?a.j(b):a.call(a,b):Ee(a,b,cb(c),Ce(c))}function Ee(a,b,c,d){return null==d?a.m?a.m(b,c):a.call(a,b,c):Ge(a,b,c,cb(d),Ce(d))}function Ge(a,b,c,d,e){return null==e?a.o?a.o(b,c,d):a.call(a,b,c,d):He(a,b,c,d,cb(e),Ce(e))}
function He(a,b,c,d,e,f){if(null==f)return a.K?a.K(b,c,d,e):a.call(a,b,c,d,e);var g=cb(f),k=M(f);if(null==k)return a.O?a.O(b,c,d,e,g):a.call(a,b,c,d,e,g);f=cb(k);var l=M(k);if(null==l)return a.va?a.va(b,c,d,e,g,f):a.call(a,b,c,d,e,g,f);k=cb(l);var m=M(l);if(null==m)return a.Oa?a.Oa(b,c,d,e,g,f,k):a.call(a,b,c,d,e,g,f,k);l=cb(m);var n=M(m);if(null==n)return a.za?a.za(b,c,d,e,g,f,k,l):a.call(a,b,c,d,e,g,f,k,l);m=cb(n);var p=M(n);if(null==p)return a.Pa?a.Pa(b,c,d,e,g,f,k,l,m):a.call(a,b,c,d,e,g,f,k,
l,m);n=cb(p);var r=M(p);if(null==r)return a.Da?a.Da(b,c,d,e,g,f,k,l,m,n):a.call(a,b,c,d,e,g,f,k,l,m,n);p=cb(r);var u=M(r);if(null==u)return a.Ea?a.Ea(b,c,d,e,g,f,k,l,m,n,p):a.call(a,b,c,d,e,g,f,k,l,m,n,p);r=cb(u);var y=M(u);if(null==y)return a.Fa?a.Fa(b,c,d,e,g,f,k,l,m,n,p,r):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r);u=cb(y);var A=M(y);if(null==A)return a.Ga?a.Ga(b,c,d,e,g,f,k,l,m,n,p,r,u):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u);y=cb(A);var D=M(A);if(null==D)return a.Ha?a.Ha(b,c,d,e,g,f,k,l,m,n,p,r,u,y):a.call(a,
b,c,d,e,g,f,k,l,m,n,p,r,u,y);A=cb(D);var N=M(D);if(null==N)return a.Ia?a.Ia(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,y,A);D=cb(N);var I=M(N);if(null==I)return a.Ja?a.Ja(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D);N=cb(I);var R=M(I);if(null==R)return a.Ka?a.Ka(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N);I=cb(R);var W=M(R);if(null==W)return a.La?a.La(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I):a.call(a,b,c,d,e,g,f,k,
l,m,n,p,r,u,y,A,D,N,I);R=cb(W);var Y=M(W);if(null==Y)return a.Ma?a.Ma(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I,R):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I,R);W=cb(Y);Y=M(Y);if(null==Y)return a.Na?a.Na(b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I,R,W):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I,R,W);b=[b,c,d,e,g,f,k,l,m,n,p,r,u,y,A,D,N,I,R,W];for(c=Y;;)if(c)b.push(cb(c)),c=M(c);else break;return a.apply(a,b)}
function td(a){switch(arguments.length){case 2:return Ie(arguments[0],arguments[1]);case 3:return Je(arguments[0],arguments[1],arguments[2]);case 4:return Ke(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Le(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return Me(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],5<b.length?new J(b.slice(5),0,null):null)}}
function Ie(a,b){if(a.J){var c=a.H,d=xe(c+1,b);return d<=c?Be(a,d,b):a.J(b)}b=H(b);return null==b?a.F?a.F():a.call(a):De(a,cb(b),Ce(b))}function Je(a,b,c){if(a.J){b=T(b,c);var d=a.H;c=xe(d,c)+1;return c<=d?Be(a,c,b):a.J(b)}return De(a,b,H(c))}function Ke(a,b,c,d){return a.J?(b=T(b,T(c,d)),c=a.H,d=2+xe(c-1,d),d<=c?Be(a,d,b):a.J(b)):Ee(a,b,c,H(d))}function Le(a,b,c,d,e){return a.J?(b=T(b,T(c,T(d,e))),c=a.H,e=3+xe(c-2,e),e<=c?Be(a,e,b):a.J(b)):Ge(a,b,c,d,H(e))}
function Me(a,b,c,d,e,f){return a.J?(f=ye(f),b=T(b,T(c,T(d,T(e,f)))),c=a.H,f=4+xe(c-3,f),f<=c?Be(a,f,b):a.J(b)):He(a,b,c,d,e,ye(f))}function Ne(a){return null!=a&&(a.B&64||t===a.Kb)?M(a)?pd(Pd(a)):H(a)?K(a):Oe:a}function Qe(a){return H(a)?a:null}function Re(a){this.ye=a;this.B=393216;this.I=0}h=Re.prototype;h.S=function(a,b){return new Re(b)};h.P=function(){return this.ye};h.la=function(){return!1};h.next=function(){return Error("No such element")};h.remove=function(){return Error("Unsupported operation")};
var Se={},Te={};function Ue(a){this.Sb=Se;this.Ab=a}Ue.prototype.la=function(){this.Sb===Se?(this.Sb=Te,this.Ab=H(this.Ab)):this.Sb===this.Ab&&(this.Ab=M(this.Sb));return null!=this.Ab};Ue.prototype.next=function(){if(this.la())return this.Sb=this.Ab,K(this.Ab);throw Error("No such element");};Ue.prototype.remove=function(){return Error("Unsupported operation")};function Ve(a,b){for(;;){if(null==H(b))return!0;var c=K(b);c=a.j?a.j(c):a.call(null,c);if(w(c))b=M(b);else return!1}}
function We(a,b){for(;;)if(b=H(b)){var c=K(b);c=a.j?a.j(c):a.call(null,c);if(w(c))return c;b=M(b)}else return null}
function Xe(a){return function(){function b(g,k){return Fa(a.m?a.m(g,k):a.call(null,g,k))}function c(g){return Fa(a.j?a.j(g):a.call(null,g))}function d(){return Fa(a.F?a.F():a.call(null))}var e=null,f=function(){function g(l,m,n){var p=null;if(2<arguments.length){p=0;for(var r=Array(arguments.length-2);p<r.length;)r[p]=arguments[p+2],++p;p=new J(r,0,null)}return k.call(this,l,m,p)}function k(l,m,n){return Fa(Ke(a,l,m,n))}g.H=2;g.J=function(l){var m=K(l);l=M(l);var n=K(l);l=Fc(l);return k(m,n,l)};
g.C=k;return g}();e=function(g,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,g);case 2:return b.call(this,g,k);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new J(n,0,null)}return f.C(g,k,m)}throw Error("Invalid arity: "+arguments.length);};e.H=2;e.J=f.J;e.F=d;e.j=c;e.m=b;e.C=f.C;return e}()}
function Ye(){return function(){function a(b){if(0<arguments.length)for(var c=0,d=Array(arguments.length-0);c<d.length;)d[c]=arguments[c+0],++c;return null}a.H=0;a.J=function(b){H(b);return null};a.C=function(){return null};return a}()}
var Ze=function Ze(a){switch(arguments.length){case 0:return Ze.F();case 1:return Ze.j(arguments[0]);case 2:return Ze.m(arguments[0],arguments[1]);case 3:return Ze.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ze.C(arguments[0],arguments[1],arguments[2],3<c.length?new J(c.slice(3),0,null):null)}};Ze.F=function(){return Td};Ze.j=function(a){return a};
Ze.m=function(a,b){return function(){function c(l,m,n){l=b.o?b.o(l,m,n):b.call(null,l,m,n);return a.j?a.j(l):a.call(null,l)}function d(l,m){l=b.m?b.m(l,m):b.call(null,l,m);return a.j?a.j(l):a.call(null,l)}function e(l){l=b.j?b.j(l):b.call(null,l);return a.j?a.j(l):a.call(null,l)}function f(){var l=b.F?b.F():b.call(null);return a.j?a.j(l):a.call(null,l)}var g=null,k=function(){function l(n,p,r,u){var y=null;if(3<arguments.length){y=0;for(var A=Array(arguments.length-3);y<A.length;)A[y]=arguments[y+
3],++y;y=new J(A,0,null)}return m.call(this,n,p,r,y)}function m(n,p,r,u){n=Le(b,n,p,r,u);return a.j?a.j(n):a.call(null,n)}l.H=3;l.J=function(n){var p=K(n);n=M(n);var r=K(n);n=M(n);var u=K(n);n=Fc(n);return m(p,r,u,n)};l.C=m;return l}();g=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var u=Array(arguments.length-3);r<u.length;)u[r]=arguments[r+
3],++r;r=new J(u,0,null)}return k.C(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};g.H=3;g.J=k.J;g.F=f;g.j=e;g.m=d;g.o=c;g.C=k.C;return g}()};
Ze.o=function(a,b,c){return function(){function d(m,n,p){m=c.o?c.o(m,n,p):c.call(null,m,n,p);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function e(m,n){m=c.m?c.m(m,n):c.call(null,m,n);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function f(m){m=c.j?c.j(m):c.call(null,m);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}function g(){var m=c.F?c.F():c.call(null);m=b.j?b.j(m):b.call(null,m);return a.j?a.j(m):a.call(null,m)}var k=null,l=function(){function m(p,
r,u,y){var A=null;if(3<arguments.length){A=0;for(var D=Array(arguments.length-3);A<D.length;)D[A]=arguments[A+3],++A;A=new J(D,0,null)}return n.call(this,p,r,u,A)}function n(p,r,u,y){p=Le(c,p,r,u,y);p=b.j?b.j(p):b.call(null,p);return a.j?a.j(p):a.call(null,p)}m.H=3;m.J=function(p){var r=K(p);p=M(p);var u=K(p);p=M(p);var y=K(p);p=Fc(p);return n(r,u,y,p)};m.C=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return g.call(this);case 1:return f.call(this,m);case 2:return e.call(this,
m,n);case 3:return d.call(this,m,n,p);default:var u=null;if(3<arguments.length){u=0;for(var y=Array(arguments.length-3);u<y.length;)y[u]=arguments[u+3],++u;u=new J(y,0,null)}return l.C(m,n,p,u)}throw Error("Invalid arity: "+arguments.length);};k.H=3;k.J=l.J;k.F=g;k.j=f;k.m=e;k.o=d;k.C=l.C;return k}()};
Ze.C=function(a,b,c,d){var e=ge(T(a,T(b,T(c,d))));return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new J(m,0,null)}return g.call(this,l)}function g(k){k=Ie(K(e),k);for(var l=M(e);;)if(l){var m=K(l);k=m.j?m.j(k):m.call(null,k);l=M(l)}else return k}f.H=0;f.J=function(k){k=H(k);return g(k)};f.C=g;return f}()};Ze.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);d=M(d);return this.C(b,a,c,d)};Ze.H=3;
function ja(a,b){return function(){function c(l,m,n){return a.K?a.K(b,l,m,n):a.call(null,b,l,m,n)}function d(l,m){return a.o?a.o(b,l,m):a.call(null,b,l,m)}function e(l){return a.m?a.m(b,l):a.call(null,b,l)}function f(){return a.j?a.j(b):a.call(null,b)}var g=null,k=function(){function l(n,p,r,u){var y=null;if(3<arguments.length){y=0;for(var A=Array(arguments.length-3);y<A.length;)A[y]=arguments[y+3],++y;y=new J(A,0,null)}return m.call(this,n,p,r,y)}function m(n,p,r,u){return Me(a,b,n,p,r,ed([u]))}
l.H=3;l.J=function(n){var p=K(n);n=M(n);var r=K(n);n=M(n);var u=K(n);n=Fc(n);return m(p,r,u,n)};l.C=m;return l}();g=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var u=Array(arguments.length-3);r<u.length;)u[r]=arguments[r+3],++r;r=new J(u,0,null)}return k.C(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};g.H=3;g.J=k.J;g.F=
f;g.j=e;g.m=d;g.o=c;g.C=k.C;return g}()}
function ka(a,b,c){return function(){function d(m,n,p){return a.O?a.O(b,c,m,n,p):a.call(null,b,c,m,n,p)}function e(m,n){return a.K?a.K(b,c,m,n):a.call(null,b,c,m,n)}function f(m){return a.o?a.o(b,c,m):a.call(null,b,c,m)}function g(){return a.m?a.m(b,c):a.call(null,b,c)}var k=null,l=function(){function m(p,r,u,y){var A=null;if(3<arguments.length){A=0;for(var D=Array(arguments.length-3);A<D.length;)D[A]=arguments[A+3],++A;A=new J(D,0,null)}return n.call(this,p,r,u,A)}function n(p,r,u,y){return Me(a,
b,c,p,r,ed([u,y]))}m.H=3;m.J=function(p){var r=K(p);p=M(p);var u=K(p);p=M(p);var y=K(p);p=Fc(p);return n(r,u,y,p)};m.C=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return g.call(this);case 1:return f.call(this,m);case 2:return e.call(this,m,n);case 3:return d.call(this,m,n,p);default:var u=null;if(3<arguments.length){u=0;for(var y=Array(arguments.length-3);u<y.length;)y[u]=arguments[u+3],++u;u=new J(y,0,null)}return l.C(m,n,p,u)}throw Error("Invalid arity: "+arguments.length);
};k.H=3;k.J=l.J;k.F=g;k.j=f;k.m=e;k.o=d;k.C=l.C;return k}()}function bf(a){this.state=a;this.ta=this.Hc=this.Za=null;this.I=16386;this.B=6455296}bf.prototype.T=function(a,b){return this===b};bf.prototype.ya=function(){return this.state};bf.prototype.P=function(){return this.Za};
function bb(a,b,c){for(var d=H(a.ta),e=null,f=0,g=0;;)if(g<f){var k=e.V(null,g),l=U(k,0,null);k=U(k,1,null);k.K?k.K(l,a,b,c):k.call(null,l,a,b,c);g+=1}else if(d=H(d))Ed(d)?(e=cc(d),d=dc(d),l=e,f=Q(e),e=l):(e=K(d),l=U(e,0,null),k=U(e,1,null),k.K?k.K(l,a,b,c):k.call(null,l,a,b,c),d=M(d),e=null,f=0),g=0;else break}bf.prototype.U=function(){return ca(this)};function cf(a){return new bf(a)}
function df(a,b){if(a instanceof bf){var c=a.Hc;if(null!=c&&!w(c.j?c.j(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ta&&bb(a,c,b);return b}return gc(a,b)}
var ef=function ef(a){switch(arguments.length){case 2:return ef.m(arguments[0],arguments[1]);case 3:return ef.o(arguments[0],arguments[1],arguments[2]);case 4:return ef.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ef.C(arguments[0],arguments[1],arguments[2],arguments[3],4<c.length?new J(c.slice(4),0,null):null)}};
ef.m=function(a,b){if(a instanceof bf){var c=a.state;b=b.j?b.j(c):b.call(null,c);a=df(a,b)}else a=hc(a,b);return a};ef.o=function(a,b,c){if(a instanceof bf){var d=a.state;b=b.m?b.m(d,c):b.call(null,d,c);a=df(a,b)}else a=hc(a,b,c);return a};ef.K=function(a,b,c,d){if(a instanceof bf){var e=a.state;b=b.o?b.o(e,c,d):b.call(null,e,c,d);a=df(a,b)}else a=hc(a,b,c,d);return a};ef.C=function(a,b,c,d,e){return a instanceof bf?df(a,Le(b,a.state,c,d,e)):hc(a,b,c,d,e)};
ef.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);var e=M(d);d=K(e);e=M(e);return this.C(b,a,c,d,e)};ef.H=4;function hf(a,b,c){return O.m(a.ya(null),b)?(df(a,c),!0):!1}function jf(a){this.state=a;this.B=32768;this.I=0}jf.prototype.sc=function(a,b){return this.state=b};jf.prototype.ya=function(){return this.state};
var kf=function kf(a){switch(arguments.length){case 1:return kf.j(arguments[0]);case 2:return kf.m(arguments[0],arguments[1]);case 3:return kf.o(arguments[0],arguments[1],arguments[2]);case 4:return kf.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return kf.C(arguments[0],arguments[1],arguments[2],arguments[3],4<c.length?new J(c.slice(4),0,null):null)}};
kf.j=function(a){return function(b){return function(){function c(k,l){l=a.j?a.j(l):a.call(null,l);return b.m?b.m(k,l):b.call(null,k,l)}function d(k){return b.j?b.j(k):b.call(null,k)}function e(){return b.F?b.F():b.call(null)}var f=null,g=function(){function k(m,n,p){var r=null;if(2<arguments.length){r=0;for(var u=Array(arguments.length-2);r<u.length;)u[r]=arguments[r+2],++r;r=new J(u,0,null)}return l.call(this,m,n,r)}function l(m,n,p){n=Je(a,n,p);return b.m?b.m(m,n):b.call(null,m,n)}k.H=2;k.J=function(m){var n=
K(m);m=M(m);var p=K(m);m=Fc(m);return l(n,p,m)};k.C=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new J(p,0,null)}return g.C(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.H=2;f.J=g.J;f.F=e;f.j=d;f.m=c;f.C=g.C;return f}()}};
kf.m=function(a,b){return new pe(null,function(){var c=H(b);if(c){if(Ed(c)){for(var d=cc(c),e=Q(d),f=te(e),g=0;;)if(g<e)we(f,function(){var k=$a(d,g);return a.j?a.j(k):a.call(null,k)}()),g+=1;else break;return ve(f.na(),kf.m(a,dc(c)))}return T(function(){var k=K(c);return a.j?a.j(k):a.call(null,k)}(),kf.m(a,Fc(c)))}return null},null,null)};
kf.o=function(a,b,c){return new pe(null,function(){var d=H(b),e=H(c);if(d&&e){var f=K(d);var g=K(e);f=a.m?a.m(f,g):a.call(null,f,g);d=T(f,kf.o(a,Fc(d),Fc(e)))}else d=null;return d},null,null)};kf.K=function(a,b,c,d){return new pe(null,function(){var e=H(b),f=H(c),g=H(d);if(e&&f&&g){var k=K(e);var l=K(f),m=K(g);k=a.o?a.o(k,l,m):a.call(null,k,l,m);e=T(k,kf.K(a,Fc(e),Fc(f),Fc(g)))}else e=null;return e},null,null)};
kf.C=function(a,b,c,d,e){return kf.m(function(f){return Ie(a,f)},function k(g){return new pe(null,function(){var l=kf.m(H,g);return Ve(Td,l)?T(kf.m(K,l),k(kf.m(Fc,l))):null},null,null)}(kd.C(e,d,ed([c,b]))))};kf.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);var e=M(d);d=K(e);e=M(e);return this.C(b,a,c,d,e)};kf.H=4;
var lf=function lf(a){switch(arguments.length){case 1:return lf.j(arguments[0]);case 2:return lf.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};
lf.j=function(a){return function(b){var c=new jf(a);return function(){function d(k,l){var m=C(c),n=c.sc(null,c.ya(null)-1);k=0<m?b.m?b.m(k,l):b.call(null,k,l):k;return 0<n?k:Qc(k)?k:new Pc(k)}function e(k){return b.j?b.j(k):b.call(null,k)}function f(){return b.F?b.F():b.call(null)}var g=null;g=function(k,l){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,k);case 2:return d.call(this,k,l)}throw Error("Invalid arity: "+arguments.length);};g.F=f;g.j=e;g.m=d;return g}()}};
lf.m=function(a,b){return new pe(null,function(){if(0<a){var c=H(b);return c?T(K(c),lf.m(a-1,Fc(c))):null}return null},null,null)};lf.H=2;function mf(a,b){if(null!=b&&(b.I&262144||t===b.Qe)){var c=0<a?b.gb(null,Math.ceil(a)):H(b);return w(c)?c:Gc}return new pe(null,function(){a:for(var d=a,e=b;;)if(e=H(e),0<d&&e)--d,e=Fc(e);else break a;return e},null,null)}function nf(a){return kf.o(function(b){return b},a,mf(2,a))}
function of(a,b,c,d){this.Za=a;this.count=b;this.D=c;this.next=d;this.G=null;this.B=32374988;this.I=262145}h=of.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){return null==this.next?1<this.count?this.next=new of(null,this.count-1,this.D,null):-1===this.count?this:null:this.next};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){if(-1===this.count)for(var c=b.m?b.m(this.D,this.D):b.call(null,this.D,this.D);;){if(Qc(c))return C(c);c=b.m?b.m(c,this.D):b.call(null,c,this.D)}else for(a=1,c=this.D;;)if(a<this.count){c=b.m?b.m(c,this.D):b.call(null,c,this.D);if(Qc(c))return C(c);a+=1}else return c};
h.ia=function(a,b,c){if(-1===this.count)for(c=b.m?b.m(c,this.D):b.call(null,c,this.D);;){if(Qc(c))return C(c);c=b.m?b.m(c,this.D):b.call(null,c,this.D)}else for(a=0;;)if(a<this.count){c=b.m?b.m(c,this.D):b.call(null,c,this.D);if(Qc(c))return C(c);a+=1}else return c};h.ja=function(){return this.D};h.ka=function(){return null==this.next?1<this.count?this.next=new of(null,this.count-1,this.D,null):-1===this.count?this:Gc:this.next};h.Y=function(){return this};
h.S=function(a,b){return b===this.Za?this:new of(b,this.count,this.D,this.next)};h.da=function(a,b){return T(b,this)};h.gb=function(a,b){if(-1===this.count)return this;a=this.count-b;return 0<a?new of(null,a,this.D,null):null};function pf(a){return new of(null,-1,a,null)}function qf(a){return 0<a?new of(null,a,null,null):Gc}
var rf=function rf(a){switch(arguments.length){case 0:return rf.F();case 1:return rf.j(arguments[0]);case 2:return rf.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return rf.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};rf.F=function(){return Gc};rf.j=function(a){return new pe(null,function(){return a},null,null)};
rf.m=function(a,b){return new pe(null,function(){var c=H(a),d=H(b);return c&&d?T(K(c),T(K(d),rf.m(Fc(c),Fc(d)))):null},null,null)};rf.C=function(a,b,c){return new pe(null,function(){var d=kf.m(H,kd.C(c,b,ed([a])));return Ve(Td,d)?ze.m(kf.m(K,d),Ie(rf,kf.m(Fc,d))):null},null,null)};rf.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};rf.H=2;
function sf(){return function(a){var b=new jf(!1);return function(){function c(g,k){if(w(C(b)))return g=a.m?a.m(g," "):a.call(null,g," "),Qc(g)?g:a.m?a.m(g,k):a.call(null,g,k);jc(b,!0);return a.m?a.m(g,k):a.call(null,g,k)}function d(g){return a.j?a.j(g):a.call(null,g)}function e(){return a.F?a.F():a.call(null)}var f=null;f=function(g,k){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,g);case 2:return c.call(this,g,k)}throw Error("Invalid arity: "+arguments.length);};
f.F=e;f.j=d;f.m=c;return f}()}}function tf(a,b){return new pe(null,function(){var c=H(b);if(c){if(Ed(c)){for(var d=cc(c),e=Q(d),f=te(e),g=0;;)if(g<e){var k=$a(d,g);k=a.j?a.j(k):a.call(null,k);if(w(k)){k=f;var l=$a(d,g);k.add(l)}g+=1}else break;return ve(f.na(),tf(a,dc(c)))}d=K(c);c=Fc(c);return w(a.j?a.j(d):a.call(null,d))?T(d,tf(a,c)):tf(a,c)}return null},null,null)}function uf(a,b){return tf(Xe(a),b)}
var vf=function vf(a){switch(arguments.length){case 0:return vf.F();case 1:return vf.j(arguments[0]);case 2:return vf.m(arguments[0],arguments[1]);case 3:return vf.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};vf.F=function(){return ld};vf.j=function(a){return a};vf.m=function(a,b){return null!=a?null!=a&&(a.I&4||t===a.ee)?Ab(Xb(Oa.o(Wb,Vb(a),b)),vd(a)):Oa.o(Ya,a,b):Oa.o(kd,a,b)};
vf.o=function(a,b,c){if(null!=a&&(a.I&4||t===a.ee)){var d=vd(a);return Wd(b,function(){function e(k,l){return Ae.m(k,l)}function f(k){return Ab(Xb(k),d)}var g=null;g=function(k,l){switch(arguments.length){case 1:return f.call(this,k);case 2:return e.call(this,k,l)}throw Error("Invalid arity: "+arguments.length);};g.j=f;g.m=e;return g}(),Vb(a),c)}return Wd(b,kd,a,c)};vf.H=3;
var ff=function ff(a){switch(arguments.length){case 2:return ff.m(arguments[0],arguments[1]);case 3:return ff.o(arguments[0],arguments[1],arguments[2]);case 4:return ff.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ff.C(arguments[0],arguments[1],arguments[2],arguments[3],4<c.length?new J(c.slice(4),0,null):null)}};
ff.m=function(a,b){return Xb(Oa.o(function(c,d){return Ae.m(c,a.j?a.j(d):a.call(null,d))},Vb(ld),b))};ff.o=function(a,b,c){return vf.m(ld,kf.o(a,b,c))};ff.K=function(a,b,c,d){return vf.m(ld,kf.K(a,b,c,d))};ff.C=function(a,b,c,d,e){return vf.m(ld,Me(kf,a,b,c,d,ed([e])))};ff.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);var e=M(d);d=K(e);e=M(e);return this.C(b,a,c,d,e)};ff.H=4;function yf(a,b){for(b=H(b);;){if(null==b)return a;a=F(a,K(b));b=M(b)}}
var wf=function wf(a,b,c){var e=H(b);b=K(e);var f=M(e);if(f){e=V.o;var g=F(a,b);c=wf.o?wf.o(g,f,c):wf.call(null,g,f,c);a=e.call(V,a,b,c)}else a=V.o(a,b,c);return a},zf=function zf(a){switch(arguments.length){case 3:return zf.o(arguments[0],arguments[1],arguments[2]);case 4:return zf.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return zf.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return zf.va(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return zf.C(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],6<c.length?new J(c.slice(6),0,null):null)}};zf.o=function(a,b,c){var d=H(b);b=K(d);if(d=M(d))a=V.o(a,b,zf.o(F(a,b),d,c));else{d=V.o;var e=F(a,b);c=c.j?c.j(e):c.call(null,e);a=d.call(V,a,b,c)}return a};
zf.K=function(a,b,c,d){var e=H(b);b=K(e);if(e=M(e))a=V.o(a,b,zf.K(F(a,b),e,c,d));else{e=V.o;var f=F(a,b);c=c.m?c.m(f,d):c.call(null,f,d);a=e.call(V,a,b,c)}return a};zf.O=function(a,b,c,d,e){var f=H(b);b=K(f);if(f=M(f))a=V.o(a,b,zf.O(F(a,b),f,c,d,e));else{f=V.o;var g=F(a,b);c=c.o?c.o(g,d,e):c.call(null,g,d,e);a=f.call(V,a,b,c)}return a};
zf.va=function(a,b,c,d,e,f){var g=H(b);b=K(g);if(g=M(g))a=V.o(a,b,zf.va(F(a,b),g,c,d,e,f));else{g=V.o;var k=F(a,b);c=c.K?c.K(k,d,e,f):c.call(null,k,d,e,f);a=g.call(V,a,b,c)}return a};zf.C=function(a,b,c,d,e,f,g){var k=H(b);b=K(k);return(k=M(k))?V.o(a,b,Me(zf,F(a,b),k,c,d,ed([e,f,g]))):V.o(a,b,Me(c,F(a,b),d,e,f,ed([g])))};zf.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);var e=M(d);d=K(e);var f=M(e);e=K(f);var g=M(f);f=K(g);g=M(g);return this.C(b,a,c,d,e,f,g)};zf.H=6;
function Af(a,b){this.ca=a;this.v=b}function Bf(a){return new Af(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Cf(a){return new Af(a.ca,Ma(a.v))}function Df(a){a=a.A;return 32>a?0:a-1>>>5<<5}function Ef(a,b,c){for(;;){if(0===b)return c;var d=Bf(a);d.v[0]=c;c=d;b-=5}}
var Ff=function Ff(a,b,c,d){var f=Cf(c),g=a.A-1>>>b&31;5===b?f.v[g]=d:(c=c.v[g],null!=c?(b-=5,a=Ff.K?Ff.K(a,b,c,d):Ff.call(null,a,b,c,d)):a=Ef(null,b-5,d),f.v[g]=a);return f};function Gf(a,b){throw Error(["No item ",B.j(a)," in vector of length ",B.j(b)].join(""));}function Hf(a,b){if(b>=Df(a))return a.xb;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.v[b>>>a&31];a=d}else return c.v}function If(a,b){return 0<=b&&b<a.A?Hf(a,b):Gf(b,a.A)}
var Jf=function Jf(a,b,c,d,e){var g=Cf(c);if(0===b)g.v[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.v[k];a=Jf.O?Jf.O(a,b,c,d,e):Jf.call(null,a,b,c,d,e);g.v[k]=a}return g},Kf=function Kf(a,b,c){var e=a.A-2>>>b&31;if(5<b){b-=5;var f=c.v[e];a=Kf.o?Kf.o(a,b,f):Kf.call(null,a,b,f);if(null==a&&0===e)return null;c=Cf(c);c.v[e]=a;return c}if(0===e)return null;c=Cf(c);c.v[e]=null;return c};function Lf(a,b,c,d,e,f){this.i=a;this.zb=b;this.v=c;this.ma=d;this.start=e;this.end=f}
Lf.prototype.la=function(){return this.i<this.end};Lf.prototype.next=function(){32===this.i-this.zb&&(this.v=Hf(this.ma,this.i),this.zb+=32);var a=this.v[this.i&31];this.i+=1;return a};function Mf(a,b,c){return new Lf(b,b-b%32,b<Q(a)?Hf(a,b):null,a,b,c)}function Nf(a,b,c,d){return c<d?Of(a,b,$c(a,c),c+1,d):b.F?b.F():b.call(null)}function Of(a,b,c,d,e){var f=c;c=d;for(d=Hf(a,d);;)if(c<e){var g=c&31;d=0===g?Hf(a,c):d;g=d[g];f=b.m?b.m(f,g):b.call(null,f,g);if(Qc(f))return C(f);c+=1}else return f}
function X(a,b,c,d,e,f){this.Za=a;this.A=b;this.shift=c;this.root=d;this.xb=e;this.G=f;this.B=167666463;this.I=401412}h=X.prototype;h.hb=function(a,b){return 0<=b&&b<this.A?new Pf(b,Hf(this,b)[b&31]):null};h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){return"number"===typeof b?this.ga(null,b,c):c};
h.Jb=function(a,b,c){a=0;for(var d=c;;)if(a<this.A){var e=Hf(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=f+a,k=e[f];d=b.o?b.o(d,g,k):b.call(null,d,g,k);if(Qc(d)){e=d;break a}f+=1}else{e=d;break a}if(Qc(e))return C(e);a+=c;d=e}else return d};h.Nc=t;h.V=function(a,b){return If(this,b)[b&31]};h.ga=function(a,b,c){return 0<=b&&b<this.A?Hf(this,b)[b&31]:c};
h.Sa=function(a,b,c){if(0<=b&&b<this.A)return Df(this)<=b?(a=Ma(this.xb),a[b&31]=c,new X(this.Za,this.A,this.shift,this.root,a,null)):new X(this.Za,this.A,this.shift,Jf(this,this.shift,this.root,b,c),this.xb,null);if(b===this.A)return this.da(null,c);throw Error(["Index ",B.j(b)," out of bounds  [0,",B.j(this.A),"]"].join(""));};h.Aa=function(){return Mf(this,0,this.A)};h.P=function(){return this.Za};h.$=function(){return this.A};h.ib=function(){return 0<this.A?this.V(null,this.A-1):null};
h.jb=function(){if(0===this.A)throw Error("Can't pop empty vector");if(1===this.A)return Ab(ld,this.Za);if(1<this.A-Df(this))return new X(this.Za,this.A-1,this.shift,this.root,this.xb.slice(0,-1),null);var a=Hf(this,this.A-2),b=Kf(this,this.shift,this.root);b=null==b?Z:b;var c=this.A-1;return 5<this.shift&&null==b.v[1]?new X(this.Za,c,this.shift-5,b.v[0],a,null):new X(this.Za,c,this.shift,b,a,null)};h.wb=function(){return 0<this.A?new cd(this,this.A-1,null):null};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){if(b instanceof X)if(this.A===Q(b))for(a=this.Aa(null),b=b.Aa(null);;)if(a.la()){var c=a.next(),d=b.next();if(!O.m(c,d))return!1}else return!0;else return!1;else return dd(this,b)};h.Ib=function(){return new Qf(this.A,this.shift,Rf.j?Rf.j(this.root):Rf.call(null,this.root),Sf.j?Sf.j(this.xb):Sf.call(null,this.xb))};h.ba=function(){return Ab(ld,this.Za)};h.ha=function(a,b){return Nf(this,b,0,this.A)};
h.ia=function(a,b,c){a=0;for(var d=c;;)if(a<this.A){var e=Hf(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=e[f];d=b.m?b.m(d,g):b.call(null,d,g);if(Qc(d)){e=d;break a}f+=1}else{e=d;break a}if(Qc(e))return C(e);a+=c;d=e}else return d};h.Ca=function(a,b,c){if("number"===typeof b)return this.Sa(null,b,c);throw Error("Vector's key for assoc must be a number.");};h.$a=function(a,b){return Jd(b)?0<=b&&b<this.A:!1};
h.Y=function(){if(0===this.A)return null;if(32>=this.A)return new J(this.xb,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.v[0];else{a=a.v;break a}}return Tf?Tf(this,a,0,0):Uf.call(null,this,a,0,0)};h.S=function(a,b){return b===this.Za?this:new X(b,this.A,this.shift,this.root,this.xb,this.G)};
h.da=function(a,b){if(32>this.A-Df(this)){a=this.xb.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.xb[d],d+=1;else break;c[a]=b;return new X(this.Za,this.A+1,this.shift,this.root,c,null)}a=(c=this.A>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Bf(null),c.v[0]=this.root,d=Ef(null,this.shift,new Af(null,this.xb)),c.v[1]=d):c=Ff(this,this.shift,this.root,new Af(null,this.xb));return new X(this.Za,this.A+1,a,c,[b],null)};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){if("number"===typeof a)return this.V(null,a);throw Error("Key must be integer");};h.gb=function(a,b){if(b<this.A){a=b%32;var c=Hf(this,b);b-=a;return Tf?Tf(this,c,b,a):Uf.call(null,this,c,b,a)}return null};
var Z=new Af(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),ld=new X(null,0,5,Z,[],Lc);function Vf(a,b){var c=a.length;a=b?a:Ma(a);if(32>c)return new X(null,c,5,Z,a,null);b=32;for(var d=(new X(null,32,5,Z,a.slice(0,32),null)).Ib(null);;)if(b<c){var e=b+1;d=Ae.m(d,a[b]);b=e}else return Xb(d)}X.prototype[Ja]=function(){return Ic(this)};
function Wf(a){return w(Xf.j?Xf.j(a):Xf.call(null,a))?new X(null,2,5,Z,[Yf.j?Yf.j(a):Yf.call(null,a),Zf.j?Zf.j(a):Zf.call(null,a)],null):Dd(a)?ud(a,null):Ea(a)?Vf(a,!0):Xb(Oa.o(Wb,Vb(ld),a))}var $f=function $f(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return $f.C(0<c.length?new J(c.slice(0),0,null):null)};$f.C=function(a){return a instanceof J&&0===a.i?Vf(a.v,!Ea(a.v)):Wf(a)};$f.H=0;$f.J=function(a){return this.C(H(a))};
function ag(a,b,c,d,e){this.ua=a;this.node=b;this.i=c;this.ra=d;this.Za=e;this.G=null;this.B=32375020;this.I=263680}h=ag.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){if(this.ra+1<this.node.length){var a=this.ua;var b=this.node,c=this.i,d=this.ra+1;a=Tf?Tf(a,b,c,d):Uf.call(null,a,b,c,d);return null==a?null:a}return this.oc()};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return Nf(this.ua,b,this.i+this.ra,Q(this.ua))};h.ia=function(a,b,c){return Of(this.ua,b,c,this.i+this.ra,Q(this.ua))};h.ja=function(){return this.node[this.ra]};h.ka=function(){if(this.ra+1<this.node.length){var a=this.ua;var b=this.node,c=this.i,d=this.ra+1;a=Tf?Tf(a,b,c,d):Uf.call(null,a,b,c,d);return null==a?Gc:a}return this.ub(null)};h.Y=function(){return this};
h.Tb=function(){var a=this.node;return new se(a,this.ra,a.length)};h.ub=function(){var a=this.i+this.node.length;if(a<Ua(this.ua)){var b=this.ua,c=Hf(this.ua,a);return Tf?Tf(b,c,a,0):Uf.call(null,b,c,a,0)}return Gc};h.S=function(a,b){return b===this.Za?this:bg?bg(this.ua,this.node,this.i,this.ra,b):Uf.call(null,this.ua,this.node,this.i,this.ra,b)};h.da=function(a,b){return T(b,this)};
h.gb=function(a,b){a=this.ra+b;if(a<this.node.length)return Tf?Tf(this.ua,this.node,this.i,a):Uf.call(null,this.ua,this.node,this.i,a);var c=this.i+a;if(c<Ua(this.ua)){a=c%32;b=this.ua;var d=Hf(this.ua,c);c-=a;return Tf?Tf(b,d,c,a):Uf.call(null,b,d,c,a)}return null};h.oc=function(){var a=this.i+this.node.length;if(a<Ua(this.ua)){var b=this.ua,c=Hf(this.ua,a);return Tf?Tf(b,c,a,0):Uf.call(null,b,c,a,0)}return null};ag.prototype[Ja]=function(){return Ic(this)};
function Uf(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new ag(b,If(b,c),c,d,null);case 4:return Tf(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return bg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Tf(a,b,c,d){return new ag(a,b,c,d,null)}function bg(a,b,c,d,e){return new ag(a,b,c,d,e)}
function cg(a,b,c,d,e){this.Za=a;this.ma=b;this.start=c;this.end=d;this.G=e;this.B=167666463;this.I=139264}h=cg.prototype;h.hb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new Pf(b,hb(this.ma,a)):null};h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){return"number"===typeof b?this.ga(null,b,c):c};
h.Jb=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=$a(this.ma,a);c=b.o?b.o(c,e,f):b.call(null,c,e,f);if(Qc(c))return C(c);d+=1;a+=1}else return c};h.V=function(a,b){return 0>b||this.end<=this.start+b?Gf(b,this.end-this.start):$a(this.ma,this.start+b)};h.ga=function(a,b,c){return 0>b||this.end<=this.start+b?c:$a(this.ma,this.start+b,c)};
h.Sa=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",B.j(b)," out of bounds [0,",B.j(this.$(null)),"]"].join(""));b=this.Za;c=V.o(this.ma,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return dg.O?dg.O(b,c,d,a,null):dg.call(null,b,c,d,a,null)};h.Aa=function(){return null!=this.ma&&t===this.ma.Nc?Mf(this.ma,this.start,this.end):new Ue(this)};h.P=function(){return this.Za};h.$=function(){return this.end-this.start};
h.ib=function(){return this.start===this.end?null:$a(this.ma,this.end-1)};h.jb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.Za,b=this.ma,c=this.start,d=this.end-1;return dg.O?dg.O(a,b,c,d,null):dg.call(null,a,b,c,d,null)};h.wb=function(){return this.start!==this.end?new cd(this,this.end-this.start-1,null):null};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Ab(ld,this.Za)};
h.ha=function(a,b){return null!=this.ma&&t===this.ma.Nc?Nf(this.ma,b,this.start,this.end):Tc(this,b)};h.ia=function(a,b,c){return null!=this.ma&&t===this.ma.Nc?Of(this.ma,b,c,this.start,this.end):Uc(this,b,c)};h.Ca=function(a,b,c){if("number"===typeof b)return this.Sa(null,b,c);throw Error("Subvec's key for assoc must be a number.");};h.$a=function(a,b){return Jd(b)?0<=b&&b<this.end-this.start:!1};
h.Y=function(){var a=this;return function d(c){return c===a.end?null:T($a(a.ma,c),new pe(null,function(){return d(c+1)},null,null))}(a.start)};h.S=function(a,b){return b===this.Za?this:dg.O?dg.O(b,this.ma,this.start,this.end,this.G):dg.call(null,b,this.ma,this.start,this.end,this.G)};h.da=function(a,b){a=this.Za;b=xb(this.ma,this.end,b);var c=this.start,d=this.end+1;return dg.O?dg.O(a,b,c,d,null):dg.call(null,a,b,c,d,null)};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.V(null,a)};h.m=function(a,b){return this.ga(null,a,b)};cg.prototype[Ja]=function(){return Ic(this)};
function dg(a,b,c,d,e){for(;;)if(b instanceof cg)c=b.start+c,d=b.start+d,b=b.ma;else{if(!Dd(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>Q(b))throw Error("Index out of bounds");return new cg(a,b,c,d,e)}}function eg(a,b,c){return dg(null,a,b|0,c|0,null)}function fg(a,b){return a===b.ca?b:new Af(a,Ma(b.v))}function Rf(a){return new Af({},Ma(a.v))}
function Sf(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Fd(a,0,b,0,a.length);return b}var gg=function gg(a,b,c,d){c=fg(a.root.ca,c);var f=a.A-1>>>b&31;if(5===b)a=d;else{var g=c.v[f];null!=g?(b-=5,a=gg.K?gg.K(a,b,g,d):gg.call(null,a,b,g,d)):a=Ef(a.root.ca,b-5,d)}c.v[f]=a;return c};function Qf(a,b,c,d){this.A=a;this.shift=b;this.root=c;this.xb=d;this.I=88;this.B=275}h=Qf.prototype;
h.Mb=function(a,b){if(this.root.ca){if(32>this.A-Df(this))this.xb[this.A&31]=b;else{a=new Af(this.root.ca,this.xb);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.xb=c;this.A>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Ef(this.root.ca,this.shift,a),this.root=new Af(this.root.ca,b),this.shift=c):this.root=gg(this,this.shift,this.root,a)}this.A+=1;return this}throw Error("conj! after persistent!");};h.Yb=function(){if(this.root.ca){this.root.ca=null;var a=this.A-Df(this),b=Array(a);Fd(this.xb,0,b,0,a);return new X(null,this.A,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
h.Lb=function(a,b,c){if("number"===typeof b)return hg(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function hg(a,b,c){if(a.root.ca){if(0<=b&&b<a.A){if(Df(a)<=b)a.xb[b&31]=c;else{var d=function k(f,g){g=fg(a.root.ca,g);if(0===f)g.v[b&31]=c;else{var l=b>>>f&31;f=k(f-5,g.v[l]);g.v[l]=f}return g}(a.shift,a.root);a.root=d}return a}if(b===a.A)return a.Mb(null,c);throw Error(["Index ",B.j(b)," out of bounds for TransientVector of length",B.j(a.A)].join(""));}throw Error("assoc! after persistent!");}h.$=function(){if(this.root.ca)return this.A;throw Error("count after persistent!");};
h.V=function(a,b){if(this.root.ca)return If(this,b)[b&31];throw Error("nth after persistent!");};h.ga=function(a,b,c){return 0<=b&&b<this.A?this.V(null,b):c};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){if(this.root.ca)return"number"===typeof b?this.ga(null,b,c):c;throw Error("lookup after persistent!");};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};function ig(a,b){this.Pb=a;this.ic=b}ig.prototype.la=function(){var a=null!=this.Pb&&H(this.Pb);return a?a:(a=null!=this.ic)?this.ic.la():a};
ig.prototype.next=function(){if(null!=this.Pb){var a=K(this.Pb);this.Pb=M(this.Pb);return a}if(null!=this.ic&&this.ic.la())return this.ic.next();throw Error("No such element");};ig.prototype.remove=function(){return Error("Unsupported operation")};function jg(a,b,c,d){this.Za=a;this.xa=b;this.Ba=c;this.G=d;this.B=31850700;this.I=0}h=jg.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){var a=M(this.xa);return a?new jg(this.Za,a,this.Ba,null):null!=this.Ba?new jg(this.Za,this.Ba,null,null):null};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return Ab(Gc,this.Za)};h.ja=function(){return K(this.xa)};h.ka=function(){var a=M(this.xa);return a?new jg(this.Za,a,this.Ba,null):null==this.Ba?this.ba(null):new jg(this.Za,this.Ba,null,null)};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new jg(b,this.xa,this.Ba,this.G)};h.da=function(a,b){return T(b,this)};jg.prototype[Ja]=function(){return Ic(this)};
function kg(a,b,c,d,e){this.Za=a;this.count=b;this.xa=c;this.Ba=d;this.G=e;this.I=139264;this.B=31858766}h=kg.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,this.count.j?this.count.j(this):this.count.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.Aa=function(){return new ig(this.xa,lc(this.Ba))};h.P=function(){return this.Za};h.$=function(){return this.count};h.ib=function(){return K(this.xa)};
h.jb=function(){if(w(this.xa)){var a=M(this.xa);return a?new kg(this.Za,this.count-1,a,this.Ba,null):new kg(this.Za,this.count-1,H(this.Ba),ld,null)}return this};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Ab(lg,this.Za)};h.ja=function(){return K(this.xa)};h.ka=function(){return Fc(H(this))};h.Y=function(){var a=H(this.Ba),b=this.xa;return w(w(b)?b:a)?new jg(null,this.xa,H(a),null):null};
h.S=function(a,b){return b===this.Za?this:new kg(b,this.count,this.xa,this.Ba,this.G)};h.da=function(a,b){w(this.xa)?(a=this.Ba,b=new kg(this.Za,this.count+1,this.xa,kd.m(w(a)?a:ld,b),null)):b=new kg(this.Za,this.count+1,kd.m(this.xa,b),ld,null);return b};var lg=new kg(null,0,null,ld,Lc);kg.prototype[Ja]=function(){return Ic(this)};function mg(){this.B=2097152;this.I=0}mg.prototype.T=function(){return!1};var ng=new mg;
function og(a,b){return Hd(Bd(b)&&!Cd(b)?Q(a)===Q(b)?(null!=a?a.B&1048576||t===a.ie||(a.B?0:x(Eb,a)):x(Eb,a))?Sd(function(c,d,e){return O.m(Bc(b,d,ng),e)?!0:new Pc(!1)},!0,a):Ve(function(c){return O.m(Bc(b,K(c),ng),id(c))},a):null:null)}function pg(a){this.s=a}pg.prototype.next=function(){if(null!=this.s){var a=K(this.s),b=U(a,0,null);a=U(a,1,null);this.s=M(this.s);return{value:[b,a],done:!1}}return{value:null,done:!0}};function qg(a){this.s=a}
qg.prototype.next=function(){if(null!=this.s){var a=K(this.s);this.s=M(this.s);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function rg(a,b){if(b instanceof G)a:{var c=a.length;b=b.pa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof G&&b===a[d].pa){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof E)a:for(c=a.length,b=b.cb,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].cb){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(O.m(b,a[d])){a=d;break a}d+=2}return a}function Pf(a,b){this.key=a;this.D=b;this.G=null;this.B=166619935;this.I=0}h=Pf.prototype;h.hb=function(a,b){switch(b){case 0:return new Pf(0,this.key);case 1:return new Pf(1,this.D);default:return null}};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.oa=function(a,b){return this.ga(null,b,null)};h.X=function(a,b,c){return this.ga(null,b,c)};h.V=function(a,b){if(0===b)return this.key;if(1===b)return this.D;throw Error("Index out of bounds");};
h.ga=function(a,b,c){return 0===b?this.key:1===b?this.D:c};h.Sa=function(a,b,c){return(new X(null,2,5,Z,[this.key,this.D],null)).Sa(null,b,c)};h.P=function(){return null};h.$=function(){return 2};h.Pc=function(){return this.key};h.Qc=function(){return this.D};h.ib=function(){return this.D};h.jb=function(){return new X(null,1,5,Z,[this.key],null)};h.wb=function(){return new J([this.D,this.key],0,null)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return null};h.ha=function(a,b){return Tc(this,b)};h.ia=function(a,b,c){return Uc(this,b,c)};h.Ca=function(a,b,c){return V.o(new X(null,2,5,Z,[this.key,this.D],null),b,c)};h.$a=function(a,b){return 0===b||1===b};h.Y=function(){return new J([this.key,this.D],0,null)};h.S=function(a,b){return ud(new X(null,2,5,Z,[this.key,this.D],null),b)};h.da=function(a,b){return new X(null,3,5,Z,[this.key,this.D,b],null)};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.V(null,a)};h.m=function(a,b){return this.ga(null,a,b)};function Xf(a){return null!=a?a.B&2048||t===a.Ve?!0:!1:!1}function sg(a,b,c){this.v=a;this.i=b;this.Ya=c;this.B=32374990;this.I=262144}h=sg.prototype;
h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Ya};h.ea=function(){return this.i<this.v.length-2?new sg(this.v,this.i+2,null):null};h.$=function(){return(this.v.length-this.i)/2};h.U=function(){return Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return new Pf(this.v[this.i],this.v[this.i+1])};h.ka=function(){return this.i<this.v.length-2?new sg(this.v,this.i+2,null):Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Ya?this:new sg(this.v,this.i,b)};h.da=function(a,b){return T(b,this)};h.gb=function(a,b){return b<this.$(null)?new sg(this.v,this.i+2*b,null):null};
sg.prototype[Ja]=function(){return Ic(this)};function tg(a,b){this.v=a;this.i=0;this.A=b}tg.prototype.la=function(){return this.i<this.A};tg.prototype.next=function(){var a=new Pf(this.v[this.i],this.v[this.i+1]);this.i+=2;return a};function v(a,b,c,d){this.Za=a;this.A=b;this.v=c;this.G=d;this.B=16647951;this.I=401412}h=v.prototype;h.hb=function(a,b){a=rg(this.v,b);return-1===a?null:new Pf(this.v[a],this.v[a+1])};h.toString=function(){return oc(this)};
h.keys=function(){return Ic(ug.j?ug.j(this):ug.call(null,this))};h.entries=function(){return new pg(H(H(this)))};h.values=function(){return Ic(vg.j?vg.j(this):vg.call(null,this))};h.has=function(a){return Kd(this,a)};h.get=function(a,b){return this.X(null,a,b)};
h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),g=U(f,0,null);f=U(f,1,null);a.m?a.m(f,g):a.call(null,f,g);e+=1}else if(b=H(b))Ed(b)?(c=cc(b),b=dc(b),g=c,d=Q(c),c=g):(c=K(b),g=U(c,0,null),f=U(c,1,null),a.m?a.m(f,g):a.call(null,f,g),b=M(b),c=null,d=0),e=0;else return null};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){a=rg(this.v,b);return-1===a?c:this.v[a+1]};
h.Jb=function(a,b,c){a=this.v.length;for(var d=0;;)if(d<a){var e=this.v[d],f=this.v[d+1];c=b.o?b.o(c,e,f):b.call(null,c,e,f);if(Qc(c))return C(c);d+=2}else return c};h.Aa=function(){return new tg(this.v,2*this.A)};h.P=function(){return this.Za};h.$=function(){return this.A};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Mc(this)};
h.T=function(a,b){if(Bd(b)&&!Cd(b))if(a=this.v.length,this.A===b.$(null))for(var c=0;;)if(c<a){var d=b.X(null,this.v[c],Gd);if(d!==Gd)if(O.m(this.v[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};h.Ib=function(){return new wg(this.v.length,Ma(this.v))};h.ba=function(){return Ab(Oe,this.Za)};h.ha=function(a,b){return Qd(this,b)};h.ia=function(a,b,c){return Rd(this,b,c)};
h.pc=function(a,b){if(0<=rg(this.v,b)){a=this.v.length;var c=a-2;if(0===c)return this.ba(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.Za,this.A-1,c,null);O.m(b,this.v[d])?d+=2:(c[e]=this.v[d],c[e+1]=this.v[d+1],e+=2,d+=2)}}else return this};
h.Ca=function(a,b,c){a=rg(this.v,b);if(-1===a){if(this.A<xg){a=this.v;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.Za,this.A+1,e,null)}return Ab(lb(vf.m(yg,this),b,c),this.Za)}if(c===this.v[a+1])return this;b=Ma(this.v);b[a+1]=c;return new v(this.Za,this.A,b,null)};h.$a=function(a,b){return-1!==rg(this.v,b)};h.Y=function(){var a=this.v;return 0<=a.length-2?new sg(a,0,null):null};
h.S=function(a,b){return b===this.Za?this:new v(b,this.A,this.v,this.G)};h.da=function(a,b){if(Dd(b))return this.Ca(null,$a(b,0),$a(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=K(b);if(Dd(c))a=lb(a,$a(c,0),$a(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};h.gb=function(a,b){a=this.Y(null);return null==a?null:mc(a,b)};var Oe=new v(null,0,[],Nc),xg=8;
function zg(a,b){return a===b?!0:ke(a,b)?!0:O.m(a,b)}function Ag(a){for(var b=0,c=0;;)if(b<a.length){var d;a:for(d=0;;)if(d<b){var e=zg(a[b],a[d]);if(e){d=e;break a}d=2+d}else{d=!1;break a}c=d?c:c+2;b=2+b}else return c}function Bg(a,b){var c=a.length-1,d=H(b);b=Array(c+2*Q(d));a=Fd(a,0,b,0,c);for(b=c;;)if(d){var e=K(d);a[b]=pb(e);a[b+1]=qb(e);b=2+c;d=M(d)}else return a}
function pd(a){var b=a.length,c=1===(b&1),d;if(!(d=c))a:for(d=0;;)if(d<a.length){var e;b:for(e=0;;)if(e<d){var f=zg(a[d],a[e]);if(f){e=f;break b}e=2+e}else{e=!1;break b}if(e){d=e;break a}d=2+d}else{d=!1;break a}return d?Cg(a,c):new v(null,b/2,a,null)}
function Cg(a,b){var c=b?Bg(a,vf.m(Oe,a[a.length-1])):a;a=Ag(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,f=0;;)if(e<d)(function(){for(var g=0;;)if(g<f){var k=zg(c[e],c[g]);if(k)return k;g=2+g}else return!1})()?(b=f,e=2+e,f=b):(b=function(){for(var g=d-2;;)if(g>=e){if(zg(c[e],c[g]))return g;g-=2}else return g}(),a[f]=c[e],a[f+1]=c[b+1],b=2+f,e=2+e,f=b);else break;return new v(null,a.length/2,a,null)}return new v(null,c.length/2,c,null)}v.prototype[Ja]=function(){return Ic(this)};
function wg(a,b){this.Cb={};this.Va=a;this.v=b;this.B=259;this.I=56}h=wg.prototype;h.$=function(){if(this.Cb)return ae(this.Va);throw Error("count after persistent!");};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){if(this.Cb)return a=rg(this.v,b),-1===a?c:this.v[a+1];throw Error("lookup after persistent!");};
h.Mb=function(a,b){if(this.Cb){if(Xf(b))return this.Lb(null,Yf.j?Yf.j(b):Yf.call(null,b),Zf.j?Zf.j(b):Zf.call(null,b));if(Dd(b))return this.Lb(null,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));a=H(b);for(b=this;;){var c=K(a);if(w(c))a=M(a),b=Yb(b,Yf.j?Yf.j(c):Yf.call(null,c),Zf.j?Zf.j(c):Zf.call(null,c));else return b}}else throw Error("conj! after persistent!");};h.Yb=function(){if(this.Cb)return this.Cb=!1,new v(null,ae(this.Va),this.v,null);throw Error("persistent! called twice");};
h.Lb=function(a,b,c){if(this.Cb){a=rg(this.v,b);if(-1===a){if(this.Va+2<=2*xg)return this.Va+=2,this.v.push(b),this.v.push(c),this;a=Dg.m?Dg.m(this.Va,this.v):Dg.call(null,this.Va,this.v);return Yb(a,b,c)}c!==this.v[a+1]&&(this.v[a+1]=c);return this}throw Error("assoc! after persistent!");};h.Wc=function(a,b){if(this.Cb)return a=rg(this.v,b),0<=a&&(this.v[a]=this.v[this.Va-2],this.v[a+1]=this.v[this.Va-1],a=this.v,a.pop(),a.pop(),this.Va-=2),this;throw Error("dissoc! after persistent!");};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.X(null,a,null)};h.m=function(a,b){return this.X(null,a,b)};function Dg(a,b){for(var c=Vb(yg),d=0;;)if(d<a)c=Yb(c,b[d],b[d+1]),d+=2;else return c}function Eg(){this.D=!1}
function Fg(a,b,c){a=Ma(a);a[b]=c;return a}function Gg(a,b){var c=Array(a.length-2);Fd(a,0,c,0,2*b);Fd(a,2*(b+1),c,2*b,c.length-2*b);return c}function Hg(a,b,c,d){a=a.ob(b);a.v[c]=d;return a}function Ig(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var g=a[e+1];c=b.o?b.o(f,c,g):b.call(null,f,c,g)}else c=a[e+1],c=null!=c?c.Db(b,f):f;if(Qc(c))return c;e+=2;f=c}else return f}function Jg(a){this.v=a;this.i=0;this.Xa=this.ec=null}
Jg.prototype.advance=function(){for(var a=this.v.length;;)if(this.i<a){var b=this.v[this.i],c=this.v[this.i+1];null!=b?b=this.ec=new Pf(b,c):null!=c?(b=lc(c),b=b.la()?this.Xa=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};Jg.prototype.la=function(){var a=null!=this.ec;return a?a:(a=null!=this.Xa)?a:this.advance()};
Jg.prototype.next=function(){if(null!=this.ec){var a=this.ec;this.ec=null;return a}if(null!=this.Xa)return a=this.Xa.next(),this.Xa.la()||(this.Xa=null),a;if(this.advance())return this.next();throw Error("No such element");};Jg.prototype.remove=function(){return Error("Unsupported operation")};function Kg(a,b,c){this.ca=a;this.Z=b;this.v=c;this.I=131072;this.B=0}h=Kg.prototype;
h.ob=function(a){if(a===this.ca)return this;var b=be(this.Z),c=Array(0>b?4:2*(b+1));Fd(this.v,0,c,0,2*b);return new Kg(a,this.Z,c)};h.dc=function(a,b,c,d,e){var f=1<<(c>>>b&31);if(0===(this.Z&f))return this;var g=be(this.Z&f-1),k=this.v[2*g],l=this.v[2*g+1];return null==k?(b=l.dc(a,b+5,c,d,e),b===l?this:null!=b?Hg(this,a,2*g+1,b):this.Z===f?null:Lg(this,a,f,g)):zg(d,k)?(e.D=!0,Lg(this,a,f,g)):this};
function Lg(a,b,c,d){if(a.Z===c)return null;a=a.ob(b);b=a.v;var e=b.length;a.Z^=c;Fd(b,2*(d+1),b,2*d,e-2*(d+1));b[e-2]=null;b[e-1]=null;return a}h.bc=function(){return Mg?Mg(this.v):Ng.call(null,this.v)};h.Db=function(a,b){return Ig(this.v,a,b)};h.yb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.Z&e))return d;var f=be(this.Z&e-1);e=this.v[2*f];f=this.v[2*f+1];return null==e?f.yb(a+5,b,c,d):zg(c,e)?f:d};
h.Ua=function(a,b,c,d,e,f){var g=1<<(c>>>b&31),k=be(this.Z&g-1);if(0===(this.Z&g)){var l=be(this.Z);if(2*l<this.v.length){a=this.ob(a);b=a.v;f.D=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.Z|=g;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Og.Ua(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.Z>>>d&1)?
d+=1:(k[d]=null!=this.v[e]?Og.Ua(a,b+5,xc(this.v[e]),this.v[e],this.v[e+1],f):this.v[e+1],e+=2,d+=1);else break;return new Pg(a,l+1,k)}b=Array(2*(l+4));Fd(this.v,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Fd(this.v,2*k,b,2*(k+1),2*(l-k));f.D=!0;a=this.ob(a);a.v=b;a.Z|=g;return a}l=this.v[2*k];g=this.v[2*k+1];if(null==l)return l=g.Ua(a,b+5,c,d,e,f),l===g?this:Hg(this,a,2*k+1,l);if(zg(d,l))return e===g?this:Hg(this,a,2*k+1,e);f.D=!0;f=b+5;d=Qg?Qg(a,f,l,g,c,d,e):Rg.call(null,a,f,l,g,c,d,e);e=2*k;k=2*k+1;a=this.ob(a);
a.v[e]=null;a.v[k]=d;return a};
h.Ta=function(a,b,c,d,e){var f=1<<(b>>>a&31),g=be(this.Z&f-1);if(0===(this.Z&f)){var k=be(this.Z);if(16<=k){g=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];g[b>>>a&31]=Og.Ta(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.Z>>>c&1)?c+=1:(g[c]=null!=this.v[d]?Og.Ta(a+5,xc(this.v[d]),this.v[d],this.v[d+1],e):this.v[d+1],d+=2,c+=1);else break;return new Pg(null,k+1,g)}a=Array(2*(k+1));Fd(this.v,
0,a,0,2*g);a[2*g]=c;a[2*g+1]=d;Fd(this.v,2*g,a,2*(g+1),2*(k-g));e.D=!0;return new Kg(null,this.Z|f,a)}var l=this.v[2*g];f=this.v[2*g+1];if(null==l)return k=f.Ta(a+5,b,c,d,e),k===f?this:new Kg(null,this.Z,Fg(this.v,2*g+1,k));if(zg(c,l))return d===f?this:new Kg(null,this.Z,Fg(this.v,2*g+1,d));e.D=!0;e=this.Z;k=this.v;a+=5;a=Sg?Sg(a,l,f,b,c,d):Rg.call(null,a,l,f,b,c,d);c=2*g;g=2*g+1;d=Ma(k);d[c]=null;d[g]=a;return new Kg(null,e,d)};
h.ac=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.Z&e))return d;var f=be(this.Z&e-1);e=this.v[2*f];f=this.v[2*f+1];return null==e?f.ac(a+5,b,c,d):zg(c,e)?new Pf(e,f):d};h.cc=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.Z&d))return this;var e=be(this.Z&d-1),f=this.v[2*e],g=this.v[2*e+1];return null==f?(a=g.cc(a+5,b,c),a===g?this:null!=a?new Kg(null,this.Z,Fg(this.v,2*e+1,a)):this.Z===d?null:new Kg(null,this.Z^d,Gg(this.v,e))):zg(c,f)?this.Z===d?null:new Kg(null,this.Z^d,Gg(this.v,e)):this};
h.Aa=function(){return new Jg(this.v)};var Og=new Kg(null,0,[]);function Tg(a,b,c){var d=a.v,e=d.length;a=Array(2*(a.A-1));for(var f=0,g=1,k=0;;)if(f<e)f!==c&&null!=d[f]?(a[g]=d[f],g+=2,k|=1<<f,f+=1):f+=1;else return new Kg(b,k,a)}function Ug(a){this.v=a;this.i=0;this.Xa=null}Ug.prototype.la=function(){for(var a=this.v.length;;){if(null!=this.Xa&&this.Xa.la())return!0;if(this.i<a){var b=this.v[this.i];this.i+=1;null!=b&&(this.Xa=lc(b))}else return!1}};
Ug.prototype.next=function(){if(this.la())return this.Xa.next();throw Error("No such element");};Ug.prototype.remove=function(){return Error("Unsupported operation")};function Pg(a,b,c){this.ca=a;this.A=b;this.v=c;this.I=131072;this.B=0}h=Pg.prototype;h.ob=function(a){return a===this.ca?this:new Pg(a,this.A,Ma(this.v))};
h.dc=function(a,b,c,d,e){var f=c>>>b&31,g=this.v[f];if(null==g)return this;b=g.dc(a,b+5,c,d,e);if(b===g)return this;if(null==b){if(8>=this.A)return Tg(this,a,f);a=Hg(this,a,f,b);--a.A;return a}return Hg(this,a,f,b)};h.bc=function(){return Vg?Vg(this.v):Wg.call(null,this.v)};h.Db=function(a,b){for(var c=this.v.length,d=0;;)if(d<c){var e=this.v[d];if(null!=e){b=e.Db(a,b);if(Qc(b))return b;d+=1}else d+=1}else return b};h.yb=function(a,b,c,d){var e=this.v[b>>>a&31];return null!=e?e.yb(a+5,b,c,d):d};
h.Ua=function(a,b,c,d,e,f){var g=c>>>b&31,k=this.v[g];if(null==k)return a=Hg(this,a,g,Og.Ua(a,b+5,c,d,e,f)),a.A+=1,a;b=k.Ua(a,b+5,c,d,e,f);return b===k?this:Hg(this,a,g,b)};h.Ta=function(a,b,c,d,e){var f=b>>>a&31,g=this.v[f];if(null==g)return new Pg(null,this.A+1,Fg(this.v,f,Og.Ta(a+5,b,c,d,e)));a=g.Ta(a+5,b,c,d,e);return a===g?this:new Pg(null,this.A,Fg(this.v,f,a))};h.ac=function(a,b,c,d){var e=this.v[b>>>a&31];return null!=e?e.ac(a+5,b,c,d):d};
h.cc=function(a,b,c){var d=b>>>a&31,e=this.v[d];return null!=e?(a=e.cc(a+5,b,c),a===e?this:null==a?8>=this.A?Tg(this,null,d):new Pg(null,this.A-1,Fg(this.v,d,a)):new Pg(null,this.A,Fg(this.v,d,a))):this};h.Aa=function(){return new Ug(this.v)};function Xg(a,b,c){b*=2;for(var d=0;;)if(d<b){if(zg(c,a[d]))return d;d+=2}else return-1}function Yg(a,b,c,d){this.ca=a;this.mb=b;this.A=c;this.v=d;this.I=131072;this.B=0}h=Yg.prototype;
h.ob=function(a){if(a===this.ca)return this;var b=Array(2*(this.A+1));Fd(this.v,0,b,0,2*this.A);return new Yg(a,this.mb,this.A,b)};h.dc=function(a,b,c,d,e){b=Xg(this.v,this.A,d);if(-1===b)return this;e.D=!0;if(1===this.A)return null;a=this.ob(a);e=a.v;e[b]=e[2*this.A-2];e[b+1]=e[2*this.A-1];e[2*this.A-1]=null;e[2*this.A-2]=null;--a.A;return a};h.bc=function(){return Mg?Mg(this.v):Ng.call(null,this.v)};h.Db=function(a,b){return Ig(this.v,a,b)};
h.yb=function(a,b,c,d){a=Xg(this.v,this.A,c);return 0>a?d:zg(c,this.v[a])?this.v[a+1]:d};
h.Ua=function(a,b,c,d,e,f){if(c===this.mb){b=Xg(this.v,this.A,d);if(-1===b){if(this.v.length>2*this.A)return b=2*this.A,c=2*this.A+1,a=this.ob(a),a.v[b]=d,a.v[c]=e,f.D=!0,a.A+=1,a;c=this.v.length;b=Array(c+2);Fd(this.v,0,b,0,c);b[c]=d;b[c+1]=e;f.D=!0;d=this.A+1;a===this.ca?(this.v=b,this.A=d,a=this):a=new Yg(this.ca,this.mb,d,b);return a}return this.v[b+1]===e?this:Hg(this,a,b+1,e)}return(new Kg(a,1<<(this.mb>>>b&31),[null,this,null,null])).Ua(a,b,c,d,e,f)};
h.Ta=function(a,b,c,d,e){return b===this.mb?(a=Xg(this.v,this.A,c),-1===a?(a=2*this.A,b=Array(a+2),Fd(this.v,0,b,0,a),b[a]=c,b[a+1]=d,e.D=!0,new Yg(null,this.mb,this.A+1,b)):O.m(this.v[a+1],d)?this:new Yg(null,this.mb,this.A,Fg(this.v,a+1,d))):(new Kg(null,1<<(this.mb>>>a&31),[null,this])).Ta(a,b,c,d,e)};h.ac=function(a,b,c,d){a=Xg(this.v,this.A,c);return 0>a?d:zg(c,this.v[a])?new Pf(this.v[a],this.v[a+1]):d};
h.cc=function(a,b,c){a=Xg(this.v,this.A,c);return-1===a?this:1===this.A?null:new Yg(null,this.mb,this.A-1,Gg(this.v,ae(a)))};h.Aa=function(){return new Jg(this.v)};function Rg(a){switch(arguments.length){case 6:return Sg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Qg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function Sg(a,b,c,d,e,f){var g=xc(b);if(g===d)return new Yg(null,g,2,[b,c,e,f]);var k=new Eg;return Og.Ta(a,g,b,c,k).Ta(a,d,e,f,k)}function Qg(a,b,c,d,e,f,g){var k=xc(c);if(k===e)return new Yg(null,k,2,[c,d,f,g]);var l=new Eg;return Og.Ua(a,b,k,c,d,l).Ua(a,b,e,f,g,l)}function Zg(a,b,c,d,e){this.Za=a;this.nodes=b;this.i=c;this.s=d;this.G=e;this.B=32374988;this.I=0}h=Zg.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){if(null==this.s){var a=this.nodes,b=this.i+2;return $g?$g(a,b,null):Ng.call(null,a,b,null)}a=this.nodes;b=this.i;var c=M(this.s);return $g?$g(a,b,c):Ng.call(null,a,b,c)};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return null==this.s?new Pf(this.nodes[this.i],this.nodes[this.i+1]):K(this.s)};
h.ka=function(){var a=this,b=null==a.s?function(){var c=a.nodes,d=a.i+2;return $g?$g(c,d,null):Ng.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=M(a.s);return $g?$g(c,d,e):Ng.call(null,c,d,e)}();return null!=b?b:Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new Zg(b,this.nodes,this.i,this.s,this.G)};h.da=function(a,b){return T(b,this)};Zg.prototype[Ja]=function(){return Ic(this)};
function Ng(a){switch(arguments.length){case 1:return Mg(arguments[0]);case 3:return $g(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Mg(a){return $g(a,0,null)}function $g(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Zg(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.bc(),w(d)))return new Zg(null,a,b+2,d,null);b+=2}else return null;else return new Zg(null,a,b,c,null)}
function ah(a,b,c,d,e){this.Za=a;this.nodes=b;this.i=c;this.s=d;this.G=e;this.B=32374988;this.I=0}h=ah.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){var a=this.nodes,b=this.i,c=M(this.s);return bh?bh(a,b,c):Wg.call(null,a,b,c)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};
h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return K(this.s)};h.ka=function(){var a=this.nodes;var b=this.i,c=M(this.s);a=bh?bh(a,b,c):Wg.call(null,a,b,c);return null!=a?a:Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Za?this:new ah(b,this.nodes,this.i,this.s,this.G)};h.da=function(a,b){return T(b,this)};ah.prototype[Ja]=function(){return Ic(this)};
function Wg(a){switch(arguments.length){case 1:return Vg(arguments[0]);case 3:return bh(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Vg(a){return bh(a,0,null)}function bh(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.bc(),w(d)))return new ah(null,a,b+1,d,null);b+=1}else return null;else return new ah(null,a,b,c,null)}function ch(a,b){this.sa=a;this.Gd=b;this.dd=!1}
ch.prototype.la=function(){return!this.dd||this.Gd.la()};ch.prototype.next=function(){if(this.dd)return this.Gd.next();this.dd=!0;return new Pf(null,this.sa)};ch.prototype.remove=function(){return Error("Unsupported operation")};function dh(a,b,c,d,e,f){this.Za=a;this.A=b;this.root=c;this.qa=d;this.sa=e;this.G=f;this.B=16123663;this.I=139268}h=dh.prototype;h.hb=function(a,b){return null==b?this.qa?new Pf(null,this.sa):null:null==this.root?null:this.root.ac(0,xc(b),b,null)};h.toString=function(){return oc(this)};
h.keys=function(){return Ic(ug.j?ug.j(this):ug.call(null,this))};h.entries=function(){return new pg(H(H(this)))};h.values=function(){return Ic(vg.j?vg.j(this):vg.call(null,this))};h.has=function(a){return Kd(this,a)};h.get=function(a,b){return this.X(null,a,b)};
h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),g=U(f,0,null);f=U(f,1,null);a.m?a.m(f,g):a.call(null,f,g);e+=1}else if(b=H(b))Ed(b)?(c=cc(b),b=dc(b),g=c,d=Q(c),c=g):(c=K(b),g=U(c,0,null),f=U(c,1,null),a.m?a.m(f,g):a.call(null,f,g),b=M(b),c=null,d=0),e=0;else return null};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){return null==b?this.qa?this.sa:c:null==this.root?c:this.root.yb(0,xc(b),b,c)};
h.Jb=function(a,b,c){a=this.qa?b.o?b.o(c,null,this.sa):b.call(null,c,null,this.sa):c;return Qc(a)?C(a):null!=this.root?Rc(this.root.Db(b,a)):a};h.Aa=function(){var a=this.root?lc(this.root):new Re(Oe);return this.qa?new ch(this.sa,a):a};h.P=function(){return this.Za};h.$=function(){return this.A};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Mc(this)};h.T=function(a,b){return og(this,b)};h.Ib=function(){return new eh(this.root,this.A,this.qa,this.sa)};h.ba=function(){return Ab(yg,this.Za)};
h.pc=function(a,b){if(null==b)return this.qa?new dh(this.Za,this.A-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.cc(0,xc(b),b);return a===this.root?this:new dh(this.Za,this.A-1,a,this.qa,this.sa,null)};h.Ca=function(a,b,c){if(null==b)return this.qa&&c===this.sa?this:new dh(this.Za,this.qa?this.A:this.A+1,this.root,!0,c,null);a=new Eg;b=(null==this.root?Og:this.root).Ta(0,xc(b),b,c,a);return b===this.root?this:new dh(this.Za,a.D?this.A+1:this.A,b,this.qa,this.sa,null)};
h.$a=function(a,b){return null==b?this.qa:null==this.root?!1:this.root.yb(0,xc(b),b,Gd)!==Gd};h.Y=function(){if(0<this.A){var a=null!=this.root?this.root.bc():null;return this.qa?T(new Pf(null,this.sa),a):a}return null};h.S=function(a,b){return b===this.Za?this:new dh(b,this.A,this.root,this.qa,this.sa,this.G)};
h.da=function(a,b){if(Dd(b))return this.Ca(null,$a(b,0),$a(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=K(b);if(Dd(c))a=lb(a,$a(c,0),$a(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};
h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};var yg=new dh(null,0,null,!1,null,Nc);function fh(a,b){for(var c=a.length,d=0,e=Vb(yg);;)if(d<c){if(b.length<=d)throw Error(["No value supplied for key: ",B.j(a[d])].join(""));var f=d+1;e=Yb(e,a[d],b[d]);d=f}else return Xb(e)}dh.prototype[Ja]=function(){return Ic(this)};function eh(a,b,c,d){this.ca={};this.root=a;this.count=b;this.qa=c;this.sa=d;this.B=259;this.I=56}
function gh(a,b,c){if(a.ca){if(null==b)a.sa!==c&&(a.sa=c),a.qa||(a.count+=1,a.qa=!0);else{var d=new Eg;b=(null==a.root?Og:a.root).Ua(a.ca,0,xc(b),b,c,d);b!==a.root&&(a.root=b);d.D&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}h=eh.prototype;h.$=function(){if(this.ca)return this.count;throw Error("count after persistent!");};h.oa=function(a,b){return null==b?this.qa?this.sa:null:null==this.root?null:this.root.yb(0,xc(b),b)};
h.X=function(a,b,c){return null==b?this.qa?this.sa:c:null==this.root?c:this.root.yb(0,xc(b),b,c)};h.Mb=function(a,b){a:if(this.ca)if(Xf(b))a=gh(this,Yf.j?Yf.j(b):Yf.call(null,b),Zf.j?Zf.j(b):Zf.call(null,b));else if(Dd(b))a=gh(this,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));else for(a=H(b),b=this;;){var c=K(a);if(w(c))a=M(a),b=gh(b,Yf.j?Yf.j(c):Yf.call(null,c),Zf.j?Zf.j(c):Zf.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
h.Yb=function(){if(this.ca){this.ca=null;var a=new dh(null,this.count,this.root,this.qa,this.sa,null)}else throw Error("persistent! called twice");return a};h.Lb=function(a,b,c){return gh(this,b,c)};h.Wc=function(a,b){if(this.ca)null==b?this.qa&&(this.qa=!1,this.sa=null,--this.count):null!=this.root&&(a=new Eg,b=this.root.dc(this.ca,0,xc(b),b,a),b!==this.root&&(this.root=b),a.D&&--this.count);else throw Error("dissoc! after persistent!");return this};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};function hh(a,b,c){for(var d=b;;)if(null!=a)b=c?a.left:a.right,d=kd.m(d,a),a=b;else return d}
function ih(a,b,c,d,e){this.Za=a;this.stack=b;this.Bb=c;this.A=d;this.G=e;this.B=32374990;this.I=0}h=ih.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Za};h.ea=function(){var a=K(this.stack);a=hh(this.Bb?a.right:a.left,M(this.stack),this.Bb);return null==a?null:new ih(null,a,this.Bb,this.A-1,null)};h.$=function(){return 0>this.A?Q(M(this))+1:this.A};
h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){var a=this.stack;return null==a?null:ub(a)};h.ka=function(){var a=K(this.stack);a=hh(this.Bb?a.right:a.left,M(this.stack),this.Bb);return null!=a?new ih(null,a,this.Bb,this.A-1,null):Gc};h.Y=function(){return this};
h.S=function(a,b){return b===this.Za?this:new ih(b,this.stack,this.Bb,this.A,this.G)};h.da=function(a,b){return T(b,this)};ih.prototype[Ja]=function(){return Ic(this)};function jh(a,b,c){return new ih(null,hh(a,null,b),b,c,null)}function kh(a,b,c,d){return c instanceof lh?c.left instanceof lh?new lh(c.key,c.D,c.left.eb(),new mh(a,b,c.right,d)):c.right instanceof lh?new lh(c.right.key,c.right.D,new mh(c.key,c.D,c.left,c.right.left),new mh(a,b,c.right.right,d)):new mh(a,b,c,d):new mh(a,b,c,d)}
function nh(a,b,c,d){return d instanceof lh?d.right instanceof lh?new lh(d.key,d.D,new mh(a,b,c,d.left),d.right.eb()):d.left instanceof lh?new lh(d.left.key,d.left.D,new mh(a,b,c,d.left.left),new mh(d.key,d.D,d.left.right,d.right)):new mh(a,b,c,d):new mh(a,b,c,d)}
function oh(a,b,c,d){if(c instanceof lh)return new lh(a,b,c.eb(),d);if(d instanceof mh)return nh(a,b,c,d.hc());if(d instanceof lh&&d.left instanceof mh)return new lh(d.left.key,d.left.D,new mh(a,b,c,d.left.left),nh(d.key,d.D,d.left.right,d.right.hc()));throw Error("red-black tree invariant violation");}
function ph(a,b,c,d){if(d instanceof lh)return new lh(a,b,c,d.eb());if(c instanceof mh)return kh(a,b,c.hc(),d);if(c instanceof lh&&c.right instanceof mh)return new lh(c.right.key,c.right.D,kh(c.key,c.D,c.left.hc(),c.right.left),new mh(a,b,c.right.right,d));throw Error("red-black tree invariant violation");}
var qh=function qh(a,b,c){var e=null!=a.left?function(){var k=a.left;return qh.o?qh.o(k,b,c):qh.call(null,k,b,c)}():c;if(Qc(e))return e;var f=function(){var k=a.key,l=a.D;return b.o?b.o(e,k,l):b.call(null,e,k,l)}();if(Qc(f))return f;if(null!=a.right){var g=a.right;return qh.o?qh.o(g,b,f):qh.call(null,g,b,f)}return f};function mh(a,b,c,d){this.key=a;this.D=b;this.left=c;this.right=d;this.G=null;this.B=166619935;this.I=0}h=mh.prototype;
h.hb=function(a,b){switch(b){case 0:return new Pf(0,this.key);case 1:return new Pf(1,this.D);default:return null}};h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();h.pd=function(a){return a.rd(this)};h.hc=function(){return new lh(this.key,this.D,this.left,this.right)};h.eb=function(){return this};h.od=function(a){return a.qd(this)};h.replace=function(a,b,c,d){return new mh(a,b,c,d)};
h.qd=function(a){return new mh(a.key,a.D,this,a.right)};h.rd=function(a){return new mh(a.key,a.D,a.left,this)};h.Db=function(a,b){return qh(this,a,b)};h.oa=function(a,b){return this.ga(null,b,null)};h.X=function(a,b,c){return this.ga(null,b,c)};h.V=function(a,b){if(0===b)return this.key;if(1===b)return this.D;throw Error("Index out of bounds");};h.ga=function(a,b,c){return 0===b?this.key:1===b?this.D:c};h.Sa=function(a,b,c){return(new X(null,2,5,Z,[this.key,this.D],null)).Sa(null,b,c)};h.P=function(){return null};
h.$=function(){return 2};h.Pc=function(){return this.key};h.Qc=function(){return this.D};h.ib=function(){return this.D};h.jb=function(){return new X(null,1,5,Z,[this.key],null)};h.wb=function(){return new J([this.D,this.key],0,null)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return null};h.ha=function(a,b){return Tc(this,b)};h.ia=function(a,b,c){return Uc(this,b,c)};
h.Ca=function(a,b,c){return V.o(new X(null,2,5,Z,[this.key,this.D],null),b,c)};h.$a=function(a,b){return 0===b||1===b};h.Y=function(){return new J([this.key,this.D],0,null)};h.S=function(a,b){return Ab(new X(null,2,5,Z,[this.key,this.D],null),b)};h.da=function(a,b){return new X(null,3,5,Z,[this.key,this.D,b],null)};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.V(null,a)};h.m=function(a,b){return this.ga(null,a,b)};mh.prototype[Ja]=function(){return Ic(this)};
function lh(a,b,c,d){this.key=a;this.D=b;this.left=c;this.right=d;this.G=null;this.B=166619935;this.I=0}h=lh.prototype;h.hb=function(a,b){switch(b){case 0:return new Pf(0,this.key);case 1:return new Pf(1,this.D);default:return null}};h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();h.pd=function(a){return new lh(this.key,this.D,this.left,a)};h.hc=function(){throw Error("red-black tree invariant violation");};h.eb=function(){return new mh(this.key,this.D,this.left,this.right)};
h.od=function(a){return new lh(this.key,this.D,a,this.right)};h.replace=function(a,b,c,d){return new lh(a,b,c,d)};h.qd=function(a){return this.left instanceof lh?new lh(this.key,this.D,this.left.eb(),new mh(a.key,a.D,this.right,a.right)):this.right instanceof lh?new lh(this.right.key,this.right.D,new mh(this.key,this.D,this.left,this.right.left),new mh(a.key,a.D,this.right.right,a.right)):new mh(a.key,a.D,this,a.right)};
h.rd=function(a){return this.right instanceof lh?new lh(this.key,this.D,new mh(a.key,a.D,a.left,this.left),this.right.eb()):this.left instanceof lh?new lh(this.left.key,this.left.D,new mh(a.key,a.D,a.left,this.left.left),new mh(this.key,this.D,this.left.right,this.right)):new mh(a.key,a.D,a.left,this)};h.Db=function(a,b){return qh(this,a,b)};h.oa=function(a,b){return this.ga(null,b,null)};h.X=function(a,b,c){return this.ga(null,b,c)};
h.V=function(a,b){if(0===b)return this.key;if(1===b)return this.D;throw Error("Index out of bounds");};h.ga=function(a,b,c){return 0===b?this.key:1===b?this.D:c};h.Sa=function(a,b,c){return(new X(null,2,5,Z,[this.key,this.D],null)).Sa(null,b,c)};h.P=function(){return null};h.$=function(){return 2};h.Pc=function(){return this.key};h.Qc=function(){return this.D};h.ib=function(){return this.D};h.jb=function(){return new X(null,1,5,Z,[this.key],null)};
h.wb=function(){return new J([this.D,this.key],0,null)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return null};h.ha=function(a,b){return Tc(this,b)};h.ia=function(a,b,c){return Uc(this,b,c)};h.Ca=function(a,b,c){return V.o(new X(null,2,5,Z,[this.key,this.D],null),b,c)};h.$a=function(a,b){return 0===b||1===b};h.Y=function(){return new J([this.key,this.D],0,null)};
h.S=function(a,b){return Ab(new X(null,2,5,Z,[this.key,this.D],null),b)};h.da=function(a,b){return new X(null,3,5,Z,[this.key,this.D,b],null)};h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.V(null,a)};
h.m=function(a,b){return this.ga(null,a,b)};lh.prototype[Ja]=function(){return Ic(this)};
var rh=function rh(a,b,c,d,e){if(null==b)return new lh(c,d,null,null);var g=function(){var k=b.key;return a.m?a.m(c,k):a.call(null,c,k)}();if(0===g)return e[0]=b,null;if(0>g)return g=function(){var k=b.left;return rh.O?rh.O(a,k,c,d,e):rh.call(null,a,k,c,d,e)}(),null!=g?b.od(g):null;g=function(){var k=b.right;return rh.O?rh.O(a,k,c,d,e):rh.call(null,a,k,c,d,e)}();return null!=g?b.pd(g):null},sh=function sh(a,b){if(null==a)return b;if(null==b)return a;if(a instanceof lh){if(b instanceof lh){var d=function(){var e=
a.right,f=b.left;return sh.m?sh.m(e,f):sh.call(null,e,f)}();return d instanceof lh?new lh(d.key,d.D,new lh(a.key,a.D,a.left,d.left),new lh(b.key,b.D,d.right,b.right)):new lh(a.key,a.D,a.left,new lh(b.key,b.D,d,b.right))}return new lh(a.key,a.D,a.left,function(){var e=a.right;return sh.m?sh.m(e,b):sh.call(null,e,b)}())}if(b instanceof lh)return new lh(b.key,b.D,function(){var e=b.left;return sh.m?sh.m(a,e):sh.call(null,a,e)}(),b.right);d=function(){var e=a.right,f=b.left;return sh.m?sh.m(e,f):sh.call(null,
e,f)}();return d instanceof lh?new lh(d.key,d.D,new mh(a.key,a.D,a.left,d.left),new mh(b.key,b.D,d.right,b.right)):oh(a.key,a.D,a.left,new mh(b.key,b.D,d,b.right))},th=function th(a,b,c,d){if(null!=b){var f=function(){var g=b.key;return a.m?a.m(c,g):a.call(null,c,g)}();if(0===f)return d[0]=b,sh(b.left,b.right);if(0>f)return f=function(){var g=b.left;return th.K?th.K(a,g,c,d):th.call(null,a,g,c,d)}(),null!=f||null!=d[0]?b.left instanceof mh?oh(b.key,b.D,f,b.right):new lh(b.key,b.D,f,b.right):null;
f=function(){var g=b.right;return th.K?th.K(a,g,c,d):th.call(null,a,g,c,d)}();return null!=f||null!=d[0]?b.right instanceof mh?ph(b.key,b.D,b.left,f):new lh(b.key,b.D,b.left,f):null}return null},uh=function uh(a,b,c,d){var f=b.key,g=a.m?a.m(c,f):a.call(null,c,f);return 0===g?b.replace(f,d,b.left,b.right):0>g?b.replace(f,b.D,function(){var k=b.left;return uh.K?uh.K(a,k,c,d):uh.call(null,a,k,c,d)}(),b.right):b.replace(f,b.D,b.left,function(){var k=b.right;return uh.K?uh.K(a,k,c,d):uh.call(null,a,k,
c,d)}())};function vh(a,b,c,d,e){this.Ra=a;this.sb=b;this.A=c;this.Za=d;this.G=e;this.B=418776847;this.I=8192}h=vh.prototype;h.hb=function(a,b){return wh(this,b)};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),g=U(f,0,null);f=U(f,1,null);a.m?a.m(f,g):a.call(null,f,g);e+=1}else if(b=H(b))Ed(b)?(c=cc(b),b=dc(b),g=c,d=Q(c),c=g):(c=K(b),g=U(c,0,null),f=U(c,1,null),a.m?a.m(f,g):a.call(null,f,g),b=M(b),c=null,d=0),e=0;else return null};
h.get=function(a,b){return this.X(null,a,b)};h.entries=function(){return new pg(H(H(this)))};h.toString=function(){return oc(this)};h.keys=function(){return Ic(ug.j?ug.j(this):ug.call(null,this))};h.values=function(){return Ic(vg.j?vg.j(this):vg.call(null,this))};function wh(a,b){for(var c=a.sb;;)if(null!=c){var d=c.key;d=a.Ra.m?a.Ra.m(b,d):a.Ra.call(null,b,d);if(0===d)return c;c=0>d?c.left:c.right}else return null}h.has=function(a){return Kd(this,a)};h.oa=function(a,b){return this.X(null,b,null)};
h.X=function(a,b,c){a=wh(this,b);return null!=a?a.D:c};h.Jb=function(a,b,c){return null!=this.sb?Rc(qh(this.sb,b,c)):c};h.P=function(){return this.Za};h.$=function(){return this.A};h.wb=function(){return 0<this.A?jh(this.sb,!1,this.A):null};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Mc(this)};h.T=function(a,b){return og(this,b)};h.ba=function(){return new vh(this.Ra,null,0,this.Za,0)};
h.pc=function(a,b){a=[null];b=th(this.Ra,this.sb,b,a);return null==b?null==$c(a,0)?this:new vh(this.Ra,null,0,this.Za,null):new vh(this.Ra,b.eb(),this.A-1,this.Za,null)};h.Ca=function(a,b,c){a=[null];var d=rh(this.Ra,this.sb,b,c,a);return null==d?(a=$c(a,0),O.m(c,a.D)?this:new vh(this.Ra,uh(this.Ra,this.sb,b,c),this.A,this.Za,null)):new vh(this.Ra,d.eb(),this.A+1,this.Za,null)};h.$a=function(a,b){return null!=wh(this,b)};h.Y=function(){return 0<this.A?jh(this.sb,!0,this.A):null};
h.S=function(a,b){return b===this.Za?this:new vh(this.Ra,this.sb,this.A,b,this.G)};h.da=function(a,b){if(Dd(b))return this.Ca(null,$a(b,0),$a(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=K(b);if(Dd(c))a=lb(a,$a(c,0),$a(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};var xh=new vh(Ld,null,0,null,Nc);vh.prototype[Ja]=function(){return Ic(this)};
function yh(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;a:for(b=H(0<b.length?new J(b.slice(0),0,null):null),d=xh;;)if(b)c=M(M(b)),d=V.o(d,K(b),id(b)),b=c;else break a;return d}function zh(a,b){this.W=a;this.Ya=b;this.B=32374988;this.I=0}h=zh.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Ya};h.ea=function(){var a=(null!=this.W?this.W.B&128||t===this.W.Xb||(this.W.B?0:x(eb,this.W)):x(eb,this.W))?this.W.ea(null):M(this.W);return null==a?null:new zh(a,null)};h.U=function(){return Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return this.W.ja(null).key};h.ka=function(){var a=(null!=this.W?this.W.B&128||t===this.W.Xb||(this.W.B?0:x(eb,this.W)):x(eb,this.W))?this.W.ea(null):M(this.W);return null!=a?new zh(a,null):Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Ya?this:new zh(this.W,b)};h.da=function(a,b){return T(b,this)};zh.prototype[Ja]=function(){return Ic(this)};
function ug(a){return(a=H(a))?new zh(a,null):null}function Yf(a){return pb(a)}function Ah(a,b){this.W=a;this.Ya=b;this.B=32374988;this.I=0}h=Ah.prototype;h.toString=function(){return oc(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.P=function(){return this.Ya};h.ea=function(){var a=(null!=this.W?this.W.B&128||t===this.W.Xb||(this.W.B?0:x(eb,this.W)):x(eb,this.W))?this.W.ea(null):M(this.W);return null==a?null:new Ah(a,null)};h.U=function(){return Kc(this)};
h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};h.ia=function(a,b,c){return hd(b,c,this)};h.ja=function(){return this.W.ja(null).D};h.ka=function(){var a=(null!=this.W?this.W.B&128||t===this.W.Xb||(this.W.B?0:x(eb,this.W)):x(eb,this.W))?this.W.ea(null):M(this.W);return null!=a?new Ah(a,null):Gc};h.Y=function(){return this};h.S=function(a,b){return b===this.Ya?this:new Ah(this.W,b)};h.da=function(a,b){return T(b,this)};Ah.prototype[Ja]=function(){return Ic(this)};
function vg(a){return(a=H(a))?new Ah(a,null):null}function Zf(a){return qb(a)}var Bh=function Bh(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Bh.C(0<c.length?new J(c.slice(0),0,null):null)};Bh.C=function(a){return w(We(Td,a))?Oa.m(function(b,c){return kd.m(w(b)?b:Oe,c)},a):null};Bh.H=0;Bh.J=function(a){return this.C(H(a))};function Ch(a,b){var c=Oe;for(b=H(b);;)if(b){var d=K(b),e=Bc(a,d,Dh);c=O.m(e,Dh)?c:V.o(c,d,e);b=M(b)}else return Ab(c,vd(a))}
function Eh(a){this.Qb=a}Eh.prototype.la=function(){return this.Qb.la()};Eh.prototype.next=function(){if(this.Qb.la())return this.Qb.next().key;throw Error("No such element");};Eh.prototype.remove=function(){return Error("Unsupported operation")};function Fh(a,b,c){this.Za=a;this.qb=b;this.G=c;this.B=15077647;this.I=139268}h=Fh.prototype;h.toString=function(){return oc(this)};h.keys=function(){return Ic(H(this))};h.entries=function(){return new qg(H(H(this)))};h.values=function(){return Ic(H(this))};
h.has=function(a){return Kd(this,a)};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e),g=U(f,0,null);f=U(f,1,null);a.m?a.m(f,g):a.call(null,f,g);e+=1}else if(b=H(b))Ed(b)?(c=cc(b),b=dc(b),g=c,d=Q(c),c=g):(c=K(b),g=U(c,0,null),f=U(c,1,null),a.m?a.m(f,g):a.call(null,f,g),b=M(b),c=null,d=0),e=0;else return null};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){a=mb(this.qb,b);return w(a)?pb(a):c};h.Aa=function(){return new Eh(lc(this.qb))};h.P=function(){return this.Za};
h.$=function(){return Ua(this.qb)};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Mc(this)};h.T=function(a,b){if(a=zd(b))if(a=Q(this)===Q(b))try{return Sd(function(c,d){return(c=Kd(b,d))?c:new Pc(!1)},!0,this.qb)}catch(c){if(c instanceof Error)return!1;throw c;}else return a;else return a};h.Ib=function(){return new Gh(Vb(this.qb))};h.ba=function(){return Ab(Hh,this.Za)};h.ud=function(a,b){return new Fh(this.Za,ob(this.qb,b),null)};h.Y=function(){return ug(this.qb)};
h.S=function(a,b){return b===this.Za?this:new Fh(b,this.qb,this.G)};h.da=function(a,b){return new Fh(this.Za,V.o(this.qb,b,null),null)};h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return this.oa(null,a)};h.m=function(a,b){return this.X(null,a,b)};
var Hh=new Fh(null,Oe,Nc);function Ih(a){for(var b=a.length,c=Vb(Hh),d=0;;)if(d<b)Wb(c,a[d]),d+=1;else break;return Xb(c)}Fh.prototype[Ja]=function(){return Ic(this)};function Gh(a){this.Eb=a;this.I=136;this.B=259}h=Gh.prototype;h.Mb=function(a,b){this.Eb=Yb(this.Eb,b,null);return this};h.Yb=function(){return new Fh(null,Xb(this.Eb),null)};h.$=function(){return Q(this.Eb)};h.oa=function(a,b){return this.X(null,b,null)};h.X=function(a,b,c){return hb(this.Eb,b,Gd)===Gd?c:b};
h.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.j=function(a){return hb(this.Eb,a,Gd)===Gd?null:a};h.m=function(a,b){return hb(this.Eb,a,Gd)===Gd?b:a};
function Jh(a){if(zd(a))return ud(a,null);a=H(a);if(null==a)return Hh;if(a instanceof J&&0===a.i)return Ih(a.v);for(var b=Vb(Hh);;)if(null!=a){var c=M(a);b=Wb(b,cb(a));a=c}else return Xb(b)}function Kh(a){for(var b=ld;;)if(M(a))b=kd.m(b,K(a)),a=M(a);else return H(b)}function oe(a){if(null!=a&&(a.I&4096||t===a.qc))return a.Vb(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.j(a)].join(""));}
function Lh(a,b){var c=Vb(Oe);a=H(a);for(b=H(b);;)if(a&&b){var d=K(a),e=K(b);c=Yb(c,d,e);a=M(a);b=M(b)}else return Xb(c)}var Mh=function Mh(a){switch(arguments.length){case 2:return Mh.m(arguments[0],arguments[1]);case 3:return Mh.o(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Mh.C(arguments[0],arguments[1],arguments[2],3<c.length?new J(c.slice(3),0,null):null)}};Mh.m=function(a,b){return b};
Mh.o=function(a,b,c){return(a.j?a.j(b):a.call(null,b))>(a.j?a.j(c):a.call(null,c))?b:c};Mh.C=function(a,b,c,d){return Oa.o(function(e,f){return Mh.o(a,e,f)},Mh.o(a,b,c),d)};Mh.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);d=M(d);return this.C(b,a,c,d)};Mh.H=3;function Nh(){this.v=[]}Nh.prototype.add=function(a){return this.v.push(a)};Nh.prototype.size=function(){return this.v.length};Nh.prototype.clear=function(){return this.v=[]};
function Oh(){return function(a){var b=new Nh;return function(){function c(g,k){b.add(k);return 2===b.size()?(k=Wf(b.v),b.clear(),a.m?a.m(g,k):a.call(null,g,k)):g}function d(g){if(!w(0===b.v.length)){var k=Wf(b.v);b.clear();g=Rc(a.m?a.m(g,k):a.call(null,g,k))}return a.j?a.j(g):a.call(null,g)}function e(){return a.F?a.F():a.call(null)}var f=null;f=function(g,k){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,g);case 2:return c.call(this,g,k)}throw Error("Invalid arity: "+
arguments.length);};f.F=e;f.j=d;f.m=c;return f}()}}function Ph(a,b,c){return new pe(null,function(){var d=H(c);return d?T(lf.m(a,d),Ph(a,b,mf(b,d))):null},null,null)}function Qh(a,b,c){this.start=a;this.step=b;this.count=c;this.B=82;this.I=0}h=Qh.prototype;h.$=function(){return this.count};h.ja=function(){return this.start};h.V=function(a,b){return this.start+b*this.step};h.ga=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c};
h.Oc=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new Qh(this.start+this.step,this.step,this.count-1)};function Rh(a,b,c){this.i=a;this.end=b;this.step=c}Rh.prototype.la=function(){return 0<this.step?this.i<this.end:this.i>this.end};Rh.prototype.next=function(){var a=this.i;this.i+=this.step;return a};function Sh(a,b,c,d,e,f){this.Za=a;this.start=b;this.end=c;this.step=d;this.A=e;this.G=f;this.B=32375006;this.I=402944}h=Sh.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();h.V=function(a,b){if(0<=b&&b<this.$(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};
h.ga=function(a,b,c){return 0<=b&&b<this.$(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c};h.Aa=function(){return new Rh(this.start,this.end,this.step)};h.P=function(){return this.Za};
h.ea=function(){return 0<this.step?this.start+this.step<this.end?new Sh(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null:this.start+this.step>this.end?new Sh(null,this.start+this.step,this.end,this.step,Math.ceil((this.end-(this.start+this.step))/this.step),null):null};h.$=function(){return this.A};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};
h.ha=function(a,b){return Tc(this,b)};h.ia=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.m?b.m(c,a):b.call(null,c,a);if(Qc(c))return C(c);a+=this.step}else return c};h.ja=function(){return this.start};h.ka=function(){var a=this.ea(null);return null==a?Gc:a};h.Y=function(){return this};h.Tb=function(){var a=this.A;return new Qh(this.start,this.step,32>a?a:32)};
h.ub=function(){if(32>=this.A)return Gc;var a=this.start+32*this.step;return 0<this.step?this.end<=a?Gc:new Sh(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):0>this.step?this.end>=a?Gc:new Sh(null,a,this.end,this.step,Math.ceil((this.end-a)/this.step),null):this.end===a?Gc:pf(a)};h.S=function(a,b){return b===this.Za?this:new Sh(b,this.start,this.end,this.step,this.A,this.G)};h.da=function(a,b){return T(b,this)};
h.gb=function(a,b){return 0<b?b<this.A?new Sh(null,this.start+this.step*b,this.end,this.step,this.A-b,null):null:this};h.oc=function(){return H(this.ub(null))};Sh.prototype[Ja]=function(){return Ic(this)};function Th(a,b,c,d,e,f,g){this.Za=a;this.start=b;this.end=c;this.step=d;this.na=e;this.mc=f;this.G=g;this.I=140800;this.B=32374988}h=Th.prototype;h.toString=function(){return oc(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return P(this,b,0)};a.m=function(b,c){return P(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return S(this,c,Q(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return S(this,c,d)};return b}();
function Uh(a){if(null==a.na){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];a:{var c=0;for(var d=a.start;;)if(32>c){if(b[c]=d,c+=1,d+=a.step,!(0<a.step?d<a.end:d>a.end)){c=a.na=new se(b,0,c);break a}}else{c=d;break a}}null==a.na&&(a.na=new se(b,0,32),(0<a.step?c<a.end:c>a.end)&&(a.mc=new Th(null,c,a.end,a.step,null,null,null)))}}
h.Aa=function(){return new Rh(this.start,this.end,this.step)};h.P=function(){return this.Za};h.ea=function(){return 0<this.step?this.start+this.step<this.end?new Th(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new Th(null,this.start+this.step,this.end,this.step,null,null,null):null};h.U=function(){var a=this.G;return null!=a?a:this.G=a=Kc(this)};h.T=function(a,b){return dd(this,b)};h.ba=function(){return Gc};h.ha=function(a,b){return fd(b,this)};
h.ia=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.m?b.m(c,a):b.call(null,c,a);if(Qc(c))return C(c);a+=this.step}else return c};h.ja=function(){return this.start};h.ka=function(){var a=this.ea(null);return null==a?Gc:a};h.Y=function(){return this};h.Tb=function(){Uh(this);return this.na};h.ub=function(){Uh(this);return null==this.mc?Gc:this.mc};h.S=function(a,b){return b===this.Za?this:new Th(b,this.start,this.end,this.step,this.na,this.mc,this.G)};
h.da=function(a,b){return T(b,this)};h.oc=function(){return H(this.ub(null))};Th.prototype[Ja]=function(){return Ic(this)};function Vh(a,b){return b<=a?Gc:Jd(a)&&Jd(b)&&Jd(1)?new Sh(null,a,b,1,Math.ceil(b-a),null):new Th(null,a,b,1,null,null,null)}
function Wh(){return function(){function a(g,k,l){return new X(null,2,5,Z,[Kh.o?Kh.o(g,k,l):Kh.call(null,g,k,l),jd.o?jd.o(g,k,l):jd.call(null,g,k,l)],null)}function b(g,k){return new X(null,2,5,Z,[Kh.m?Kh.m(g,k):Kh.call(null,g,k),jd.m?jd.m(g,k):jd.call(null,g,k)],null)}function c(g){return new X(null,2,5,Z,[Kh.j?Kh.j(g):Kh.call(null,g),jd.j?jd.j(g):jd.call(null,g)],null)}function d(){return new X(null,2,5,Z,[Kh.F?Kh.F():Kh.call(null),jd.F?jd.F():jd.call(null)],null)}var e=null,f=function(){function g(l,
m,n,p){var r=null;if(3<arguments.length){r=0;for(var u=Array(arguments.length-3);r<u.length;)u[r]=arguments[r+3],++r;r=new J(u,0,null)}return k.call(this,l,m,n,r)}function k(l,m,n,p){return new X(null,2,5,Z,[Le(Kh,l,m,n,p),Le(jd,l,m,n,p)],null)}g.H=3;g.J=function(l){var m=K(l);l=M(l);var n=K(l);l=M(l);var p=K(l);l=Fc(l);return k(m,n,p,l)};g.C=k;return g}();e=function(g,k,l,m){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,g);case 2:return b.call(this,g,k);case 3:return a.call(this,
g,k,l);default:var n=null;if(3<arguments.length){n=0;for(var p=Array(arguments.length-3);n<p.length;)p[n]=arguments[n+3],++n;n=new J(p,0,null)}return f.C(g,k,l,n)}throw Error("Invalid arity: "+arguments.length);};e.H=3;e.J=f.J;e.F=d;e.j=c;e.m=b;e.o=a;e.C=f.C;return e}()}function Xh(a){for(;;)if(a=H(a))a=M(a);else break}function ij(a){Xh(a);return a}
function Yh(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&O.m(a[0],b)?1===a.length?a[0]:Wf(a):null;throw new TypeError("re-matches must match against a string.");}function Zh(a,b){if("string"===typeof b)return a=a.exec(b),null==a?null:1===a.length?a[0]:Wf(a);throw new TypeError("re-find must match against a string.");}
var $h=function $h(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:Wf(d);return T(f,new pe(null,function(){var g=e.length;g=d.index+(1>g?1:g);return g<=b.length?(g=b.substring(g),$h.m?$h.m(a,g):$h.call(null,a,g)):null},null,null))};
function ai(a,b,c,d,e,f,g){var k=wa;wa=null==wa?null:wa-1;try{if(null!=wa&&0>wa)return Pb(a,"#");Pb(a,c);if(0===Ca.j(f))H(g)&&Pb(a,function(){var u=bi.j(f);return w(u)?u:"..."}());else{if(H(g)){var l=K(g);b.o?b.o(l,a,f):b.call(null,l,a,f)}for(var m=M(g),n=Ca.j(f)-1;;)if(!m||null!=n&&0===n){H(m)&&0===n&&(Pb(a,d),Pb(a,function(){var u=bi.j(f);return w(u)?u:"..."}()));break}else{Pb(a,d);var p=K(m);c=a;g=f;b.o?b.o(p,c,g):b.call(null,p,c,g);var r=M(m);c=n-1;m=r;n=c}}return Pb(a,e)}finally{wa=k}}
function ci(a,b){b=H(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e);Pb(a,f);e+=1}else if(b=H(b))c=b,Ed(c)?(b=cc(c),d=dc(c),c=b,f=Q(b),b=d,d=f):(f=K(c),Pb(a,f),b=M(c),c=null,d=0),e=0;else return null}function di(a){if(null==ua)throw Error("No *print-fn* fn set for evaluation environment");ua.call(null,a)}var ei={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};
function fi(a){return['"',B.j(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return ei[b]})),'"'].join("")}function gi(a,b){return(a=Hd(F(a,Aa)))?(a=null!=b?b.B&131072||t===b.Rc?!0:!1:!1)?null!=vd(b):a:a}
function hi(a,b,c){if(null==a)return Pb(b,"nil");if(gi(c,a)){Pb(b,"^");var d=vd(a);ii.o?ii.o(d,b,c):ii.call(null,d,b,c);Pb(b," ")}if(a.xd)return a.pe(a,b,c);if(null!=a?a.B&2147483648||t===a.aa||(a.B?0:x(Qb,a)):x(Qb,a))return Rb(a,b,c);if(!0===a||!1===a)return Pb(b,B.j(a));if("number"===typeof a)return Pb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.j(a));if(null!=a&&a.constructor===Object)return Pb(b,"#js "),d=kf.m(function(f){return new Pf(null!=
Yh(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,f)?ne.j(f):f,a[f])},ha(a)),ji.K?ji.K(d,ii,b,c):ji.call(null,d,ii,b,c);if(Ea(a))return ai(b,ii,"#js ["," ","]",c,a);if("string"===typeof a)return w(za.j(c))?Pb(b,fi(a)):Pb(b,a);if("function"===typeof a){var e=a.name;c=w(function(){var f=null==e;return f?f:fa(e)}())?"Function":e;return ci(b,ed(["#object[",c,w(!1)?[' "',B.j(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,g){for(f=B.j(f);;)if(f.length<g)f=["0",f].join("");else return f},ci(b,
ed(['#inst "',c(a.getUTCFullYear(),4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return ci(b,ed(['#"',a.source,'"']));if("symbol"===q(a)||"undefined"!==typeof Symbol&&a instanceof Symbol)return ci(b,ed(["#object[",a.toString(),"]"]));if(w(function(){var f=null==a?null:a.constructor;return null==f?null:f.wc}()))return ci(b,ed(["#object[",a.constructor.wc.replace(RegExp("/",
"g"),"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:fa(e)}())?"Object":e;return null==a.constructor?ci(b,ed(["#object[",c,"]"])):ci(b,ed(["#object[",c," ",B.j(a),"]"]))}function ii(a,b,c){var d=ki.j(c);return w(d)?(c=V.o(c,li,hi),d.o?d.o(a,b,c):d.call(null,a,b,c)):hi(a,b,c)}
function mi(a,b){if(xd(a))b="";else{var c=B,d=c.j,e=new ta,f=new nc(e);ii(K(a),f,b);a=H(M(a));for(var g=null,k=0,l=0;;)if(l<k){var m=g.V(null,l);Pb(f," ");ii(m,f,b);l+=1}else if(a=H(a))g=a,Ed(g)?(a=cc(g),k=dc(g),g=a,m=Q(a),a=k,k=m):(m=K(g),Pb(f," "),ii(m,f,b),a=M(g),g=null,k=0),l=0;else break;b=d.call(c,e)}return b}function oi(a){return a instanceof E?Cc.m(null,oe(a)):ne.m(null,oe(a))}
function pi(a){if(w(!1)){var b=H(a),c=H(b),d=K(c);M(c);U(d,0,null);U(d,1,null);c=nd(a);for(a=null;;){d=a;b=H(b);a=K(b);var e=M(b),f=a;a=U(f,0,null);b=U(f,1,null);if(w(f))if(a instanceof G||a instanceof E)if(w(d))if(O.m(d,le(a)))c=V.o(c,oi(a),b),a=d,b=e;else return null;else if(d=le(a),w(d))c=V.o(c,oi(a),b),a=d,b=e;else return null;else return null;else return new X(null,2,5,Z,[d,c],null)}}else return null}
function qi(a,b,c,d,e){return ai(d,function(f,g,k){var l=pb(f);c.o?c.o(l,g,k):c.call(null,l,g,k);Pb(g," ");f=qb(f);return c.o?c.o(f,g,k):c.call(null,f,g,k)},[B.j(a),"{"].join(""),", ","}",e,H(b))}function ji(a,b,c,d){var e=Bd(a)?pi(a):null,f=U(e,0,null);e=U(e,1,null);return w(f)?qi(["#:",B.j(f)].join(""),e,b,c,d):qi(null,a,b,c,d)}jf.prototype.aa=t;jf.prototype.R=function(a,b,c){Pb(b,"#object[cljs.core.Volatile ");ii(new v(null,1,[ri,this.state],null),b,c);return Pb(b,"]")};J.prototype.aa=t;
J.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};pe.prototype.aa=t;pe.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};Pf.prototype.aa=t;Pf.prototype.R=function(a,b,c){return ai(b,ii,"["," ","]",c,this)};ih.prototype.aa=t;ih.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};Zg.prototype.aa=t;Zg.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};mh.prototype.aa=t;mh.prototype.R=function(a,b,c){return ai(b,ii,"["," ","]",c,this)};
sg.prototype.aa=t;sg.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};Jc.prototype.aa=t;Jc.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};ag.prototype.aa=t;ag.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};ie.prototype.aa=t;ie.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};cd.prototype.aa=t;cd.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};Sh.prototype.aa=t;
Sh.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};dh.prototype.aa=t;dh.prototype.R=function(a,b,c){return ji(this,ii,b,c)};ah.prototype.aa=t;ah.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};cg.prototype.aa=t;cg.prototype.R=function(a,b,c){return ai(b,ii,"["," ","]",c,this)};vh.prototype.aa=t;vh.prototype.R=function(a,b,c){return ji(this,ii,b,c)};Fh.prototype.aa=t;Fh.prototype.R=function(a,b,c){return ai(b,ii,"#{"," ","}",c,this)};ue.prototype.aa=t;
ue.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};bf.prototype.aa=t;bf.prototype.R=function(a,b,c){Pb(b,"#object[cljs.core.Atom ");ii(new v(null,1,[ri,this.state],null),b,c);return Pb(b,"]")};Ah.prototype.aa=t;Ah.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};lh.prototype.aa=t;lh.prototype.R=function(a,b,c){return ai(b,ii,"["," ","]",c,this)};of.prototype.aa=t;of.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};X.prototype.aa=t;
X.prototype.R=function(a,b,c){return ai(b,ii,"["," ","]",c,this)};jg.prototype.aa=t;jg.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};fe.prototype.aa=t;fe.prototype.R=function(a,b){return Pb(b,"()")};kg.prototype.aa=t;kg.prototype.R=function(a,b,c){return ai(b,ii,"#queue ["," ","]",c,H(this))};v.prototype.aa=t;v.prototype.R=function(a,b,c){return ji(this,ii,b,c)};Th.prototype.aa=t;Th.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};zh.prototype.aa=t;
zh.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};md.prototype.aa=t;md.prototype.R=function(a,b,c){return ai(b,ii,"("," ",")",c,this)};E.prototype.vb=t;E.prototype.ab=function(a,b){if(b instanceof E)return zc(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};G.prototype.vb=t;G.prototype.ab=function(a,b){if(b instanceof G)return je(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};cg.prototype.vb=t;
cg.prototype.ab=function(a,b){if(Dd(b))return Md(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};X.prototype.vb=t;X.prototype.ab=function(a,b){if(Dd(b))return Md(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};Pf.prototype.vb=t;Pf.prototype.ab=function(a,b){if(Dd(b))return Md(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};mh.prototype.vb=t;
mh.prototype.ab=function(a,b){if(Dd(b))return Md(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};lh.prototype.vb=t;lh.prototype.ab=function(a,b){if(Dd(b))return Md(this,b);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};function ui(a){this.f=a;this.value=null;this.B=2147516416;this.I=1}ui.prototype.ya=function(){w(this.f)&&(this.value=this.f.F?this.f.F():this.f.call(null),this.f=null);return this.value};
ui.prototype.R=function(a,b,c){Pb(b,"#object[cljs.core.Delay ");ii(new v(null,2,[vi,null==this.f?wi:xi,ri,this.value],null),b,c);return Pb(b,"]")};function yi(a){return a instanceof ui?C(a):a}function zi(){}function Ai(a){if(null!=a&&null!=a.he)a=a.he(a);else{var b=Ai[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ai._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEncodeJS.-clj-\x3ejs",a);}return a}
function Bi(a,b){return(null!=a?t===a.ge||(a.wd?0:x(zi,a)):x(zi,a))?Ai(a):"string"===typeof a||"number"===typeof a||a instanceof G||a instanceof E?b.j?b.j(a):b.call(null,a):mi(ed([a]),xa())}var Ci=function Ci(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ci.C(arguments[0],1<c.length?new J(c.slice(1),0,null):null)};
Ci.C=function(a,b){b=Ne(b);var c=Bc(b,Di,oe),d=function g(f){if(null==f)return null;if(null!=f?t===f.ge||(f.wd?0:x(zi,f)):x(zi,f))return Ai(f);if(f instanceof G)return c.j?c.j(f):c.call(null,f);if(f instanceof E)return B.j(f);if(Bd(f)){var k={};f=H(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.V(null,n),r=U(p,0,null),u=U(p,1,null);p=k;r=Bi(r,d);u=g(u);p[r]=u;n+=1}else if(f=H(f))Ed(f)?(m=cc(f),f=dc(f),l=m,m=Q(m)):(l=K(f),m=U(l,0,null),n=U(l,1,null),l=k,m=Bi(m,d),n=g(n),l[m]=n,f=M(f),l=null,m=0),n=0;
else break;return k}if(null==f?0:null!=f?f.B&8||t===f.Pe||(f.B?0:x(Xa,f)):x(Xa,f)){k=[];f=H(kf.m(g,f));l=null;for(n=m=0;;)if(n<m)p=l.V(null,n),k.push(p),n+=1;else if(f=H(f))l=f,Ed(l)?(f=cc(l),n=dc(l),l=f,m=Q(f),f=n):(f=K(l),k.push(f),f=M(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Ci.H=1;Ci.J=function(a){var b=K(a);a=M(a);return this.C(b,a)};
function Ei(a){var b=cf(Oe);return function(){function c(e){var f=null;if(0<arguments.length){f=0;for(var g=Array(arguments.length-0);f<g.length;)g[f]=arguments[f+0],++f;f=new J(g,0,null)}return d.call(this,f)}function d(e){var f=Bc(C(b),e,Gd);return f===Gd?(f=Ie(a,e),ef.K(b,V,e,f),f):f}c.H=0;c.J=function(e){e=H(e);return d(e)};c.C=d;return c}()}function Fi(a){return Math.floor(Math.random()*a)}var Gi=null;function Hi(){null==Gi&&(Gi=cf(new v(null,3,[Ii,Oe,Ji,Oe,Ki,Oe],null)));return Gi}
function Li(a,b,c){var d=O.m(b,c);if(d)return d;d=Ki.j(a);d=d.j?d.j(b):d.call(null,b);if(!(d=Kd(d,c))&&(d=Dd(c)))if(d=Dd(b))if(d=Q(c)===Q(b)){d=!0;for(var e=0;;)if(d&&e!==Q(c))d=Li(a,b.j?b.j(e):b.call(null,e),c.j?c.j(e):c.call(null,e)),e+=1;else return d}else return d;else return d;else return d}function Mi(a){var b=C(Hi());return Qe(F(Ii.j(b),a))}function Ni(a,b,c,d){ef.m(a,function(){return C(b)});ef.m(c,function(){return C(d)})}
var Oi=function Oi(a,b,c){var e=function(){var f=C(c);return f.j?f.j(a):f.call(null,a)}();e=w(w(e)?e.j?e.j(b):e.call(null,b):e)?!0:null;if(w(e))return e;e=function(){for(var f=Mi(b);;)if(0<Q(f)){var g=K(f);Oi.o?Oi.o(a,g,c):Oi.call(null,a,g,c);f=Fc(f)}else return null}();if(w(e))return e;e=function(){for(var f=Mi(a);;)if(0<Q(f)){var g=K(f);Oi.o?Oi.o(g,b,c):Oi.call(null,g,b,c);f=Fc(f)}else return null}();return w(e)?e:!1};function Pi(a,b,c,d){c=Oi(a,b,c);return w(c)?c:Li(d,a,b)}
var Qi=function Qi(a,b,c,d,e,f,g,k){var m=Oa.o(function(p,r){var u=U(r,0,null);U(r,1,null);if(Li(C(c),b,u)){p=null==p||Pi(u,K(p),e,C(c))?r:p;if(!Pi(K(p),u,e,C(c)))throw Error(["Multiple methods in multimethod '",B.j(a),"' match dispatch value: ",B.j(b)," -\x3e ",B.j(u)," and ",B.j(K(p)),", and neither is preferred"].join(""));return p}return p},null,C(d)),n=function(){var p;if(p=null==m)p=C(d),p=p.j?p.j(k):p.call(null,k);return w(p)?new X(null,2,5,Z,[k,p],null):m}();if(w(n)){if(O.m(C(g),C(c)))return ef.K(f,
V,b,id(n)),id(n);Ni(f,d,g,c);return Qi.za?Qi.za(a,b,c,d,e,f,g,k):Qi.call(null,a,b,c,d,e,f,g,k)}return null};function Ri(a,b){throw Error(["No method in multimethod '",B.j(a),"' for dispatch value: ",B.j(b)].join(""));}function Si(a,b,c,d,e,f,g){var k=Sb;this.name=a;this.N=b;this.we=k;this.zc=c;this.Bc=d;this.He=e;this.Ac=f;this.lc=g;this.B=4194305;this.I=4352}h=Si.prototype;
h.call=function(a){switch(arguments.length-1){case 0:return this.F();case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);case 3:return this.o(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.O(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Da(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ja(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.La(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Na(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Ub(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.F=function(){var a=this.N.F?this.N.F():this.N.call(null),b=Ui(this,a);w(b)||Ri(this.name,a);return b.F?b.F():b.call(null)};h.j=function(a){var b=this.N.j?this.N.j(a):this.N.call(null,a),c=Ui(this,b);w(c)||Ri(this.name,b);return c.j?c.j(a):c.call(null,a)};
h.m=function(a,b){var c=this.N.m?this.N.m(a,b):this.N.call(null,a,b),d=Ui(this,c);w(d)||Ri(this.name,c);return d.m?d.m(a,b):d.call(null,a,b)};h.o=function(a,b,c){var d=this.N.o?this.N.o(a,b,c):this.N.call(null,a,b,c),e=Ui(this,d);w(e)||Ri(this.name,d);return e.o?e.o(a,b,c):e.call(null,a,b,c)};h.K=function(a,b,c,d){var e=this.N.K?this.N.K(a,b,c,d):this.N.call(null,a,b,c,d),f=Ui(this,e);w(f)||Ri(this.name,e);return f.K?f.K(a,b,c,d):f.call(null,a,b,c,d)};
h.O=function(a,b,c,d,e){var f=this.N.O?this.N.O(a,b,c,d,e):this.N.call(null,a,b,c,d,e),g=Ui(this,f);w(g)||Ri(this.name,f);return g.O?g.O(a,b,c,d,e):g.call(null,a,b,c,d,e)};h.va=function(a,b,c,d,e,f){var g=this.N.va?this.N.va(a,b,c,d,e,f):this.N.call(null,a,b,c,d,e,f),k=Ui(this,g);w(k)||Ri(this.name,g);return k.va?k.va(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
h.Oa=function(a,b,c,d,e,f,g){var k=this.N.Oa?this.N.Oa(a,b,c,d,e,f,g):this.N.call(null,a,b,c,d,e,f,g),l=Ui(this,k);w(l)||Ri(this.name,k);return l.Oa?l.Oa(a,b,c,d,e,f,g):l.call(null,a,b,c,d,e,f,g)};h.za=function(a,b,c,d,e,f,g,k){var l=this.N.za?this.N.za(a,b,c,d,e,f,g,k):this.N.call(null,a,b,c,d,e,f,g,k),m=Ui(this,l);w(m)||Ri(this.name,l);return m.za?m.za(a,b,c,d,e,f,g,k):m.call(null,a,b,c,d,e,f,g,k)};
h.Pa=function(a,b,c,d,e,f,g,k,l){var m=this.N.Pa?this.N.Pa(a,b,c,d,e,f,g,k,l):this.N.call(null,a,b,c,d,e,f,g,k,l),n=Ui(this,m);w(n)||Ri(this.name,m);return n.Pa?n.Pa(a,b,c,d,e,f,g,k,l):n.call(null,a,b,c,d,e,f,g,k,l)};h.Da=function(a,b,c,d,e,f,g,k,l,m){var n=this.N.Da?this.N.Da(a,b,c,d,e,f,g,k,l,m):this.N.call(null,a,b,c,d,e,f,g,k,l,m),p=Ui(this,n);w(p)||Ri(this.name,n);return p.Da?p.Da(a,b,c,d,e,f,g,k,l,m):p.call(null,a,b,c,d,e,f,g,k,l,m)};
h.Ea=function(a,b,c,d,e,f,g,k,l,m,n){var p=this.N.Ea?this.N.Ea(a,b,c,d,e,f,g,k,l,m,n):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n),r=Ui(this,p);w(r)||Ri(this.name,p);return r.Ea?r.Ea(a,b,c,d,e,f,g,k,l,m,n):r.call(null,a,b,c,d,e,f,g,k,l,m,n)};h.Fa=function(a,b,c,d,e,f,g,k,l,m,n,p){var r=this.N.Fa?this.N.Fa(a,b,c,d,e,f,g,k,l,m,n,p):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p),u=Ui(this,r);w(u)||Ri(this.name,r);return u.Fa?u.Fa(a,b,c,d,e,f,g,k,l,m,n,p):u.call(null,a,b,c,d,e,f,g,k,l,m,n,p)};
h.Ga=function(a,b,c,d,e,f,g,k,l,m,n,p,r){var u=this.N.Ga?this.N.Ga(a,b,c,d,e,f,g,k,l,m,n,p,r):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r),y=Ui(this,u);w(y)||Ri(this.name,u);return y.Ga?y.Ga(a,b,c,d,e,f,g,k,l,m,n,p,r):y.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r)};
h.Ha=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u){var y=this.N.Ha?this.N.Ha(a,b,c,d,e,f,g,k,l,m,n,p,r,u):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u),A=Ui(this,y);w(A)||Ri(this.name,y);return A.Ha?A.Ha(a,b,c,d,e,f,g,k,l,m,n,p,r,u):A.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u)};
h.Ia=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y){var A=this.N.Ia?this.N.Ia(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y),D=Ui(this,A);w(D)||Ri(this.name,A);return D.Ia?D.Ia(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y):D.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y)};
h.Ja=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A){var D=this.N.Ja?this.N.Ja(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A),N=Ui(this,D);w(N)||Ri(this.name,D);return N.Ja?N.Ja(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A):N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A)};
h.Ka=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D){var N=this.N.Ka?this.N.Ka(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D),I=Ui(this,N);w(I)||Ri(this.name,N);return I.Ka?I.Ka(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D):I.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D)};
h.La=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N){var I=this.N.La?this.N.La(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N),R=Ui(this,I);w(R)||Ri(this.name,I);return R.La?R.La(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N):R.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N)};
h.Ma=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I){var R=this.N.Ma?this.N.Ma(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I),W=Ui(this,R);w(W)||Ri(this.name,R);return W.Ma?W.Ma(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I):W.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I)};
h.Na=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R){var W=this.N.Na?this.N.Na(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R):this.N.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R),Y=Ui(this,W);w(Y)||Ri(this.name,W);return Y.Na?Y.Na(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R):Y.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R)};
h.Ub=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W){var Y=Me(this.N,a,b,c,d,ed([e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W])),ma=Ui(this,Y);w(ma)||Ri(this.name,Y);return Me(ma,a,b,c,d,ed([e,f,g,k,l,m,n,p,r,u,y,A,D,N,I,R,W]))};function Vi(a,b,c){ef.K(a.Bc,V,b,c);Ni(a.Ac,a.Bc,a.lc,a.zc)}function Ui(a,b){O.m(C(a.lc),C(a.zc))||Ni(a.Ac,a.Bc,a.lc,a.zc);var c=C(a.Ac);c=c.j?c.j(b):c.call(null,b);return w(c)?c:Qi(a.name,b,a.zc,a.Bc,a.He,a.Ac,a.lc,a.we)}h.Vb=function(){return ec(this.name)};h.Wb=function(){return fc(this.name)};
h.U=function(){return ca(this)};function Wi(a){this.uuid=a;this.G=null;this.B=2153775104;this.I=2048}h=Wi.prototype;h.oe=t;h.toString=function(){return this.uuid};h.T=function(a,b){return(a=null!=b?t===b.oe?!0:!1:!1)?this.uuid===b.uuid:a};h.R=function(a,b){return Pb(b,['#uuid "',B.j(this.uuid),'"'].join(""))};h.U=function(){null==this.G&&(this.G=xc(this.uuid));return this.G};
h.ab=function(a,b){if(b instanceof Wi)return pa(this.uuid,b.uuid);throw Error(["Cannot compare ",B.j(this)," to ",B.j(b)].join(""));};function Xi(){function a(){var d=Fi(65536).toString(16);switch(d.length){case 1:return["000",d].join("");case 2:return["00",d].join("");case 3:return["0",d].join("");default:return d}}var b=(16384|4095&Fi(65536)).toString(16),c=(32768|16383&Fi(65536)).toString(16);return new Wi([a(),a(),"-",a(),"-",b,"-",c,"-",a(),a(),a()].join("").toLowerCase())}
function Yi(a,b,c){var d=Error(a);this.message=a;this.data=b;this.cause=c;this.name=d.name;this.description=d.description;this.number=d.number;this.fileName=d.fileName;this.lineNumber=d.lineNumber;this.columnNumber=d.columnNumber;this.stack=d.stack;return this}Yi.prototype.__proto__=Error.prototype;Yi.prototype.aa=t;
Yi.prototype.R=function(a,b,c){Pb(b,"#error {:message ");ii(this.message,b,c);w(this.data)&&(Pb(b,", :data "),ii(this.data,b,c));w(this.cause)&&(Pb(b,", :cause "),ii(this.cause,b,c));return Pb(b,"}")};Yi.prototype.toString=function(){return oc(this)};function Zi(a,b){return new Yi(a,b,null)}
function $i(){w(La)||(La=function(){for(var a=Od(function(e,f){return f.length-e.length},ha(Ka)),b="";;)if(H(a)){var c=M(a),d=[function(){var e=b;return""!==b?[e,"|"].join(""):e}(),B.j(K(a))].join("");a=c;b=d}else return[b,"|\\$"].join("")}());return La}
function aj(a){var b=B.j(a);if("_DOT__DOT_"===b)var c="..";else a:{c=new RegExp($i(),"g");var d=b.length-1;d=0<=d&&b.indexOf("$",d)==d;b=w(d)?b.substring(0,b.length-1):b;d="";for(var e=0;;){var f=c.exec(b);if(w(f))f=U(f,0,null),d=[d,B.j(b.substring(e,c.lastIndex-f.length)),B.j("$"===f?"/":ia(Ka,f))].join(""),e=c.lastIndex;else{c=[d,B.j(b.substring(e,b.length))].join("");break a}}}a=a instanceof E?Cc:B;return a.j?a.j(c):a.call(null,c)}"undefined"!==typeof console&&Da();Da();var Tb=new G(null,"nil","nil",99600501),Ub=new G(null,"left","left",-399115937),yd=new G(null,"async?","async?",1523057758),Id=new G(null,"mousemotion","mousemotion",633012383),Pe=new G(null,"line","line",212345235),$e=new G(null,"pattern","pattern",242135423),af=new G(null,"spying?","spying?",1753444487),xf=new E(null,"js","js",-886355190,null),ni=new E("taoensso.encore","rate-limiter","taoensso.encore/rate-limiter",1705152470,null),si=new G(null,"right","right",-452581833),ti=new G(null,"keyup",
"keyup",-794526927),Ti=new G(null,"arg-\x3estr-fn","arg-\x3estr-fn",2064845310),bj=new G(null,"rot","rot",757545242),za=new G(null,"readably","readably",1129599760),cj=new G(null,"any","any",1705907423),dj=new E(null,"true?","true?",-1600332395,null),ej=new E("cljs.core","map","cljs.core/map",-338988913,null),rj=new G(null,"data","data",-232669377),fj=new G(null,"amp","amp",271690571),gj=new E(null,"ifn?","ifn?",-2106461064,null),hj=new G(null,"?meta","?meta",-793560773),jj=new G(null,"appender",
"appender",1267426510),kj=new E(null,"nil?","nil?",1612038930,null),lj=new G(null,"index","index",-1531685915),xi=new G(null,"pending","pending",-220036727),Sb=new G(null,"default","default",-1987822328),mj=new E(null,"sequential?","sequential?",1102351463,null),nj=new G(null,"timestamp_","timestamp_",-954533417),oj=new G(null,"strable","strable",1877668047),pj=new G(null,"movement","movement",1777030977),qj=new E(null,"get-soft-access","get-soft-access",-1996253487,null),sj=new E("cljs.spec.alpha",
"valid?","cljs.spec.alpha/valid?",-142132235,null),uj=new G(null,"unexpected-punching-selector","unexpected-punching-selector",-1934135338),vj=new E(null,"set?","set?",1636014792,null),wj=new G(null,"err","err",-2089457205),xj=new G(null,"hash_","hash_",-827203612),Aj=new G(null,"hash","hash",-13781596),Bj=new G(null,"msg-fn","msg-fn",-1873033940),Cj=new G(null,"expected-function-value","expected-function-value",-1399123630),Dj=new G(null,"msg_","msg_",-1925147E3),Ej=new E("cljs.spec.alpha","tuple",
"cljs.spec.alpha/tuple",-415901908,null),Fj=new G(null,"error","error",-978969032),Gj=new G(null,"println","println",1920840330),Hj=new G("oops.sdefs","obj-selector","oops.sdefs/obj-selector",655346305),Ij=new E(null,"get-dot-access","get-dot-access",-1468450704,null),Jj=new G("cljs.spec.alpha","name","cljs.spec.alpha/name",205233570),Kj=new G(null,"sequential","sequential",-1082983960),Lj=new G(null,"first-person-camera","first-person-camera",-1358885718),Mj=new G(null,"object-is-sealed","object-is-sealed",
-1791813926),Nj=new G(null,"space","space",348133475),Pj=new G(null,"cache?","cache?",-1601953949),Qj=new G(null,"list","list",765357683),Ii=new G(null,"parents","parents",-2027538891),Rj=new G(null,"ret","ret",-468222814),Sj=new G(null,"rate-limit","rate-limit",1748082022),Tj=new G(null,"?ns-str","?ns-str",2012733966),Uj=new G(null,"soft?","soft?",-1339668477),Vj=new E(null,"symbol?","symbol?",1820680511,null),Wj=new G(null,"value","value",305978217),Xj=new G(null,"min-level","min-level",1634684919),
Zj=new G(null,"appender-id","appender-id",-1917983538),bk=new G(null,"ns-blacklist","ns-blacklist",1957763142),ck=new G(null,"atom","atom",-397043653),ok=new G(null,"trace","trace",-1082747415),Ok=new G(null,"rgbe","rgbe",1667899839),wi=new G(null,"ready","ready",1086465795),dk=new E(null,"keyword","keyword",-1843046022,null),ek=new G(null,"output_","output_",-36797880),fk=new G(null,"output-fn","output-fn",1600951539),gk=new G(null,"object-key-not-writable","object-key-not-writable",206336031),hk=
new G("oops.sdefs","obj-key","oops.sdefs/obj-key",-2004347356),ik=new E(null,"number?","number?",-1747282210,null),jk=new G(null,"frozen?","frozen?",613726824),kk=new G(null,"enter","enter",1792452624),lk=new G(null,"aspect-ratio","aspect-ratio",1674013504),mk=new G(null,"given","given",716253602),nk=new E("cljs.spec.alpha","conformer","cljs.spec.alpha/conformer",2140085535,null),pk=new G(null,"?line","?line",-631853385),qk=new G(null,"error-reporting","error-reporting",1274700782),rk=new G(null,
"object-is-frozen","object-is-frozen",-1391578096),sk=new G(null,"console","console",1228072057),li=new G(null,"fallback-impl","fallback-impl",-1501286995),tk=new G(null,"tab","tab",-559583621),uk=new G(null,"warn","warn",-436710552),vk=new G(null,"vel","vel",-110770822),fl=new G(null,"cat-statue","cat-statue",1295333163),wk=new G("cljs.spec.alpha","pcat","cljs.spec.alpha/pcat",26406623),xk=new G(null,"unexpected-empty-selector","unexpected-empty-selector",-572791900),yk=new G(null,"deny-spec","deny-spec",
-1074984268),zk=new E(null,"inst","inst",-2008473268,null),Ak=new G(null,"selector","selector",762528866),Bk=new G(null,"ctrl","ctrl",361402094),Ck=new G(null,"msg","msg",-1386103444),Ek=new G(null,"regex","regex",939488856),Fk=new G(null,"entities","entities",1940967403),Gk=new E("cljs.core","partial","cljs.core/partial",1483172485,null),Hk=new G(null,"terrain","terrain",704966005),Ik=new G(null,"param","param",2013631823),Jk=new G(null,"context","context",-830191113),Kk=new E("cljs.spec.alpha",
"or","cljs.spec.alpha/or",-831679639,null),Lk=new G(null,"raw-console?","raw-console?",-2061489061),Mk=new G(null,"msg-type","msg-type",-2132567822),Ji=new G(null,"descendants","descendants",1824886031),Dh=new G("cljs.core","not-found","cljs.core/not-found",-1572889185),Nk=new G(null,"appenders","appenders",1245583998),Pk=new E(null,"native-array-aware-*","native-array-aware-*",97903386,null),Qk=new E(null,"p1__23834#","p1__23834#",-1635218445,null),ri=new G(null,"val","val",128701612),Rk=new G(null,
"vector","vector",1902966158),Sk=new G(null,"unexpected-object-value","unexpected-object-value",-1214439301),Tk=new E("cljs.core","let","cljs.core/let",-308701135,null),Uk=new E(null,"p1__23833#","p1__23833#",-886074962,null),ya=new G(null,"flush-on-newline","flush-on-newline",-151457939),Vk=new E(null,"symbol","symbol",601958831,null),Wk=new E("cljs.spec.alpha","and","cljs.spec.alpha/and",-2060279705,null),Xk=new G("cljs.spec.alpha","accept","cljs.spec.alpha/accept",370988198),Yk=new E("cljs.core",
"keyword?","cljs.core/keyword?",713156450,null),Zk=new G(null,"time","time",1385887882),$k=new G(null,"use-envelope","use-envelope",-2007197780),ql=new E(null,"boolean","boolean",-278886877,null),al=new E(null,"vector","vector",-751469611,null),bl=new E(null,"delay?","delay?",-1528239209,null),cl=new E(null,"rate-limiter-spec","rate-limiter-spec",1678589253,null),dl=new G(null,"throw","throw",-1044625833),el=new G("oops.sdefs","obj-path-key","oops.sdefs/obj-path-key",-1566573562),gl=new G(null,"child-factory",
"child-factory",-1019029066),hl=new G(null,"req-id","req-id",-471642231),il=new G(null,"missing-object-key","missing-object-key",-1300201731),kl=new G(null,"timestamp-opts","timestamp-opts",-1359534807),ll=new G(null,"splice","splice",449588165),ml=new G(null,"error-level?","error-level?",778415885),nl=new G(null,"key","key",-1516042587),ol=new G(null,"your-version","your-version",-351781765),pl=new G(null,"id!","id!",218090956),ki=new G(null,"alt-impl","alt-impl",670969595),rl=new G(null,"rep+",
"rep+",-281382396),sl=new G("cljs.spec.alpha","invalid","cljs.spec.alpha/invalid",-1220295119),tl=new G(null,"output-opts","output-opts",-793411325),ul=new G(null,"sun","sun",-916295498),vl=new G(null,"error-fn","error-fn",-171437615),wl=new G(null,"warning-reporting","warning-reporting",-319054391),xl=new G(null,"string","string",-1989541586),yl=new E(null,"set","set",1945134081,null),Ql=new E(null,"uuid","uuid",-504564192,null),Rl=new E(null,"fn*","fn*",-752876845,null),Ba=new G(null,"dup","dup",
556298533),zl=new G(null,"enabled?","enabled?",-1376075057),Al=new E(null,"fn?","fn?",1820990818,null),vi=new G(null,"status","status",-1997798413),Bl=new G("cljs.spec.alpha","nil","cljs.spec.alpha/nil",1733813950),Cl=new G(null,"move","move",-2110884309),Dl=new G("cljs.spec.alpha","k","cljs.spec.alpha/k",-1602615178),El=new E("cljs.core","array?","cljs.core/array?",-1655912448,null),Fl=new G("rl","reset","rl/reset",-800926172),Gl=new G(null,"gc-every","gc-every",-1661544691),Hl=new E(null,"regex",
"regex",-1714946913,null),Il=new G(null,"throw-errors-from-macro-call-sites","throw-errors-from-macro-call-sites",-1338743049),Jl=new E("cljs.core","fn","cljs.core/fn",-1065745098,null),Kl=new G("cljs.spec.alpha","v","cljs.spec.alpha/v",552625740),Ll=new G(null,"fn","fn",-1175266204),Vm=new G(null,"kind","kind",-717265803),Ml=new G(null,"qualifier","qualifier",125841738),Nl=new E(null,"false?","false?",-1522377573,null),Ol=new E(null,"string?","string?",-1129175764,null),Pl=new E(null,"filter-input-arg",
"filter-input-arg",1147690060,null),Sl=new G(null,"dt","dt",-368444759),Tl=new G(null,"vargs","vargs",-966597273),Ul=new E("cljs.core","every?","cljs.core/every?",1416822717,null),Vl=new G(null,"map","map",1371690461),Wl=new G(null,"iso8601","iso8601",609352650),Xl=new G(null,"whitelist","whitelist",-979294437),Yl=new G(null,"fatal","fatal",1874419888),Zl=new E("cljs.core","and","cljs.core/and",-6692549,null),$l=new E(null,"coll?","coll?",-1874821441,null),Ln=new G(null,"path","path",-188191168),
am=new E(null,"pairs","pairs",-2039825990,null),bm=new E("cljs.core","string?","cljs.core/string?",-2072921719,null),cm=new E(null,"\x3cspec\x3e","\x3cspec\x3e",1165019597,null),dm=new E(null,"map","map",-1282745308,null),em=new G(null,"animated-cube","animated-cube",-1828399922),fm=new G(null,"version","version",425292698),gm=new G(null,"ps","ps",292358046),hm=new G(null,"unexpected-soft-selector","unexpected-soft-selector",-1117708580),im=new G(null,"jitter","jitter",1262097060),jm=new E(null,"keyword?",
"keyword?",1917797069,null),km=new G(null,"?err","?err",549653299),lm=new E(null,"counted?","counted?",1703071664,null),mm=new G(null,"expected","expected",1583670997),nm=new G(null,"info","info",-317069002),om=new G(null,"down","down",1565245570),pm=new G(null,"p1","p1",-936759954),qm=new G(null,"p2","p2",905500641),Tm=new G(null,"ns","ns",441598760),rm=new G(null,"config","config",994861415),sm=new E(null,"associative?","associative?",-141666771,null),tm=new G(null,"ks","ks",1900203942),um=new G("cljs.spec.alpha",
"amp","cljs.spec.alpha/amp",831147508),vm=new G(null,"file","file",-1269645878),wm=new G(null,"keyword","keyword",811389747),xm=new G("rl","peek","rl/peek",-291391771),ym=new G("cljs.spec.alpha","alt","cljs.spec.alpha/alt",523685437),zm=new E(null,"reversible?","reversible?",314107817,null),Am=new G(null,"flavor","flavor",-1331636636),Bm=new G(null,"prevent-defaults","prevent-defaults",977810460),Cm=new G(null,"debug","debug",-1608172596),Dm=new G(null,"id","id",-1388402092),Em=new G(null,"set","set",
304602554),Fm=new G(null,"?msg-fmt","?msg-fmt",-852453891),Gm=new E(null,"queue","queue",-1198599890,null),Hm=new E("cljs.core","partition-all","cljs.core/partition-all",1634835208,null),Im=new G(null,"level","level",1290497552),Aa=new G(null,"meta","meta",1499536964),Jm=new G(null,"deny","deny",1589338523),Km=new E(null,"%","%",-950237169,null),Ca=new G(null,"print-length","print-length",1931866356),Lm=new E(null,"get-punch-access","get-punch-access",1112963648,null),Mm=new G(null,"ns-filter","ns-filter",
108598448),Nm=new G(null,"w","w",354169001),Om=new G(null,"s","s",1705939918),Ki=new G(null,"ancestors","ancestors",-776045424),vn=new E(null,"arr","arr",2115492975,null),Pm=new G(null,"p","p",151049309),Qm=new G(null,"hostname_","hostname_",-2091647379),Rm=new G(null,"js-obj","js-obj",-1298148277),Sm=new E(null,"filter-spec","filter-spec",539212879,null),Um=new G("cljs.spec.alpha","kvs-\x3emap","cljs.spec.alpha/kvs-\x3emap",579713455),Wm=new G(null,"up","up",-269712113),Xm=new E(null,"k","k",-505765866,
null),Ym=new G(null,"f","f",-1597136552),Zm=new G(null,"h","h",1109658740),$m=new G(null,"d","d",1972142424),En=new E(null,"v","v",1661996586,null),an=new E(null,"float?","float?",673884616,null),bn=new E("cljs.spec.alpha","*","cljs.spec.alpha/*",-1238084288,null),cn=new G(null,"a","a",-2123407586),dn=new G(null,"auto","auto",-566279492),en=new G(null,"hierarchy","hierarchy",-1053470341),fn=new G(null,"pxl-ratio","pxl-ratio",-45708876),gn=new E("taoensso.encore","name-filter","taoensso.encore/name-filter",
-2070485905,null),hn=new G(null,"inherit","inherit",-1840815422),jn=new G("oops.sdefs","obj-path-item","oops.sdefs/obj-path-item",-77633674),kn=new G(null,"global-start-time","global-start-time",688057299),ln=new G(null,"ns-whitelist","ns-whitelist",-1717299774),Di=new G(null,"keyword-fn","keyword-fn",-64566675),mn=new G(null,"middleware-fn","middleware-fn",-61585752),nn=new E("cljs.core","vec","cljs.core/vec",307622519,null),on=new G(null,"allow","allow",-1857325745),pn=new G(null,"?column","?column",
1004649085),qn=new G("cljs.spec.alpha","rep","cljs.spec.alpha/rep",1483217317),rn=new G("cljs.spec.alpha","op","cljs.spec.alpha/op",-1269055252),sn=new E(null,"some?","some?",234752293,null),tn=new G(null,"mousedown","mousedown",1391242074),un=new E(null,"sorted?","sorted?",892797714,null),wn=new G(null,"instant","instant",655498374),xn=new E(null,"string","string",-349010059,null),yn=new G(null,"shift","shift",997140064),zn=new G(null,"loc","loc",-584284901),fr=new G(null,"gltf","gltf",-1691489846),
An=new G(null,"forms","forms",2045992350),gr=new G(null,"skybox-texture","skybox-texture",1273007034),Bn=new G("oops.sdefs","obj-path","oops.sdefs/obj-path",692461382),Cn=new G(null,"min-version","min-version",-1697197126),Dn=new G(null,"blacklist","blacklist",1248093170),Fn=new E(null,"integer?","integer?",1303791671,null),Gn=new G(null,"keydown","keydown",-629268186),Hn=new G(null,"render-size","render-size",1170061277),In=new G(null,"middleware","middleware",1462115504),Jn=new E(null,"identity",
"identity",-1007039734,null),Kn=new G(null,"no-stacktrace?","no-stacktrace?",1701072694),Mn=new G(null,"allow-spec","allow-spec",448749872),Nn=new G("oops.sdefs","obj-path-mode","oops.sdefs/obj-path-mode",1253821198),On=new G("cljs.spec.alpha","unknown","cljs.spec.alpha/unknown",651034818),Pn=new G(null,"camera-id","camera-id",-951302676),Qn=new G(null,"native-array","native-array",1549686442),Rn=new E(null,"not","not",1044554643,null),Sn=new E(null,"rate-limiter-command","rate-limiter-command",1767414198,
null),bi=new G(null,"more-marker","more-marker",-14717935),Tn=new G(null,"pos","pos",-864607220),Un=new G(null,"invalid-selector","invalid-selector",1262807990),Vn=new G(null,"arg","arg",-1747261837),Wn=new G(null,"button","button",1456579943),Xn=new G(null,"?file","?file",1533429675),Co=new G(null,"type","type",1174270348),Yn=new E("cljs.core","zipmap","cljs.core/zipmap",-1902130674,null),Zn=new E(null,"list?","list?",-1494629,null),$n=new G(null,"none","none",1333468478),ao=new E(null,"vector?",
"vector?",-61367869,null),bo=new G("cljs.spec.alpha","gfn","cljs.spec.alpha/gfn",-593120375),co=new G(null,"cat-id","cat-id",963362371),eo=new G(null,"event-queue","event-queue",-973576713);function fq(a){return new X(null,3,5,Z,[255&a>>16,255&a>>8,255&a],null)}var gq=function gq(a){switch(arguments.length){case 3:return gq.o(arguments[0],arguments[1],arguments[2]);case 4:return gq.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};gq.o=function(a,b,c){return["rgb(",B.j(a),",",B.j(b),",",B.j(c),")"].join("")};gq.K=function(a,b,c,d){return["rgba(",B.j(a),",",B.j(b),",",B.j(c),",",B.j(d),")"].join("")};
gq.H=4;var Ko=Vf([1515576,2439774,3956363,5214138,7585491,10804699,1651501,2446894,4620850,7710531,11061848,13687441,5057330,8013889,11368279,12620915,14136724,15193523,3415079,6302764,8932139,12482347,14589505,15253872,2364711,4267313,7676984,10825776,13588284,14321214,1973561,4204369,8009339,10632844,12997015,14648485,592404,1053727,1383720,2108983,3754576,5730935,8492950,11056562,13094860,15461865],!0),jq=ff.m(fq,Ko);ff.m(function(a){return Ie(gq,fq(a))},Ko);
var kq=new v(null,2,[gr,new v(null,2,[Vm,Ok,Ln,"img/kloppenheim_06_puresky_1k.hdr"],null),fl,new v(null,2,[Vm,fr,Ln,"glb/concrete_cat_statue.glb"],null)],null);var Lo={},Mo={},Oo=[];function Po(a,b){var c=Mo[a];if(void 0!==c)return c;try{Oo.push(a);var d=Lo[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Lo[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,Po,d,d.exports)}catch(g){throw console.warn("shadow-cljs - failed to load",a),console.error(g),g;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Oo.pop()}return d.exports}Po.cache={};Po.resolve=function(a){return a};
Po.exportCopy=function(a,b){let c={};a=a.exports;for(let d in b)"default"==d||d in a||d in c||(c[d]={enumerable:!0,get:function(){return b[d]}});Object.defineProperties(a,c)};Po.esmDefault=function(a){return a&&a.__esModule?a:{"default":a}};Po.dynamic=function(a){return Promise.resolve().then(function(){return Po(a)})};var Qo=Po(0,{});function Ro(a,b){var c=Je(Mh,a,b);return T(c,uf(function(d){return c===d},b))}var So=function So(a){switch(arguments.length){case 1:return So.j(arguments[0]);case 2:return So.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return So.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};So.j=function(a){return a};
So.m=function(a,b){for(;;)if(Q(b)<Q(a)){var c=a;a=b;b=c}else return Oa.o(function(d,e){return function(f,g){return Kd(e,g)?f:wd.m(f,g)}}(a,b),a,a)};So.C=function(a,b,c){a=Ro(function(d){return-Q(d)},kd.C(c,b,ed([a])));return Oa.o(So,K(a),Fc(a))};So.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};So.H=2;
var To=function To(a){switch(arguments.length){case 1:return To.j(arguments[0]);case 2:return To.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return To.C(arguments[0],arguments[1],2<c.length?new J(c.slice(2),0,null):null)}};To.j=function(a){return a};To.m=function(a,b){return Q(a)<Q(b)?Oa.o(function(c,d){return Kd(b,d)?wd.m(c,d):c},a,a):Oa.o(wd,a,b)};To.C=function(a,b,c){return Oa.o(To,a,kd.m(c,b))};
To.J=function(a){var b=K(a),c=M(a);a=K(c);c=M(c);return this.C(b,a,c)};To.H=2;function Uo(a,b){return O.m(a,b)?new X(null,3,5,Z,[null,null,a],null):new X(null,3,5,Z,[a,b,null],null)}function Vo(a){return H(a)?Oa.o(function(b,c){var d=U(c,0,null);c=U(c,1,null);return V.o(b,d,c)},Wf(qf(Ie(Zd,ug(a)))),a):null}function Wo(a,b,c){var d=F(a,c),e=F(b,c),f=Xo(d,e),g=U(f,0,null),k=U(f,1,null);f=U(f,2,null);a=Kd(a,c);b=Kd(b,c);d=a&&b&&(null!=f||null==d&&null==e);return new X(null,3,5,Z,[!a||null==g&&d?null:pd([c,g]),!b||null==k&&d?null:pd([c,k]),d?pd([c,f]):null],null)}
var Yo=function Yo(a){switch(arguments.length){case 2:return Yo.m(arguments[0],arguments[1]);case 3:return Yo.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Yo.m=function(a,b){var c=Yo.o;var d=ug(a);var e=ug(b);d=Q(d)<Q(e)?Oa.o(kd,e,d):Oa.o(kd,d,e);return c.call(Yo,a,b,d)};Yo.o=function(a,b,c){return Oa.o(function(d,e){return ij(kf.o(Bh,d,e))},new X(null,3,5,Z,[null,null,null],null),kf.m(ka(Wo,a,b),c))};Yo.H=3;
function Zo(a,b){var c=kf.m,d=Yo.o,e=Dd(a)?a:Wf(a),f=Dd(b)?b:Wf(b);a=Q(a);b=Q(b);return Wf(c.call(kf,Vo,d.call(Yo,e,f,Vh(0,a>b?a:b))))}function $o(a,b){return new X(null,3,5,Z,[Qe(To.m(a,b)),Qe(To.m(b,a)),Qe(So.m(a,b))],null)}function ap(a){if(null!=a&&null!=a.ue)a=a.ue(a);else{var b=ap[q(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=ap._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("EqualityPartition.equality-partition",a);}return a}
function bp(a,b){if(null!=a&&null!=a.te)a=a.te(a,b);else{var c=bp[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=bp._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("Diff.diff-similar",a);}return a}ap["null"]=function(){return ck};ap.string=function(){return ck};ap.number=function(){return ck};ap.array=function(){return Kj};ap["function"]=function(){return ck};ap["boolean"]=function(){return ck};
ap._=function(a){return(null!=a?a.B&1024||t===a.ke||(a.B?0:x(nb,a)):x(nb,a))?Vl:(null!=a?a.B&4096||t===a.ne||(a.B?0:x(rb,a)):x(rb,a))?Em:(null!=a?a.B&16777216||t===a.Sc||(a.B?0:x(Kb,a)):x(Kb,a))?Kj:ck};bp["null"]=function(a,b){return Uo(a,b)};bp.string=function(a,b){return Uo(a,b)};bp.number=function(a,b){return Uo(a,b)};bp.array=function(a,b){return Zo(a,b)};bp["function"]=function(a,b){return Uo(a,b)};bp["boolean"]=function(a,b){return Uo(a,b)};
bp._=function(a,b){var c=function(){var d=ap(a);d=d instanceof G?d.pa:null;switch(d){case "atom":return Uo;case "set":return $o;case "sequential":return Zo;case "map":return Yo;default:throw Error(["No matching clause: ",B.j(d)].join(""));}}();return c.m?c.m(a,b):c.call(null,a,b)};function Xo(a,b){return O.m(a,b)?new X(null,3,5,Z,[null,null,a],null):O.m(ap(a),ap(b))?bp(a,b):Uo(a,b)};function cp(a,b,c){var d=w(b.ignoreCase)?"gi":"g";d=w(b.multiline)?[d,"m"].join(""):d;return a.replace(new RegExp(b.source,w(b.unicode)?[d,"u"].join(""):d),c)}
function dp(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new J(f,0,null)}return c.call(this,e)}function c(d){d=nf(d);if(O.m(Q(d),1))return d=K(d),a.j?a.j(d):a.call(null,d);d=Wf(d);return a.j?a.j(d):a.call(null,d)}b.H=0;b.J=function(d){d=H(d);return c(d)};b.C=c;return b}()}
function ep(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?cp(a,b,c):cp(a,b,dp(c));throw["Invalid match arg: ",B.j(b)].join("");}function fp(a){var b=new ta;for(a=H(a);;)if(null!=a)b.append(B.j(K(a))),a=M(a),null!=a&&b.append(".");else return b.toString()}
function gp(a,b){if(0>=b||b>=2+Q(a))return kd.m(Wf(T("",kf.m(B,H(a)))),"");if(w(de?Gb(1,b):ce.call(null,1,b)))return new X(null,1,5,Z,[a],null);if(w(de?Gb(2,b):ce.call(null,2,b)))return new X(null,2,5,Z,["",a],null);b-=2;return kd.m(Wf(T("",eg(Wf(kf.m(B,H(a))),0,b))),a.substring(b))}
function hp(a,b,c){if("/(?:)/"===B.j(b))b=gp(a,c);else if(1>c)b=Wf(B.j(a).split(b));else a:for(var d=c,e=ld;;){if(1===d){b=kd.m(e,a);break a}var f=Zh(b,a);if(null!=f){var g=a.indexOf(f);f=a.substring(g+Q(f));--d;e=kd.m(e,a.substring(0,g));a=f}else{b=kd.m(e,a);break a}}if(0===c&&1<Q(b))a:for(c=b;;)if(""===(null==c?null:ub(c)))c=null==c?null:vb(c);else break a;else c=b;return c};function ip(a,b){if(null!=a&&null!=a.Nb)a=a.Nb(a,b);else{var c=ip[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=ip._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("Spec.conform*",a);}return a}function jp(a,b){if(null!=a&&null!=a.Ob)a=a.Ob(a,b);else{var c=jp[q(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=jp._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("Spec.with-gen*",a);}return a}var kp=cf(Oe);
function lp(a){if(me(a)){var b=C(kp);a=F(b,a);if(me(a))a:for(;;)if(me(a))a=F(b,a);else{b=a;break a}else b=a;return b}return a}function mp(a){if(me(a)){var b=lp(a);if(w(b))return b;throw Error(["Unable to resolve spec: ",B.j(a)].join(""));}return a}function np(a){return null!=a&&t===a.Zb?a:null}function op(a){var b=rn.j(a);return w(b)?a:b}function pp(a,b){return me(a)?a:w(op(a))?V.o(a,Jj,b):null!=a&&(a.B&131072||t===a.Rc)?ud(a,V.o(vd(a),Jj,b)):null}
function qp(a){return me(a)?a:w(op(a))?Jj.j(a):null!=a&&(a.B&131072||t===a.Rc)?Jj.j(vd(a)):null}function rp(a){var b=function(){var c=(c=me(a))?lp(a):c;if(w(c))return c;c=np(a);if(w(c))return c;c=op(a);return w(c)?c:null}();return w(op(b))?pp(sp(b,null),qp(b)):b}function tp(a){var b=rp(a);if(w(b))return b;if(me(a))throw Error(["Unable to resolve spec: ",B.j(a)].join(""));return null}
function up(a){if(fa(null==a?"":String(a)))return null;a=kf.m(aj,hp(a,"$",0));if(2<=Q(a)&&Ve(function(c){return!fa(null==c?"":String(c))},a)){var b=Wh()(a);a=U(b,0,null);b=U(b,1,null);return Cc.j([fp(a),"/",B.j(b)].join(""))}return null}
var tq=function(){function a(d,e){var f=vp[q(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=vp._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("Specize.specize*",d);}function b(d){var e=vp[q(null==d?null:d)];if(null!=e)return e.j?e.j(d):e.call(null,d);e=vp._;if(null!=e)return e.j?e.j(d):e.call(null,d);throw z("Specize.specize*",d);}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+
arguments.length);};c.j=b;c.m=a;return c}(),vp=function vp(a){switch(arguments.length){case 1:return vp.j(arguments[0]);case 2:return vp.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};vp.j=function(a){return null!=a&&null!=a.kb?a.kb(a):tq(a)};vp.m=function(a,b){return null!=a&&null!=a.lb?a.lb(a,b):tq(a,b)};vp.H=2;G.prototype.kb=function(){return vp(mp(this))};G.prototype.lb=function(){return vp(mp(this))};E.prototype.kb=function(){return vp(mp(this))};
E.prototype.lb=function(){return vp(mp(this))};Fh.prototype.kb=function(){return xp(this,this,null,null,null)};Fh.prototype.lb=function(a,b){return xp(b,this,null,null,null)};
vp._=function(){function a(c){var d=(d=rd(c))?up(c.name):d;return w(d)?xp(d,c,null,null,null):xp(On,c,null,null,null)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return xp(d,c,null,null,null)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return xp(d,c,null,null,null)};return b}();
var yp=function yp(a){switch(arguments.length){case 1:return yp.j(arguments[0]);case 2:return yp.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};yp.j=function(a){var b=np(a);return w(b)?b:vp(a)};yp.m=function(a,b){var c=np(a);return w(c)?c:vp(a,b)};yp.H=2;function zp(a){return ke(sl,a)}function Ap(a,b){a=lp(a);return w(op(a))?V.o(a,bo,b):jp(yp.j(a),b)}
function Bp(a,b,c){if(null==c)ef.o(kp,qd,a);else{var d=np(c);w(d)||(d=op(c),d=w(d)?d:F(C(kp),c));b=w(d)?c:xp(b,c,null,null,null);ef.K(kp,V,a,pp(b,a))}}function Cp(a,b,c){if(w(a)){var d=tp(a);if(w(d))return ip(yp.j(d),b);if(rd(a)||(null!=a?a.B&1||t===a.Re||(a.B?0:x(Qa,a)):x(Qa,a)))return w(null)?a.j?a.j(b):a.call(null,b):w(a.j?a.j(b):a.call(null,b))?b:sl;throw Error([mi(ed([c]),xa())," is not a fn, expected predicate fn"].join(""));}return b}
var Dp=function Dp(a){switch(arguments.length){case 2:return Dp.m(arguments[0],arguments[1]);case 3:return Dp.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Dp.m=function(a,b){a=yp.j(a);return!zp(ip(a,b))};Dp.o=function(a,b,c){a=yp.m(a,c);return!zp(ip(a,b))};Dp.H=3;function uq(a,b,c,d,e,f){this.form=a;this.fc=b;this.pb=c;this.Zc=d;this.Id=e;this.ze=f;this.B=393216;this.I=0}h=uq.prototype;
h.S=function(a,b){return new uq(this.form,this.fc,this.pb,this.Zc,this.Id,b)};h.P=function(){return this.ze};h.kb=function(){return this};h.lb=function(){return this};h.Zb=t;h.Nb=function(a,b){a=this.fc.j?this.fc.j(b):this.fc.call(null,b);return w(this.Zc)?a:w(a)?b:sl};h.Ob=function(a,b){return xp(this.form,this.fc,b,this.Zc,this.Id)};function xp(a,b,c,d,e){return w(np(b))?w(c)?Ap(b,c):b:w(op(b))?sp(b,c):me(b)?(a=tp(b),w(c)?Ap(a,c):a):new uq(a,b,c,d,e,Oe)}
function vq(a,b,c,d,e,f){this.forms=a;this.bb=b;this.pb=c;this.Rb=d;this.A=e;this.Ae=f;this.B=393216;this.I=0}h=vq.prototype;h.S=function(a,b){return new vq(this.forms,this.bb,this.pb,this.Rb,this.A,b)};h.P=function(){return this.Ae};h.kb=function(){return this};h.lb=function(){return this};h.Zb=t;
h.Nb=function(a,b){a=C(this.Rb);if(Dd(b)&&O.m(Q(b),this.A))for(var c=b,d=0;;){if(O.m(d,this.A))return c;var e=b.j?b.j(d):b.call(null,d),f=ip(a.j?a.j(d):a.call(null,d),e);if(zp(f))return sl;c=f===e?c:V.o(c,d,f);d+=1}else return sl};h.Ob=function(a,b){return Gp(this.forms,this.bb,b)};function Gp(a,b,c){var d=new ui(function(){return ff.o(yp,b,a)}),e=Q(b);return new vq(a,b,c,d,e,Oe)}function Hp(a,b){return new Pf(a,b)}
function wq(a,b,c,d,e,f,g,k,l){this.keys=a;this.forms=b;this.bb=c;this.pb=d;this.id=e;this.xe=f;this.Rb=g;this.fb=k;this.Be=l;this.B=393216;this.I=0}h=wq.prototype;h.S=function(a,b){return new wq(this.keys,this.forms,this.bb,this.pb,this.id,this.xe,this.Rb,this.fb,b)};h.P=function(){return this.Be};h.kb=function(){return this};h.lb=function(){return this};h.Zb=t;h.Nb=function(a,b){return this.fb.j?this.fb.j(b):this.fb.call(null,b)};
h.Ob=function(a,b){return Jp.K?Jp.K(this.keys,this.forms,this.bb,b):Jp.call(null,this.keys,this.forms,this.bb,b)};
function Jp(a,b,c,d){var e=Xi(),f=Lh(a,c),g=new ui(function(){return ff.o(yp,c,b)}),k=function(){switch(Q(c)){case 2:return function(l){var m=C(g),n=ip(m.j?m.j(0):m.call(null,0),l);return zp(n)?(l=ip(m.j?m.j(1):m.call(null,1),l),zp(l)?sl:Hp(a.j?a.j(1):a.call(null,1),l)):Hp(a.j?a.j(0):a.call(null,0),n)};case 3:return function(l){var m=C(g),n=ip(m.j?m.j(0):m.call(null,0),l);return zp(n)?(n=ip(m.j?m.j(1):m.call(null,1),l),zp(n)?(l=ip(m.j?m.j(2):m.call(null,2),l),zp(l)?sl:Hp(a.j?a.j(2):a.call(null,2),
l)):Hp(a.j?a.j(1):a.call(null,1),n)):Hp(a.j?a.j(0):a.call(null,0),n)};default:return function(l){for(var m=C(g),n=0;;)if(n<Q(m)){var p=m.j?m.j(n):m.call(null,n);p=ip(p,l);if(zp(p))n+=1;else return Hp(a.j?a.j(n):a.call(null,n),p)}else return sl}}}();return new wq(a,b,c,d,e,f,g,k,Oe)}function Kp(a,b,c){var d=H(b);K(d);M(d);d=H(c);K(d);M(d);for(d=c;;){c=a;b=H(b);a=K(b);b=M(b);var e=H(d);d=K(e);e=M(e);var f=d;d=e;if(w(a)){c=Cp(a,c,f);if(zp(c))return sl;a=c}else return c}}
function xq(a,b,c,d,e,f){this.forms=a;this.bb=b;this.pb=c;this.Rb=d;this.fb=e;this.Ce=f;this.B=393216;this.I=0}h=xq.prototype;h.S=function(a,b){return new xq(this.forms,this.bb,this.pb,this.Rb,this.fb,b)};h.P=function(){return this.Ce};h.kb=function(){return this};h.lb=function(){return this};h.Zb=t;h.Nb=function(a,b){return this.fb.j?this.fb.j(b):this.fb.call(null,b)};h.Ob=function(a,b){return Mp.o?Mp.o(this.forms,this.bb,b):Mp.call(null,this.forms,this.bb,b)};
function Mp(a,b,c){var d=new ui(function(){return ff.o(yp,b,a)}),e=function(){switch(Q(b)){case 2:return function(f){var g=C(d);f=ip(g.j?g.j(0):g.call(null,0),f);return zp(f)?sl:ip(g.j?g.j(1):g.call(null,1),f)};case 3:return function(f){var g=C(d);f=ip(g.j?g.j(0):g.call(null,0),f);if(zp(f))return sl;f=ip(g.j?g.j(1):g.call(null,1),f);return zp(f)?sl:ip(g.j?g.j(2):g.call(null,2),f)};default:return function(f){for(var g=C(d),k=0;;)if(k<Q(g)){f=ip(g.j?g.j(k):g.call(null,k),f);if(zp(f))return sl;k+=1}else return f}}}();
return new xq(a,b,c,d,e,Oe)}function Np(a){return new v(null,2,[rn,Xk,Rj,a],null)}function Op(a){a=Ne(a);a=F(a,rn);return O.m(Xk,a)}var Pp=function Pp(a){var c=Ne(a),d=F(c,gm);a=H(d);var e=K(a);a=M(a);var f=F(c,tm),g=H(f),k=K(g);g=M(g);var l=F(c,An),m=H(l);K(m);m=M(m);var n=F(c,Rj);c=F(c,rl);return Ve(Td,d)?Op(e)?(d=Rj.j(e),d=kd.m(n,w(f)?pd([k,d]):d),a?(a=new v(null,4,[gm,a,tm,g,An,m,Rj,d],null),Pp.j?Pp.j(a):Pp.call(null,a)):Np(d)):new v(null,6,[rn,wk,gm,d,Rj,n,tm,f,An,l,rl,c],null):null};
function Qp(a,b,c,d,e){return w(a)?(d=new v(null,5,[rn,qn,qm,b,ll,d,An,e,Dm,Xi()],null),Op(a)?V.C(d,pm,b,ed([Rj,kd.m(c,Rj.j(a))])):V.C(d,pm,a,ed([Rj,c]))):null}
function Rp(a,b,c,d){return w(w(b)?b:c)?(a=tf(function(e){e=K(e);return d.j?d.j(e):d.call(null,e)},kf.K($f,a,function(){var e=H(b);return e?e:pf(null)}(),function(){var e=H(c);return e?e:pf(null)}())),new X(null,3,5,Z,[H(kf.m(K,a)),w(b)?H(kf.m(id,a)):null,w(c)?H(kf.m(function(e){return $c(e,2)},a)):null],null)):new X(null,3,5,Z,[H(tf(d,a)),b,c],null)}
function Sp(a,b,c){var d=Rp(a,b,c,Td);b=U(d,0,null);c=H(b);a=K(c);c=M(c);var e=U(d,1,null),f=U(e,0,null);d=U(d,2,null);return w(b)?(b=new v(null,4,[rn,ym,gm,b,tm,e,An,d],null),null==c?w(f)?Op(a)?Np(Hp(f,Rj.j(a))):b:a:b):null}function Tp(a,b){return w(w(a)?b:a)?Sp(ed([a,b]),null,null):w(a)?a:b}
var Up=function Up(a){a=mp(a);var c=Ne(a),d=F(c,rn),e=F(c,gm);a=F(c,pm);var f=F(c,qm);c=F(c,An);if(O.m(Xk,d))return!0;if(O.m(null,d))return null;if(O.m(um,d))return d=Up.j?Up.j(a):Up.call(null,a),w(d)?(a=Kp(Vp(a),e,M(c)),!zp(a)):d;if(O.m(qn,d))return(e=a===f)?e:Up.j?Up.j(a):Up.call(null,a);if(O.m(wk,d))return Ve(Up,e);if(O.m(ym,d))return We(Up,e);throw Error(["No matching clause: ",B.j(d)].join(""));},Vp=function Vp(a){a=mp(a);var c=Ne(a);a=F(c,gm);var d=H(a),e=K(d);M(d);var f=F(c,tm),g=U(f,0,null),
k=F(c,rn);d=F(c,pm);var l=F(c,Rj);c=F(c,An);if(O.m(Xk,k))return l;if(O.m(null,k))return null;if(O.m(um,k))return e=Vp.j?Vp.j(d):Vp.call(null,d),(f=O.m(e,Bl))?d=f:(d=rn.j(mp(d)),f=new Fh(null,new v(null,2,[qn,null,wk,null],null),null),d=f.j?f.j(d):f.call(null,d),d=w(d)?xd(e):d,d=w(d)?d:null),w(d)?Bl:Kp(e,a,c);if(O.m(qn,k))return Wp(d,l,g);if(O.m(wk,k))return Wp(e,l,g);if(O.m(ym,k))return c=Rp(a,f,c,Up),a=U(c,0,null),a=U(a,0,null),c=U(c,1,null),c=U(c,0,null),a=null==a?Bl:Vp.j?Vp.j(a):Vp.call(null,a),
w(c)?Hp(c,a):a;throw Error(["No matching clause: ",B.j(k)].join(""));};function Wp(a,b,c){a=mp(a);var d=Ne(a),e=F(d,rn);F(d,gm);a=F(d,ll);if(O.m(null,e))return b;if(O.m(ym,e)||O.m(Xk,e)||O.m(um,e))return a=Vp(d),O.m(a,Bl)?b:kd.m(b,w(c)?pd([c,a]):a);if(O.m(qn,e)||O.m(wk,e))return d=Vp(d),xd(d)||(c=w(c)?pd([c,d]):d,a=w(a)?vf:kd,b=a.m?a.m(b,c):a.call(null,b,c)),b;throw Error(["No matching clause: ",B.j(e)].join(""));}
var Xp=function Xp(a,b){a=mp(a);var d=Ne(a),e=F(d,An),f=F(d,qm);a=F(d,gm);var g=H(a),k=K(g),l=M(g),m=F(d,Rj);g=F(d,rn);var n=F(d,ll),p=F(d,tm),r=H(p),u=K(r),y=M(r);r=F(d,fj);var A=F(d,pm);if(w(d)){if(O.m(Xk,g))return null;if(O.m(null,g))return a=Cp(d,b,d),zp(a)?null:Np(a);if(O.m(um,g))return d=Xp.m?Xp.m(A,b):Xp.call(null,A,b),w(d)?O.m(Xk,rn.j(d))?(a=Kp(Vp(d),a,M(e)),zp(a)?null:Np(a)):new v(null,5,[rn,um,pm,d,fj,r,gm,a,An,e],null):null;if(O.m(wk,g))return Tp(Pp(new v(null,4,[gm,T(Xp.m?Xp.m(k,b):Xp.call(null,
k,b),l),tm,p,An,e,Rj,m],null)),w(Up(k))?function(){var D=Pp(new v(null,4,[gm,l,tm,y,An,M(e),Rj,Wp(k,m,u)],null));return Xp.m?Xp.m(D,b):Xp.call(null,D,b)}():null);if(O.m(ym,g))return Sp(kf.m(function(D){return Xp.m?Xp.m(D,b):Xp.call(null,D,b)},a),p,e);if(O.m(qn,g))return Tp(Qp(Xp.m?Xp.m(A,b):Xp.call(null,A,b),f,m,n,e),w(Up(A))?function(){var D=Qp(f,f,Wp(A,m,null),n,e);return Xp.m?Xp.m(D,b):Xp.call(null,D,b)}():null);throw Error(["No matching clause: ",B.j(g)].join(""));}return null};
function Yp(a,b){for(;;){var c=H(b),d=K(c);c=M(c);if(xd(b))return w(Up(a))?(a=Vp(a),O.m(a,Bl)?null:a):sl;a=Xp(a,d);if(w(a))b=c;else return sl}}function Fq(a,b,c){this.Ec=a;this.pb=b;this.De=c;this.B=393216;this.I=0}h=Fq.prototype;h.S=function(a,b){return new Fq(this.Ec,this.pb,b)};h.P=function(){return this.De};h.kb=function(){return this};h.lb=function(){return this};h.Zb=t;h.Nb=function(a,b){return null==b||Ad(b)?Yp(this.Ec,H(b)):sl};
h.Ob=function(a,b){return sp.m?sp.m(this.Ec,b):sp.call(null,this.Ec,b)};function sp(a,b){return new Fq(a,b,Oe)}
Bp(Um,he(nk,he(Rl,new X(null,1,5,Z,[Uk],null),he(Yn,he(ej,Dl,Uk),he(ej,Kl,Uk))),he(Rl,new X(null,1,5,Z,[Qk],null),he(ej,he(Jl,new X(null,1,5,Z,[new X(null,2,5,Z,[Xm,En],null)],null),new v(null,2,[Dl,Xm,Kl,En],null)),Qk))),xp(he(nk,he(Jl,new X(null,1,5,Z,[Km],null),he(Yn,he(ej,Dl,Km),he(ej,Kl,Km))),he(Jl,new X(null,1,5,Z,[Km],null),he(ej,he(Jl,new X(null,1,5,Z,[new X(null,2,5,Z,[Xm,En],null)],null),new v(null,2,[Dl,Xm,Kl,En],null)),Km))),function(a){return Lh(kf.m(Dl,a),kf.m(Kl,a))},null,!0,function(a){return kf.m(function(b){var c=
U(b,0,null);b=U(b,1,null);return new v(null,2,[Dl,c,Kl,b],null)},a)}));Bp(hk,he(Kk,xl,bm,wm,Yk),Jp(new X(null,2,5,Z,[xl,wm],null),new X(null,2,5,Z,[bm,Yk],null),new X(null,2,5,Z,[Ga,function(a){return a instanceof G}],null),null));
Bp(Hj,he(Kk,nl,hk,Ak,he(Pk,Hj)),Jp(new X(null,2,5,Z,[nl,Ak],null),new X(null,2,5,Z,[hk,he(Pk,Hj)],null),new X(null,2,5,Z,[hk,Jp(new X(null,2,5,Z,[Ek,Qn],null),new X(null,2,5,Z,[he(bn,Hj),he(Jl,new X(null,1,5,Z,[Km],null),he(Zl,he(El,Km),he(Ul,he(Gk,sj,Hj),Km)))],null),new X(null,2,5,Z,[Qp(Hj,Hj,ld,!1,Hj),function(a){return Ea(a)&&Ve(ja(Dp,Hj),a)}],null),null)],null),null));
Bp(Nn,new Fh(null,new v(null,3,[he(qj),"null",he(Lm),"null",he(Ij),"null"],null),null),new Fh(null,new v(null,3,[1,null,2,null,0,null],null),null));Bp(el,bm,Ga);var fo=he(Ej,Nn,el),go;go=Gp(new X(null,2,5,Z,[Nn,el],null),new X(null,2,5,Z,[Nn,el],null),null);Bp(jn,fo,go);
Bp(Bn,he(Wk,El,he(Jl,new X(null,1,5,Z,[vn],null),he(Tk,new X(null,2,5,Z,[am,he(ej,nn,he(Hm,2,vn))],null),he(sj,he(bn,jn),am)))),Mp(new X(null,2,5,Z,[El,he(Jl,new X(null,1,5,Z,[vn],null),he(Tk,new X(null,2,5,Z,[am,he(ej,nn,he(Hm,2,vn))],null),he(sj,he(bn,jn),am)))],null),new X(null,2,5,Z,[Ea,function(a){a=kf.m(Wf,Ph(2,2,a));return Dp.m(Qp(jn,jn,ld,!1,jn),a)}],null),null));fh([xk,wl,$k,qk,rk,Cj,gl,Un,uj,Il,Mj,Sk,hm,il,gk],[uk,sk,!0,dl,Fj,Fj,Rm,Fj,uk,!0,Fj,Fj,uk,Fj,Fj]);function bq(a){return["Oops, ",B.j(a)].join("")}var cq=function(){var a=cf(Oe),b=cf(Oe),c=cf(Oe),d=cf(Oe),e=Bc(Oe,en,Hi.F?Hi.F():Hi.call(null));return new Si(Cc.m("oops.messages","runtime-message"),function(){function f(g,k){if(1<arguments.length)for(var l=0,m=Array(arguments.length-1);l<m.length;)m[l]=arguments[l+1],++l;return g}f.H=1;f.J=function(g){var k=K(g);Fc(g);return k};f.C=function(g){return g};return f}(),e,a,b,c,d)}();
Vi(cq,Sk,function(a,b){b=Ne(b);a=F(b,Am);b=F(b,Ln);return bq.call(null,["Unexpected object value (",B.j(a),")",xd(b)?null:[" on key path '",B.j(b),"'"].join("")].join(""))});Vi(cq,Cj,function(a,b){var c=Ne(b);a=F(c,Uj);b=F(c,Ln);c=F(c,Ll);return bq.call(null,["Expected a function",w(a)?" or nil":null,xd(b)?null:[" on key path '",B.j(b),"'"].join(""),", got \x3c",B.j(q(c)),"\x3e instead"].join(""))});
Vi(cq,il,function(a,b){b=Ne(b);a=F(b,nl);b=F(b,Ln);return bq.call(null,["Missing expected object key '",B.j(a),"'",xd(b)||O.m(b,a)?null:[" on key path '",B.j(b),"'"].join("")].join(""))});Vi(cq,gk,function(a,b){var c=Ne(b);a=F(c,nl);b=F(c,Ln);c=F(c,jk);return bq.call(null,["Object key '",B.j(a),"' is not writable",xd(b)||O.m(b,a)?null:[" on key path '",B.j(b),"'"].join(""),w(c)?" because the object is frozen":null].join(""))});
Vi(cq,Mj,function(a,b){b=Ne(b);a=F(b,nl);b=F(b,Ln);return bq.call(null,["Cannot create object key '",B.j(a),"'",xd(b)||O.m(b,a)?null:[" on key path '",B.j(b),"'"].join("")," because the object is sealed"].join(""))});Vi(cq,rk,function(a,b){b=Ne(b);a=F(b,nl);b=F(b,Ln);return bq.call(null,["Cannot create object key '",B.j(a),"'",xd(b)||O.m(b,a)?null:[" on key path '",B.j(b),"'"].join("")," because the object is frozen"].join(""))});Vi(cq,Un,function(){return bq.call(null,"Invalid selector")});
Vi(cq,xk,function(){return bq.call(null,"Unexpected empty selector")});Vi(cq,uj,function(){return bq.call(null,'Unexpected punching selector ("!" makes sense only with oset!)')});Vi(cq,hm,function(){return bq.call(null,'Unexpected soft selector ("?" does not make sense with oset!)')});var pq=Po(2,{});var qq=Po(3,{});function rq(a,b,c,d){var e=Q(b);a=w(a)?0:10<e?10:e;b=kf.m(ja(sq,!0),lf.m(a,b));b=Ie(B,mf(1,rf.m(pf(" "),b)));e=a<e?"...":null;return[B.j(c),B.j(b),e,B.j(d)].join("")}var sq,ho=cf(Oe),io=cf(Oe),jo=cf(Oe),ko=cf(Oe),lo=Bc(Oe,en,Hi.F?Hi.F():Hi.call(null));
sq=new Si(Cc.m("cljs.tools.reader.impl.inspect","inspect*"),function(a,b){return null==b?Tb:"string"===typeof b?xl:b instanceof G?oj:"number"===typeof b?oj:b instanceof E?oj:Dd(b)?Rk:ee(b)?Qj:Bd(b)?Vl:zd(b)?Em:O.m(b,!0)?oj:O.m(b,!1)?oj:Ha(b)},lo,ho,io,jo,ko);Vi(sq,xl,function(a,b){a=w(a)?5:20;var c=b.length>a?'..."':'"',d=b.length;return['"',B.j(b.substring(0,a<d?a:d)),c].join("")});Vi(sq,oj,function(a,b){return B.j(b)});Vi(sq,J,function(){return"\x3cindexed seq\x3e"});Vi(sq,sg,function(){return"\x3cmap seq\x3e"});
Vi(sq,Zg,function(){return"\x3cmap seq\x3e"});Vi(sq,ie,function(){return"\x3ccons\x3e"});Vi(sq,pe,function(){return"\x3clazy seq\x3e"});Vi(sq,Tb,function(){return"nil"});Vi(sq,Qj,function(a,b){return rq(a,b,"(",")")});Vi(sq,Vl,function(a,b){var c=Q(b),d=w(a)?0:c;b=Ie(ze,lf.m(d,b));return rq(a,b,"{",c>d?"...}":"}")});Vi(sq,Em,function(a,b){return rq(a,b,"#{","}")});Vi(sq,Rk,function(a,b){return rq(a,b,"[","]")});Vi(sq,Sb,function(a,b){return mi(ed([Ha(b)]),xa())});new ta;var yq=function(){var a=new X(null,13,5,Z,[null,31,28,31,30,31,30,31,31,30,31,30,31],null),b=new X(null,13,5,Z,[null,31,29,31,30,31,30,31,31,30,31,30,31],null);return function(c,d){return F(w(d)?b:a,c)}}(),zq=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d)(?:[T](\d\d)(?::(\d\d)(?::(\d\d)(?:[.](\d+))?)?)?)?)?)?(?:[Z]|([-+])(\d\d):(\d\d))?/;function Aq(a){a=parseInt(a,10);return Fa(isNaN(a))?a:null}
function Bq(a,b,c,d){if(!(a<=b&&b<=c))throw Error([B.j(d)," Failed:  ",B.j(a),"\x3c\x3d",B.j(b),"\x3c\x3d",B.j(c)].join(""));return b}
function Cq(a){var b=Yh(zq,a);U(b,0,null);var c=U(b,1,null),d=U(b,2,null),e=U(b,3,null),f=U(b,4,null),g=U(b,5,null),k=U(b,6,null),l=U(b,7,null),m=U(b,8,null),n=U(b,9,null),p=U(b,10,null);if(Fa(b))throw Error(["Unrecognized date/time syntax: ",B.j(a)].join(""));a=Aq(c);b=function(){var D=Aq(d);return w(D)?D:1}();c=function(){var D=Aq(e);return w(D)?D:1}();var r=function(){var D=Aq(f);return w(D)?D:0}(),u=function(){var D=Aq(g);return w(D)?D:0}(),y=function(){var D=Aq(k);return w(D)?D:0}(),A=function(){a:if(O.m(3,
Q(l)))var D=l;else if(3<Q(l))D=l.substring(0,3);else for(D=new ta(l);;)if(3>D.getLength())D=D.append("0");else{D=D.toString();break a}D=Aq(D);return w(D)?D:0}();m=(O.m(m,"-")?-1:1)*(60*function(){var D=Aq(n);return w(D)?D:0}()+function(){var D=Aq(p);return w(D)?D:0}());return new X(null,8,5,Z,[a,Bq(1,b,12,"timestamp month field must be in range 1..12"),Bq(1,c,yq(b,0===(a%4+4)%4&&(0!==(a%100+100)%100||0===(a%400+400)%400)),"timestamp day field must be in range 1..last day in month"),Bq(0,r,23,"timestamp hour field must be in range 0..23"),
Bq(0,u,59,"timestamp minute field must be in range 0..59"),Bq(0,y,O.m(u,59)?60:59,"timestamp second field must be in range 0..60"),Bq(0,A,999,"timestamp millisecond field must be in range 0..999"),m],null)}
Bh.C(ed([new v(null,4,[zk,function(a){if("string"===typeof a){var b=Cq(a);if(w(b)){a=U(b,0,null);var c=U(b,1,null),d=U(b,2,null),e=U(b,3,null),f=U(b,4,null),g=U(b,5,null),k=U(b,6,null);b=U(b,7,null);b=new Date(Date.UTC(a,c-1,d,e,f,g,k)-6E4*b)}else throw Error(["Unrecognized date/time syntax: ",B.j(a)].join(""));return b}throw Error("Instance literal expects a string for its timestamp.");},Ql,function(a){if("string"===typeof a)return new Wi(a.toLowerCase());throw Error("UUID literal expects a string as its representation.");
},Gm,function(a){if(Dd(a))return vf.m(lg,a);throw Error("Queue literal expects a vector for its elements.");},xf,function(a){if(Dd(a)){var b=[];a=H(a);for(var c=null,d=0,e=0;;)if(e<d){var f=c.V(null,e);b.push(f);e+=1}else if(a=H(a))c=a,Ed(c)?(a=cc(c),e=dc(c),c=a,d=Q(a),a=e):(a=K(c),b.push(a),a=M(c),c=null,d=0),e=0;else break;return b}if(Bd(a)){b={};a=H(a);c=null;for(e=d=0;;)if(e<d){var g=c.V(null,e);f=U(g,0,null);g=U(g,1,null);var k=b;f=oe(f);k[f]=g;e+=1}else if(a=H(a))Ed(a)?(d=cc(a),a=dc(a),c=d,
d=Q(d)):(d=K(a),c=U(d,0,null),d=U(d,1,null),e=b,c=oe(c),e[c]=d,a=M(a),c=null,d=0),e=0;else break;return b}throw Error("JS literal expects a vector or map containing only string or unqualified keyword keys");}],null),Oe]));function Dq(a,b){const c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(e,f,g,k,l,m,n,p){if("%"==m)return"%";const r=c.shift();if("undefined"==typeof r)throw Error("[goog.string.format] Not enough arguments");arguments[0]=r;return Dq.nb[m].apply(null,arguments)})}Dq.nb={};
Dq.nb.s=function(a,b,c){return isNaN(c)||""==c||a.length>=Number(c)?a:a=-1<b.indexOf("-",0)?a+ra(" ",Number(c)-a.length):ra(" ",Number(c)-a.length)+a};
Dq.nb.f=function(a,b,c,d,e){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));let f;f=0>Number(a)?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=Number(a)&&(d=f+d);if(isNaN(c)||d.length>=Number(c))return d;d=isNaN(e)?Math.abs(Number(a)).toString():Math.abs(Number(a)).toFixed(e);a=Number(c)-d.length-f.length;0<=b.indexOf("-",0)?d=f+d+ra(" ",a):(b=0<=b.indexOf("0",0)?"0":" ",d=f+ra(b,a)+d);return d};Dq.nb.d=function(a,b,c,d,e,f,g,k){return Dq.nb.f(parseInt(a,10),b,c,d,0,f,g,k)};
Dq.nb.i=Dq.nb.d;Dq.nb.u=Dq.nb.d;function Eq(){return na("iPhone")&&!na("iPod")&&!na("iPad")};na("Opera");na("Trident")||na("MSIE");na("Edge");!na("Gecko")||-1!=la().toLowerCase().indexOf("webkit")&&!na("Edge")||na("Trident")||na("MSIE")||na("Edge");-1!=la().toLowerCase().indexOf("webkit")&&!na("Edge")&&na("Mobile");na("Macintosh");na("Windows");na("Linux")||na("CrOS");var mo=aa.navigator||null;mo&&(mo.appVersion||"").indexOf("X11");na("Android");Eq();na("iPad");na("iPod");Eq()||na("iPad")||na("iPod");la().toLowerCase().indexOf("kaios");try{(new self.OffscreenCanvas(0,0)).getContext("2d")}catch(a){};(function(){var a=ff.m(oe,new Fh(null,new v(null,25,[Al,"null",ao,"null",ql,"null",sn,"null",mj,"null",an,"null",vj,"null",zm,"null",Jn,"null",Ol,"null",sm,"null",jm,"null",lm,"null",un,"null",kj,"null",Rn,"null",dj,"null",Fn,"null",bl,"null",gj,"null",Nl,"null",Zn,"null",ik,"null",Vj,"null",$l,"null"],null),null));return vf.m(vf.m(Hh,ff.m(function(b){return Cc.m("clojure.core",b)},a)),ff.m(function(b){return Cc.m("cljs.core",b)},a))})();var Gq=new X(null,3,5,Z,[3,85,0],null);function Hq(a,b){var c=F(b,Ck);c=w(c)?c:["Unexpected argument: ",B.j(a)].join("");throw Zi(c,kd.m(new v(null,1,[Vn,new v(null,2,[Wj,a,Co,Ha(a)],null)],null),qd.m(b,Ck)));}function Iq(a){return"string"===typeof a?O.m(a,"")?null:a:null}function Jq(a){return"number"===typeof a?$d(a):"string"===typeof a?(a=parseInt(a,10),w(isNaN(a))?null:a):null}
function Kq(a,b,c){return Wd(Oh(),Ud(function(d,e){var f=U(e,0,null);e=U(e,1,null);return a.o?a.o(d,f,e):a.call(null,d,f,e)},Td),b,c)}function Kr(a){return function(b,c){b=a.j?a.j(c):a.call(null,c);return w(b)?new Pc(b):null}}function Mq(a,b){return Oa.o(Kr(a),null,b)}O.m("default","nodejs");var Nq="undefined"!==typeof window?window:null;
function Oq(a){a=hp(B.j(a),/-/,2);var b=U(a,0,null);a=U(a,1,null);var c=/\d+/;if("string"===typeof b)b=$h(c,b);else throw new TypeError("re-seq must match against a string.");b=w(b)?ff.m(Jq,b):null;return new v(null,2,[fm,b,Ml,w(a)?a.toLowerCase():null],null)}
var Pq=function Pq(a){switch(arguments.length){case 3:return Pq.o(arguments[0],arguments[1],arguments[2]);case 2:return Pq.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Pq.C(arguments[0],arguments[1],arguments[2],3<c.length?new J(c.slice(3),0,null):null)}};Pq.o=function(a,b,c){return Kd(a,b)?a:V.o(a,b,c)};Pq.C=function(a,b,c,d){return Kq(Pq,Pq.o(a,b,c),d)};
Pq.J=function(a){var b=K(a),c=M(a);a=K(c);var d=M(c);c=K(d);d=M(d);return this.C(b,a,c,d)};Pq.m=function(a,b){return Kq(function(c,d,e){return Kd(c,d)?c:V.o(c,d,e)},null==a?Oe:a,b)};Pq.H=3;var Qq=function Qq(a){switch(arguments.length){case 2:return Qq.m(arguments[0],arguments[1]);case 3:return Qq.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Qq.m=function(a,b){b=0>b?0:b;var c=Q(a);return b>=c?ld:eg(a,b,c)};
Qq.o=function(a,b,c){b=0>b?0:b;var d=$d(Q(a));c=c>d?d:c;return b>=c?ld:eg(a,b,c)};Qq.H=3;var Rq=function Rq(a){switch(arguments.length){case 2:return Rq.m(arguments[0],arguments[1]);case 3:return Rq.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Rq.m=function(a,b){var c=Q(a);return 0>b?(b+=c,eg(a,0>b?0:b,c)):b>=c?ld:eg(a,b,c)};
Rq.o=function(a,b,c){if(0>=c)return ld;var d=$d(Q(a));if(0>b)return b+=d,b=0>b?0:b,c=b+c,eg(a,b,c>d?d:c);c=b+c;d=c>d?d:c;return b>=d?ld:eg(a,b,d)};Rq.H=3;function Sq(a){return 1<Q(a)?eg(a,1,Q(a)):ld}function Tq(){this.state=null;this.B=32769;this.I=98304}h=Tq.prototype;h.ya=function(){return this.state};h.Qa=function(a,b){return this.state=b};h.rc=function(a,b){return this.j?this.j(b):this.call(null,b)};
h.call=function(a){switch(arguments.length-1){case 0:return this.F();case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.F=function(){return this.state};h.j=function(a){return this.state=a=a.j?a.j(this.state):a.call(null,this.state)};
h.m=function(a,b){var c=this.state,d=F(c,a);b=b.j?b.j(d):b.call(null,d);this.state=V.o(c,a,b);return b};(function(){var a=ia(Nq,oe("performance"),null);if(w(a)){var b=function(){var c=ia(a,oe("now"),null);if(w(c))return c;c=ia(a,oe("mozNow"),null);if(w(c))return c;c=ia(a,oe("webkitNow"),null);if(w(c))return c;c=ia(a,oe("msNow"),null);return w(c)?c:ia(a,oe("oNow"),null)}();return w(b)?function(){return Math.floor(1E6*b.call(a))}:function(){return 1E6*Date.now()}}return function(){return 1E6*Date.now()}})();
function Uq(a){return Math.random()<=a}function Vq(a,b){this.n=a;this.bd=b}function Wq(a,b){this.n=a;this.gd=b}function Xq(a,b,c){this.ad=a;this.Jd=b;this.jd=c}
function Yq(a){if(Bd(a))return Sd(function(c,d,e){var f=U(e,0,null);e=U(e,1,null);return V.o(c,d,new Vq(f,e))},Oe,a);if(Dd(a)){var b=Zq?Zq():$q.call(null);return Oa.o(function(c,d){var e=U(d,0,null),f=U(d,1,null);d=U(d,2,null);return V.o(c,w(d)?d:b.F?b.F():b.call(null),new Vq(e,f))},Oe,a)}return Hq(a,new v(null,3,[Jk,ni,Ik,cl,mm,new Fh(null,new v(null,2,[dm,"null",al,"null"],null),null)],null))}
function ar(a){function b(l,m){var n=Date.now();if(w(function(){var A=Fa(m);return A?Uq.j?Uq.j(k):Uq.call(null,k):A}())&&hf(c,null,null)){var p=function(A){return Xb(Sd(function(D,N,I){I=Sd(function(R,W,Y){var ma=F(e,W);return w(ma)?n>=Y.gd+ma.bd?qd.m(R,W):R:qd.m(R,W)},I,I);return xd(I)?Zb(D,N):Yb(D,N,I)},Vb(w(A)?A:Oe),A))};d.j?d.j(p):d.call(null,p)}for(;;){p=d.F?d.F():d.call(null);var r=F(p,l),u=null==r?null:Sd(function(A,D,N,I,R,W){return function(Y,ma,Sa){var tb=F(W,ma);if(w(tb)){if(Sa.n<tb.n)return Y;
Sa=Sa.gd+tb.bd-N;return 0>=Sa?Y:null==Y?new Xq(pd([ma,Sa]),ma,Sa):Sa>Y.jd?new Xq(V.o(Y.ad,ma,Sa),ma,Sa):new Xq(V.o(Y.ad,ma,Sa),Y.Jd,Y.jd)}return Y}}(p,r,n,c,d,e,null,f,g,Uq,k),null,r);if(w(w(m)?m:u)){var y=u;return w(y)?(l=y,new X(null,3,5,Z,[l.Jd,l.jd,l.ad],null)):null}y=c.F?c.F():c.call(null);if(w(y))return null;r=Sd(function(A,D,N,I,R){return function(W,Y,ma){var Sa=V.o;var tb=F(N,Y);if(w(tb)){var Fe=tb.gd;ma=R>=Fe+ma.bd?new Wq(1,R):new Wq(tb.n+1,Fe)}else ma=new Wq(1,R);return Sa.call(V,W,Y,ma)}}(y,
p,r,u,n,c,d,e,null,f,g,Uq,k),r,e);if(hf(d,p,V.o(p,l,r)))return null}}if(xd(a))return new X(null,2,5,Z,[null,Ye()],null);var c=new Tq,d=new Tq,e=Yq(a),f=Ne(null),g=Bc(f,Gl,16E3),k=1/$d(g);return new X(null,2,5,Z,[d,function(){function l(r,u){switch(r instanceof G?r.pa:null){case "rl/reset":case "limiter/reset":a:switch(u instanceof G?u.pa:null){case "rl/all":case "limiter/all":r=!0;break a;default:r=!1}w(r)?df(d,null):(r=function(y){return qd.m(y,u)},d.j?d.j(r):d.call(null,r));return null;case "rl/peek":case "limiter/peek":return b(u,
!0);default:return Hq(r,new v(null,4,[Jk,ni,Ik,Sn,mm,new Fh(null,new v(null,2,[Fl,null,xm,null],null),null),hl,u],null))}}function m(r){return b(r,!1)}function n(){return b(null,!1)}var p=null;p=function(r,u){switch(arguments.length){case 0:return n.call(this);case 1:return m.call(this,r);case 2:return l.call(this,r,u)}throw Error("Invalid arity: "+arguments.length);};p.F=n;p.j=m;p.m=l;return p}()],null)}function br(a){this.c=a;this.B=32769;this.I=0}h=br.prototype;h.ya=function(){return this.c};
h.call=function(a){switch(arguments.length-1){case 0:return this.F();case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Ma(b)))};h.F=function(){var a=this.c;this.c+=1;return a};h.j=function(a){var b=this.c;this.c+=a;return b};
h.m=function(a,b){a=a instanceof G?a.pa:null;switch(a){case "add":return this.c+=b,null;case "set":return this.c=b,null;case "set\x3d":case "set-get":return this.c=b;case "\x3dset":case "get-set":return a=this.c,this.c=b,a;case "\x3d+":case "get-add":return a=this.c,this.c+=b,a;case "+\x3d":case "add-get":return this.c+=b;default:throw Error(["No matching clause: ",B.j(a)].join(""));}};
function $q(a){switch(arguments.length){case 0:return Zq();case 1:return new br($d(arguments[0]));default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Zq(){return new br($d(0))}var cr=function cr(a){switch(arguments.length){case 0:return cr.F();case 1:return cr.j(arguments[0]);case 2:return cr.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};cr.F=function(){return new ta};
cr.j=function(a){return w(a instanceof ta)?a:new ta(B.j(a))};cr.m=function(a,b){a=w(a instanceof ta)?a:new ta(B.j(a));b=B.j(b);return a.append(b)};cr.H=2;function dr(a){return null==a?"nil":a}Na("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_");function Or(){return!0}function Pr(){return!1}function Tr(a){return"string"===typeof a||(null!=a?a.I&4096||t===a.qc?!0:!1:!1)}function fs(a){if(null!=a&&(a.I&4096||t===a.qc)){var b=oe(a);a=le(a);return w(a)?[a,"/",b].join(""):b}return a}
function gs(a){if("string"===typeof a)return a;if(null==a)return"";var b=fs(a);return w(b)?b:Hq(a,new v(null,3,[Jk,gn,Ik,Pl,mm,new Fh(null,new v(null,4,[null,"null",Vk,"null",xn,"null",dk,"null"],null),null)],null))}function hs(a){var b=a.indexOf("*");b=!O.m(-1,b);if(w(b)){if(a=ep(ep(["^",B.j(a),"$"].join(""),".","\\."),"*","(.*)"),!(a instanceof RegExp)){var c=Zh(/^\(\?([idmsux]*)\)/,a);b=U(c,0,null);c=U(c,1,null);a=new RegExp(a.substring(null==b?0:b.length),w(c)?c:"")}}else a=null;return a}
function is(a,b){for(;;){if(w(function(){var m=new Fh(null,new v(null,2,["*",null,cj,null],null),null);return m.j?m.j(a):m.call(null,a)}()))return Or;if(w(function(){var m=Ih([ld,Hh,$n]);return m.j?m.j(a):m.call(null,a)}()))return Pr;if(a instanceof RegExp)return function(m,n,p,r,u,y,A){return function(D){return Zh(m,A(D))}}(a,b,Or,Pr,Tr,fs,gs,hs);if(Tr(a)){var c=fs(a),d=hs(c);if(w(d))c=b,a=d,b=c;else return function(m,n,p,r,u,y,A,D,N){return function(I){return O.m(r,N(I))}}(a,b,d,c,Or,Pr,Tr,fs,gs,
hs)}else if(Dd(a)||zd(a)){if(w(function(){var m=Jh(a);return m.j?m.j("*"):m.call(null,"*")}()))return Or;if(O.m(Q(a),1))d=K(a),c=b,a=d,b=c;else{var e=Oa.o(function(m,n,p,r,u,y,A,D){return function(N,I){var R=U(N,0,null);N=U(N,1,null);I=y(I);var W=I instanceof RegExp?I:D(I);return w(W)?new X(null,2,5,Z,[R,kd.m(N,W)],null):new X(null,2,5,Z,[kd.m(R,I),N],null)}}(a,b,Or,Pr,Tr,fs,gs,hs),new X(null,2,5,Z,[Hh,ld],null),a),f=U(e,0,null),g=U(e,1,null),k=Qe(f),l=function(){var m=Qe(g);return w(m)?(m=function(n,
p,r,u,y,A,D,N,I,R,W,Y,ma,Sa){return function(tb){return Mq(function(){return function(Fe){return Zh(Fe,tb)}}(n,p,r,u,y,A,D,N,I,R,W,Y,ma,Sa),r)}}(a,b,m,m,e,f,g,k,Or,Pr,Tr,fs,gs,hs),w(b)?Ei(m):m):null}();if(w(function(){var m=k;return w(m)?l:m}()))return function(m,n,p,r,u,y,A,D,N,I,R,W){return function(Y){Y=W(Y);var ma=y.j?y.j(Y):y.call(null,Y);return w(ma)?ma:A.j?A.j(Y):A.call(null,Y)}}(a,b,e,f,g,k,l,Or,Pr,Tr,fs,gs,hs);if(w(k))return function(m,n,p,r,u,y,A,D,N,I,R,W){return function(Y){Y=W(Y);return y.j?
y.j(Y):y.call(null,Y)}}(a,b,e,f,g,k,l,Or,Pr,Tr,fs,gs,hs);if(w(l))return function(m,n,p,r,u,y,A,D,N,I,R,W){return function(Y){return A(W(Y))}}(a,b,e,f,g,k,l,Or,Pr,Tr,fs,gs,hs);throw Zi("[encore/cond!] No matching clause",Oe);}}else return Hq(a,new v(null,3,[Jk,gn,Ik,Sm,mm,new Fh(null,new v(null,5,[yl,"null",new v(null,2,[on,cm,Jm,cm],null),"null",xn,"null",dk,"null",Hl,"null"],null),null)],null))}}
function lr(a){for(;;){if(Bd(a)){var b=F(a,Pj),c=function(){var g=F(a,on);return w(g)?g:F(a,Xl)}(),d=function(){var g=F(a,Jm);return w(g)?g:F(a,Dn)}(),e=function(){var g=c;return w(g)?is(g,b):null}(),f=function(){var g=d;return w(g)?is(g,b):null}();if(O.m(f,Or)||O.m(e,Pr))return Pr;if(w(function(){var g=e;return w(g)?f:g}()))return function(g,k,l,m,n,p){return function(r){return(n.j?n.j(r):n.call(null,r))?(p.j?p.j(r):p.call(null,r))?!1:!0:!1}}(a,b,c,d,e,f,Or,Pr,Tr,fs,gs,hs,is);if(w(e))return O.m(e,
Or)?Or:function(g,k,l,m,n){return function(p){return n(p)?!0:!1}}(a,b,c,d,e,f,Or,Pr,Tr,fs,gs,hs,is);if(w(f))return O.m(f,Pr)?Or:function(g,k,l,m,n,p){return function(r){return p(r)?!1:!0}}(a,b,c,d,e,f,Or,Pr,Tr,fs,gs,hs,is);throw Zi("[encore/name-filter] `allow-spec` and `deny-spec` cannot both be nil",new v(null,2,[Mn,c,yk,d],null));}a=new v(null,2,[on,a,Jm,null],null)}}Ze.m(Qe,Qq);Ze.m(Qe,Rq);
var mr=function mr(a){switch(arguments.length){case 2:return mr.m(arguments[0],arguments[1]);case 3:return mr.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};mr.m=function(a,b){return a.substring(b)};mr.o=function(a,b,c){return b>=c?"":a.substring(b,c)};mr.H=3;
var nr=function nr(a){switch(arguments.length){case 2:return nr.m(arguments[0],arguments[1]);case 3:return nr.o(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};nr.m=function(a,b){return Iq(a.substr(b))};nr.o=function(a,b,c){return Iq(a.substr(b,c))};nr.H=3;Ze.m(Iq,mr);Ze.m(Iq,nr);function or(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return pr(0<b.length?new J(b.slice(0),0,null):null)}function pr(a){U(a,0,null);return new v(null,2,[zl,!0,Ll,function(b){b=Ne(b);b=F(b,ek);b=ed([yi(b)]);var c=V.o(xa(),za,!1);di(mi(b,c));w(va)?(b=xa(),di("\n"),b=(F(b,ya),null)):b=null;return b}],null)}function qr(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return rr(0<b.length?new J(b.slice(0),0,null):null)}
function rr(a){a=U(a,0,null);a=Ne(a);var b=F(a,Lk);return new v(null,2,[zl,!0,Ll,"undefined"===typeof console?function(){return null}:function(){function c(d){var e=function(){var f=d instanceof G?d.pa:null;switch(f){case "trace":return console.trace;case "debug":return console.debug;case "info":return console.info;case "warn":return console.warn;case "error":return console.error;case "fatal":return console.error;case "report":return console.info;default:throw Error(["No matching clause: ",B.j(f)].join(""));
}}();return w(e)?e:console.log}return function(d){var e=c(Im.j(d));if(w(e)){var f=function(){var k=F(d,hj);return Kd(k,Lk)?F(k,Lk):Kd(d,Lk)?F(d,Lk):b}();if(w(f)){var g=function(){var k=V.C(d,Mk,null,ed([km,null])),l=fk.j(d);return l.j?l.j(k):l.call(null,k)}();f=function(){var k=Tl.j(d),l=km.j(d);return w(l)?T(g,T(l,k)):T(g,k)}();return e.apply(console,Na(f))}return e.call(console,yi(ek.j(d)))}return null}}()],null)};var sr={Od:["BC","AD"],Nd:["Before Christ","Anno Domini"],Qd:"JFMAMJJASOND".split(""),Wd:"JFMAMJJASOND".split(""),Pd:"January February March April May June July August September October November December".split(" "),Vd:"January February March April May June July August September October November December".split(" "),Sd:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Yd:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ae:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
$d:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ud:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Zd:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Le:"SMTWTFS".split(""),Xd:"SMTWTFS".split(""),Td:["Q1","Q2","Q3","Q4"],Rd:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Kd:["AM","PM"],Ic:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],nd:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Ld:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],kd:6,Ne:[5,6],ld:5},tr=sr;
tr=sr;function ur(a,b,c,d,e){a=new Date(a,b,c);e=e||0;return a.valueOf()+864E5*(((void 0!==d?d:3)-e+7)%7-((a.getDay()+6)%7-e+7)%7)};function vr(){}
function wr(a){if("number"==typeof a){var b=new vr;b.Hd=a;var c=a;if(0==c)c="Etc/GMT";else{var d=["Etc/GMT",0>c?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);c%=60;0!=c&&d.push(":",sa(c,2));c=d.join("")}b.ed=c;c=a;0==c?c="UTC":(d=["UTC",0>c?"+":"-"],c=Math.abs(c),d.push(Math.floor(c/60)%100),c%=60,0!=c&&d.push(":",c),c=d.join(""));a=xr(a);b.fd=[c,c];b.Fb={Me:a,md:a};b.Gc=[];return b}b=new vr;b.ed=a.id;b.Hd=-a.std_offset;b.fd=a.names;b.Fb=a.names_ext;b.Gc=a.transitions;return b}
function xr(a){var b=["GMT"];b.push(0>=a?"+":"-");a=Math.abs(a);b.push(sa(Math.floor(a/60)%100,2),":",sa(a%60,2));return b.join("")}function yr(a,b){b=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5;for(var c=0;c<a.Gc.length&&b>=a.Gc[c];)c+=2;return 0==c?0:a.Gc[c-1]}function zr(a,b){a=a.Hd-yr(a,b);return-1440===a?0:a};function Ar(a){this.Dc=[];this.fa=tr;"number"==typeof a?Br(this,a):Cr(this,a)}var Dr=[/^'(?:[^']|'')*('|$)/,/^(?:G+|y+|Y+|M+|k+|S+|E+|a+|b+|B+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|V+|w+|z+|Z+)/,/^[^'GyYMkSEabBhKHcLQdmsvVwzZ]+/];function Er(a){return a.getHours?a.getHours():0}
function Cr(a,b){for(Fr&&(b=b.replace(/\u200f/g,""));b;){const c=b;for(let d=0;d<Dr.length;++d){const e=b.match(Dr[d]);if(e){let f=e[0];b=b.substring(f.length);0==d&&("''"==f?f="'":(f=f.substring(1,"'"==e[1]?f.length-1:f.length),f=f.replace(/''/g,"'")));a.Dc.push({text:f,type:d});break}}if(c===b)throw Error("Malformed pattern part: "+b);}}
Ar.prototype.format=function(a,b){if(!a)throw Error("The date to format must be non-null.");var c=b?6E4*(a.getTimezoneOffset()-zr(b,a)):0;let d=c?new Date(a.getTime()+c):a,e=d;b&&d.getTimezoneOffset()!=a.getTimezoneOffset()&&(d=new Date(d.getTime()+6E4*(d.getTimezoneOffset()-a.getTimezoneOffset())),e=new Date(a.getTime()+(c+(0<c?-864E5:864E5))));c=[];for(let f=0;f<this.Dc.length;++f){const g=this.Dc[f].text;1==this.Dc[f].type?c.push(Gr(this,g,a,d,e,b)):c.push(g)}return c.join("")};
function Br(a,b){let c;if(4>b)c=a.fa.Ic[b];else if(8>b)c=a.fa.nd[b-4];else if(12>b)c=a.fa.Ld[b-8],c=c.replace("{1}",a.fa.Ic[b-8]),c=c.replace("{0}",a.fa.nd[b-8]);else if(12===b)c=a.fa.Ic[0].replace(/[^EMd]*yy*[^EMd]*/,"");else{Br(a,10);return}Cr(a,c)}function Hr(a,b){{b=String(b);const c=a.fa||tr;if(void 0!==c.be){a=[];for(let d=0;d<b.length;d++){const e=b.charCodeAt(d);a.push(48<=e&&57>=e?String.fromCharCode(c.be+e-48):b.charAt(d))}b=a.join("")}}return b}var Fr=!1;
function Ir(a){if(!(a.getHours&&a.getSeconds&&a.getMinutes))throw Error("The date to format has no time (probably a goog.date.Date). Use Date or goog.date.DateTime, or use a pattern without time fields.");}function Jr(a,b){Ir(b);b=Er(b);return a.fa.Kd[12<=b&&24>b?1:0]}
function Gr(a,b,c,d,e,f){var g=b.length;switch(b.charAt(0)){case "G":return c=0<d.getFullYear()?1:0,4<=g?a.fa.Nd[c]:a.fa.Od[c];case "y":return c=d.getFullYear(),0>c&&(c=-c),2==g&&(c%=100),Hr(a,sa(c,g));case "Y":return c=(new Date(ur(d.getFullYear(),d.getMonth(),d.getDate(),a.fa.ld,a.fa.kd))).getFullYear(),0>c&&(c=-c),2==g&&(c%=100),Hr(a,sa(c,g));case "M":a:switch(c=d.getMonth(),g){case 5:g=a.fa.Qd[c];break a;case 4:g=a.fa.Pd[c];break a;case 3:g=a.fa.Sd[c];break a;default:g=Hr(a,sa(c+1,g))}return g;
case "k":return Ir(e),Hr(a,sa(Er(e)||24,g));case "S":return Hr(a,(e.getMilliseconds()/1E3).toFixed(Math.min(3,g)).slice(2)+(3<g?sa(0,g-3):""));case "E":return c=d.getDay(),4<=g?a.fa.ae[c]:a.fa.Ud[c];case "a":return Jr(a,e);case "b":return Jr(a,e);case "B":return Jr(a,e);case "h":return Ir(e),Hr(a,sa(Er(e)%12||12,g));case "K":return Ir(e),Hr(a,sa(Er(e)%12,g));case "H":return Ir(e),Hr(a,sa(Er(e),g));case "c":a:switch(c=d.getDay(),g){case 5:g=a.fa.Xd[c];break a;case 4:g=a.fa.$d[c];break a;case 3:g=a.fa.Zd[c];
break a;default:g=Hr(a,sa(c,1))}return g;case "L":a:switch(c=d.getMonth(),g){case 5:g=a.fa.Wd[c];break a;case 4:g=a.fa.Vd[c];break a;case 3:g=a.fa.Yd[c];break a;default:g=Hr(a,sa(c+1,g))}return g;case "Q":return c=Math.floor(d.getMonth()/3),4>g?a.fa.Td[c]:a.fa.Rd[c];case "d":return Hr(a,sa(d.getDate(),g));case "m":return Ir(e),Hr(a,sa(e.getMinutes?e.getMinutes():0,g));case "s":return Ir(e),Hr(a,sa(e.getSeconds(),g));case "v":return g=f||wr(c.getTimezoneOffset()),g.ed;case "V":return a=f||wr(c.getTimezoneOffset()),
2>=g?a.ed:0<yr(a,c)?void 0!==a.Fb.Md?a.Fb.Md:a.Fb.DST_GENERIC_LOCATION:void 0!==a.Fb.md?a.Fb.md:a.Fb.STD_GENERIC_LOCATION;case "w":return c=ur(e.getFullYear(),e.getMonth(),e.getDate(),a.fa.ld,a.fa.kd),Hr(a,sa(Math.floor(Math.round((c-(new Date((new Date(c)).getFullYear(),0,1)).valueOf())/864E5)/7)+1,g));case "z":return a=f||wr(c.getTimezoneOffset()),4>g?a.fd[0<yr(a,c)?2:0]:a.fd[0<yr(a,c)?3:1];case "Z":return b=f||wr(c.getTimezoneOffset()),4>g?(g=-zr(b,c),a=[0>g?"-":"+"],g=Math.abs(g),a.push(sa(Math.floor(g/
60)%100,2),sa(g%60,2)),g=a.join("")):g=Hr(a,xr(zr(b,c))),g;default:return""}};(function(a){var b=U(Gq,0,null),c=U(Gq,1,null),d=U(Gq,2,null),e=Dd(a)?a:fm.j(Oq(a));a=U(e,0,null);var f=U(e,1,null);e=U(e,2,null);e=ff.m(function(g){return w(g)?g:0},new X(null,3,5,Z,[a,f,e],null));a=U(e,0,null);f=U(e,1,null);e=U(e,2,null);if(b>a||O.m(b,a)&&(c>f||O.m(c,f)&&d>=e))return null;throw Zi("Insufficient `com.taoensso/encore` version, you may have a dependency conflict: see `https://www.taoensso.com/dependency-conflicts` for solutions.",new v(null,2,[Cn,fp(new X(null,3,5,Z,[a,f,e],null)),
ol,fp(new X(null,3,5,Z,[b,c,d],null))],null));})(new X(null,3,5,Z,[3,85,0],null));function js(a){switch(a instanceof G?a.pa:null){case "trace":return 0;case "debug":return 1;case "info":return 2;case "warn":return 3;case "error":return 4;case "fatal":return 5;case "report":return 6;default:return null}}function Lr(a){if(w(js(a)))return a;throw Zi("Invalid Timbre logging level: should be e/o #{:trace :debug :info :warn :error :fatal :report}",new v(null,2,[mk,a,Co,Ha(a)],null));}
function Mr(a){var b=js(a);if(w(b))return b;throw Zi("Invalid Timbre logging level: should be e/o #{:trace :debug :info :warn :error :fatal :report}",new v(null,2,[mk,a,Co,Ha(a)],null));}function Nr(a,b){return(Mr.j?Mr.j(a):Mr.call(null,a))>=(Mr.j?Mr.j(b):Mr.call(null,b))}var ks=Ei(function(a){return lr(a)}),ls=Ei(function(a,b){a=ks(a);return a.j?a.j(b):a.call(null,b)});function Qr(a,b){a=w(rd.j?rd.j(a):rd.call(null,a))?a.j?a.j(b):a.call(null,b):ls(a,b);return w(a)?!0:!1}
var Rr=Ei(function(a,b){return Mq(function(c){var d=U(c,0,null);c=U(c,1,null);return w(ls(d,b))?Lr(c):null},a)});function Sr(a,b,c){b=Dd(b)?Rr(b,c):b;a=w(b)?b:a;return Lr.j?Lr.j(a):Lr.call(null,a)}function ps(a){if(w(a)){var b=Ih([ld,Hh]);b=b.j?b.j(a):b.call(null,a);a=w(b)?null:a}else a=null;return a}function Ur(a,b){a=ps(a);b=ps(b);return w(w(a)?a:b)?new v(null,2,[on,a,Jm,b],null):null}
function Vr(a,b,c){var d=w(c)?c:Wr;c=function(){var e=F(d,Xj);e=w(e)?e:F(d,Im);return Sr.o?Sr.o(ok,e,b):Sr.call(null,ok,e,b)}();return w(Nr.m?Nr.m(a,c):Nr.call(null,a,c))?(a=function(){var e=F(d,Mm);if(w(e))return e;e=F(d,ln);var f=F(d,bk);return Ur.m?Ur.m(e,f):Ur.call(null,e,f)}(),w(a)?w(Qr.m?Qr.m(a,b):Qr.call(null,a,b))?!0:!1:!0):!1}var Xr=Ei(function(a,b){a=ar(b);U(a,0,null);return U(a,1,null)});
function Yr(a){var b=ke(dn,dn),c=ke(Pm,Ym),d=U(a,0,null);if(b&&d instanceof Error){var e=d,f=null,g=Sq(a);a=c?U(g,0,null):null;c=c?Sq(g):g;return new X(null,4,5,Z,[e,f,a,c],null)}f=w(function(){var l=Bd(d);return l?Aa.j(vd(d)):l}())?d:null;e=function(){var l=wj.j(f);return w(l)?l:b?null:dn}();var k=qd.m(f,wj);g=w(k)?Sq(a):a;a=c?U(g,0,null):null;c=c?Sq(g):g;return new X(null,4,5,Z,[e,k,a,c],null)}
function Zr(a,b){return function(c){try{return b.j?b.j(c):b.call(null,c)}catch(m){var d=m,e=Ne(c),f=F(e,Im),g=F(e,Tj),k=F(e,Xn),l=F(e,pk);F(e,pn);throw new Yi(a,new v(null,4,[fk,b,Im,f,rj,c,zn,new v(null,3,[Tm,g,vm,k,Pe,l],null)],null),d);}}}
function $r(a,b,c,d,e,f,g){var k=Wr;if(Vr(a,b,k)){var l=new Date;f=C(f);var m=Yr(f);f=U(m,0,null);var n=U(m,1,null),p=U(m,2,null);m=U(m,3,null);c=kd.m(w(null)?null:Oe,fh([wn,af,rm,Tl,Xn,ml,Tj,Im,Mk,km,Jk,pk,hj,Fm,pn],[l,null,k,m,c,Kd(new Fh(null,new v(null,2,[Yl,null,Fj,null],null),null),a),b,a,Pm,f,null,d,n,p,e]));var r=Oa.o(function(I,R){I=R.j?R.j(I):R.call(null,I);return null==I?new Pc(null):I},c,F(k,In));if(w(r)){c=Ne(r);var u=F(c,Tl),y=Pq.C(r,Dj,new ui(function(){return Zr("Timbre error when calling (msg-fn \x3cdata\x3e)",
as)(r)}),ed([xj,new ui(function(){return xc(function(){var I=F(n,Dm);if(w(I))return new X(null,3,5,Z,[I,g,a],null);I=F(n,pl);if(w(I))return I;I=F(n,Aj);return w(I)?new X(null,4,5,Z,[I,g,p,a],null):new X(null,4,5,Z,[u,g,p,a],null)}())})])),A=function(){var I=Ei(function(W){return new ui(function(){var Y=F(y,wn),ma=Ne(W);ma=F(ma,$e);return ke(ma,Wl)?(new Date(Y)).toISOString():(new Ar(ma)).format(Y)})}),R=new ui(function(){return kd.m(bs,F(k,kl))});return function(W){return null==W||ke(W,hn)?I(C(R)):
I(kd.m(C(R),W))}}(),D=function(){var I=Ei(Bc(k,fk,cs));return function(R){return Zr("Timbre error when calling (output-fn \x3cdata\x3e)",null==R||ke(R,hn)?I:R)}}(),N=F(k,tl);Sd(function(I,R,W){if(w(function(){var Ta=F(W,zl);return w(Ta)?Vr(a,b,W):Ta}())){var Y=F(W,Sj);if(function(){var Ta=xd(Y);if(Ta)return Ta;Ta=Xr(R,Y);var No=yi(F(y,xj));Ta=Ta.j?Ta.j(No):Ta.call(null,No);return Fa(Ta)}()){var ma=Ne(W);I=F(ma,Ll);F(ma,yd);var Sa=A(F(W,kl)),tb=D(F(W,fk)),Fe=function(){var Ta=F(W,tl);return w(Ta)?
Ta:N}(),Dk=kd.m(y,new v(null,6,[Zj,R,jj,W,tl,Fe,fk,tb,ek,new ui(function(){var Ta=V.C(y,nj,Sa,ed([tl,Fe]));return tb.j?tb.j(Ta):tb.call(null,Ta)}),nj,Sa],null));ma=function(){var Ta=F(W,mn);return w(Ta)?Ta.j?Ta.j(Dk):Ta.call(null,Dk):Dk}();return w(ma)?I.j?I.j(ma):I.call(null,ma):null}}return null},null,F(k,Nk))}}return null}
var cs=function cs(a){switch(arguments.length){case 2:return cs.m(arguments[0],arguments[1]);case 1:return cs.j(arguments[0]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};cs.m=function(a,b){a=xd(a)?b:V.o(b,tl,kd.m(a,F(b,tl)));return cs.j(a)};
cs.j=function(a){var b=Ne(a),c=F(b,Im),d=F(b,km),e=F(b,Tj),f=F(b,Xn);F(b,Qm);var g=F(b,nj),k=F(b,pk),l=F(b,tl);return[function(){var m=yi(g);return w(m)?[B.j(m)," "].join(""):null}(),oe(c).toUpperCase()," [",B.j(w(e)?e:w(f)?f:"?"),":",B.j(w(k)?k:"?"),"] - ",B.j(function(){var m=Bc(l,Bj,as);return w(m)?m.j?m.j(a):m.call(null,a):null}()),B.j(function(){if(w(d)){var m=Bc(l,vl,ds);if(w(m)){if(w(F(l,Kn)))return null;try{return["\n",B.j(m.j?m.j(a):m.call(null,a))].join("")}catch(r){m=B;var n=m.j;try{var p=
mi(ed([d]),xa())}catch(u){p="\x3cpr-str failed\x3e"}return["\n[TIMBRE WARNING]: `error-fn` failed, falling back to `pr-str`:\n",n.call(m,p)].join("")}}else return null}else return null}())].join("")};cs.H=2;function es(a){return null==a?"nil":"string"===typeof a?a:mi(ed([a]),xa())}
function as(a){var b=Ne(a),c=F(b,Mk),d=F(b,Fm);a=F(b,Tl);b=F(b,tl);b=Ne(b);b=Bc(b,Ti,es);if(O.m(null,c))return"";if(O.m(Pm,c))return d=kf.j(b),w(w(" ")?!O.m(" ",""):" ")?(c=sf(),b=Ud(cr,B),a=w(d)?Vd(Ze.m(d,c),b,a):Vd(c,b,a)):a=w(d)?Vd(d,Ud(cr,B),a):B.j(Oa.m(cr,a)),a;if(O.m(Ym,c)){if("string"===typeof d)return null==d?a="":(a=w(dr)?ff.m(dr,a):a,a=Je(Dq,d,a)),a;throw Zi("Timbre format-style logging call without a format pattern string",new v(null,3,[Fm,d,Co,Ha(d),Tl,a],null));}throw Error(["No matching clause: ",
B.j(c)].join(""));}
var ds=function ds(a){var c=Ne(a),d=F(c,km);F(c,tl);return[B.j(d.stack),function(){var e=d instanceof Yi?d.data:null;return w(e)?["\nex-data:\n    ",mi(ed([e]),xa())].join(""):null}(),function(){var e=d instanceof Yi?d.cause:null;if(w(e)){var f=B;var g=f.j;e=V.o(c,km,e);e=ds.j?ds.j(e):ds.call(null,e);f=["\n\nCaused by:\n",g.call(f,e)].join("")}else f=null;return f}()].join("")},bs=new v(null,1,[$e,Wl],null),Wr=new v(null,6,[Xj,Cm,Mm,new Fh(null,new v(null,1,["*",null],null),null),In,ld,kl,bs,fk,cs,
Nk,"undefined"!==typeof window?new v(null,1,[sk,qr.j?qr.j(Oe):qr.call(null,Oe)],null):new v(null,1,[Gj,or.j?or.j(Oe):or.call(null,Oe)],null)],null);var Ds=new qq.RGBELoader,Es=new pq.GLTFLoader;
function su(a,b){function c(g){return $r(Yl,"pragma64.assets","file:/Users/alexander/workspace/pragma64/src/pragma64/assets.cljs",18,39,new ui(function(){return new X(null,4,5,Z,["error loading asset",d,":",g],null)}),3)}var d=U(a,0,null);a=U(a,1,null);a=Ne(a);var e=F(a,Vm),f=F(a,Ln);$r(Cm,"pragma64.assets","file:/Users/alexander/workspace/pragma64/src/pragma64/assets.cljs",20,5,new ui(function(){return new X(null,4,5,Z,["loading asset",d,"from",f],null)}),4);a=e instanceof G?e.pa:null;switch(a){case "rgbe":Ds.load(f,
function(g){return b.m?b.m(d,g):b.call(null,d,g)},null,c);break;case "gltf":Es.load(f,function(g){return b.m?b.m(d,g):b.call(null,d,g)},null,c);break;default:throw Error(["No matching clause: ",B.j(a)].join(""));}}var Ks=new jf(Oe);
function tu(){return new Promise(function(a){function b(m,n){Ks.sc(null,V.o(Ks.ya(null),m,n));return w(O.m(Q(C(Ks)),Q(kq)))?c():null}function c(){$r(nm,"pragma64.assets","file:/Users/alexander/workspace/pragma64/src/pragma64/assets.cljs",51,17,new ui(function(){return new X(null,2,5,Z,[Q(C(Ks)),"assets ready"],null)}),6);return a.F?a.F():a.call(null)}if(w(O.m(Q(C(Ks)),Q(kq))))return c();for(var d=H(kq),e=null,f=0,g=0;;)if(g<f){var k=e.V(null,g),l=U(k,0,null);k=U(k,1,null);Kd(C(Ks),l)||su(new X(null,
2,5,Z,[l,k],null),b);g+=1}else if(d=H(d))Ed(d)?(e=cc(d),d=dc(d),l=e,f=Q(e),e=l):(e=K(d),l=U(e,0,null),k=U(e,1,null),Kd(C(Ks),l)||su(new X(null,2,5,Z,[l,k],null),b),d=M(d),e=null,f=0),g=0;else return null})}function qu(a){return F(C(Ks),a)};var hv=vf.m(fh("ArrowUp;ArrowDown;Tab;Control;ArrowRight;ArrowLeft;Meta; ;Shift;Enter".split(";"),[Wm,om,tk,Bk,si,Ub,Aa,Nj,yn,kk]),function Wu(a){return new pe(null,function(){for(;;){var c=H(a);if(c){if(Ed(c)){var d=cc(c),e=Q(d),f=te(e);a:for(var g=0;;)if(g<e){var k=$a(d,g),l=f;k=new X(null,2,5,Z,[B.j(k),ne.j(k)],null);l.add(k);g+=1}else{d=!0;break a}return d?ve(f.na(),Wu(dc(c))):ve(f.na(),null)}f=K(c);return T(new X(null,2,5,Z,[B.j(f),ne.j(f)],null),Wu(Fc(c)))}return null}},null,null)}("abcdefghijklmnopqrstuvwxyz0123456789")),
iv=new v(null,5,["keydown",function(a){a=F(hv,a.key);return w(a)?new v(null,2,[nl,a,Vm,Gn],null):null},"keyup",function(a){a=F(hv,a.key);return w(a)?new v(null,2,[nl,a,Vm,ti],null):null},"mousedown",function(a){document.body.requestPointerLock();return new v(null,3,[Vm,tn,Wn,function(){switch(a.buttons){case 1:return Ub;case 2:return si;default:return null}}(),Tn,new X(null,2,5,Z,[a.clientX,a.clientY],null)],null)},"mousemove",function(a){return w(document.pointerLockElement)?new v(null,2,[Vm,Id,
pj,new X(null,2,5,Z,[a.movementX,a.movementY],null)],null):null},"contextmenu",Ye()],null);
function jv(a){var b=window,c=ed([Bm]),d=U(c,0,null),e=O.m(d,Bm),f=ij(function(){return function l(k){return new pe(null,function(){for(;;){var m=H(k);if(m){var n=m;if(Ed(n)){var p=cc(n),r=Q(p),u=te(r);return function(){for(var N=0;;)if(N<r){var I=$a(p,N),R=U(I,0,null),W=U(I,1,null);we(u,function(){var Y=function(ma,Sa,tb,Fe,Dk,Ta,No,ak,zj,jl){return function(Yj){jl&&Yj.preventDefault();Yj=Fe.j?Fe.j(Yj):Fe.call(null,Yj);w(Yj)&&(a.j?a.j(Yj):a.call(null,Yj));return null}}(N,I,R,W,p,r,u,n,m,e,c,d);b.addEventListener(R,
Y);return new X(null,2,5,Z,[R,Y],null)}());N+=1}else return!0}()?ve(u.na(),l(dc(n))):ve(u.na(),null)}var y=K(n),A=U(y,0,null),D=U(y,1,null);return T(function(){var N=function(I,R,W,Y,ma,Sa){return function(tb){Sa&&tb.preventDefault();tb=W.j?W.j(tb):W.call(null,tb);w(tb)&&(a.j?a.j(tb):a.call(null,tb));return null}}(y,A,D,n,m,e,c,d);b.addEventListener(A,N);return new X(null,2,5,Z,[A,N],null)}(),l(Fc(n)))}return null}},null,null)}(iv)}());return function(){for(var g=H(f),k=null,l=0,m=0;;)if(m<l){var n=
k.V(null,m),p=U(n,0,null);n=U(n,1,null);b.removeEventListener(p,n);m+=1}else if(g=H(g))Ed(g)?(k=cc(g),g=dc(g),p=k,l=Q(k),k=p):(k=K(g),p=U(k,0,null),n=U(k,1,null),b.removeEventListener(p,n),g=M(g),k=null,l=0),m=0;else return null}};function rs(a){a.castShadow=!0;return a}function Xu(a){a.receiveShadow=!0}function ss(a,b){var c=U(b,0,null),d=U(b,1,null);b=U(b,2,null);a.position.set(c,d,b);return a}function ts(a,b){var c=U(b,0,null),d=U(b,1,null);b=U(b,2,null);a.rotation.set(c,d,b);return a}var us=function us(a){var c=kd.m;var d=Ie(ze,Je(kf,us,ed([a.children])));return c.call(kd,d,a)},vs=ff.m(function(a){return new Qo.Color(a)},Ko),ws=ff.m(function(a){return new Qo.MeshStandardMaterial({color:a})},vs);
function uu(a,b){b.mapping=Qo.EquirectangularReflectionMapping;a.background=b};var dq,no=new ArrayBuffer(4),oo=new Uint32Array(no),po=new Uint8Array(no);oo[0]=857870592;var hq=(dq=0===po[0])?1:0,iq=1-hq,qo=new ArrayBuffer(16),ro=new Float64Array(qo),so=new Uint8Array(qo);ro[0]=0;ro[1]=0;so[dq?15:8]=-128;function mq(a){a=a+1023<<20&2146435072;var b=new ArrayBuffer(8);new Float64Array(b);b=new Uint32Array(b);b[iq]=0;b[hq]=a}mq(512);mq(-512);function nq(a,b){Xh(kf.m(a,b))};var ms=cf(0);function ns(){return ef.m(ms,Oc)}var os=function(){var a=cf(Oe),b=cf(Oe),c=cf(Oe),d=cf(Oe),e=Bc(Oe,en,Hi.F?Hi.F():Hi.call(null));return new Si(Cc.m("pragma64.webgame.entity","update-state"),function(f,g){return yf(f,new X(null,3,5,Z,[Fk,g,Vm],null))},e,a,b,c,d)}();Vi(os,Sb,function(a){return a});
var vu=function(){var a=cf(Oe),b=cf(Oe),c=cf(Oe),d=cf(Oe),e=Bc(Oe,en,Hi.F?Hi.F():Hi.call(null));return new Si(Cc.m("pragma64.webgame.entity","create-or-update-obj3d!"),function(){function f(l){return F(l,Vm)}function g(l){return F(l,Vm)}var k=null;k=function(l,m){switch(arguments.length){case 1:return g.call(this,l);case 2:return f.call(this,l,m)}throw Error("Invalid arity: "+arguments.length);};k.j=g;k.m=f;return k}(),e,a,b,c,d)}();var ys=Po(4,{});var zs=ys.createNoise2D();ys.createNoise3D();ys.createNoise4D();function As(a){return zs.m?zs.m(a,.5):zs.call(null,a,.5)}function Bs(a,b){return zs.m?zs.m(a,b):zs.call(null,a,b)};Vi(os,Lj,function(a,b){return zf.o(a,new X(null,2,5,Z,[Fk,b],null),function(c){var d=Cl.j(c),e=(w(d.j?d.j($m):d.call(null,$m))?1:0)+(w(d.j?d.j(cn):d.call(null,cn))?-1:0);d=(w(d.j?d.j(Nm):d.call(null,Nm))?-1:0)+(w(d.j?d.j(Om):d.call(null,Om))?1:0);0!==d||0!==e?(e=Math.atan2(d,e),d=-id(c.j?c.j(bj):c.call(null,bj)),e+=d,e=ff.m(ka(Yd,8,a.j?a.j(Sl):a.call(null,Sl)),new X(null,3,5,Z,[Math.cos(e),0,Math.sin(e)],null))):e=null;d=e;e=V.C;d=w(d)?ff.o(Xd,c.j?c.j(Tn):c.call(null,Tn),d):c.j?c.j(Tn):c.call(null,
Tn);var f=ff.m,g=ja(Yd,.2);var k=F(a,Zk);k=new X(null,3,5,Z,[As(.172*k),As(.191*k),As(.134*k)],null);f=f.call(ff,g,k);k=F(a,Hn);g=U(k,0,null);k=U(k,1,null);return e.call(V,c,Tn,d,ed([im,f,lk,g/k]))})});function Yu(a,b){var c=ff.m(ja(Yd,.002),b);b=U(c,0,null);c=U(c,1,null);c=ka(ff,Xd,new X(null,3,5,Z,[-c,-b,0],null));b=V.o;var d=F(a,bj);c=c.j?c.j(d):c.call(null,d);return b.call(V,a,bj,c)}
Vi(vu,Lj,function(){function a(d,e){var f=Ne(d);d=F(f,Tn);var g=F(f,bj),k=F(f,im);f=F(f,lk);ts(e,g);ss(e,ff.o(Xd,d,k));return O.m(e.aspect,f)?null:(e.aspect=f,e.updateProjectionMatrix())}function b(d){d=new Qo.PerspectiveCamera(90,F(d,lk));d.rotation.order="YXZ";return d}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.j=b;c.m=a;return c}());function kv(a,b){var c=V.o,d=F(a,eo);b=kd.m?kd.m(d,b):kd.call(null,d,b);return c.call(V,a,eo,b)}
function lv(a,b){var c=b.j?b.j(Vm):b.call(null,Vm);switch(c instanceof G?c.pa:null){case "keydown":switch(b=b.j?b.j(nl):b.call(null,nl),b instanceof G?b.pa:null){case "up":return zf.o(a,new X(null,3,5,Z,[Fk,a.j?a.j(co):a.call(null,co),Tn],null),ka(ff,Xd,new X(null,3,5,Z,[0,.1,0],null)));case "down":return zf.o(a,new X(null,3,5,Z,[Fk,a.j?a.j(co):a.call(null,co),Tn],null),ka(ff,Xd,new X(null,3,5,Z,[0,-.1,0],null)));case "w":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,Nm],null),!0);
case "a":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,cn],null),!0);case "s":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,Om],null),!0);case "d":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,$m],null),!0);default:return a}case "keyup":switch(b=b.j?b.j(nl):b.call(null,nl),b instanceof G?b.pa:null){case "w":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,Nm],null),!1);case "a":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,
Pn),Cl,cn],null),!1);case "s":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,Om],null),!1);case "d":return wf(a,new X(null,4,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn),Cl,$m],null),!1);default:return a}case "mousemotion":return zf.K(a,new X(null,2,5,Z,[Fk,a.j?a.j(Pn):a.call(null,Pn)],null),Yu,b.j?b.j(pj):b.call(null,pj));default:return a}};var to=jq.j?jq.j(40):jq.call(null,40),uo=U(to,0,null),vo=U(to,1,null),wo=U(to,2,null),xo=function(a,b,c){return function(){function d(m,n,p){return gq.va?gq.va(a,b,c,m,n,p):gq.call(null,a,b,c,m,n,p)}function e(m,n){return gq.O?gq.O(a,b,c,m,n):gq.call(null,a,b,c,m,n)}function f(m){return gq.K?gq.K(a,b,c,m):gq.call(null,a,b,c,m)}function g(){return gq.o?gq.o(a,b,c):gq.call(null,a,b,c)}var k=null,l=function(){function m(p,r,u,y){var A=null;if(3<arguments.length){A=0;for(var D=Array(arguments.length-
3);A<D.length;)D[A]=arguments[A+3],++A;A=new J(D,0,null)}return n.call(this,p,r,u,A)}function n(p,r,u,y){return Me(gq,a,b,c,p,ed([r,u,y]))}m.H=3;m.J=function(p){var r=K(p);p=M(p);var u=K(p);p=M(p);var y=K(p);p=Fc(p);return n(r,u,y,p)};m.C=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return g.call(this);case 1:return f.call(this,m);case 2:return e.call(this,m,n);case 3:return d.call(this,m,n,p);default:var u=null;if(3<arguments.length){u=0;for(var y=Array(arguments.length-3);u<
y.length;)y[u]=arguments[u+3],++u;u=new J(y,0,null)}return l.C(m,n,p,u)}throw Error("Invalid arity: "+arguments.length);};k.H=3;k.J=l.J;k.F=g;k.j=f;k.m=e;k.o=d;k.C=l.C;return k}()}(uo,vo,wo);B.j(xo(1));B.j(xo(.6));function qs(){return $r(nm,"pragma64.webgame.loading-screen","file:/Users/alexander/workspace/pragma64/src/pragma64/webgame/loading_screen.cljs",46,3,new ui(function(){return new X(null,2,5,Z,["loading screen with percent",Q(C(Ks))/Q(kq)],null)}),7)};function xs(a,b){return ff.o(Xd,new X(null,3,5,Z,[0,4,0],null),kf.m(function(c){return Math.sin(3*c*b+a)},new X(null,3,5,Z,[.2,.1,.15],null)))}Vi(os,em,function(a,b){var c=yf(a,new X(null,3,5,Z,[Fk,b,lj],null)),d=zf.C;b=new X(null,2,5,Z,[Fk,b],null);var e=Zk.j(a);return d.call(zf,a,b,V,bj,new X(null,3,5,Z,[e+.3*c,e+.4*c,0],null),Tn,ed([xs(Zk.j(a),c)]))});
Vi(vu,em,function(){function a(d,e){var f=Ne(d);d=F(f,Tn);f=F(f,bj);ss(e,d);return ts(e,f)}function b(){var d=new Qo.BoxGeometry(.3,.3,.3),e=Qo.Mesh;var f=$c(ws,Fi(Q(ws)));d=new e(d,f);rs(d);return d}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.j=b;c.m=a;return c}());Vi(os,fl,function(a,b){return zf.O(a,new X(null,2,5,Z,[Fk,b],null),V,bj,new X(null,3,5,Z,[0,.3*(a.j?a.j(Zk):a.call(null,Zk)),0],null))});
Vi(vu,fl,function(){function a(d,e){var f=Ne(d);d=F(f,Tn);f=F(f,bj);ts(e,f);return ss(e,d)}function b(){var d=qu(fl).scene,e=new X(null,3,5,Z,[5,5,5],null),f=U(e,0,null),g=U(e,1,null);e=U(e,2,null);d.scale.set(f,g,e);nq(rs,us(d));return d}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.j=b;c.m=a;return c}());Vi(vu,ul,function(){function a(){var c=new Qo.PointLight(vs.j?vs.j(45):vs.call(null,45),1200,256);ss(c,new X(null,3,5,Z,[12,14,6],null));c.castShadow=!0;return c}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return null}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(){return null};return b}());function Gu(a){a*=3;if(null!=a)a=Math.floor(a);else throw Zi("Unexpected Null passed to floor",new v(null,1,[Ll,"floor"],null));a+=10;return ws.j?ws.j(a):ws.call(null,a)}var Hu=new X(null,4,5,Z,[new X(null,2,5,Z,[0,0],null),new X(null,2,5,Z,[0,1],null),new X(null,2,5,Z,[1,1],null),new X(null,2,5,Z,[1,0],null)],null);
function Iu(a,b,c,d){a=new Float32Array(Ci(Ie(ze,new X(null,6,5,Z,[c,d,a,a,b,c],null))));a=new Qo.BufferAttribute(a,3);b=new Qo.BufferGeometry;b.setAttribute("position",a);b.computeVertexNormals();return b}
function Ju(){return vf.m(Oe,function(){return function c(b){return new pe(null,function(){for(var d=b;;){var e=H(d);if(e){var f=e,g=K(f);if(e=H(function(k,l,m,n){return function u(r){return new pe(null,function(y,A){return function(){for(;;){var D=H(r);if(D){if(Ed(D)){var N=cc(D),I=Q(N),R=te(I);a:for(var W=0;;)if(W<I){var Y=$a(N,W),ma=R;Y=pd([new X(null,2,5,Z,[A,Y],null),3.2*Bs(.03*A,.03*Y)]);ma.add(Y);W+=1}else{N=!0;break a}return N?ve(R.na(),u(dc(D))):ve(R.na(),null)}R=K(D);return T(pd([new X(null,
2,5,Z,[A,R],null),3.2*Bs(.03*A,.03*R)]),u(Fc(D)))}return null}}}(k,l,m,n),null,null)}}(d,g,f,e)(Vh(-32,33))))return ze.m(e,c(Fc(d)));d=Fc(d)}else return null}},null,null)}(Vh(-32,33))}())}
function Fs(){for(var a=new Qo.Group,b=Ju(),c=H(Vh(-32,32)),d=null,e=0,f=0;;)if(f<e){for(var g=d.V(null,f),k=H(Vh(-32,32)),l=null,m=0,n=0;;)if(n<m){var p=l.V(null,n),r=F(b,new X(null,2,5,Z,[g,p],null)),u=ff.m(function(N,I,R,W,Y,ma,Sa,tb,Fe,Dk,Ta,No,ak){return function(zj){var jl=U(zj,0,null);zj=U(zj,1,null);return new X(null,3,5,Z,[.7*jl,F(ak,new X(null,2,5,Z,[Ta+jl,Dk+zj],null)),.7*zj],null)}}(k,l,m,n,c,d,e,f,r,p,g,a,b),Hu);u=Ie(Iu,u);r=Gu(r);r=new Qo.Mesh(u,r);Xu(r);ss(r,new X(null,3,5,Z,[.7*g,
0,.7*p],null));a.add(r);n+=1}else{var y=H(k);if(y)p=y,Ed(p)?(k=cc(p),n=dc(p),l=k,m=Q(k),k=n):(r=K(p),u=F(b,new X(null,2,5,Z,[g,r],null)),k=ff.m(function(N,I,R,W,Y,ma,Sa,tb,Fe,Dk,Ta,No,ak,zj,jl){return function(Yj){var Oj=U(Yj,0,null);Yj=U(Yj,1,null);return new X(null,3,5,Z,[.7*Oj,F(jl,new X(null,2,5,Z,[ak+Oj,Dk+Yj],null)),.7*Yj],null)}}(k,l,m,n,c,d,e,f,u,r,p,y,g,a,b),Hu),k=Ie(Iu,k),l=Gu(u),k=new Qo.Mesh(k,l),Xu(k),ss(k,new X(null,3,5,Z,[.7*g,0,.7*r],null)),a.add(k),k=M(p),l=null,m=0),n=0;else break}f+=
1}else if(k=H(c)){g=k;if(Ed(g))c=cc(g),f=dc(g),d=c,e=Q(c),c=f;else{l=K(g);m=H(Vh(-32,32));n=null;for(r=p=0;;)if(r<p){u=n.V(null,r);y=F(b,new X(null,2,5,Z,[l,u],null));var A=ff.m(function(N,I,R,W,Y,ma,Sa,tb,Fe,Dk,Ta,No,ak,zj,jl){return function(Yj){var Oj=U(Yj,0,null);Yj=U(Yj,1,null);return new X(null,3,5,Z,[.7*Oj,F(jl,new X(null,2,5,Z,[Ta+Oj,Dk+Yj],null)),.7*Yj],null)}}(m,n,p,r,c,d,e,f,y,u,l,g,k,a,b),Hu);A=Ie(Iu,A);y=Gu(y);y=new Qo.Mesh(A,y);Xu(y);ss(y,new X(null,3,5,Z,[.7*l,0,.7*u],null));a.add(y);
r+=1}else{var D=H(m);if(D)u=D,Ed(u)?(m=cc(u),r=dc(u),n=m,p=Q(m),m=r):(y=K(u),A=F(b,new X(null,2,5,Z,[l,y],null)),m=ff.m(function(N,I,R,W,Y,ma,Sa,tb,Fe,Dk,Ta,No,ak,zj,jl,Yj,Oj){return function(tj){var yj=U(tj,0,null);tj=U(tj,1,null);return new X(null,3,5,Z,[.7*yj,F(Oj,new X(null,2,5,Z,[ak+yj,Dk+tj],null)),.7*tj],null)}}(m,n,p,r,c,d,e,f,A,y,u,D,l,g,k,a,b),Hu),m=Ie(Iu,m),n=Gu(A),m=new Qo.Mesh(m,n),Xu(m),ss(m,new X(null,3,5,Z,[.7*l,0,.7*y],null)),a.add(m),m=M(u),n=null,p=0),r=0;else break}c=M(g);d=null;
e=0}f=0}else break;return a}Vi(vu,Hk,function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Fs();case 2:return null}throw Error("Invalid arity: "+arguments.length);};a.j=function(){return Fs()};a.m=function(){return null};return a}());function Gs(a,b){var c=F(a,Zk),d=F(a,eo),e=F(a,kn);w(e)?(b-=F(a,kn),a=V.C(a,Zk,b,ed([Sl,b-c]))):a=V.C(a,kn,b,ed([Sl,1E-4,Zk,0]));a=V.o(a,eo,ld);d=Oa.o(lv,a,d);return Oa.o(os,d,Od(Ld,ug(F(d,Fk))))};var Hs=cf(function(){var a=ns(),b=ns(),c=function(){return function g(f){return new pe(null,function(){for(;;){var k=H(f);if(k){if(Ed(k)){var l=cc(k),m=Q(l),n=te(m);a:for(var p=0;;)if(p<m){var r=$a(l,p),u=n;r=new X(null,2,5,Z,[ns(),new v(null,2,[Vm,em,lj,r],null)],null);u.add(r);p+=1}else{l=!0;break a}return l?ve(n.na(),g(dc(k))):ve(n.na(),null)}n=K(k);return T(new X(null,2,5,Z,[ns(),new v(null,2,[Vm,em,lj,n],null)],null),g(Fc(k)))}return null}},null,null)}(Vh(0,14))}(),d=V.o(V.o(V.o(V.o(Bh.C(ed([yh(),
c])),a,new v(null,5,[Vm,Lj,Tn,new X(null,3,5,Z,[2,4,7],null),vk,new X(null,3,5,Z,[0,0,0],null),bj,new X(null,3,5,Z,[0,0,0],null),Cl,new v(null,4,[Nm,!1,cn,!1,Om,!1,$m,!1],null)],null)),ns(),new v(null,1,[Vm,Hk],null)),ns(),new v(null,1,[Vm,ul],null)),b,new v(null,2,[Vm,fl,Tn,new X(null,3,5,Z,[2.5,2,1.5],null)],null));$r(Cm,"pragma64.webgame.state","file:/Users/alexander/workspace/pragma64/src/pragma64/webgame/state.cljs",28,5,new ui(function(){return new X(null,2,5,Z,[Q(d),"entities spawned"],null)}),
8);return new v(null,8,[Pn,a,co,b,Fk,d,kn,null,Zk,0,Sl,0,Hn,new X(null,2,5,Z,[640,480],null),eo,ld],null)}());
function Is(a,b,c){function d(k){var l=U(k,0,null);k=U(k,1,null);return vu.m(k,F(C(b),l))}var e=Xo(Jh(ug(c)),Jh(ug(C(b)))),f=U(e,0,null),g=U(e,1,null);e=U(e,2,null);f=Ch(c,f);nq(function(k){var l=U(k,0,null);k=U(k,1,null);k=vu.j(k);jc(b,V.o(C(b),l,k));return a.add(k)},f);nq(d,f);nq(d,Ch(c,e));nq(function(k){var l=U(k,0,null);k=U(k,1,null);a.remove(k);return jc(b,qd.m(C(b),l))},Ch(C(b),g))}
function Js(a){var b=window.innerWidth,c=1*window.innerHeight,d=function(){var e=240/c;return 1<e?1:e}();$r(Cm,"pragma64.webgame.web-render","file:/Users/alexander/workspace/pragma64/src/pragma64/webgame/web_render.cljs",66,5,new ui(function(){return new X(null,2,5,Z,["resizing renderer",new v(null,3,[Nm,b,Zm,c,fn,d],null)],null)}),9);ef.K(Hs,V,Hn,new X(null,2,5,Z,[b,c],null));a.setPixelRatio(d);a.setSize(b,c);return a}var gf=cf(Gc);
function Lu(a){function b(){return Js(a)}ef.o(gf,kd,function(){a.setAnimationLoop(null);a.dispose();return a});window.addEventListener("resize",b);ef.o(gf,kd,function(){return window.removeEventListener("resize",b)});ef.o(gf,kd,jv(function(c){return ef.o(Hs,kv,c)}));a.shadowMap.enabled=!0;a.domElement.style.imageRendering="pixelated";Js(a)}
function Ru(a){var b=qu(gr),c=new Qo.Scene,d=new jf(yh());uu(c,b);return a.setAnimationLoop(function(e){var f=ef.o(Hs,Gs,e/1E3);e=F(f,Fk);f=F(f,Pn);Is(c,d,e);e=F(C(d),f);return w(e)?a.render(c,e):null})}function Ls(){var a=new Qo.WebGLRenderer;Lu(a);a.setAnimationLoop(function(){return qs()});tu().then(function(){return Ru(a)});return a};var Au=document.getElementById("three-root");function yo(){var a=Ls();return Au.appendChild(a.domElement)}ba("pragma64.webgame.web_attach.start",function(){return yo()});
ba("pragma64.webgame.web_attach.stop",function(){a:{if(gf instanceof bf){var a=gf.state;a=nd.j?nd.j(a):nd.call(null,a);if(gf instanceof bf){var b=gf.Hc;if(null!=b&&!w(b.j?b.j(a):b.call(null,a)))throw Error("Validator rejected reference state");b=gf.state;gf.state=a;null!=gf.ta&&bb(gf,b,a);a=new X(null,2,5,Z,[b,a],null)}else a=new X(null,2,5,Z,[C(gf),gc(gf,a)],null)}else a=new X(null,2,5,Z,[C(gf),hc(gf,nd)],null);b=U(a,0,null);U(a,1,null);a=H(b);b=null;for(var c=0,d=0;;)if(d<c){var e=b.V(null,d);e.F?
e.F():e.call(null);d+=1}else if(a=H(a))b=a,Ed(b)?(a=cc(b),c=dc(b),b=a,e=Q(a),a=c,c=e):(e=K(b),e.F?e.F():e.call(null),a=M(b),b=null,c=0),d=0;else break a}a:for(;;)if(w(Au.firstChild))Au.removeChild(Au.firstChild);else break a;return null});ba("pragma64.webgame.web_attach.init",function(){return yo()});yo();
}).call(this);